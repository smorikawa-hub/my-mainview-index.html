(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function aw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Y_={exports:{}},Ad={},q_={exports:{}},rn={};/**
 * @license リアクト
 * react.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var AS;function $A(){if(AS)return rn;AS=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function _(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,T={};function E(W,te,Pe){this.props=W,this.context=te,this.refs=T,this.updater=Pe||x}E.prototype.isReactComponent={},E.prototype.setState=function(W,te){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): 更新する状態変数のオブジェクト、または状態オブジェクトを返す関数を受け取ります変数。");this.updater.enqueueSetState(this,W,te,"setState")},E.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function S(){}S.prototype=E.prototype;function R(W,te,Pe){this.props=W,this.context=te,this.refs=T,this.updater=Pe||x}var P=R.prototype=new S;P.constructor=R,M(P,E.prototype),P.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,U={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function z(​​W,te,Pe){var se,xe={},be=null,Te=null;if(te!=null)for(se in te.ref!==void 0&&(Te=te.ref),te.key!==void 0&&(be=""+te.key),te)O.call(te,se)&&!F.hasOwnProperty(se)&&(xe[se]=te[se]);var Xe=arguments.length-2;if(Xe===1)xe.children=Pe;else if(1<Xe){for(var gt=Array(Xe),et=0;et<Xe;et++)gt[et]=arguments[et+2];xe.children=gt}if(W&&W.defaultProps)for(se in Xe=W.defaultProps,Xe)xe[se]===void 0&&(xe[se]=Xe[se]);return{$$typeof:s,type:W,key:be,ref:Te,props:xe,_owner:U.current}}function D(W,te){return{$$typeof:s,type:W.type,key:te,ref:W.ref,props:W.props,_owner:W._owner}}function N(W){return typeof W=="object"&&W!==null&&W.$$typeof===s}function G(W){var te={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Pe){return te[Pe]})}var $=/\/+/g;function Q(W,te){return typeof W=="object"&&W!==null&&W.key!=null?G(""+W.key):te.toString(36)}function ce(W,te,Pe,se,xe){var be=typeof W;(be==="undefined"||be==="boolean")&&(W=null);var Te=!1;if(W===null)Te=!0;else switch(be){case"string":case"number":Te=!0;break;case"object":switch(W.$$typeof){case s:case e:Te=!0}}if(Te)return Te=W,xe=xe(Te),W=se===""?"."+Q(Te,0):se,I(xe)?(Pe="",W!=null&&(Pe=W.replace($,"$&/")+"/"),ce(xe,te,Pe,"",function(et){return et})):xe!=null&&(N(xe)&&(xe=D(xe,Pe+(!xe.key||Te&&Te.key===xe.key?"":(""+xe.key).r eplace($,"$&/")+"/")+W)),te.push(xe)),1;if(Te=0,se=se===""?".":se+":",I(W))for(var Xe=0;Xe<W.length;Xe++){be=W[Xe];var gt=se+Q(be,Xe);Te+=ce(be,te,Pe,gt,xe)}else if(gt=_(W),typeof gt=="function")for(W=gt.call(W),Xe=0;!(be=W.next()).done;)be=be.value,gt=se+Q(be,Xe++),Te+=ce(be,te,Pe,gt,xe);else if(be==="object")throw te=String(W),Error("オブジェクトはReactの子として有効ではありません(見つかったオブジェクト: "+(te==="[object Object]"?"キー{"+Object.keys(W).join(", ")+"}":te)+")。子のコレクションをレンダリングする場合は、代わりに配列を使用してください。");return Te}function me(W,te,Pe){if(W==null)return W;var se=[],xe=0;return ce(W,se,"","",function(be){return te.call(Pe,be,xe++)}),se}function ue(W){if(W._status===-1){var te=W._result;te=te(),te.then(function(Pe){(W._status===0||W._status===-1)&&(W._status=1,W._result=Pe)},function(Pe){(W._status===0||W._status===-1)&&(W._status=2,W._result=Pe)}),W._status===-1&&(W._status=0,W._result=te)}if(W._status===1)return W._result.default;throw W._result}var de={current:null},B={transition:null},K={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:B,ReactCurrentOwner:U};function J(){throw Error("act(...)はReactの製品版ビルドではサポートされていません。")}return rn.Children={map:me,forEach:function(W,te,Pe){me(W,function(){te.apply(this,arguments)},Pe)},count:function(W){var te=0;return me(W,function(){te++}),te},toArray:function(W){return me(W,function(te){return te})||[]},only:function(W){if(!N(W))throw Error("React.Children.onlyは単一のReact要素の子を受け取ることが期待されています。");return W}},rn.Component=E,rn.Fragment=t,rn.Profiler=i,rn.PureComponent=R,rn.StrictMode=n,rn.Suspense=h,rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,rn.act=J,rn.cloneElement=function(W,te,Pe){if(W==null)throw Error("React.cloneElement(...): 引数はReact要素でなければなりませんが、"+W+"が渡されました。");var se=M({},W.props),xe=W.key,be=W.ref,Te=W._owner;if(te!=null){if(te.ref!==void 0&&(be=te.ref,Te=U.current),te.key!==void 0&&(xe=""+te.key),W.type&&W.type.defaultProps)var Xe=W.type.defaultProps;for(gt in te)O.call(te,gt)&&!F.hasOwnProperty(gt)&&(se[gt]=te[gt]===void 0&&Xe!==void 0?Xe[gt]:te[gt])}var gt=arguments.length-2;if(gt===1)se.children=Pe;else if(1<gt){Xe=Array(gt);for(var et=0;et<gt;et++)Xe[et]=arguments[et+2];se.children=Xe}return{$$typeof:s,type:W.type,key:xe,ref:be,props:se,_owner:Te}},rn.createContext=function(W){return W={$$typeof:a,_currentValue:W、_currentValue2:W、_threadCount:0、Provider:null、Consumer:null、_defaultValue:null、_globalName:null}、W.Provider={$$typeof:r、_context:W}、W.Consumer=W}、rn.createElement=z、rn.createFactory=function(W){var te=z.bind(null,W);return te.type=W,te},rn.createRef=function(){return{current:null}},rn.forwardRef=function(W){return{$$typeof:u,render:W}},rn.isValidElement=N,rn.lazy=function(W){return{$$typeof:m,_payload:{_status:-1,_result:W},_init:ue}},rn.memo=function(W,te){return{$$typeof:d,type:W,compare:te===void 0?null:te}},rn.startTransition=function(W){var te=B.transition;B.transition={};try{W()}finally{B.transition=te}},rn.unstable_act=J,rn.useCallback=function(W,te){return de.current.useCallback(W,te)},rn.useContext=function(W){return de.current.useContext(W)},rn.useDebugValue=function(){},rn.useDeferredValue=function(W){return de.current.useDeferredValue(W)},rn.useEffect=function(W,te){return de.current.useEffect(W,te)},rn.useId=function(){return de.current.useId()},rn.useImperativeHandle=function(W,te,Pe){return de.current.useImperativeHandle(W,te,Pe)},rn.useInsertionEffect=function(W,te){return de.current.useInsertionEffect(W,te)},rn.useLayoutEffect=function(W,te){return de.current.useLayoutEffect(W,te)},rn.useMemo=function(W,te){return de.current.useMemo(W,te)},rn.useReducer=function(W,te,Pe){return de.current.useReducer(W,te,Pe)},rn.useRef=function(W){return de.current.useRef(W)},rn.useState=function(W){return de.current.useState(W)},rn.useSyncExternalStore=function(W,te,Pe){return de.current.useSyncExternalStore(W,te,Pe)},rn.useTransition=function(){return de.current.useTransition()},rn.version="18.3.1",rn}var CS;function D0(){return CS||(CS=1,q_.exports=$A()),q_.exports}/**current.useMemo(W,te)},rn.useReducer=function(W,te,Pe){return de.current.useReducer(W,te,Pe)},rn.useRef=function(W){return de.current.useRef(W)},rn.useState=function(W){return de.current.useState(W)},rn.useSyncExternalStore=function(W,te,Pe){return de.current.useSyncExternalStore(W,te,Pe)},rn.useTransition=function(){return de.current.useTransition()},rn.version="18.3.1",rn}var CS;function D0(){return CS||(CS=1,q_.exports=$A()),q_.exports}/**current.useMemo(W,te)},rn.useReducer=function(W,te,Pe){return de.current.useReducer(W,te,Pe)},rn.useRef=function(W){return de.current.useRef(W)},rn.useState=function(W){return de.current.useState(W)},rn.useSyncExternalStore=function(W,te,Pe){return de.current.useSyncExternalStore(W,te,Pe)},rn.useTransition=function(){return de.current.useTransition()},rn.version="18.3.1",rn}var CS;function D0(){return CS||(CS=1,q_.exports=$A()),q_.exports}/**
 * @license リアクト
 * react-jsx-runtime.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var RS;function eC(){if(RS)return Ad;RS=1;var s=D0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(u,h,d){var m,g={},_=null,x=null;d!==void 0&&(_=""+d),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)n.call(h,m)&&!r.hasOwnProperty(m)&&(g[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:e,type:u,key:_,ref:x,props:g,_owner:i.current}}return Ad.Fragment=t,Ad.jsx=a,Ad.jsxs=a,Ad}var bS;function tC(){return bS||(bS=1,Y_.exports=eC()),Y_.exports}var zt=tC(),Be=D0(),Fm={},j_={exports:{}},Br={},Z_={exports:{}},J_={};/**
 * @license リアクト
 * スケジューラ.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var PS;function nC(){return PS||(PS=1,function(s){function e(B,K){var J=B.length;B.push(K);e:for(;0<J;){var W=J-1>>>1,te=B[W];if(0<i(te,K))B[W]=K,B[J]=te,J=W;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var K=B[0],J=B.pop();if(J!==K){B[0]=J;e:for(var W=0,te=B.length,Pe=te>>>1;W<Pe;){var se=2*(W+1)-1,xe=B[se],be=se+1,Te=B[be];if(0>i(xe,J))be<te&&0>i(Te,xe)?(B[W]=Te,B[be]=J,W=be):(B[W]=xe,B[se]=J,W=se);else if(be<te&&0>i(Te,J))B[W]=Te,B[be]=J,W=be;else break e}}return K}function i(B,K){var J=B.sortIndex-K.sortIndex;return J!==0?J:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=日付、u=a.now();s.unstable_now=function(){return a.now()-u}}var h=[],d=[],m=1,g=null,_=3,x=!1,M=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(B){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=B)n(d),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(d)}}関数I(B){if(T=!1,P(B),!M)if(t(h)!==null)M=!0,ue(O);else{var K=t(d);K!==null&&de(I,K.startTime-B)}}関数O(B,K){M=!1,T&&(T=!1,S(z),z=-1),x=!0;var J=_;try{for(P(K),g=t(h);g!==null&&(!(g.expirationTime>K)||B&&!G());){var W=g.callback;if(typeof W=="function"){g.callback=null,_=g.priorityLevel;var te=W(g.expirationTime<=K);K=s.unstable_now(),typeof te=="function"?g.callback=te:g===t(h)&&n(h),P(K)}else n(h);g=t(h)}if(g!==null)var Pe=!0;else{var se=t(d);se!==null&&de(I,se.startTime-K),Pe=!1}return Pe}finally{g=null,_=J,x=!1}}var U=!1,F=null,z=-1,D=5,N=-1;function G(){return!(s.unstable_now()-N<D)}function $(){if(F!==null){var B=s.unstable_now();N=B;var K=!0;try{K=F(!0,B)}finally{K?Q():(U=!1,F=null)}}else U=!1}var Q;if(typeof R=="function")Q=function(){R($)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,me=ce.port2;ce.port1.onmessage=$,Q=function(){me.postMessage(null)}}else Q=function(){E($,0)};function ue(B){F=B,U||(U=!0,Q())}function de(B,K){z=E(function(){B(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_continueExecution=function(){M||x||(M=!0,ue(O))},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRateは0から125までの正の整数を取ります。125 fps を超えるフレーム レートの強制はサポートされていません"):D=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(B){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var J=_;_=K;try{return B()}finally{_=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=_;_=B;try{return K()}finally{_=J}},s.unstable_scheduleCallback=function(B,K,J){var W=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=J+te,B={id:m++,callback:K,priorityLevel:B,startTime:J,expirationTime:te,sortIndex:-1},J>W?(B.sortIndex=J,e(d,B),t(h)===null&&B===t(d)&&(T?(S(z),z=-1):T=!0,de(I,JW))):(B.sortIndex=te,e(h,B),M||x||(M=!0,ue(O))),B},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(B){var K=_;return function(){var J=_;_=K;try{return B.apply(this,arguments)}finally{_=J}}}}(J_)),J_}var IS;function iC(){return IS||(IS=1,Z_.エクスポート=nC()),Z_.エクスポート}/**
 * @license リアクト
 * react-dom.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var LS;function rC(){if(LS)return Br;LS=1;var s=D0(),e=iC();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"縮小されたReactエラー#"+o+"。完全なメッセージについては「+l+」にアクセスするか、完全なエラーと追加の役立つ警告については、縮小されていない開発環境を使用してください。"}var n=new Set,i={};function r(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)n.add(l[o])}var u=!(ウィンドウの種類>"u"||window.documentの種類>"u"||window.document.createElementの種類>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0- \uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2 C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};関数_(o){return h.call(g,o)?!0:h.call(m,o)?!1:d.test(o)?g[o]=!0:(m[o]=!0,!1)}function x(o,l,p,y){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function M(o,l,p,y){if(l===null||typeof l>"u"||x(o,l,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function T(o,l,p,y,A,b,k){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=A,this.mustUseProperty=p,this.propertyName=o,this.type=l,this.sanitizeURL=b,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning スタイル".split(" ").forEach(function(o){E[o]=new T(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];E[l]=new T(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new T(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new T(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new T(o,3,!1,o.toLowerCase(),null,!1,!1)}),["チェック済み","複数","ミュート済み","選択済み"].forEach(function(o){E[o]=new T(o,3,!0,o,null,!1,!1)}),["キャプチャ","ダウンロード"].forEach(function(o){E[o]=new T(o,4,!1,o,null,!1,!1)}),["列","行","サイズ","範囲"].forEach(function(o){E[o]=new T(o,6,!1,o,null,!1,!1)}),["行スパン","開始"].forEach(function(o){E[o]=new T(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([az])/g;function R(o){return o[1].toUpperCase()}"アクセントの高さ、配置ベースライン、アラビア語形式、ベースラインシフト、キャップハイト、クリップパス、クリップルール、色補間、色補間フィルタ、色プロファイル、色レンダリング、ドミナントベースライン、背景の有効化、塗りつぶしの不透明度、塗りつぶしルール、塗りつぶし色、塗りつぶしの不透明度、フォントファミリ、フォントサイズ、フォントサイズ調整、フォントストレッチ、フォントスタイル、フォントバリアント、フォントウェイト、グリフ名、グリフの方向（水平）、グリフの方向（垂直）、水平アドバンスX、水平原点X、画像レンダリング、文字間隔、照明色、マーカー終了、マーカー中央、マーカー開始、オーバーライン位置オーバーラインの太さ、ペイント順序、パノーズ1、ポインタイベント、レンダリングインテント、シェイプレンダリング、ストップカラー、ストップ不透明度、取り消し線の位置、取り消し線の太さ、ストロークダッシュ配列、ストロークダッシュオフセット、ストロークラインキャップ、ストロークライン結合、ストロークマイター制限、ストローク不透明度、ストローク幅、テキストアンカー、テキスト装飾、テキストレンダリング、下線の位置、下線の幅、Unicode Bidi、Unicode範囲、Units-per-em、V-アルファベット、V-ぶら下げ、V-表意文字、V-数学、ベクトル効果、垂直方向のY、垂直方向の原点X、垂直方向の原点Y、単語間隔、書字方向、xmlns:xlink、x-height、split(" ").forEach(function(o){var l=o.replace(S,R);E[l]=new T(l,1,!1,o,null,!1,!1)})、"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(S,R);E[l]=new T(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(S,R);E[l]=new T(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new T(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new T(o,1,!1,o.toLowerCase(),null,!0,!0)});function P(o,l,p,y){var A=E.hasOwnProperty(l)?E[l]:null;(A!==null?A.type!==0:y||!(2<l.length)||l[0] !=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(M(l,p,A,y)&&(p=null),y||A===nu ll?_(l)&&(p===null?o.removeAttribute(l):o.setAttribute(l,""+p)):A.mustUseProperty?o[A.propertyName]=p===null?A.type===3?!1:"":p:(l=A.attributeName,y=A.attributeNamespace,p===null?o.removeAttribute(l):(A=A.type,p=A===3||A===4&&p===!0?"":""+p,y?o.setAttributeNS(y,l,p):o.setAttribute(l,p))))}var I=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED、O=Symbol.for("react.element")、U=Symbol.for("react.portal")、F=Symbol.for("react.fragment")、z=Symbol.for("react.strict_mode")、D=Symbol.for("react.profiler")、N=Symbol.for("react.provider")、G=Symbol.for("react.context")、$=Symbol.for("react.forward_ref")、Q=Symbol.for("react.suspense")、ce=Symbol.for("react.suspense_list")、me=Symbol.for("react.memo")、ue=Symbol.for("react.lazy")、de=Symbol.for("react.offscreen")、B=Symbol.iterator;関数K(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,W;function te(o){if(W===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+o}var Pe=!1;function se(o,l){if(!o||Pe)return"";Pe=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ye){var y=ye}Reflect.construct(o,[],l)}else{try{l.call()}catch(ye){y=ye}o.call(l.prototype)}else{try{throw Error()}catch(ye){y=ye}o()}}catch(ye){if(ye&&y&&typeof ye.stack=="文字列"){for(var A=ye.stack.split(`
`),b=y.stack.split(`
`),k=A.length-1,Z=b.length-1;1<=k&&0<=Z&&A[k]!==b[Z];)Z--;for(;1<=k&&0<=Z;k--,Z--)if(A[k]!==b[Z]){if(k!==1||Z!==1)do if(k--,Z--,0>Z||A[k]!==b[Z]){var ee=`
`+A[k].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=k&&0<=Z);break}}}finally{Pe=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?te(o):""}function xe(o){switch(o.tag){case 5:return te(o.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return o=se(o.type,!1),o;case 11:return o=se(o.type.render,!1),o;case 1:return o=se(o.type,!0),o;default:return""}}function be(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case F:return"Fragment";case U:return"Portal";case D:return"Profiler";case z:return"StrictMode";case Q:return"Suspense";case ce:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case G:return(o.displayName||"Context")+".Consumer";case N:return(o._context.displayName||"Context")+".Provider";case $:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case me:return l=o.displayName||null,l!==null?l:be(o.type)||"Memo";case ue:l=o._payload,o=o._init;try{return be(o(l))}catch{}}return null}function Te(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11: return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7: return"Fragment";case 5: return l;case 4: return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(l);case 8: return l===z?"StrictMode":"Mode";case 22: return"Offscreen";case 12: return"Profiler";case 21: return"Scope";case 13: return"Suspense";case 19: return"SuspenseList";case 25: return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Xe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function gt(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function et(o){var l=gt(o)?"checked":"値",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,b=p.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return A.call(this)},set:function(k){y=""+k,b.call(this,k)}}),Object.defineProperty(o,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(k){y=""+k},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Lt(o){o._valueTracker||(o._valueTracker=et(o))}function Ne(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return o&&(y=gt(o)?o.checked?"true":"false":o.value),o=y,o!==p?(l.setValue(o),!0):!1}function Ce(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Y(o,l){var p=l.checked;return J({},l,{defaultChecked:void 0,d​​efaultValue:void 0,value:void 0、チェック済み:p??o._wrapperState.initialChecked})}function _t(o,l){var p=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;p=Xe(l.value!=null?l.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Fe(o,l){l=l.checked,l!=null&&P(o,"checked",l,!1)}function rt(o,l){Fe(o,l);var p=Xe(l.value),y=l.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Tt(o,l.type,p):l.hasOwnProperty("defaultValue")&&Tt(o,l.type,Xe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}関数We(o,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,p||l===o.value||(o.value=l),o.defaultValue=l}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}関数Tt(o,l,p){(l!=="number"||Ce(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var qe=Array.isArray;function X(o,l,p,y){if(o=o.options,l){l={};for(var A=0;A<p.length;A++)l["$"+p[A]]=!0;for(p=0;p<o.length;p++)A=l.hasOwnProperty("$"+o[p].value),o[p].selected!==A&&(o[p].selected=A),A&&y&&(o[p].defaultSelected=!0)}else{for(p=""+Xe(p),l=null,A=0;A<o.length;A++){if(o[A].value===p){o[A].selected=!0,y&&(o[A].defaultSelected=!0);return}l!==null||o[A].disabled||(l=o[A])}l!==null&&(l.selected=!0)}}function V(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},l,{value:void 0,d​​efaultValue:void 0,children:""+o._wrapperState.initialValue})}function pe(o,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(qe(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}o._wrapperState={initialValue:Xe(p)}}function Ee(o,l){var p=Xe(l.value),y=Xe(l.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),l.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}関数Le(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Ae(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Ae(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var je,st=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,y,A){MSApp.execUnsafeLocalFunction(function(){return o(l,p,y,A)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=je.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Bt(o,l){if(l){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=l;return}}o.textContent=l}var ke={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:! 0、gridColumnStart:!0、fontWeight:!0、lineClamp:!0、lineHeight:!0、opacity:!0、order:!0、orphans:!0、tabSize:!0、widows:!0、zIndex:!0、zoom:!0、fillOpacity:!0、floodOpacity:!0、stopOpacity:!0、strokeDasharray:!0、strokeDashoffset:!0、strokeMiterlimit:!0、strokeOpacity:!0、strokeWidth:!0}、ct=["Webkit","ms","Moz","O"];Object.keys(ke).forEach(function(o){ct.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),ke[l]=ke[o]})});function At(o,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||ke.hasOwnProperty(o)&&ke[o]?(""+l).trim():l+"px"}function It(o,l){o=o.style;for(var p in l)if(l.hasOwnProperty(p)){var y=p.indexOf("--")===0,A=At(p,l[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,A):o[p]=A}}var ft=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qt(o,l){if(l){if(ft[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Nt(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gn=null;function re(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Je=null,Me=null,Re=null;function tt(o){if(o=qs(o)){if(typeof Je!="function")throw Error(t(280));var l=o.stateNode;l&&(l=df(l),Je(o.stateNode,o.type,l))}}function Ke(o){Me?Re?Re.push(o):Re=[o]:Me=o}function Ut(){if(Me){var o=Me,l=Re;if(Re=Me=null,tt(o),l)for(o=0;o<l.length;o++)tt(l[o])}}function An(o,l){return o(l)}function Yn(){}var on=!1;function Oi(o,l,p){if(on)return o(l,p);on=!0;try{return An(o,l,p)}finally{on=!1,(Me!==null||Re!==null)&&(Yn(),Ut())}}function Fi(o,l){var p=o.stateNode;if(p===null)return null;var y=df(p);if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var qa=!1;if(u)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){qa=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{qa=!1}function Ss(o,l,p,y,A,b,k,Z,ee){var ye=Array.prototype.slice.call(arguments,3);try{l.apply(p,ye)}catch(Ue){this.onError(Ue)}}var $r=!1,jo=null,es=!1,xo=null,Ac={onError:function(o){$r=!0,jo=o}};function ja(o,l,p,y,A,b,k,Z,ee){$r=!1,jo=null,Ss.apply(Ac,arguments)}function Cc(o,l,p,y,A,b,k,Z,ee){if(ja.apply(this,arguments),$r){if($r){var ye=jo;$r=!1,jo=null}else throw Error(t(198));es||(es=!0,xo=ye)}}function Ms(o){var l=o,p=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,l.flags&4098&&(p=l.return),o=l.return;while(o)}return l.tag===3?p:null}関数Rc(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}関数bc(o){if(Ms(o)!==o)throw Error(t(188))}関数Pc(o){var l=o.alternate;if(!l){if(l=Ms(o),l===null)throw Error(t(188));return l!==o?null:o}for(var p=o,y=l;;){var A=p.return;if(A===null)break;var b=A.alternate;if(b===null){if(y=A.return,y!==null){p=y;continue}break}if(A.child===b.child){for(b=A.child;b;){if(b===p)return bc(A),o;if(b===y)return bc(A),l;b=b.sibling}throw Error(t(188))}if(p.return!==y.return)p=A,y=b;else{for(var k=!1,Z=A.child;Z;){if(Z===p){k=!0,p=A,y=b;break}if(Z===y){k=!0,y=A,p=b;break}Z=Z.sibling}if(!k){for(Z=b.child;Z;){if(Z===p){k=!0,p=b,y=A;break}if(Z===y){k=!0,y=b,p=A;break}Z=Z.sibling}if(!k)throwError(t(189))}}if(p.alternate!==y)throwError(t(190))}if(p.tag!==3)throwError(t(188));return p.stateNode.current===p?o:l}function Ic(o){return o=Pc(o),o!==null?Lc(o):null}関数Lc(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Lc(o);if(l!==null)return l;o=o.sibling}return null}var Dc=e.unstable_scheduleCallback、H=e.unstable_cancelCallback、oe=e.unstable_shouldYield、ve=e.unstable_requestPaint、fe=e.unstable_now、le=e.unstable_getCurrentPriorityLevel、Oe=e.unstable_ImmediatePriority、Ze=e.unstable_UserBlockingPriority、it=e.unstable_NormalPriority、at=e.unstable_LowPriority、Et=e.unstable_IdlePriority、wt=null、He=null;function vt(o){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(wt,o,void 0,(o.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Xt,$t=Math.log,en=Math.LN2;function Xt(o){return o>>>=0,o===0?32:31-($t(o)/en|0)|0}var mt=64,sn=4194304;function jt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}関数mi(o,l){var p=o.pendingLanes;if(p===0)return 0;var y=0,A=o.suspendedLanes,b=o.pingedLanes,k=p&268435455;if(k!==0){var Z=k&~A;Z!==0?y=jt(Z):(b&=k,b!==0&&(y=jt(b)))}else k=p&~A,k!==0?y=jt(k):b!==0&&(y=jt(b));if(y===0)return 0;if(l!==0&&l!==y&&!(l&A)&&(A=y&-y,b=l&-l,A>=b||A===16&&(b&4194240)!==0))return l;if(y&4&&(y|=p&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=y;0<l;)p=31-Pt(l),A=1<<p,y|=o[p],l&=~A;return y}関数ks(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:ケース 268435456:ケース 536870912:ケース 1073741824:return-1;default:return-1}}関数 ii(o,l){for(var p=o.suspendedLanes,y=o.pingedLanes,A=o.expirationTimes,b=o.pendingLanes;0<b;){var k=31-Pt(b),Z=1<<k,ee=A[k];ee===-1?(!(Z&p)||Z&y)&&(A[k]=ks(Z,l)):ee<=l&&(o.expiredLanes|=Z),b&=~Z}}関数 ws(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function tn(){var o=mt;return mt<<=1,!(mt&4194240)&&(mt=64),o}function Ci(o){for(var l=[],p=0;31>p;p++)l.push(o);return l}関数 ri(o,l,p){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Pt(l),o[l]=p}関数gi(o,l){var p=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var A=31-Pt(p),b=1<<A;l[A]=0,y[A]=-1,o[A]=-1,p&=~b}}function Bn(o,l){var p=o.entangledLanes|=l;for(o=o.entanglements;p;){var y=31-Pt(p),A=1<<y;A&l|o[y]&l&&(o[y]|=l),p&=~A}}var nn=0;function Zi(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Zl,Lh,Xp,Nc,Uc,Zo=!1,Oc=[],Es=null,Zt=null,zs=null,Jo=新しいマップ,Za=新しいマップ,So=[],__="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qn(o,l){switch(o){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Jo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(l.pointerId)}}function Ko(o,l,p,y,A,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l、domEventName:p、eventSystemFlags:y、nativeEvent:b、targetContainers:[A]}、l!==null&&(l=qs(l)、l!==null&&Lh(l))、o):(o.eventSystemFlags|=y、l=o.targetContainers、A!==null&&l。indexOf(A)===-1&&l.push(A),o)}function v_(o,l,p,y,A){switch(l){case"focusin":return Es=Ko(Es,o,l,p,y,A),!0;case"dragenter":return Zt=Ko(Zt,o,l,p,y,A),!0;case"mouseover":return zs=Ko(zs,o,l,p,y,A),!0;case"pointerover":var b=A.pointerId;return Jo.set(b,Ko(Jo.get(b)||null,o,l,p,y,A)),!0;case"gotpointercapture":return b=A.pointerId,Za.set(b,Ko(Za.get(b)||null,o,l,p,y,A)),!0}return!1}function Fc(o){var l=Ro(o.target);if(l!==null){var p=Ms(l);if(p!==null){if(l=p.tag,l===13){if(l=Rc(p),l!==null){o.blockedOn=l,Uc(o.priority,function(){Xp(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function kc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var p=Pr(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);gn=y,p.target.dispatchEvent(y),gn=null}else return l=qs(p),l!==null&&Lh(l),o.blockedOn=p,!1;l.shift()}return!0}関数 Jl(o,l,p){kc(o)&&p.delete(l)}関数Ts(){Zo=!1,Es!==null&&kc(Es)&&(Es=null),Zt!==null&&kc(Zt)&&(Zt=null),zs!==null&&kc(zs)&&(zs=null),Jo.forEach(Jl),Za.forEach(Jl)}関数Kl(o,l){o.blockedOn===l&&(o.blockedOn=null,Zo||(Zo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ts)))}関数Ql(o){関数l(A){return Kl(A,o)}if(0<Oc.length){Kl(Oc[0],o);for(var p=1;p<Oc.length;p++){var y=Oc[p];y.blockedOn===o&&(y.blockedOn=null)}}for(Es!==null&&Kl(Es,o),Zt!==null&&Kl(Zt,o),zs!==null&&Kl(zs,o),Jo.forEach(l),Za.forEach(l),p=0;p<So.length;p++)y=So[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<So.length&&(p=So[0],p.blockedOn===null);)Fc(p),p.blockedOn===null&&So.shift()}var ki=I.ReactCurrentBatchConfig,br=!0;function zc(o,l,p,y){var A=nn,b=ki.transition;ki.transition=null;try{nn=1,Bc(o,l,p,y)}finally{nn=A,ki.transition=b}}function Dh(o,l,p,y){var A=nn,b=ki.transition;ki.transition=null;try{nn=4,Bc(o,l,p,y)}finally{nn=A,ki.transition=b}}function Bc(o,l,p,y){if(br){var A=Pr(o,l,p,y);if(A===null)af(o,l,y,Vc,p),Qn(o,y);else if(v_(A,o,l,p,y))y.stopPropagation();else if(Qn(o,y),l&4&&-1<__.indexOf(o)){for(;A!==null;){var b=qs(A);if(b!==null&&Zl(b),b=Pr(o,l,p,y),b===null&&af(o,l,y,Vc,p),b===A)break;A=b}A!==null&&y.stopPropagation()}else af(o,l,y,null,p)}}var Vc=null;function Pr(o,l,p,y){if(Vc=null,o=re(y),o=Ro(o),o!==null)if(l=Ms(o),l===null)o=null;else if(p=l.tag,p===13){if(o=Rc(l),o!==null)return o;o=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Vc=o,null}function Yp(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"コピー":case"カット":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"ドロップ":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"貼り付け":case"一時停止":case"再生":case"ポインターキャンセル":case"ポインターダウン":case"ポインターアップ":case"レート変更":case"リセット":case"リサイズ":case"シークド":ca se"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(le()){case Oe:return 1;case Ze:return 4;case it:case at:return 16;case Et:return 536870912;default:return 16}default:return 16}}var ts=null,Nh=null,Ji=null;function $l(){if(Ji)return Ji;var o,l=Nh,p=l.length,y,A="value"in ts?ts.value:ts.textContent,b=A.length;for(o=0;o<p&&l[o]===A[o];o++);var k=po;for(y=1;y<=k&&l[py]===A[by];y++);return Ji=A.slice(o,1<y?1-y:void 0)}function Qo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Bs(){return!0}function Hc(){return!1}function zi(o){function l(p,y,A,b,k){this._reactName=p,this._targetInst=A,this.type=y,this.nativeEvent=b,this.target=k,this.currentTarget=null;for(var Z in o)o.hasOwnProperty(Z)&&(p=o[Z],this[Z]=p?p(b):b[Z]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Bs:Hc,this.isPropagationStopped=Hc,this}return J(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var p=this.ネイティブイベント;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),l}var $o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=zi($o),ea=J({},$o,{view:0,detail:0}),Ja=zi(ea),Ki,Ir,Lr,Ka=J({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Lr&&(Lr&&o.type==="mousemove"?(Ki=o.screenX-Lr.screenX,Ir=o.screenY-Lr.screenY):Ir=Ki=0,Lr=o),Ki)},movementY:function(o){return"movementY"in o?o.movementY:Ir}}),Uh=zi(Ka),Vs=J({},Ka,{dataTransfer:0}),Mo=zi(Vs),Gc=J({},ea,{relatedTarget:0}),Wc=zi(Gc),Xc=J({},$o,{animationName:0,elapsedTime:0,pseudoElement:0}),qp=zi(Xc),jp=J({},$o,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Oh=zi(jp),Yc=J({},$o,{data:0}),Fh=zi(Yc),Zp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};関数Qa(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=kh[o])?!!l[o]:!1}function wo(){return Qa}var qc=J({},ea,{key:function(o){if(o.key){var l=Zp[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Qo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Jp[o.keyCode]||"未確認":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wo,charCode:function(o){return o.type==="keypress"?Qo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Qo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),jc=zi(qc),Dr=J({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hr=zi(Dr),ta=J({},ea ,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wo}),Hs=zi(ta),Gs=J({},$o,{propertyName:0,elapsedTime:0,pseudoElement:0}),na=zi(Gs),Kp=J({},Ka,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),zh=zi(Kp),Bh=[9,13,27,32],Bi=u&&"CompositionEvent"in window,_i=null;u&&"documentMode"in document&&(_i=document.documentMode);var Pn=u&&"TextEvent"in window&&!_i,$a=u&&(!Bi||_i&&8<_i&&11>=_i),Nr=" ",Vh=!1;function Hh(o,l){switch(o){case"keyup":return Bh.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Eo=!1;function Qp(o,l){switch(o){case"compositionend":return Zc(l);case"keypress":return l.which!==32?null:(Vh=!0,Nr);case"textInput":return o=l.data,o===Nr&&Vh?null:o;default:return null}}function tu(o,l){if(Eo)return o==="compositionend"||!B​​i&&Hh(o,l)?(o=$l(),Ji=Nh=ts=null,Eo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return $a&&l.locale!=="ko"?null:l.data;default:return null}}var el={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jc(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!el[o.type]:l==="textarea"}function tl(o,l,p,y){Ke(y),l=lf(l,"onChange"),0<l.length&&(p=new eu("onChange","change",null,p,y),o.push({event:p,listeners:l}))}var To=null,nl=null;function $p(o){ol(o,0)}function Ws(o){var l=Vn(o);if(Ne(l))return o}function em(o,l){if(o==="change")return l}var il=!1;if(u){var Qi;if(u){var ia="oninput"in document;if(!ia){var ra=document.createElement("div");ra.setAttribute("oninput","re​​turn;"),ia=typeof ra.oninput=="function"}Qi=ia}else Qi=!1;il=Qi&&(!document.documentMode||9<document.documentMode)}function ns(){To&&(To.detachEvent("onpropertychange",Kc),nl=To=null)}function Kc(o){if(o.propertyName==="value"&&Ws(nl)){var l=[];tl(l,nl,o,re(o)),Oi($p,l)}}function rl(o,l,p){o==="focusin"?(ns(),To=l,nl=p,To.attachEvent("onpropertychange",Kc)):o==="focusout"&&ns()}function tm(o){if(o==="選択変更"||o==="キーアップ"||o==="キーダウン")return Ws(nl)}function Gh(o,l){if(o==="クリック")return Ws(l)}function Dn(o,l){if(o==="入力"||o==="変更")return Ws(l)}function Qc(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var dr=typeof Object.is=="function"?Object.is:Qc;function sa(o,l){if(dr(o,l))return!0;if(typeof o!="オブジェクト"||o===null||typeof l!="オブジェクト"||l===null)return!1;var p=Object.keys(o),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var A=p[y];if(!h.call(l,A)||!dr(o[A],l[A]))return!1}return!0}function nu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function pr(o,l){var p=nu(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=l&&y>=l)return{node:p,offset:lo};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=nu(p)}}function oa(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?oa(o,l.parentNode):"を含む" o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Nn(){for(var o=window,l=Ce();l instanceof o.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)o=l.contentWindow;elsebreak;l=Ce(o.document)}return l}function si(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function oi(o){var l=Nn(),p=o.focusedElem,y=o.selectionRange;if(l!==p&&p&&p.ownerDocument&&oa(p.ownerDocument.documentElement,p)){if(y!==null&&si(p)){if(l=y.start,o=y.end,o===void 0&&(o=l),"selectionStart"in p)p.selectionStart=l、p.selectionEnd=Math.min(o、p.value.length);else if(o=(l=p.ownerDocument||document)&&l.defaultView||window、o.getSelection){o=o.getSelection();var A=p.textContent.length、b=Math.min(y.start、A);y=y.end===void 0?b:Math.min(y.end、A),!o.extend&&b>y&&(A=y、y=b、b=A),A=pr(p,b);var k=pr(p,y);A&&k&&(o.rangeCount!==1||o.anchorNode!==A.node||o.anchorOffset!==A.offset||o.focusNode!==k.node||o.focusOffset!==k.offset)&&(l=l.createRange(),l.setStart(A.node,A.offset),o.removeAllRanges(),b>y?(o.addRange(l),o.extend(k.node,k.offset)):(l.setEnd(k.node,k.offset),o.addRange(l)))}}for(l=[],o=p;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)o=l[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var $c=u&&"documentMode"in document&&11>=document.documentMode,As=null,aa=null,iu=null,ai=!1;function ef(o,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ai||As==null||As!==Ce(y)||(y=As,"selectionStart"in y&&si(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.a nchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),iu&&sa(iu,y)||(iu=y,y=lf(aa,"onSelect"),0<y.length&&(l=new) eu("onSelect","select",null,l,p),o.push({event:l,listeners:y}),l.target=As)))}function sl(o,l){var p={};return p[o.toLowerCase()]=l.toLowerCase(),p["Webkit"+o]="webkit"+l,p["Moz"+o]="moz"+l,p}var Ao={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},is={},rs={};u&&(rs=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Cs(o){if(is[o])return is[o];if(!Ao[o])return o;var l=Ao[o],p;for(p in l)if(l.hasOwnProperty(p)&&p in rs)return is[o]=l[p];return o}var ru=Cs("animationend"),su=Cs("animationiteration"),Wh=Cs("animationstart"),Xh=Cs("transitionend"),Yh=new Map,qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ending error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDownポインター移動ポインター出力ポインターオーバーポインターアップ進捗率変更リセットサイズ変更シークシーク停止送信一時停止時間更新タッチキャンセルタッチ終了タッチ開始音量スクロール変更トグルタッチ移動待機ホイール".split(" ");function Xs(o,l){Yh.set(o,l),r(l,[o])}for(var tf=0;tf<qh.length;tf++){var ou=qh[tf],au=ou.toLowerCase(),nm=ou[0].toUpperCase()+ou.slice(1);Xs(au,"on"+nm)}Xs(ru,"onAnimationEnd"),Xs(su,"onAnimationIteration"),Xs(Wh,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(Xh,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ending error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange wait".split(" "),nf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function rf(o,l,p){var y=o.type||"不明なイベント";o.currentTarget=p,Cc(y,l,void 0,o),o.currentTarget=null}function ol(o,l){l=(l&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],A=y.event;y=y.listeners;e:{var b=void 0;if(l)for(var k=y.length-1;0<=k;k--){var Z=y[k],ee=Z.instance,ye=Z.currentTarget;if(Z=Z.listener,ee!==b&&A.isPropagationStopped())break e;rf(A,Z,ye),b=ee}else for(k=0;k<y.length;k++){if(Z=y[k],ee=Z.instance,ye=Z.currentTarget,Z=Z.listener,ee!==b&&A.isPropagationStopped())break e;rf(A,Z,ye),b=ee}}}if(es)throw o=xo,es=!1,xo=null,o}function Mn(o,l){var p=l[ca];p===void 0&&(p=l[ca]=new Set);var y=o+"__bubble";p.has(y)||(of(l,o,2,!1),p.add(y))}function sf(o,l,p){var y=0;l&&(y|=4),of(p,o,y,l)}var lu="_reactListening"+Math.random().toString(36).slice(2);function al(o){if(!o[lu]){o[lu]=!0,n.forEach(function(p){p!=="selectionchange"&&(nf.has(p)||sf(p,!1,o),sf(p,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[lu]||(l[lu]=!0,sf("selectionchange",!1,l))}}function of(o,l,p,y){switch(Yp(l)){case 1:var A=zc;break;case 4:A=Dh;break;default:A=Bc}p=A.bind(null,l,p,o),A=void 0,!qa||l!=="タッチスタート"&&l!=="タッチムーブ"&&l!=="wheel"||(A=!0),y?A!==void 0?o.addEventListener(l,p,{capture:!0,passive:A}):o.addEventListener(l,p,!0):A!==void 0?o.addEventListener(l,p,{passive:A}):o.addEventListener(l,p,!1)}関数 af(o,l,p,y,A){var b=y;if(!(l&1)&&!(l&2)&&y!==null)e:for(;;){if(y===null)return;var k=y.tag;if(k===3||k===4){var Z=y.stateNode.containerInfo;if(Z===A||Z.nodeType===8&&Z.parentNode===A)break;if(k===4)for(k=y.return;k!==null;){var ee=k.tag;if((ee===3||ee===4)&&(ee=k.stateNode.containerInfo,ee===A||ee.nodeType===8&&ee.parentNode===A) )return;k=k.return}for(;Z!==null;){if(k=Ro(Z),k===null)return;if(ee=k.tag,ee===5||ee===6){y=b=k;続くe}Z=Z.parentNode}}y=y.return}Oi(function(){var ye=b,Ue=re(p),ze=[];e:{var De=Yh.get(o);if(De!==void 0){var ot=eu,pt=o;switch(o){case"keypress":if(Qo(p)===0)break e;case"keydown":case"keyup":ot=jc;break;case"focusin":pt="focus",ot=Wc;break;case"focusout":pt="blur",ot=Wc;break;case"beforeblur":case"afterblur":ot=Wc;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Mo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Hs;break;case ru:case su:case Wh:ot=qp;break;case Xh:ot=na;break;case"scroll":ot=Ja;break;case"wheel":ot=zh;break;case"copy":case"cut":case"paste":ot=Oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=hr}var yt=(l&4)!==0,ei=!yt&&o==="scroll",he=yt?De!==null?De+"Capture":null:De;yt=[];for(var ne=ye,ge;ne!==null;){ge=ne;var Ge=ge.stateNode;if(ge.tag===5&&Ge!==null&&(ge=Ge,he!==null&&(Ge=Fi(ne,he),Ge!=null&&yt.push(ll(ne,Ge,ge)))),ei)break;ne=ne.return}0<yt.length&&(De=new ot(De,pt,null,p,Ue),ze.push({event:De,listeners:yt}))}}if(!(l&7)){e:{if(De=o==="mouseover"||o==="pointerover",ot=o==="mouseout"||o==="pointerout",De&&p!==gn&&(pt=p.relatedTarget||p.fromElement)&&(Ro(pt)||pt[mr]))break e;if((ot||De)&&(De=Ue.window===Ue?Ue:(De=Ue.ownerDocument)?De.defaultView||De.parentWindow:window、ot?(pt=p.relatedTarget||p.toElement、ot=ye、pt=pt?Ro(pt):null、pt!==null&&(ei=Ms(pt),pt!==ei||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ot=null,pt=ye),ot!==pt)){if(yt=Uh,Ge="onMouseLeave",he="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(yt=hr,Ge="onPointerLeave",he="onPointerEnter",ne="pointer"),ei=ot==null?De:Vn(ot),ge=pt==null?De:Vn(pt),De=new yt(Ge,ne+"leave",ot,p,Ue),De.target=ei,De.relatedTarget=ge,Ge=null,Ro(Ue)===ye&&(yt=new yt(he,ne+"enter",pt,p,Ue),yt.target=ge,yt.relatedTarget=ei,Ge=yt),ei=Ge,ot&&pt)t:{for(yt=ot,he=pt,ne=0,ge=yt;ge;ge=la(ge))ne++;for(ge=0,Ge=he;Ge;Ge=la(Ge))ge++;for(;0<ne-ge;)yt=la(yt),ne--;for(;0<ge-ne;)he=la(he),ge--;for(;ne--;){if(yt===he||he!==null&&yt===he.alternate)break t;yt=la(yt),he=la(he)}yt=null}else yt=null;ot!==null&&im(ze,De,ot,yt,!1),pt!==null&&ei!==null&&im(ze,ei,pt,yt,!0)}}e:{if(De=ye?Vn(ye) :window,ot=De.nodeName&&De.nodeName.toLowerCase(),ot==="select"||ot==="input"&&De.type==="file")var Mt=em;else if(Jc(De))if(il)Mt=Dn;else{Mt=tm;var Rt=rl}else(ot=De.nodeName)&&ot.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(Mt=Gh);if(Mt&&(Mt=Mt(o,ye))){tl(ze,Mt,p,Ue);break e}Rt&&Rt(o,De,ye),o==="focusout"&&(Rt=De._wrapperState)&&Rt.controlled&&De.type==="number"&&Tt(De,"number",De.value)}switch(Rt=ye?Vn(ye):window,o){case"focusin":(Jc(Rt)||Rt.contentEditable==="true")&&(As=Rt,aa=ye,iu=null);break;case"focusout":iu=aa=As=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,ef(ze,p,Ue);break;case"selectionchange":if($c)break;case"keydown":case"keyup":ef(ze,p,Ue)}var bt;if(Bi)e:{switch(o){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else Eo?Hh(o,p)&&(Ot="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ot="onCompositionStart");Ot&&($a&&p.locale!=="ko"&&(Eo||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Eo&&(bt=$l()):(ts=Ue,Nh="value"in ts?ts.value:ts.textContent,Eo=!0)),Rt=lf(ye,Ot),0<Rt.length&&(Ot=new Fh(Ot,o,null,p,Ue),ze.push({event:Ot,listeners:Rt}),bt?Ot.data=bt:(bt=Zc(p),bt!==null&&(Ot.data=bt)))),(bt=Pn?Qp(o,p):tu(o,p))&&(ye=lf(ye,"onBeforeInput"),0<ye.length&&(Ue=new Fh("onBeforeInput","beforeinput",null,p,Ue),ze.push({event:Ue,listeners:ye}),Ue.data=bt))}ol(ze,l)})}関数ll(o,l,p){return{インスタンス:o,listener:l,currentTarget:p}}function lf(o,l){for(var p=l+"Capture",y=[];o!==null;){var A=o,b=A.stateNode;A.tag===5&&b!==null&&(A=b,b=Fi(o,p),b!=null&&y.unshift(ll(o,b,A)),b=Fi(o,l),b!=null&&y.push(ll(o,b,A))),o=o.return}return y}function la(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function im(o,l,p,y,A){for(var b=l._reactName,k=[];p!==null&&p!==y;){var Z=p,ee=Z.alternate,ye=Z.stateNode;if(ee!==null&&ee===y)break;Z.tag===5&&ye!==null&&(Z=ye,A?(ee=Fi(p,b),ee!=null&&k.unshift(ll(p,ee,Z))):A||(ee=Fi(p,b),ee!=null&&k.push(ll(p,ee,Z)))),p=p.return}k.length!==0&&o.push({event:l,listeners:k})}var y_=/\r\n?/g,rm=/\u0000|\uFFFD/g;function jh(o){return(typeof o=="文字列"?o:""+o).replace(y_,`
`).replace(rm,"")}function uu(o,l,p){if(l=jh(l),jh(o)!==l&&p)throw Error(t(425))}function cu(){}var ul=null,Zh=null;function Jh(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Kh=typeof setTimeout=="function"?setTimeout:void 0,Qh=typeof clearTimeout=="function"?clearTimeout:void 0,uf=typeof Promise=="function"?Promise:void 0,x_=typeof queueMicrotask=="function"?queueMicrotask:typeof uf<"u"?function(o){return uf.resolve(null).then(o).catch(sm)}:Kh;function sm(o){setTimeout(function(){throw o})}function cf(o,l){var p=l,y=0;do{var A=p.nextSibling;if(o.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(y===0){o.removeChild(A),Ql(l);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=A}while(p);Ql(l)}function Ys(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function $h(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return o;l--}else p==="/$"&&l++}o=o.previousSibling}return null}var ua=Math.random().toString(36).slice(2),$n="__reactFiber$"+ua,cl="__reactProps$"+ua,mr="__reactContainer$"+ua,ca="__reactEvents$"+ua,ff="__reactListeners$"+ua,hf="__reactHandles$"+ua;function Ro(o){var l=o[$n];if(l)return l;for(var p=o.parentNode;p;){if(l=p[mr]||p[$n]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(o=$h(o);o!==null;){if(p=o[$n])return p;o=$h(o)}return l}o=p、p=o.parentNode}nullを返す}関数qs(o){o=o[$n]||o[mr]、!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}関数Vn(o){if(o.tag===5||o.tag===6)o.stateNodeを返す;Error(t(33))}関数df(o){o[cl]||null}var ed=[]、li=-1;関数Un(o){{current:o}を返す関数wn(o){0>li||(o.current=ed[li]、ed[li]=null、li--)}関数xn(o,l){li++、ed[li]=o.current、o.current=l}var js={},vi=Un(js),Vi=Un(!1),Zs=js;function fa(o,l){var p=o.type.contextTypes;if(!p)return js;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var A={},b;for(b in p)A[b]=l[b];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=A),A}function Ri(o){return o=o.childContextTypes,o!=null}function fu(){wn(Vi),wn(vi)}function td(o,l,p){if(vi.current!==js)throw Error(t(168));xn(vi,l),xn(Vi,p)}function hu(o,l,p){var y=o.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var A in y)if(!(A in l))throw Error(t(108,Te(o)||"Unknown",A));return J({},p,y)}function ha(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||js,Zs=vi.current,xn(vi,o),xn(Vi,Vi.current),!0}function nd(o,l,p){var y=o.stateNode;if(!y)throwエラー(t(169));p?(o=hu(o,l,Zs),y.__reactInternalMemoizedMergedChildContext=o,wn(Vi),wn(vi),xn(vi,o)):wn(Vi),xn(Vi,p)}var ss=null,du=!1,pf=!1;関数pu(o){ss===null?ss=[o]:ss.push(o)}関数om(o){du=!0,pu(o)}関数Rs(){if(!pf&&ss!==null){pf=!0;var o=0,l=nn;try{var p=ss;for(nn=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}ss=null,du=!1}catch(A){throw ss!==null&&(ss=ss.slice(o+1)),Dc(Oe,Rs),A}finally{nn=l,pf=!1}}return null}var da=[],$i=0,mf=null,gf=0,Hi=[],ui=0,pa=null,Ye=1,Ur="";function Js(o,l){da[$i++]=gf,da[$i++]=mf,mf=o,gf=l}関数 id(o,l,p){Hi[ui++]=Ye,Hi[ui++]=Ur,Hi[ui++]=pa,pa=o;var y=Ye;o=Ur;var A=32-Pt(y)-1;y&=~(1<<A),p+=1;var b=32-Pt(l)+A;if(30<b){var k=AA%5;b=(y&(1<<k)-1).toString(32),y>>=k,A-=k,Ye=1<<32-Pt(l)+A|p<<A|y,Ur=b+o}else Ye=1<<b|p<<A|y,Ur=o}function rd(o){o.return!==null&&(Js(o,1),id(o,1,0))}function Ks(o){for(;o===mf;)mf=da[--$i],da[$i]=null,gf=da[--$i],da[$i]=null;for(;o===pa;)pa=Hi[--ui],Hi[ui]=null,Ur=Hi[--ui],Hi[ui]=null,Ye=Hi[--ui],Hi[ui]=null}var yi=null,Gi=null,Cn=!1,Or=null;function sd(o,l){var p=Ds(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=o,l=o.deletions,l===null?(o.deletions=[p],o.flags|=16):l.push(p)}function od(o,l){switch(o.tag){case 5:var p=o.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,yi=o,Gi=Ys(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,yi=o,Gi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=pa!==null?{id:Ye,overflow:Ur}:null,o.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Ds(18,null,null,0),p.stateNode=l,p.return=o,o.child=p,yi=o,Gi=null,!0):!1;default:return!1}}関数_f(o){return(o.mode&1)!==0&&(o.flags&128)===0}関数 vf(o){if(Cn){var l=Gi;if(l){var p=l;if(!od(o,l)){if(_f(o))throw Error(t(418));l=Ys(p.nextSibling);var y=yi;l&&od(o,l)?sd(y,p):(o.flags=o.flags&-4097|2,Cn=!1,yi=o)}}else{if(_f(o))throw Error(t(418));o.flags=o.flags&-4097|2,Cn=!1,yi=o}}}関数yf(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;yi=o}関数 fl(o){if(o!==yi)return!1;if(!Cn)return yf(o),Cn=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Jh(o.type,o.memoizedProps)),l&&(l=Gi)){if(_f(o))throw ad(),Error(t(418));for(;l;)sd(o,l),l=Ys(l.nextSibling)}if(yf(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(l===0){Gi=Ys(o.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}o=o.nextSibling}Gi=null}}else Gi=yi?Ys(o.stateNode.nextSibling):null;return!0}function ad(){for(var o=Gi;o;)o=Ys(o.nextSibling)}function bo(){Gi=yi=null,Cn=!1}function hl(o){Or===null?Or=[o]:Or.push(o)}var S_=I.ReactCurrentBatchConfig;function mu(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var A=y,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(k){var Z=A.refs;k===null?delete Z[b]:Z[b]=k},l._stringRef=b,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function gu(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"キー{"+Object.keys(l).join(", ")+"}":o))}function ld(o){var l=o._init;return l(o._payload)}function ud(o){function l(he,ne){if(o){var ge=he.deletions;ge===null?(he.deletions=[ne],he.flags|=16):ge.push(ne)}}関数p(he,ne){if(!o)return null;for(;ne!==null;)l(he,ne),ne=ne.sibling;return null}関数y(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}関数A(he,ne){return he=wl(he,ne),he.index=0,he.sibling=null,he}関数b(he,ne,ge){return he.index=ge,o?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)}関数 k(he){return o&&he.alternate===null&&(he.flags|=2),he}関数 Z(he,ne,ge,Ge){return ne===null||ne.tag!==6?(ne=B_(ge,he.mode,Ge),ne.return=he,ne):(ne=A(ne,ge),ne.return=he,ne)}関数 ee(he,ne,ge,Ge){var Mt=ge.type;return Mt===F?Ue(he,ne,ge.props.children,Ge,ge.key):ne!==null&&(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ue&&ld(Mt)===ne.type)?(Ge=A(ne,ge.props),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge):(Ge=bm(ge.type,ge.key,ge.props,null,he.mode,Ge),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge)}関数 ye(he,ne,ge,Ge){return ne===null||ne.tag!==4||ne.stateNode.cReactCurrentBatchConfig;function mu(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var A=y,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(k){var Z=A.refs;k===null?delete Z[b]:Z[b]=k},l._stringRef=b,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function gu(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"キー{"+Object.keys(l).join(", ")+"}を持つオブジェクト":o))}function ld(o){var l=o._init;return l(o._payload)}function ud(o){function l(he,ne){if(o){var ge=he.deletions;ge===null?(he.deletions=[ne],he.flags|=16):ge.push(ne)}}function p(he,ne){if(!o)return null;for(;ne!==null;)l(he,ne),ne=ne.sibling;return null}function y(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}関数A(he,ne){return he=wl(he,ne),he.index=0,he.sibling=null,he}関数b(he,ne,ge){return he.index=ge,o?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)}関数k(he){return o&&he.alternate===null&&(he.flags|=2),he}関数Z(he,ne,ge,Ge){return ne===null||ne.tag!==6?(ne=B_(ge,he.mode,Ge),ne.return=he,ne):(ne=A(ne,ge),ne.return=he,ne)}関数 ee(he,ne,ge,Ge){var Mt=ge.type;return Mt===F?Ue(he,ne,ge.props.children,Ge,ge.key):ne!==null&&(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ue&&ld(Mt)===ne.type)?(Ge=A(ne,ge.props),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge):(Ge=bm(ge.type,ge.key,ge.props,null,he.mode,Ge),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge)}関数 ye(he,ne,ge,Ge){return ne===null||ne.tag!==4||ne.stateNode.cReactCurrentBatchConfig;function mu(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var A=y,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(k){var Z=A.refs;k===null?delete Z[b]:Z[b]=k},l._stringRef=b,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function gu(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"キー{"+Object.keys(l).join(", ")+"}を持つオブジェクト":o))}function ld(o){var l=o._init;return l(o._payload)}function ud(o){function l(he,ne){if(o){var ge=he.deletions;ge===null?(he.deletions=[ne],he.flags|=16):ge.push(ne)}}function p(he,ne){if(!o)return null;for(;ne!==null;)l(he,ne),ne=ne.sibling;return null}function y(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;return he}関数A(he,ne){return he=wl(he,ne),he.index=0,he.sibling=null,he}関数b(he,ne,ge){return he.index=ge,o?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)}関数k(he){return o&&he.alternate===null&&(he.flags|=2),he}関数Z(he,ne,ge,Ge){return ne===null||ne.tag!==6?(ne=B_(ge,he.mode,Ge),ne.return=he,ne):(ne=A(ne,ge),ne.return=he,ne)}関数 ee(he,ne,ge,Ge){var Mt=ge.type;return Mt===F?Ue(he,ne,ge.props.children,Ge,ge.key):ne!==null&&(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ue&&ld(Mt)===ne.type)?(Ge=A(ne,ge.props),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge):(Ge=bm(ge.type,ge.key,ge.props,null,he.mode,Ge),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge)}関数 ye(he,ne,ge,Ge){return ne===null||ne.tag!==4||ne.stateNode.c兄弟;nullを返す}関数y(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;heを返す}関数A(he,ne){he=wl(he,ne),he.index=0,he.sibling=null,heを返す}関数b(he,ne,ge){he.index=ge,o?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)を返す}関数k(he){o&&he.alternate===null&&(he.flags|=2),heを返す}関数Z(he,ne,ge,Ge){return ne===null||ne.tag!==6?(ne=B_(ge,he.mode,Ge),ne.return=he,ne):(ne=A(ne,ge),ne.return=he,ne)}関数 ee(he,ne,ge,Ge){var Mt=ge.type;return Mt===F?Ue(he,ne,ge.props.children,Ge,ge.key):ne!==null&&(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ue&&ld(Mt)===ne.type)?(Ge=A(ne,ge.props),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge):(Ge=bm(ge.type,ge.key,ge.props,null,he.mode,Ge),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge)}関数 ye(he,ne,ge,Ge){return ne===null||ne.tag!==4||ne.stateNode.c兄弟;nullを返す}関数y(he,ne){for(he=new Map;ne!==null;)ne.key!==null?he.set(ne.key,ne):he.set(ne.index,ne),ne=ne.sibling;heを返す}関数A(he,ne){he=wl(he,ne),he.index=0,he.sibling=null,heを返す}関数b(he,ne,ge){he.index=ge,o?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ne?(he.flags|=2,ne):ge):(he.flags|=2,ne)):(he.flags|=1048576,ne)を返す}関数k(he){o&&he.alternate===null&&(he.flags|=2),heを返す}関数Z(he,ne,ge,Ge){return ne===null||ne.tag!==6?(ne=B_(ge,he.mode,Ge),ne.return=he,ne):(ne=A(ne,ge),ne.return=he,ne)}関数 ee(he,ne,ge,Ge){var Mt=ge.type;return Mt===F?Ue(he,ne,ge.props.children,Ge,ge.key):ne!==null&&(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ue&&ld(Mt)===ne.type)?(Ge=A(ne,ge.props),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge):(Ge=bm(ge.type,ge.key,ge.props,null,he.mode,Ge),Ge.ref=mu(he,ne,ge),Ge.return=he,Ge)}関数 ye(he,ne,ge,Ge){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=V_(ge,he.mode,Ge),ne.return=he,ne):(ne=A(ne,ge.children||[]),ne.return=he,ne)}function Ue(he,ne,ge,Ge,Mt){return ne===null||ne.tag!==7?(ne=Du(ge,he.mode,Ge,Mt),ne.return=he,ne):(ne=A(ne,ge),ne.return=he,ne)}function ze(he,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=B_(""+ne,he.mode,ge),ne.return=he,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:return ge=bm(ne.type,ne.key,ne.props,null,he.mode,ge),ge.ref=mu(he,null,ne),ge.return=he,ge;case U:return ne=V_(ne,he.mode,ge),ne.return=he,ne;case ue:var Ge=ne._init;return ze(he,Ge(ne._payload),ge)}if(qe(ne)||K(ne))return ne=Du(ne,he.mode,ge,null),ne.return=he,ne;gu(he,ne)}return null}function De(he,ne,ge,Ge){var Mt=ne!==null?ne.key:null;if(typeof ge=="文字列"&&ge!==""||typeof ge=="数値")return Mt!==null?null:Z(he,ne,""+ge,Ge);if(typeof ge=="オブジェクト"&&ge!==null){switch(ge.$$typeof){case O:return ge.key===Mt?ee(he,ne,ge,Ge):null;case U:return ge.key===Mt?ye(he,ne,ge,Ge):null;case ue:return Mt=ge._init,De(he,ne,Mt(ge._payload),Ge)}if(qe(ge)||K(ge))return Mt!==null?null:Ue(he,ne,ge,Ge,null);gu(he,ge)}return null}function ot(he,ne,ge,Ge,Mt){if(typeof Ge=="文字列"&&Ge!==""||typeof Ge=="数値")return he=he.get(ge)||null,Z(ne,he,""+Ge,Mt);if(typeof Ge=="オブジェクト"&&Ge!==null){switch(Ge.$$typeof){case O:return he=he.get(Ge.key===null?ge:Ge.key)||null,ee(ne,he,Ge,Mt);case U:return he=he.get(Ge.key===null?ge:Ge.key)||null,ye(ne,he,Ge,Mt);case ue:var Rt=Ge._init;return ot(he,ne,ge,Rt(Ge._payload),Mt)}if(qe(Ge)||K(Ge))return he=he.get(ge)||null,Ue(ne,he,Ge,Mt,null);gu(ne,Ge)}return null}関数 pt(he,ne,ge,Ge){for(var Mt=null,Rt=null,bt=ne,Ot=ne=0,Li=null;bt!==null&&Ot<ge.length;Ot++){bt.index>Ot?(Li=bt,bt=null):Li=bt.sibling;var _n=De(he,bt,ge[Ot],Ge);if(_n===null){bt===null&&(bt=Li);break}o&&bt&&_n.alternate===null&&l(he,bt),ne=b(_n,ne,Ot),Rt===null?Mt=_n:Rt.sibling=_n,Rt=_n,bt=Li}if(Ot===ge.length)return p(he,bt),Cn&&Js(he,Ot),Mt;if(bt===null){for(;Ot<ge.length;Ot++)bt=ze(he,ge[Ot],Ge),bt!==null&&(ne=b(bt,ne,Ot),Rt===null?Mt=bt:Rt.sibling=bt,Rt=bt);return Cn&&Js(he,Ot),Mt}for(bt=y(he,bt);Ot<ge.length;Ot++)Li=ot(bt,he,Ot,ge[Ot],Ge),Li!==null&&(o&&Li.alternate!==null&&bt.delete(Li.key===null?Ot:Li.key),ne=b(Li,ne,Ot),Rt===null?Mt=Li:Rt.sibling=Li,Rt=Li);return o&&bt.forEach(function(El){return l(he,El)}),Cn&&Js(he,Ot),Mt}function yt(he,ne,ge,Ge){var Mt=K(ge);if(typeof Mt!="function")throw Error(t(150));if(ge=Mt.call(ge),ge==null)throw Error(t(151));for(var Rt=Mt=null,bt=ne,Ot=ne=0,Li=null,_n=ge.next();bt!==null&&!_n.done;Ot++,_n=ge.next()){bt.index>Ot?(Li=bt,bt=null):Li=bt.sibling;var El=De(he,bt,_n.value,Ge);if(El===null){bt===null&&(bt=Li);break}o&&bt&&El.alternate===n ull&&l(he,bt),ne=b(El,ne,Ot),Rt===null?Mt=El:Rt.sibling=El,Rt=El,bt=Li}if(_n.done)return p(he,bt),Cn&&Js(he,Ot),Mt;if(bt===null){for(;!_n.done;Ot++,_n=ge.next())_n=ze(he,_n.value,Ge),_n!==null&&(ne=b(_n,ne,Ot),Rt===null?Mt=_n:Rt.sibling=_n,Rt=_n);return Cn&&Js(he,Ot),Mt}for(bt=y(he,bt);!_n.done;Ot++,_n=ge.next())_n=ot(bt,he,Ot,_n.value,Ge),_n!==null&&(o&&_n.alternate!==null&&bt.delete(_n.key===null?Ot:_n.key),ne=b(_n,ne,Ot),Rt===null?Mt=_n:Rt.sibling=_n,Rt=_n);return o&&bt.forEach(function(QA){return l(he,QA)}),Cn&&Js(he,Ot),Mt}function ei(he,ne,ge,Ge){if(typeof ge=="object"&&ge!==null&&ge.type===F&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case O:e:{for(var Mt=ge.key,Rt=ne;Rt!==null;){if(Rt.key===Mt){if(Mt=ge.type,Mt===F){if(Rt.tag===7){p(he,Rt.sibling),ne=A(Rt,ge.props.children),ne.return=he,he=ne;break e}}else if(Rt.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ue&&ld(Mt)===Rt.type){p(he,Rt.sibling),ne=A(Rt,ge.props),ne.ref=mu(he,Rt,ge),ne.return=he,he=ne;break e}p(he,Rt);break}else l(he,Rt);Rt=Rt.sibling}ge.type===F?(ne=Du(ge.props.children,he.mode,Ge,ge.key),ne.return=he,he=ne):(Ge=bm(ge.type,ge.key,ge.props,null,he.mode,Ge),Ge.ref=mu(he,ne,ge),Ge.return=he,he=Ge)}return k(he);case U:e:{for(Rt=ge.key;ne!==null;){if(ne.key===Rt)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){p(he,ne.sibling),ne=A(ne,ge.children||[]),ne.return=he,he=ne;break e}else{p(he,ne);break}else l(he,ne);ne=ne.sibling}ne=V_(ge,he.mode,Ge),ne.return=he,he=ne}return k(he);case ue:return Rt=ge._init,ei(he,ne,Rt(ge._payload),Ge)}if(qe(ge))return pt(he,ne,ge,Ge);if(K(ge))return yt(he,ne,ge,Ge);gu(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ne!==null&&ne.tag===6?(p(he,ne.sibling),ne=A(ne,ge),ne.return=he,he=ne):(p(he,ne),ne=B_(ge,he.mode,Ge),ne.return=he,he=ne),k(he)):p(he,ne)}return ei}var ma=ud(!0),_u=ud(!1),ga=Un(null),_a=null,Qs=null,dl=null;function va(){dl=Qs=_a=null}function vu(o){var l=ga.current;wn(ga),o._currentValue=l}function yu(o,l,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===p)break;o=o.return}}関数 Po(o,l){_a=o,dl=Qs=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&l&&(Yt=!0),o.firstContext=null)}関数 gr(o){var l=o._currentValue;if(dl!==o)if(o={context:o,memoizedValue:l,next:null},Qs===null){if(_a===null)throw Error(t(308));Qs=o,_a.dependencies={lanes:0,firstContext:o}}else Qs=Qs.next=o;return l}var $s=null;function cd(o){$s===null?$s=[o]:$s.push(o)}function xu(o,l,p,y){var A=l.interleaved;return A===null?(p.next=p,cd(l)):(p.next=A.next,A.next=p),l.interleaved=p,os(o,y)}function os(o,l){o.lanes|=l;var p=o.alternate;for(p!==null&&(p.lanes|=l),p=o,o=o.return;o!==null;)o.childLanes|=l,p=o.alternate,p!==null&&(p.childLanes|=l),p=o,o=o.return;return p.tag===3?p.stateNode:null}var vn=!1;function Gt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hn(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,Effects:o.Effects})}関数yn(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function In(o,l,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,hn&2){var A=y.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),y.pending=l,os(o,p)}return A=y.interleaved、A===null?(l.next=l、cd(y)):(l.next=A.next、A.next=l)、y.interleaved=l、os(o、p)}関数 bi(o、l、p){if(l=l.updateQueue、l!==null&&(l=l.shared、(p&4194240)!==0)){var y=l.lanes;y&=o.pendingLanes、p|=y、l.lanes=p、Bn(o、p)}}関数 ya(o、l){var p=o.updateQueue、y=o.alternate;if(y!==null&&(y=y.updateQueue、p===y)){var A=null、b=null;if(p=p.firstBaseUpdate、p!==null){do{var k={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};b===null?A=b=k:b=b.next=k,p=p.next}while(p!==null);b===null?A=b=l:b=b.next=l}else A=b=l;p={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:b,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=l:o.next=l,p.lastBaseUpdate=l}function On(o,l,p,y){var A=o.updateQueue;vn=!1;var b=A.firstBaseUpdate,k=A.lastBaseUpdate,Z=A.shared.pending;if(Z!==null){A.shared.pending=null;var ee=Z,ye=ee.next;ee.next=null,k===null?b=ye:k.next=ye,k=ee;var ue=o.alternate;Ue!==null&&(Ue=Ue.updateQueue,Z=Ue.lastBaseUpdate,Z!==k&&(Z===null?Ue.firstBaseUpdate=ye:Z.next=ye,Ue.lastBaseUpdate=ee))}if(b!==null){var ze=A.baseState;k=0,Ue=ye=ee=null,Z=b;do{var De=Z.lane,ot=Z.eventTime;if((y&De)===De){Ue!==null&&(Ue=Ue.next={eventTime:ot,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var pt=o,yt=Z;switch(De=l,ot=p,yt.tag){case 1:if(pt=yt.payload,typeof pt=="function"){ze=pt.call(ot,ze,De);break e}ze=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=yt.payload,De=typeof pt=="function"?pt.call(ot,ze,De):pt,De==null)break e;ze=J({},ze,De);break e;ケース 2:vn=!0}}Z.callback!==null&&Z.lane!==0&&(o.flags|=64,De=A.effects,De===null?A.effects=[Z]:De.push(Z))}else ot={eventTime:ot,lane:De,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ue===null?(ye=Ue=ot,ee=ze):Ue=Ue.next=ot、k|=De;if(Z=Z.next、Z===null){if(Z=A.shared.pending、Z===null)break;De=Z、Z=De.next、De.next=null、A.lastBaseUpdate=De、A.shared.pending=null}}while(!0);if(Ue===null&&(ee=ze),A.baseState=ee、A.firstBaseUpdate=ye、A.lastBaseUpdate=Ue、l=A.shared.interleaved、l!==null){A=l;do k|=A.lane、A=A.next;while(A!==l)}else b===null&&(A.shared.lanes=0);bu|=k、o.lanes=k、o.memoizedState=ze}}関数pl(o,l,p){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var y=o[l],A=y.callback;if(A!==null){if(y.callback=null,y=p,typeof A!="function")throw Error(t(191,A));A.call(y)}}}var bs={},_r=Un(bs),xa=Un(bs),eo=Un(bs);function qn(o){if(o===bs)throw Error(t(174));return o}function Su(o,l){switch(xn(eo,l),xn(xa,o),xn(_r,bs),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:dt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=dt(l,o)}wn(_r),xn(_r,l)}関数Io(){wn(_r),wn(xa),wn(eo)}関数 Sa(o){qn(eo.current);var l=qn(_r.current),p=dt(l,o.type);l!==p&&(xn(xa,o),xn(_r,p))}関数ml(o){xa.current===o&&(wn(_r),wn(xa))}var Rn=Un(0);function as(o){for(var l=o;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var gl=[];function Ps(){for(var o=0;o<gl.length;o++)gl[o]._workInProgressVersionPrimary=null;gl.length=0}var Ma=I.ReactCurrentDispatcher,wa=I.ReactCurrentBatchConfig,to=0,En=null,Fn=null,cn=null,ls=!1,Pi=!1,Lo=0,er=0;function xi(){throw Error(t(321))}function Mu(o,l){if(l===null)return!1;for(var p=0;p<l.length&&p<o.length;p++)if(!dr(o[p],l[p]))return!1;return!0}function wu(o,l,p,y,A,b){if(to=b,En=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ma.current=o===null||o.memoizedState===null?dm:pm,o=p(y,A),Pi){b=0;do{if(Pi=!1,Lo=0,25<=b)throw Error(t(301));b+=1,cn=Fn=null,l.updateQueue=null,Ma.current=mm,o=p(y,A)}while(Pi)}if(Ma.current=Af,l=Fn!==null&&Fn.next!==null,to=0,cn=Fn=En=null,ls=!1,l)throw Error(t(300));return o}function fd(){var o=Lo!==0;return Lo=0,o}function Si(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?En.memoizedState=cn=o:cn=cn.next=o,cn}function vr(){if(Fn===null){var o=En.alternate;o=o!==null?o.memoizedState:null}else o=Fn.next;var l=cn===null?En.memoizedState:cn.next;if(l!==null)cn=l,Fn=o;else{if(o===null)throwエラー(t(310));Fn=o,o={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},cn===null?En.memoizedState=cn=o:cn=cn.next=o}return cn}function _l(o,l){return typeof l=="function"?l(o):l}関数Eu(o){var l=vr(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=Fn,A=y.baseQueue,b=p.pending;if(b!==null){if(A!==null){var k=A.next;A.next=b.next,b.next=k}y.baseQueue=A=b,p.pending=null}if(A!==null){b=A.next,y=y.baseState;var Z=k=null,ee=null,ye=b;do{var ue=ye.lane;if((to&Ue)===Ue)ee!==null&&(ee=ee.next={lane:0,action:ye.action,hasEagerState:ye.hasEage rState,eagerState:ye.eagerState,next:null}),y=ye.hasEagerState?ye.eagerState:o(y,ye.action);else{var ze={lane:Ue,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};ee===null?(Z=ee=ze,k=y):ee=ee.next=ze,En.lanes|=Ue,bu|=Ue}ye=ye.next}while(ye! ==null&&ye!==b);ee===null?k=y:ee.next=Z,dr(y,l.memoizedState)||(Yt=!0),l.memoizedState=y,l.baseState=k,l.baseQueue=ee,p.lastRenderedState=y}if(o=p.interleaved,o!==null){A=o;do b=A.lane,En.lanes|=b,bu|=b,A=A.next;while(A!==o)}else A===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function no(o){var l=vr(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=p.dispatch,A=p.pending,b=l.memoizedState;if(A!==null){p.pending=null;var k=A=A.next;do b=o(b,k.action),k=k.next;while(k!==A);dr(b,l.memoizedState)||(Yt=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),p.lastRenderedState=b}return[b,y]}function hd(){}function dd(o,l){var p=En,y=vr(),A=l(),b=!dr(y.memoizedState,A);if(b&&(y.memoizedState=A,Yt=!0),y=y.queue,gd(am.bind(null,p,y,o),[o]),y.getSnapshot!==l||b||cn!==null&&cn.memoizedState.tag&1){if(p.flags|=2048,us(9,Tu.bind(null,p,y,A,l),void 0,null),Ii===null)throw Error(t(349));to&30||xf(p,l,A)}return A}関数xf(o,l,p){o.flags|=16384,o={getSnapshot:l,value:p},l=En.updateQueue,l===null?(l={lastEffect:null,stores:null},En.updateQueue=l,l.stores=[o]):(p=l.stores,p===null?l.stores=[o]:p.push(o))}function Tu(o,l,p,y){l.value=p,l.getSnapshot=y,lm(l)&&pd(o)}function am(o,l,p){return p(function(){lm(l)&&pd(o)})}function lm(o){var l=o.getSnapshot;o=o.value;try{var p=l();return!dr(o,p)}catch{return!0}}function pd(o){var l=os(o,1);l!==null&&ao(l,o,1,-1)}function md(o){var l=Si();return typeof o=="関数"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,las tRenderedReducer:_l,lastRenderedState:o},l.queue=o,o=o.dispatch=Ea.bind(null,En,o),[l.memoizedState,o]}関数私たち(o,l,p,y){戻るo={tag:o,create:l,destroy:p,deps:y,next:null},l=En.updateQueue,l===null?(l={lastEffect:null,stores:null},En.updateQueue=l,l.lastEffect=o.next=o):(p=l.lastEffect,p===null?l.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,l.lastEffect=o)),o}function um(){return vr().memoizedState}function Is(o,l,p,y){var A=Si();En.flags|=o,A.memoizedState=us(1|l,p,void 0,y===void 0?null:y)}function Au(o,l,p,y){var A=vr();y=y===void 0?null:y;var b=void 0;if(Fn!==null){var k=Fn.memoizedState;if(b=k.destroy,y!==null&&Mu(y,k.deps)){A.memoizedState=us(l,p,b,y);return}}En.flags|=o,A.memoizedState=us(1|l,p,b,y)}function Wi(o,l){return Is(8390656,8,o,l)}function gd(o,l){return Au(2048,8,o,l)}function _d(o,l){return Au(4,2,o,l)}function cm(o,l){return Au(4,4,o,l)}function fm(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function vd(o,l,p){return p=p!=null?p.concat([o]):null,Au(4,4,fm.bind(null,l,o),p)}関数 Sf(){}関数 hm(o,l){var p=vr();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&Mu(l,y[1])?y[0]:(p.memoizedState=[o,l],o)}関数 yr(o,l){var p=vr();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&Mu(l,y[1])?y[0]:(o=o(),p.memoizedState=[o,l],o)}関数Mf(o,l,p){&21?(dr(p,l)||(p=tn(),En.lanes|=p,bu|=p,o.baseState=!0),l):(o.baseState&&(o.baseState=!1,Yt=!0),o.memoizedState=p)}関数M_(o,l){var p=nn;nn=p!==0&&4>p?p:4,o(!0);var y=wa.transition;wa.transition={};try{o(!1),l()}finally{nn=p,wa.transition=y}}関数io(){return vr().memoizedState}関数wf(o,l,p){var y=Sl(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Cu(o))Ef(l,p);else if(p=xu(o,l,p,y),p!==null){var A=Sr();ao(p,o,y,A),Tf(p,l,y)}}関数 Ea(o,l,p){var y=Sl(o),A={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Cu(o))Ef(l,A);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var k=l.lastRenderedState,Z=b(k,p);if(A.hasEagerState=!0,A.eagerState=Z,dr(Z,k)){var ee=l.interleaved;ee===null?(A.next=A,cd(l)):(A.next=ee.next,ee.next=A),l.interleaved=A;return}}catch{}finally{}p=xu(o,l,A,y),p!==null&&(A=Sr(),ao(p,o,y,A),Tf(p,l,y))}}function Cu(o){var l=o.alternate;return o===En||l!==null&&l===En}function Ef(o,l){Pi=ls=!0;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}function Tf(o,l,p){if(p&4194240){var y=l.lanes;y&=o.pendingLanes,p|=y,l.lanes=p,Bn(o,p)}}var Af={readContext:gr,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},dm={readContext:gr,useCallback:function(o,l){return Si().memoizedState=[o,l===void 0?null:l],o},useContext:gr,useEffect:Wi,useImperativeHandle:function(o,l,p){return p=p!=null?p.concat([o]):null,Is(4194308,4,fm.bind(null,l,o),p)},useLayoutEffect:function(o,l){return Is(4194308,4,o,l)},useInsertionEffect:function(o,l){return Is(4,2,o,l)},useMemo:function(o,l){var p=Si();return l=l===void 0?null:l,o=o(),p.memoizedState=[o,l],o},useReducer:function(o,l,p){var y=Si();return l=p!==void 0?p(l):l,y.memoizedState=y.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},y.queue=o,o=o。dispatch=wf.bind(null,En,o),[y.memoizedState,o]},useRef:function(o){var l=Si();return o={current:o},l.memoizedState=o},useState:md,useDebugValue:Sf,useDeferredValue:function(o){return Si().memoizedState=o},useTransition:function(){var o=md(!1),l=o[0];return o=M_.bind(null,o[1]),Si().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,p){var y=En,A=Si();if(Cn){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),Ii===null)throw Error(t(349));to&30||xf(y,l,p)}A.memoizedState=p;var b={value:p,getSnapshot:l};return A.queue=b,Wi(am.bind(null,y,b,o),[o]),y.flags|=2048,us(9,Tu.bind(null,y,b,p,l),void 0,null),p},useId:function(){var o=Si(),l=Ii.identifierPrefix;if(Cn){var p=Ur,y=Ye;p=(y&~(1<<32-Pt(y)-1)).toString(32)+p,l=":"+l+"R"+p,p=Lo++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=er++,l=":"+l+"r"+p.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},pm={readContext:gr,useCallback:hm,useContext:gr,useEffect:gd,useImperativeHandle:vd,useInsertionEffect:_d,useLayoutEffect:cm,useMemo:yr,useReducer:Eu,useRef:um,useState:function(){return Eu(_l)},useDebugValue:Sf,useDeferredValue:function(o){var l=vr();return Mf(l,Fn.memoizedState,o)},useTransition:function(){var o=Eu(_l)[0],l=vr().memoizedState;return[o,l]},useMutableSource:hd,useSyncExternalStore:dd,useId:io,unstable_isNewReconciler:!1},mm={readContext:gr,useCallback:hm,useContext:gr,useEffect:gd,useImperativeHandle:vd,useInsertionEffect:_d,useLayoutEffect:cm,useMemo:yr,useReducer:no,useRef:um,useState:function(){return no(_l)},useDebugValue:Sf,useDeferredValue:function(o){var l=vr();return Fn===null?l.memoizedState=o:Mf(l,Fn.memoizedState,o)},useTransition:function(){var o=no(_l)[0],l=vr().memoizedState;return[o,l]},useMutableSource:hd,useSyncExternalStore:dd,useId:io,unstable_isNewReconciler:!1};function Fr(o,l){if(o&&o.defaultProps){l=J({},l),o=o.defaultProps;for(var p in o)l[p]===void 0&&(l[p]=o[p]);return l}return l}function Ru(o,l,p,y){l=o.memoizedState,p=p(y,l),p=p==null?l:J({},l,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Cf={isMounted:function(o){return(o=o._reactInternals)?Ms(o)===o:!1},enqueueSetState:function(o,l,p){o=o._reactInternals;var y=Sr(),A=Sl(o),b=yn(y,A);b.payload=l,p!=null&&(b.callback=p),l=In(o,b,A),l!==null&&(ao(l,o,A,y),bi(l,o,A))},enqueueReplaceState:function(o,l,p){o=o._reactInternals;var y=Sr(),A=Sl(o),b=yn(y,A);b.tag=1,b.payload=l,p!=null&&(b.callback=p),l=In(o,b,A),l!==null&&(ao(l,o,A,y),bi(l,o,A))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var p=Sr()、y=Sl(o)、A=yn(p,y);A.tag=2、l!=null&&(A.callback=l)、l=In(o,A,y)、l!==null&&(ao(l,o,y,p)、bi(l,o,y))}};function gm(o,l,p,y,A,b,k){return o=o.stateNode、typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,b,k):l.prototype&&l.prototype.isPureReactComponent?!sa(p,y)||!sa(A,b):!0}関数 c(o,l,p){var y=!1,A=js,b=l.contextType;return typeof b=="object"&&b!==null?b=gr(b):(A=Ri(l)?Zs:vi.current,y=l.contextTypes,b=(y=y!=null)?fa(o,A):js),l=new l(p,b),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Cf,o.stateNode=l,l._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=A,o.__reactInternalMemoizedMaskedChildContext=b),l}function f(o,l,p,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==o&&Cf.enqueueReplaceState(l,l.state,null)}function v(o,l,p,y){var A=o.stateNode;A.props=p,A.state=o.memoizedState,A.refs={},Gt(o);var b=l.contextType;typeof b=="object"&&b!==null?A.context=gr(b):(b=Ri(l)?Zs:vi.current,A.context=fa(o,b)),A.state=o.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Ru(o,l,b,p),A.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&Cf.enqueueReplaceState(A,A.state,null),On(o,p,A,y),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function w(o,l){try{var p="",y=l;do p+=xe(y),y=y.return;while(y);var A=p}catch(b){A=`getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&Cf.enqueueReplaceState(A,A.state,null),On(o,p,A,y),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function w(o,l){try{var p="",y=l;do p+=xe(y),y=y.return;while(y);var A=p}catch(b){A=`getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&Cf.enqueueReplaceState(A,A.state,null),On(o,p,A,y),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function w(o,l){try{var p="",y=l;do p+=xe(y),y=y.return;while(y);var A=p}catch(b){A=`
スタック生成エラー: `+b.message+`
`+b.stack}return{value:o,source:l,stack:A,digest:null}}関数C(o,l,p){return{value:o,source:null,stack:p??null,digest:l??null}}関数L(o,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var j=typeof WeakMap=="function"?WeakMap:Map;function ie(o,l,p){p=yn(-1,p),p.tag=3,p.payload={element:null};var y=l.value;return p.callback=function(){wm||(wm=!0,L_=y),L(o,l)},p}関数we(o,l,p){p=yn(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var A=l.value;p.payload=function(){return y(A)},p.callback=function(){L(o,l)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(p.callback=function(){L(o,l),typeof y!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var k=l.stack;this.componentDidCatch(l.value,{componentStack:k!==null?k:""})}),p}function Ve(o,l,p){var y=o.pingCache;if(y===null){y=o.pingCache=new j;var A=new Set;y.set(l,A)}else A=y.get(l),A===void 0&&(A=new Set,y.set(l,A));A.has(p)||(A.add(p),o=VA.bind(null,o,l,p),l.then(o,o))}function ut(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Ft(o,l,p,y,A){return o.mode&1?(o.flags|=65536,o.lanes=A,o):(o===l?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=yn(-1,1),l.tag=2,In(p,l,1))),p.lanes|=1),o)}var Ct=I.ReactCurrentOwner,Yt=!1;function nt(o,l,p,y){l.child=o===null?_u(l,null,p,y):ma(l,o.child,p,y)}function Mi(o,l,p,y,A){p=p.render;var b=l.ref;return Po(l,A),y=wu(o,l,p,y,b,A),p=fd(),o!==null&&!Yt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~A,Ta(o,l,A)):(Cn&&p&&rd(l),l.flags|=1,nt(o,l,y,A),l.child)}function xr(o,l,p,y,A){if(o===null){var b=p.type;return typeof b=="function"&&!z_(b)&&b.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=b,_e(o,l,b,y,A)):(o=bm(p.type,null,y,l,l.mode,A),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,!(o.lanes&A)){var k=b.memoizedProps;if(p=p.compare,p=p!==null?p:sa,p(k,y)&&o.ref===l.ref)return Ta(o,l,A)}return l.flags|=1,o=wl(b,y),o.ref=l.ref,o.return=l,l.child=o}function _e(o,l,p,y,A){if(o!==null){var b=o.memoizedProps;if(sa(b,y)&&o.ref===l.ref)if(Yt=!1,l.pendingProps=y=b,(o.lanes&A)!==0)o.flags&131072&&(Yt=!0);else return l.lanes=o.lanes,Ta(o,l,A)}return Qe(o,l,p,y,A)}function ae(o,l,p){var y=l.pendingProps、A=y.children、b=o!==null?o.memoizedState:null;if(y.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0、cachePool:null、transitions:null}、xn(bf,cs),cs|=p;else{if(!(p&1073741824))return o=b!==null?b.baseLanes|p:p、l.lanes=l.childLanes=1073741824、l.memoizedState={baseLanes:o、cachePool:null、transitions:null}、l.updateQueue=null、xn(bf,cs),cs|=o、null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=b!==null?b.baseLanes:p,xn(bf,cs),cs|=y}else b!==null?(y=b.baseLanes|p,l.memoizedState=null):y=p,xn(bf,cs),cs|=y;return nt(o,l,A,p),l.child}function Se(o,l){var p=l.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function Qe(o,l,p,y,A){var b=Ri(p)?Zs:vi.current;return b=fa(l,b),Po(l,A),p=wu(o,l,p,y,b,A),y=fd(),o!==null&&!Yt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~A,Ta(o,l,A)):(Cn&&y&&rd(l),l.flags|=1,nt(o,l,p,A),l.child)}関数xt(o,l,p,y,A){if(Ri(p)){var b=!0;ha(l)}else b=!1;if(Po(l,A),l.stateNode===null)vm(o,l),c(l,p,y),v(l,p,y,A),y=!0;else if(o===null){var k=l.stateNode、Z=l.memoizedProps;k.props=Z;var ee=k.context、ye=p.contextType;typeof ye=="object"&&ye!==null?ye=gr(ye):(ye=Ri(p)?Zs:vi.current、ye=fa(l,ye));var Ue=p.getDerivedStateFromProps、ze=typeof Ue=="function"||typeof k.getSnapshotBeforeUpdate=="function";ze||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Z!==y||ee!==ye)&&f(l,k,y,ye),vn=!1;var De=l.memoizedState;k.state=De,On(l,y,k,A),ee=l.memoizedState,Z!==y||De!==ee||Vi.current||vn?(typeof Ue=="function"&&(Ru(l,p,Ue,y),ee=l.memoizedState),(Z=vn||gm(l,p,Z,y,De,ee,ye))?(ze||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(l.flags|=4194308)):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=ee),k.props=y,k.state=ee,k.context=ye,y=Z):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{k=l.stateNode,Hn(o,l),Z=l.memoizedProps,ye=l.type===l.elementType?Z:Fr(l.type,Z),k.props=ye,ze=l.pendingProps,De=k.context,ee=p.contextType,typeof ee=="object"&&ee!==null?ee=gr(ee):(ee=Ri(p)?Zs:vi.current,ee=fa(l,ee));var ot=p.getDerivedStateFromProps;(Ue=typeof ot=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Z!==ze||De!==ee)&&f(l,k,y,ee),vn=!1,De=l.memoizedState,k.state=De,On(l,y,k,A);var pt=l.memoizedState;Z!==ze||De!==pt||Vi.current||vn?(typeof ot=="function"&&(Ru(l,p,ot,y),pt=l.memoizedState),(ye=vn||gm(l,p,ye,y,De,pt,ee)||!1)?(Ue||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,pt,ee)、typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,pt,ee)),typeof k.componentDidUpdate=="function"&&(l.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof k.componentDidUpdate!="function"||Z===o.memoizedProps&&De===o.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Z===o.memoizedProps&&De===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=pt),k.props=y,k.state=pt,k.context=ee,y=ye):(typeof k.componentDidUpdate!="function"||Z===o.memoizedProps&&De===o.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Z===o.memoizedProps&&De===o.memoizedState||(l.flags|=1024),y=!1)}return Vt(o,l,p,y,b,A)}function Vt(o,l,p,y,A,b){Se(o,l);var k=(l.flags&128)!==0;if(!y&&!k)return A&&nd(l,p,!1),Ta(o,l,b);y=l.stateNode,Ct.current=l;var Z=k&&typeof p.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,o!==null&&k?(l.child=ma(l,o.child,null,b),l.child=ma(l,null,Z,b)):nt(o,l,Z,b),l.memoizedState=y.state,A&&nd(l,p,!0),l.child}function kt(o){var l=o.stateNode;l.pendingContext?td(o,l.pendingContext,l.pendingContext!==l.context):l.context&&td(o,l.context,!1),Su(o,l.containerInfo)}function ln(o,l,p,y,A){return bo(),hl(A),l.flags|=256,nt(o,l,p,y),l.child}var jn={dehydrated:null,treeContext:null,retryLane:0};function an(o){return{baseLanes:o,cachePool:null,transitions:null}}関数ro(o,l,p){var y=l.pendingProps,A=Rn.current,b=!1,k=(l.flags&128)!==0,Z;if((Z=k)||(Z=o!==null&&o.memoizedState===null?!1:(A&2)!==0),Z?(b=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(A|=1),xn(Rn,A&1),o===null)return vf(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(l.mode&1?o.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(k=y.children,o=y.fallback,b?(y=l.mode,b=l.child,k={mode:"hidden",children:k},!(y&1)&&b!==null?(b.ch ildLanes=0,b.pendingProps=k):b=Pm(k,y,0,null),o=Du(o,y,p,null),b.return=l,o.return=l,b.sibling=o,l.child=b,l.child.memoizedState=an(p),l.memoizedState=jn,o):yd(l,k));if(A=o.memoizedState,A!==null&&(Z=A.dehydrated,Z!==null))return bA(o,l,k,y,Z,A,p);if(b){b=y.fallback,k=l.mode,A=o.child,Z=A.sibling;var ee={mode:"hidden",children:y.children};return!(k&1)&&l.child!==A?(y=l.child,y.childLanes=0,y.pendingProps=ee,l.deletions=null):(y=wl(A,ee),y.subtreeFlags=A.subtreeFlags&14680064),Z!==null?b=wl(Z,b):(b=Du(b,k,p,null),b.flags|=2),b.retu rn=l,y.return=l,y.sibling=b,l.child=y,y=b,b=l.child,k=o.child.memoizedState,k=k===null?an(p):{baseLanes:k.baseLanes|p,cachePool:null,transitions:k.transitions},b.memoizedState=k,b.childLanes=o.childLanes&~p,l.memoizedState=jn,y}return b=o.child,o=b.sibling,y=wl(b,{mode:"visible",children:y.children}),!(l.mode&1)&&(y.lanes=p),y.return=l,y.sibling=null,o!==null&&(p=l.deletions,p===null?(l.deletions=[o],l.flags|=16):p.push(o)),l.child=y,l.memoizedState=null,y}関数 yd(o,l){return l=Pm({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}関数 _m(o,l,p,y){return y!==null&&hl(y),ma(l,o.child,null,p),o=yd(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}関数bA(o,l,p,y,A,b,k){if(p)return l.flags&256?(l.flags&=-257,y=C(Error(t(422))),_m(o,l,k,y)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(b=y.fallback,A=l.mode,y=Pm({mode:"visible",children:y.children},A,0,null),b=Du(b,A,k,null),b.flags|=2,y.return=l,b.return=l,y.sibling=b,l.child=y,l.mode&1&&ma(l,o.child,null,k),l.child.memoizedState=an(k),l.memoizedState=jn,b);if(!(l.mode&1))return _m(o,l,k,null);if(A.data==="$!"){if(y=A.nextSibling&&A.nextSibling.dataset,y)var Z=y.dgst;return y=Z,b=Error(t(419)),y=C(b,y,void 0),_m(o,l,k,y)}if(Z=(k&o.childLanes)!==0,Yt||Z){if(y=Ii,y!==null){switch(k&-k){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:ケース 262144:ケース 524288:ケース 1048576:ケース 2097152:ケース 4194304:ケース 8388608:ケース 16777216:ケース 33554432:ケース 67108864:A=32;break;ケース 536870912:A=268435456;break;デフォルト:A=0}A=A&(y.suspendedLanes|k)?0:A,A!==0&&A!==b.retryLane&&(b.retryLane=A,os(o,A),ao(y,o,A,-1))}return k_(),y=C(Error(t(421))),_m(o,l,k,y)}return A.data==="$?"?(l.flags|=128,l.child=o.child,l=HA.bind(null,o),A._reactRetry=l,null):(o=b.treeContext,Gi=Ys(A.nextSibling),yi=l,Cn=!0,Or=null,o!==null&&(Hi[ui++]=Ye,Hi[ui++]=Ur,Hi[ui++]=pa,Ye=o.id,Ur=o.overflow,pa=l),l=yd(l,y.children),l.flags|=4096,l)}関数Zx(o,l,p){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),yu(o.return,l,p)}関数w_(o,l,p,y,A){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:A}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=y,b.tail=p,b.tailMode=A)}関数 Jx(o,l,p){var y=l.pendingProps、A=y.revealOrder、b=y.tai​​l;if(nt(o,l,y.children,p),y=Rn.current,y&2)y=y&1|2,l.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Zx(o,p,l);else if(o.tag===19)Zx(o,p,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(xn(Rn,y),!(l.mode&1))l.memoizedState=null;else switch(A){case"forwards":for(p=l.child,A=null;p!==null;)o=p.alternate,o!==null&&as(o)===null&&(A=p),p=p.sibling;p=A,p===null?(A=l.child,l.child=null):(A=p.sibling,p.sibling=null),w_(l,!1,A,p,b);break;case"backwards":for(p=null,A=l.child,l.child=null;A!==null;){if(o=A.alternate,o!==null&&as(o)===null){l.child=A;break}o=A.sibling,A.sibling=p,p=A,A=o}w_(l,!0,p,null,b);break;case"together":w_(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function vm(o,l){!(l.mode&1)&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Ta(o,l,p){if(o!==null&&(l.dependency=o.dependency),bu|=l.lanes,!(p&l.childLanes))return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,p=wl(o,o.pendingProps),l.child=p,p.return=l;o.sibling!==null;)o=o.sibling,p=p.sibling=wl(o,o.pendingProps),p.return=l;p.sibling=null}return l.child}関数PA(o,l,p){switch(l.tag){case 3:kt(l),bo();break;case 5:Sa(l);break;case 1:Ri(l.type)&&ha(l);break;case 4:Su(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,A=l.memoizedProps.value;xn(ga,y._currentValue),y._currentValue=A;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(xn(Rn,Rn.current&1),l.flags|=128,null):p&l.child.childLanes?ro(o,l,p):(xn(Rn,Rn.current&1),o=Ta(o,l,p),o!==null?o.sibling:null);xn(Rn,Rn.current&1);break;case 19:if(y=(p&l.childLanes)!==0,o.flags&128){if(y)return Jx(o,l,p);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),xn(Rn,Rn.current),y)break;return null;case 22:case 23:return l.lanes=0,ae(o,l,p)}return Ta(o,l,p)}var Kx,E_,Qx,$x;Kx=function(o,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},E_=function(){},Qx=function(o,l,p,y){var A=o.memoizedProps;if(A!==y){o=l.stateNode,qn(_r.current);var b=null;switch(p){case"input":A=Y(o,A),y=Y(o,y),b=[];break;case"select":A=J({},A,{value:void 0}),y=J({},y,{value:void 0}),b=[];break;case"textarea":A=V(o,A),y=V(o,y),b=[];break;default:typeof A.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=cu)}Qt(p,y);var k;p=null;for(ye in A)if(!y.hasOwnProperty(ye)&&A.hasOwnProperty(ye)&&A[ye]!=null)if(ye==="style"){var Z=A[ye];for(k in Z)Z.hasOwnProperty(k)&&(p||(p={}),p[k]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="子供たち"&&ye!=="suppressContentEditableWarning"&&ye!=="suppres sHydrationWarning"&&ye!=="autoFocus"&&(i.hasOwnProperty(ye)?b||(b=[]):(b=b||[]).push(ye,null));for(ye in y){var ee=y[ye];if(Z=A!=null?A[ye]:void 0,y.hasOwnProperty(ye)&&ee!==Z&&(ee!=null||Z!=null))if(ye==="style")if(Z){for(k in Z)!Z.hasOwnProperty(k)||ee&&ee。hasOwnProperty(k)||(p||(p={}),p[k]="");for(k in ee)ee.hasOwnProperty(k)&&Z[k]!==ee[k]&&(p||(p={}),p[k]=ee[k])}else p||(b||(b=[]),b.push(ye,p)),p=ee;else ye==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,Z=Z?Z.__html:void 0,ee!=null&&Z!==ee&&(b=b||[]).push(ye,ee)):ye==="子供"?typeof ee!="string"&&typeof ee!="number"||(b=b||[]).push(ye,""+ee):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(ye)?(ee!=null&&ye==="onScroll"&&Mn("scroll",o),b||Z===ee||(b=[])):(b=b||[]).push(ye,ee))}p&&(b=b||[]).push("style",p);var ye=b;(l.updateQueue=ye)&&(l.flags|=4)}},$x=function(o,l,p,y){p!==y&&(l.flags|=4)};関数xd(o,l){if(!Cn)switch(o.tailMode){case"hidden":l=o.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}関数tr(o){var l=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(l)for(var A=o.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags&14680064,y|=A.flags&14680064,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=y,o.childLanes=p,l}function IA(o,l,p){var y=l.pendingProps;switch(Ks(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(l),null;case 1:return Ri(l.type)&&fu(),tr(l),null;case 3:return y=l.stateNode、Io()、wn(Vi)、wn(vi)、Ps()、y.pendingContext&&(y.context=y.pendingContext、y.pendingContext=null)、(o===null||o.child===null)&&(fl(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024、Or!==null&&(U_(Or)、Or=null)))、E_(o,l)、tr(l)、null;ケース5:ml(l);var A=qn(eo.current);if(p=l.type,o!==null&&l.stateNode!=null)Qx(o,l,p,y,A),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return tr(l),null}if(o=qn(_r.current),fl(l)){y=l.stateNode,p=l.type;var b=l.memoizedProps;switch(y[$n]=l,y[cl]=b,o=(l.mode&1)!==0,p){case"dialog":Mn("cancel",y),Mn("close",y);break;case"iframe":case"object":case"embed":Mn("load",y);break;case"video":case"audio":for(A=0;A<Co.length;A++)Mn(Co[A],y);break;case"source":Mn("error",y);break;case"img":case"image":case"link":Mn("error",y),Mn("load",y);break;case"details":Mn("toggle",y);break;case"input":_t(y,b),Mn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!b.multiple},Mn("invalid",y);break;case"textarea":pe(y,b),Mn("invalid",y)}Qt(p,b),A=null;for(var k in b)if(b.hasOwnProperty(k)){var Z=b[k];k==="children"?typeof Z=="string"?y.textContent!==Z&&(b.suppressHydrationWarning!==!0&&uu(y.textContent,Z,o),A=["children",Z]):typeof Z=="number"&&y.textContent!==""+Z&&(b.suppressHydrationWarning!==!0&&uu(y.textContent,Z,o),A=["children",""+Z]):i.hasOwnProperty(k)&&Z!=null&&k==="onScroll"&&Mn("scroll",y)}switch(p){case"input":Lt(y),We(y,b,!0);break;case"textarea":Lt(y),Le(y);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(y.onclick=cu)}y=A,l.updateQueue=y,y!==null&&(l.flags|=4)}else{k=A.nodeType===9?A:A.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ae(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=k.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="文字列"?o=k.createElement(p,{is:y.is}):(o=k.createElement(p),p==="選択"&&(k=o,y.multiple?k.multiple=!0:y.size&&(k.size=y.size))):o=k.createElementNS(o,p),o[$n]=l,o[cl]=y,Kx(o,l,!1,!1),l.stateNode=o;e:{switch(k=Nt(p,y),p){case"dialog":Mn("キャンセル",o),Mn("閉じる",o),A=y;break;case"iframe":case"object":case"embed":Mn("ロード",o),A=y;break;case"ビデオ" :case"audio":for(A=0;A<Co.length;A++)Mn(Co[A],o);A=y;break;case"source":Mn("error",o),A=y;break;case"img":case"image":case"link":Mn("error",o),Mn("load",o),A=y;break;case"details":Mn("toggle",o),A=y;break;case"input":_t(o,y),A=Y(o,y),Mn("invalid",o);break;case"option":A=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},A=J({},y,{value:void 0}),Mn("無効",o);break;case"textarea":pe(o,y),A=V(o,y),Mn("無効",o);break;default:A=y}Qt(p,A),Z=A;for(b in Z)if(Z.hasOwnProperty(b)){var ee=Z[b];b==="style"?It(o,ee):b==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&st(o,ee)):b==="children"?typeof ee=="string"?(p!=="textarea"||ee!=="")&&Bt(o,ee):typeof ee=="number"&&Bt(o,""+ee):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?ee!=null&&b==="onScroll"&&Mn("scroll",o):ee!=null&&P(o,b,ee,k))}switch(p){case"input":Lt(o),We(o,y,!1);break;case"textarea":Lt(o),Le(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Xe(y.value));break;case"select":o.multiple=!!y.multiple,b=y.value,b!=null?X(o,!!y.multiple,b,!1):y.defaultValue!=null&&X(o,!!y.multiple,y.defaultValue,!0);break;default:typeof A.onClick=="function"&&(o.onclick=cu)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return tr(l),null;case 6:if(o&&l.stateNode!=null)$x(o,l,o.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(p=qn(eo.current),qn(_r.current),fl(l)){if(y=l.stateNode,p=l.memoizedProps,y[$n]=l,(b=y.nodeValue!==p)&&(o=yi,o!==null))switch(o.tag){case 3:uu(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&uu(y.nodeValue,p,(o.mode&1)!==0)}b&&(l.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[$n]=l,l.stateNode=y}return tr(l),null;case 13:if(wn(Rn),y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Cn&&Gi!==null&&l.mode&1&&!(l.flags&128))ad(),bo(),l.flags|=98560,b=!1;else if(b=fl(l),y!==null&&y.dehydrated!==null){if(o===null){if(!b)throw Error(t(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[$n]=l}else bo(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;tr(l),b=!1}else Or!==null&&(U_(Or),Or=null),b=!0;if(!b)return l.flags&65536?l:null}return l.flags&128?(l.lanes=p,l):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(l.child.flags|=8192,l.mode&1&&(o===null||Rn.current&1?wi===0&&(wi=3):k_())),l.updateQueue!==null&&(l.flags|=4),tr(l),null);ケース4:return Io(),E_(o,l),o===null&&al(l.stateNode.containerInfo),tr(l),null;ケース10:return vu(l.type._context),tr(l),null;ケース17:return Ri(l.type)&&fu(),tr(l),null;ケース19:if(wn(Rn),b=l.memoizedState,b===null)return tr(l),null;if(y=(l.flags&128)!==0,k=b.rendering,k===null)if(y)xd(b,!1);else{if(wi!==0||o!==null&&o.flags&128)for(o=l.child;o!==null;){if(k=as(o),k!==null){for(l.flags|=128,xd(b,!1),y=k.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=p,p=l.child;p!==null;)b=p,o=y,b.flags&=14680066,k=b.alter nate、k===null?(b.childLanes=0、b.lanes=o、b.child=null、b.subtreeFlags=0、b.memoizedProps=null、b.memoizedState=null、b.updateQueue=null、b.dependencies=null、b.stateNode=null):(b.childLanes=k.childLanes、b.lanes=k.lanes、b.child=k.child、b.subtreeFlags=0、b.deletions=null、b.memoizedProps=k.memoizedProps、b.memoizedState=k.memoizedState、b.updateQueue=k.updateQueue、b.type=k.type、o=k.dependencies、b.dependencies=o===null?null:{lanes:o.lanes、firstContext:o.firstContext})、p=p.sibling;戻り値xn(Rn,Rn.current&1|2),l.child}o=o.sibling}b.tail!==null&&fe()>Pf&&(l.flags|=128,y=!0,xd(b,!1),l.lanes=4194304)}else{if(!y)if(o=as(k),o!==null){if(l.flags|=128,y=!0,p=o.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),xd(b,!0),b.tail===null&&b.tailMode==="hidden"&&!k.alternate&&!Cn)return tr(l),null}else 2*fe()-b.renderingStartTime>Pf&&p!==1073741824&&(l.flags|=128,y=!0,xd(b,!1),l.lanes=4194304);b.isBackwards?(k.sibling=l.child,l.child=k):(p=b.last,p!==null?p.sibling=k:l.child=k,b.last=k)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=fe(),l.sibling=null,p=Rn.current,xn(Rn,y?p&1|2:p&1),l):(tr(l),null);ケース22:ケース23:return F_(),y=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(l.flags|=8192),y&&l.mode&1?cs&1073741824&&(tr(l),l.subtreeFlags&6&&(l.flags|=8192)):tr(l),null;ケース24:nullを返す;ケース25:nullを返す}throw Error(t(156,l.tag))}function LA(o,l){switch(Ks(l),l.tag){ケース1:Ri(l.type)を返す&&fu(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;ケース3:return Io(),wn(Vi),wn(vi),Ps(),o=l.flags,o&65536&&!(o&128)?(l.flags=o&-65537|128,l):null;ケース5:return ml(l),null;ケース13:if(wn(Rn),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));bo()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;ケース19:return wn(Rn),null;ケース4:return Io(),null;ケース10:return vu(l.type._context),null;ケース22:ケース23: return F_(),null;case 24:return null;default: return null}}var ym=!1,nr=!1,DA=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Rf(o,l){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Zn(o,l,y)}else p.current=null}function T_(o,l,p){try{p()}catch(y){Zn(o,l,y)}}var eS=!1;function NA(o,l){if(ul=br,o=Nn(),si(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var A=y.anchorOffset,b=y.focusNode;y=y.focusOffset;try{p.nodeType,b.nodeType}catch{p=null;break e}var k=0,Z=-1,ee=-1,ye=0,Ue=0,ze=o,De=null;t:for(;;){for(var ot;ze!==p||A!==0&&ze.nodeType!==3||(Z=k+A),ze!==b||y!==0&&ze.nodeType!==3||(ee=k+y),ze.nodeTyp e===3&&(k+=ze.nodeValue.length),(ot=ze.firstChild)!==null;)De=ze,ze=ot;for(;;){if(ze===o)break t;if(De===p&&++ye===A&&(Z=k),De===b&&++Ue===y&&(ee=k),(ot=ze.nextSibling)!==null)break;ze=De,De=ze.parentNode}ze=ot}p=Z===-1||ee===-1?null:{start:Z,end:ee}}else p=null}p=p||{start:0,end:0}}else p=null;for(Zh={focusedElem:o,選択範囲:p},br=!1,ht=l;ht!==null;)if(l=ht,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,ht=o;else for(;ht!==null;){l=ht;try{var pt=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var yt=pt.memoizedProps, ei=pt.memoizedState, he=l.stateNode, ne=he.getSnapshotBeforeUpdate(l.elementType===l.type?yt:Fr(l.type,yt),ei);he.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ge=l.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ge){Zn(l,l.return,Ge)}if(o=l.sibling,o!==null){o.return=l.return,ht=o;break}ht=l.return}return pt=eS,eS=!1,pt}function Sd(o,l,p){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var A=y=y.next;do{if((A.tag&o)===o){var b=A.destroy;A.destroy=void 0,b!==void 0&&T_(l,p,b)}A=A.next}while(A!==y)}}function xm(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==l)}}関数A_(o){var l=o.ref;if(l!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof l=="function"?l(o):l.current=o}}関数tS(o){var l=o.alternate;l!==null&&(o.alternate=null,tS(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[$n],delete l[cl],delete l[ca],delete l[ff],delete l[hf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}関数 nS(o){return o.tag===5||o.tag===3||o.tag===4}関数iS(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||nS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)続き e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}関数 C_(o,l,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(o,l):p.insertBefore(o,l):(p.nodeType===8?(l=p) .parentNode,l.insertBefore(o,p)):(l=p,l.appendChild(o)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=cu));else if(y!==4&&(o=o.child,o!==null))for(C_(o,l,p),o=o.sibling;o!==null;)C_(o,l,p),o=o.sibling}function R_(o,l,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?p.insertBefore(o,l):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(R_(o,l,p),o=o.sibling;o!==null;)R_(o,l,p),o=o.sibling}var Xi=null,so=!1;function vl(o,l,p){for(p=p.child;p!==null;)rS(o,l,p),p=p.sibling}function rS(o,l,p){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(wt,p)}catch{}switch(p.tag){case 5:nr||Rf(p,l);case 6:var y=Xi,A=so;Xi=null,vl(o,l,p),Xi=y,so=A,Xi!==null&&(so?(o=Xi,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):Xi.removeChild(p.stateNode));break;case 18:Xi!==null&&(so?(o=Xi,p=p.stateNode,o.nodeType===8?cf(o.parentNode,p):o.nodeType===1&&cf(o,p),Ql(o)):cf(Xi,p.stateNode));break;case 4:y=Xi,A=so,Xi=p.stateNode.containerInfo,so=!0,vl(o,l,p),Xi=y,so=A;break;case 0:case 11:case 14:case 15:if(!nr&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){A=y=y.next;do{var b=A,k=b.destroy;b=b.tag,k!==void 0&&(b&2||b&4)&&T_(p,l,k),A=A.next}while(A!==y)}vl(o,l,p);break;case 1:if(!nr&&(Rf(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(Z){Zn(p,l,Z)}vl(o,l,p);break;case 21:vl(o,l,p);break;case 22:p.mode&1?(nr=(y=nr)||p.memoizedState!==null,vl(o,l,p),nr=y):vl(o,l,p);break;default:vl(o,l,p)}}function sS(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new DA),l.forEach(function(y){var A=GA.bind(null,o,y);p.has(y)||(p.add(y),y.then(A,A))})}}function oo(o,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var A=p[y];try{var b=o,k=l,Z=k;e:for(;Z!==null;){switch(Z.tag){case 5:Xi=Z.stateNode,so=!1;break e;case 3:Xi=Z.stateNode.containerInfo,so=!0;break e;case 4:Xi=Z.stateNode.containerInfo,so=!0;break e}Z=Z.return}if(Xi===null)throw Error(t(160));rS(b,k,A),Xi=null,so=!1;var ee=A.alternate;ee!==null&&(ee.return=null),A.return=null}catch(ye){Zn(A,l,ye)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)oS(l,o),l=l.sibling}function oS(o,l){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(oo(l,o),Do(o),y&4){try{Sd(3,o,o.return),xm(3,o)}catch(yt){Zn(o,o.return,yt)}try{Sd(5,o,o.return)}catch(yt){Zn(o,o.return,yt)}}break;case 1:oo(l,o),Do(o),y&512&&p!==null&&Rf(p,p.return);break;case 5:if(oo(l,o),Do(o),y&512&&p!==null&&Rf(p,p.return),o.flags&32){var A=o.stateNode;try{Bt(A,"")}catch(yt){Zn(o,o.return,yt)}}if(y&4&&(A=o.stateNode,A!=null)){var b=o.memoizedProps,k=p!==null?p.memoizedProps:b,Z=o.type,ee=o.updateQueue;if(o.updateQueue=null,ee!==null)try{Z==="input"&&b.type==="radio"&&b.name!=null&&Fe(A,b),Nt(Z,k);var ye=Nt(Z,b);for(k=0;k<ee.length;k+=2){var Ue=ee[k],ze=ee[k+1];Ue==="style"?It(A,ze):Ue==="dangerouslySetInnerHTML"?st(A,ze):Ue==="children"?Bt(A,ze):P(A,Ue,ze,ye)}switch(Z){case"input":rt(A,b);break;case"textarea":Ee(A,b);break;case"select":var De=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!b.multiple;var ot=b.value;ot!=null?X(A,!!b.multiple,ot,!1):De!==!!b.multiple&&(b.defaultValue!=null?X(A,!!b.multiple,b.defaultValue,!0):X(A,!!b.multiple,b.multiple?[]:"",!1))}A[cl]=b}catch(yt){Zn(o,o.return,yt)}}break;case 6:if(oo(l,o),Do(o),y&4){if(o.stateNode===null)throw Error(t(162));A=o.stateNode,b=o.memoizedProps;try{A.nodeValue=b}catch(yt){Zn(o,o.return,yt)}}break;case 3:if(oo(l,o),Do(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Ql(l.containerInfo)}catch(yt){Zn(o,o.return,yt)}break;case 4:oo(l,o),Do(o);break;case 13:oo(l,o),Do(o),A=o.child,A.flags&8192&&(b=A.memoizedState!==null,A.stateNode.isHidden=b,!b||A.alternate!==null&&A.alternate.memoizedState!==null||(I_=fe())),y&4&&sS(o);break;case 22:if(Ue=p!==null&&p.memoizedState!==null,o.mode&1?(nr=(ye=nr)||Ue,oo(l,o),nr=ye):oo(l,o),Do(o),y&8192){if(ye=o.memoizedState!==null,(o.stateNode.isHidden=ye)&&!Ue&&o.mode&1)for(ht=o,Ue=o.child;Ue!==null;){for(ze=ht=Ue;ht!==null;){switch(De=ht,ot=De.child,De.tag){case 0:case 11:case 14:case 15:Sd(4,De,De.return);break;case 1:Rf(De,De.return);var pt=De.stateNode;if(typeof pt.componentWillUnmount=="function"){y=De,p=De.return;try{l=y,pt.props=l.memoizedProps,pt.state=l.memoizedState,pt.componentWillUnmount()}catch(yt){Zn(y,p,yt)}}break;case 5:Rf(De,De.return);break;case 22:if(De.memoizedState!==null){uS(ze);continue}}ot!==null?(ot.return=De,ht=ot):uS(ze)}Ue=Ue.sibling}e:for(Ue=null,ze=o;;){if(ze.tag===5){if(Ue===null){Ue=ze;try{A=ze.stateNode,ye?(b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(Z=ze.stateNode,ee=ze.memoizedProps.style,k=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,Z.style.display=At("display",k))}catch(yt){Zn(o,o.return,yt)}}}else if(ze.tag===6){if(Ue===null)try{ze.stateNode.nodeValue=ye?"":ze.memoizedProps}catch(yt){Zn(o,o.return,yt)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===o)&&ze.child!==null){ze.child.return=ze,ze=ze.child;Continue}if(ze===o)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===o)break e;Ue===ze&&(Ue=null),ze=ze.return}Ue===ze&&(Ue=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:oo(l,o),Do(o),y&4&&sS(o);break;case 21:break;default:oo(l,o),Do(o)}}関数 Do(o){var l=o.flags;if(l&2){try{e:{for(var p=o.return;p!==null;){if(nS(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var A=y.stateNode;y.flags&32&&(Bt(A,""),y.flags&=-33);var b=iS(o);R_(o,b,A);break;case 3:case 4:var k=y.stateNode.containerInfo,Z=iS(o);C_(o,Z,k);break;default:throw Error(t(161))}}catch(ee){Zn(o,o.return,ee)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function UA(o,l,p){ht=o,aS(o)}関数 aS(o,l,p){for(var y=(o.mode&1)!==0;ht!==null;){var A=ht,b=A.child;if(A.tag===22&&y){var k=A.memoizedState!==null||ym;if(!k){var Z=A.alternate,ee=Z!==null&&Z.memoizedState!==null||nr;Z=ym;var ye=nr;if(ym=k,(nr=ee)&&!ye)for(ht=A;ht!==null;)k=ht,ee=k.child,k。tag===22&&k.memoizedState!==null?cS(A):ee!==null?(ee.return=k,ht=ee):cS(A);for(;b!==null;)ht=b,aS(b),b=b.sibling;ht=A,ym=Z,nr=ye}lS(o)}else A.subtreeFlags&8772&&b!==null?(b.return=A,ht=b):lS(o)}}function lS(o){for(;ht!==null;){var l=ht;if(l.flags&8772){var p=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:nr||xm(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!nr)if(p===null)y.componentDidMount();else{var A=l.elementType===l.type?p.memoizedProps:Fr(l.type,p.memoizedProps);y.componentDidUpdate(A,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&pl(l,b,y);break;case 3:var k=l.updateQueue;if(k!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}pl(l,k,p)}break;case 5:var Z=l.stateNode;if(p===null&&l.flags&4){p=Z;var ee=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&p.focus();break;case"img":ee.src&&(p.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ye=l.alternate;if(ye!==null){var Ue=ye.memoizedState;if(Ue!==null){var ze=Ue.dehydrated;ze!==null&&Ql(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nr||l.flags&512&&A_(l)}catch(De){Zn(l,l.return,De)}}if(l===o){ht=null;break}if(p=l.sibling,p!==null){p.return=l.return,ht=p;break}ht=l.return}}function uS(o){for(;ht!==null;){var l=ht;if(l===o){ht=null;break}var p=l.sibling;if(p!==null){p.return=l.return,ht=p;break}ht=l.return}}function cS(o){for(;ht!==null;){var l=ht;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{xm(4,l)}catch(ee){Zn(l,p,ee)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var A=l.return;try{y.componentDidMount()}catch(ee){Zn(l,A,ee)}}var b=l.return;try{A_(l)}catch(ee){Zn(l,b,ee)}break;case 5:var k=l.return;try{A_(l)}catch(ee){Zn(l,k,ee)}}}catch(ee){Zn(l,l.return,ee)}if(l===o){ht=null;break}var Z=l.sibling;if(Z!==null){Z.return=l.return,ht=Z;break}ht=l.return}}var OA=Math.ceil,Sm=I.ReactCurrentDispatcher,b_=I.ReactCurrentOwner,Ls=I.ReactCurrentBatchConfig,hn=0,Ii=null,ci=null,Yi=0,cs=0,bf=Un(0),wi=0,Md=null,bu=0,Mm=0,P_=0,wd=null,kr=null,I_=0,Pf=1/0,Aa=null,wm=!1,L_=null,yl=null,Em=!1,xl=null,Tm=0,Ed=0,D_=null,Am=-1,Cm=0;function Sr(){return hn&6?fe():Am!==-1?Am:Am=fe()}関数Sl(o){return o.mode&1?hn&2&&Yi!==0?Yi&-Yi:S_.transition!==null?(Cm===0&&(Cm=tn()),Cm):(o=nn,o!==0||(o=window.event,o=o===void 0?16:Yp(o.type)),o):1}関数ao(o,l,p,y){if(50<Ed)throw Ed=0,D_=null,Error(t(185));ri(o,p,y),(!(hn&2)||o!==Ii)&&(o===Ii&&(!(hn&2)&& (Mm|=p),wi===4&&Ml(o,Yi)),zr(o,y),p===1&&hn===0&&!(l.mode&1)&&(Pf=fe()+500,du&&Rs()))}function zr(o,l){var p=o.callbackNode;ii(o,l);var y=mi(o,o===Ii?Yi:0);if(y===0)p!==null&&H(p),o.callbackNode=null,o.callbackPriority=0;else if(l=y&-y,o.callbackPriority!==l){if(p!=null&&H(p),l===1)o.tag===0?om(hS.bind(null,o)):pu(hS.bind(null,o)),x_(function(){!(hn&6)&&Rs()}),p=null;else{switch(Zi(y)){case 1:p=Oe;break;case 4:p=Ze;break;case 16:p=it;break;case 536870912:p=Et;break;default:p=it}p=xS(p,fS.bind(null,o))}o.callbackPriority=l,o.callbackNode=p}}function fS(o,l){if(Am=-1,Cm=0,hn&6)throw Error(t(327));var p=o.callbackNode;if(If()&&o.callbackNode!==p)return null;var y=mi(o,o===Ii?Yi:0);if(y===0)return null;if(y&30||y&o.expiredLanes||l)l=Rm(o,y);else{l=y;var A=hn;hn|=2;var b=pS();(Ii!==o||Yi!==l)&&(Aa=null,Pf=fe()+500,Iu(o,l));do try{zA();break}catch(Z){dS(o,Z)}while(!0);va(),Sm.current=b,hn=A,ci!==null?l=0:(Ii=null,Yi=0,l=wi)}if(l!==0){if(l===2&&(A=ws(o),A!==0&&(y=A,l=N_(o,A))),l===1)throw p=Md,Iu(o,0),Ml(o,y),zr(o,fe()),p;if(l===6)Ml(o,y);else{if(A=o.current.alternate,!(y&30)&&!FA(A)&&(l=Rm(o,y),l===2&&(b=ws(o),b!==0&&(y=b,l=N_(o,b))),l===1))throw p=Md,Iu(o,0),Ml(o,y),zr(o,fe()),p;switch(o.finishedWork=A,o.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:Lu(o,kr,Aa);break;case 3:if(Ml(o,y),(y&130023424)===y&&(l=I_+500-fe(),10<l)){if(mi(o,0)!==0)break;if(A=o.suspendedLanes,(A&y)!==y){Sr(),o.pingedLanes|=o.suspendedLanes&A;break}o.timeoutHandle=Kh(Lu.bind(null,o,kr,Aa),l);break}Lu(o,kr,Aa);break;case 4:if(Ml(o,y),(y&4194240)===y)break;for(l=o.eventTimes,A=-1;0<y;){var k=31-Pt(y);b=1<<k,k=l[k],k>A&&(A=k),y&=~b}if(y=A,y=fe()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*OA(y/1960))-y,10<y){o.timeoutHandle=Kh(Lu.bind(null,o,kr,Aa),y);break}Lu(o,kr,Aa);break;case 5:Lu(o,kr,Aa);break;default:throw Error(t(329))}}}return zr(o,fe()),o.callbackNode===p?fS.bind(null,o):null}関数N_(o,l){var p=wd;return o.current.memoizedState.isDehydrated&&(Iu(o,l).flags|=256),o=Rm(o,l),o!==2&&(l=kr,kr=p,l!==null&&U_(l)),o}関数U_(o){kr===null?kr=o:kr.push.apply(kr,o)}関数FA(o){for(var l=o;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var A=p[y],b=A.getSnapshot;A=A.value;try{if(!dr(b(),A))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if( l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}関数Ml(o,l){for(l&=~P_,l&=~Mm,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var p=31-Pt(l),y=1<<p;o[p]=-1,l&=~y}}関数hS(o){if(hn&6)throw Error(t(327));If();var l=mi(o,0);if(!(l&1))return zr(o,fe()),null;var p=Rm(o,l);if(o.tag!==0&&p===2){var y=ws(o);y!==0&&(l=y,p=N_(o,y))}if(p===1)throw p=Md,Iu(o,0),Ml(o,l),zr(o,fe()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Lu(o,kr,Aa),zr(o,fe()),null}function O_(o,l){var p=hn;hn|=1;try{return o(l)}finally{hn=p,hn===0&&(Pf=fe()+500,du&&Rs())}}function Pu(o){xl!==null&&xl.tag===0&&!(hn&6)&&If();var l=hn;hn|=1;var p=Ls.transition,y=nn;try{if(Ls.transition=null,nn=1,o)return o()}finally{nn=y,Ls.transition=p,hn=l,!(hn&6)&&Rs()}}function F_(){cs=bf.current,wn(bf)}function Iu(o,l){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,Qh(p)),ci!==null)for(p=ci.return;p!==null;){var y=p;switch(Ks(y),y.tag){case 1:y=y.type.childContextTypes、y!=null&&fu();break;ケース 3:Io()、wn(Vi)、wn(vi)、Ps();break;ケース 5:ml(y);break;ケース 4:Io();break;ケース 13:wn(Rn);break;ケース 19:wn(Rn);break;ケース 10:vu(y.type._context);break;ケース 22:case 23:F_()}p=p.return}if(Ii=o,ci=o=wl(o.current,null),Yi=cs=l,wi=0,Md=null,P_=Mm=bu=0,kr=wd=null,$s!==null){for(l=0;l<$s.length;l++)if(p=$s[l],y=p.interleaved,y!==null){p.interleaved=null;var A=y.next,b=p.pending;if(b!==null){var k=b.next;b.next=A,y.next=k}p.pending=y}$s=null}return o}function dS(o,l){do{var p=ci;try{if(va(),Ma.current=Af,ls){for(var y=En.memoizedState;y!==null;){var A=y.queue;A!==null&&(A.pending=null),y=y.next}ls=!1}if(to=0,cn=Fn=En=null,Pi=!1,Lo=0,b_.current=null,p===null||p.return===null){wi=1,Md=l,ci=null;break}e:{var b=o,k=p.return,Z=p,ee=l;if(l=Yi,Z.flags|=32768,ee!==null&&typeof ee=="オブジェクト"&&typeof ee.then=="関数"){var ye=ee,Ue=Z,ze=Ue.tag;if(!(Ue.mode&1)&&(ze===0||ze===11||ze===15)){var De=Ue.alternate;De?(Ue.updateQueue=De.updateQueue,Ue.memoizedState=De.memoizedState,Ue.lanes=De.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var ot=ut(k);if(ot!==null){ot.flags&=-257,Ft(ot,k,Z,b,l),ot.mode&1&&Ve(b,ye,l),l=ot,ee=ye;var pt=l.updateQueue;if(pt===null){var yt=new Set;yt.add(ee),l.updateQueue=yt}else pt.add(ee);break e}else{if(!(l&1)){Ve(b,ye,l),k_();break e}ee=Error(t(426))}}else if(Cn&&Z.mode&1){var ei=ut(k);if(ei!==null){!(ei.flags&65536)&&(ei.flags|=256),Ft(ei,k,Z,b,l),hl(w(ee,Z));break e}}b=ee=w(ee,Z),wi!==4&&(wi=2),wd===null?wd=[b]:wd.push(b),b=k;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var he=ie(b,ee,l);ya(b,he);break e;case 1:Z=ee;var ne=b.type,ge=b.stateNode;if(!(b.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(yl===null||!yl.has(ge)))){b.flags|=65536,l&=-l,b.lanes|=l;var Ge=we(b,Z,l);ya(b,Ge);break e}}b=b.return}while(b!==null)}gS(p)}catch(Mt){l=Mt,ci===p&&p!==null&&(ci=p=p.return);continue}break}while(!0)}function pS(){var o=Sm.current;return Sm.current=Af,o===null?Af:o}function k_(){(wi===0||wi===3||wi===2)&&(wi=4),Ii===null||!(bu&268435455)&&!(Mm&268435455)||Ml(Ii,Yi)}function Rm(o,l){var p=hn;hn|=2;var y=pS();(Ii!==o||Yi!==l)&&(Aa=null,Iu(o,l));do try{kA();break}catch(A){dS(o,A)}while(!0);if(va(),hn=p,Sm.current=y,ci!==null)throw Error(t(261));return Ii=null,Yi=0,wi}関数kA(){for(;ci!==null;)mS(ci)}関数 zA(){for(;ci!==null&&!oe();)mS(ci)}関数 mS(o){var l=yS(o.alternate,o,cs);o.memoizedProps=o.pendingProps,l===null?gS(o):ci=l,b_.current=null}関数 gS(o){var l=o;do{var p=l.alternate;if(o=l.return,l.flags&32768){if(p=LA(p,l),p!==null){p.flags&=32767,ci=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{wi=6,ci=null;return}}else if(p=IA(p,l,cs),p!==null){ci=p;return}if(l=l.sibling,l!==null){ci=l;return}ci=l=o}while(l!==null);wi===0&&(wi=5)}function Lu(o,l,p){var y=nn、A=Ls.transition;try{Ls.transition=null、nn=1、BA(o,l,p,y)}finally{Ls.transition=A、nn=y}return null}function BA(o,l,p,y){do If();while(xl!==null);if(hn&6)throw Error(t(327));p=o.finishedWork;var A=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null、o.finishedLanes=0、p===o.current)throw Error(t(177));o.callbackNode=null、o.callbackPriority=0;var b=p.lanes|p.childLanes;if(gi(o,b),o===Ii&&(ci=Ii=null,Yi=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||Em||(Em=!0,xS(it,function(){return If(),null})),b=(p.flags&15990)!==0,p.subtreeFlags&15990||b){b=Ls.transition,Ls.transition=null;var k=nn;nn=1;var Z=hn;hn|=4,b_.current=null,NA(o,p),oS(p,o),oi(Zh),br=!!ul,Zh=ul=null,o.current=p,UA(p),ve(),hn=Z,nn=k,Ls.transition=b}else o.current=p;if(Em&&(Em=!1,xl=o,Tm=A),b=o.pendingLanes,b===0&&(yl=null),vt(p.stateNode),zr(o,fe()),l!==null)for(y=o.onRecoverableError,p=0;p<l.length;p++)A=l[p],y(A.value,{componentStack:A.stack,digest:A.digest});if(wm)throw wm=!1,o=L_,L_=null,o;return Tm&1&&o.tag!==0&&If(),b=o.pendingLanes,b&1?o===D_?Ed++:(Ed=0,D_=o):Ed=0,Rs(),null}関数If(){if(xl!==null){var o=Zi(Tm),l=Ls.transition,p=nn;try{if(Ls.transition=null,nn=16>o?16:o,xl===null)var y=!1;else{if(o=xl,xl=null,Tm=0,hn&6)throw Error(t(331));var A=hn;for(hn|=4,ht=o.current;ht!==null;){var b=ht,k=b.child;if(ht.flags&16){var Z=b.deletions;if(Z!==null){for(var ee=0;ee<Z.length;ee++){var ye=Z[ee];for(ht=ye;ht!==null;){var Moe=ht;switch(Ue.tag){case 0:case 11:case 15:Sd(8,Ue,b)}var ze=Ue.child;if(ze!==null)ze.return=Ue,ht=ze;else for(;ht!==null;){Ue=ht;var De=Ue.sibling,ot=Ue.return;if(tS(Ue),Ue===ye){ht=null;break}if(De!==null){De.return=ot,ht=De;break}ht=ot}}}var pt=b.alternate;if(pt!==null){var yt=pt.child;if(yt!==null){pt.child=null;do{var ei=yt.sibling;yt.sibling=null,yt=ei}while(yt!==null)}}ht=b}}if(b.subtreeFlags&2064&&k!==null)k.return=b,ht=k;else e:for(;ht!==null;){if(b=ht,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Sd(9,b,b.return)}var he=b.sibling;if(he!==null){he.return=b.return,ht=he;break e}ht=b.return}}var ne=o.current;for(ht=ne;ht!==null;){k=ht;var ge=k.child;if(k.subtreeFlags&2064&&ge!==null)ge.return=k,ht=ge;else e:for(k=ne;ht!==null;){if(Z=ht,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:xm(9,Z)}}catch(Mt){Zn(Z,Z.return,Mt)}if(Z===k){ht=null;break e}var Ge=Z.sibling;if(Ge!==null){Ge.return=Z.return,ht=Ge;break e}ht=Z.return}}if(hn=A,Rs(),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(wt,o)}catch{}y=!0}return y}finally{nn=p,Ls.transition=l}}return!1}function _S(o,l,p){l=w(p,l),l=ie(o,l,1),o=In(o,l,1),l=Sr(),o!==null&&(ri(o,1,l),zr(o,l))}function Zn(o,l,p){if(o.tag===3)_S(o,o,p);else for(;l!==null;){if(l.tag===3){_S(l,o,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(yl===null||!yl.has(y))){o=w(p,o),o=we(l,o,1),l=In(l,o,1),o=Sr(),l!==null&&(ri(l,1,o),zr(l,o));break}}l=l.return}}function VA(o,l,p){var y=o.pingCache;y!==null&&y.delete(l),l=Sr(),o.pingedLanes|=o.suspendedLanes&p,Ii===o&&(Yi& p)===p&&(wi===4||wi===3&&(Yi&130023424)===Yi&&500>fe()-I_?Iu(o,0):P_|=p),zr(o,l)}関数vS(o,l){l===0&&(o.mode&1?(l=sn,sn<<=1,!(sn&130023424)&&(sn=4194304)):l=1);var p=Sr();o=os(o,l),o!==null&&(ri(o,l,p),zr(o,p))}関数 HA(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),vS(o,p)}関数 GA(o,l){var p=0;switch(o.tag){case 13:var y=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),vS(o,p)}var yS;yS=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||Vi.current)Yt=!0;else{if(!(o.lanes&p)&&!(l.flags&128))retup){var y=o.pingCache;y!==null&&y.delete(l),l=Sr(),o.pingedLanes|=o.suspendedLanes&p,Ii===o&&(Yi& p)===p&&(wi===4||wi===3&&(Yi&130023424)===Yi&&500>fe()-I_?Iu(o,0):P_|=p),zr(o,l)}関数vS(o,l){l===0&&(o.mode&1?(l=sn,sn<<=1,!(sn&130023424)&&(sn=4194304)):l=1);var p=Sr();o=os(o,l),o!==null&&(ri(o,l,p),zr(o,p))}関数 HA(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),vS(o,p)}関数 GA(o,l){var p=0;switch(o.tag){case 13:var y=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),vS(o,p)}var yS;yS=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||Vi.current)Yt=!0;else{if(!(o.lanes&p)&&!(l.flags&128))retup){var y=o.pingCache;y!==null&&y.delete(l),l=Sr(),o.pingedLanes|=o.suspendedLanes&p,Ii===o&&(Yi& p)===p&&(wi===4||wi===3&&(Yi&130023424)===Yi&&500>fe()-I_?Iu(o,0):P_|=p),zr(o,l)}関数vS(o,l){l===0&&(o.mode&1?(l=sn,sn<<=1,!(sn&130023424)&&(sn=4194304)):l=1);var p=Sr();o=os(o,l),o!==null&&(ri(o,l,p),zr(o,p))}関数 HA(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),vS(o,p)}関数 GA(o,l){var p=0;switch(o.tag){case 13:var y=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),vS(o,p)}var yS;yS=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||Vi.current)Yt=!0;else{if(!(o.lanes&p)&&!(l.flags&128))return Yt=!1,PA(o,l,p);Yt=!!(o.flags&131072)}else Yt=!1,Cn&&l.flags&1048576&&id(l,gf,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;vm(o,l),o=l.pendingProps;var A=fa(l,vi.current);Po(l,p),A=wu(null,l,y,o,A,p);var b=fd();return l.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(l.tag=1、l.memoizedState=null、l.updateQueue=null、Ri(y)?(b=!0、ha(l)):b=!1、l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null、Gt(l)、A.updater=Cf、l.stateNode=A、A._reactInternals=l、v(l、y、o、p)、l=Vt(null、l、y、!0、b、p)):(l.tag=0、Cn&&b&&rd(l)、nt(null、l、A、p)、l=l.child)、l;ケース16:y=l.elementType;e:{switch(vm(o,l),o=l.pendingProps,A=y._init,y=A(y._payload),l.type=y,A=l.tag=XA(y),o=Fr(y,o),A){case 0:l=Qe(null,l,y,o,p);break e;case 1:l=xt(null,l,y,o,p);break e;case 11:l=Mi(null,l,y,o,p);break e;case 14:l=xr(null,l,y,Fr(y.type,o),p);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type、A=l.pendingProps、A=l.elementType===y?A:Fr(y,A)、Qe(o,l,y,A,p);ケース1: return y=l.type、A=l.pendingProps、A=l.elementType===y?A:Fr(y,A)、xt(o,l,y,A,p);ケース3:e:{if(kt(l),o===null)throw Error(t(387));y=l.pendingProps、b=l.memoizedState、A=b.element、Hn(o,l)、On(l,y,null,p);var k=l.memoizedState;if(y=k.element,b.isDehydrated)if(b={element:y,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){A=w(Error(t(423)),l),l=ln(o,l,y,p,A);break e}else if(y!==A){A=w(Error(t(424)),l),l=ln(o,l,y,p,A);break e}else for(Gi=Ys(l.stateNode.containerInfo.firstChild),yi=l,Cn=!0,Or=null,p=_u(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(bo(),y===A){l=Ta(o,l,p);break e}nt(o,l,y,p)}l=l.child}return l;case 5:return Sa(l),o===null&&vf(l),y=l.type,A=l.pendingProps,b=o!==null?o.memoizedProps:null,k=A.children,Jh(y,A)?k=null:b!==null&&Jh(y,b)&&(l.flags|=32),Se(o,l),nt(o,l,k,p),l.child;ケース6:戻り値 o===null&&vf(l),null;ケース13:戻り値 ro(o,l,p);ケース4:戻り値 Su(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=ma(l,null,y,p):nt(o,l,y,p),l.child;ケース11:戻り値y=l.type、A=l.pendingProps、A=l.elementType===y?A:Fr(y,A),Mi(o,l,y,A,p);ケース7:nt(o,l,l.pendingProps,p),l.child を返します。ケース8:nt(o,l,l.pendingProps.children,p),l.child を返します。ケース12:nt(o,l,l.pendingProps.children,p),l.child を返します。ケース10:e:{if(y=l.type._context,A=l.pendingProps,b=l.memoizedProps,k=A.value,xn(ga,y._currentValue),y._currentValue=k,b!==null)if(dr(b.value,k)){if(b.children===A.children&&!Vi.current){l=Ta(o,l,p);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var Z=b.dependencies;if(Z!==null){k=b.child;for(var ee=Z.firstContext;ee!==null;){if(ee.context===y){if(b.tag===1){ee=yn(-1,p&-p),ee.tag=2;var ye=b.updateQueue;if(ye!==null){ye=ye.shared;var Moe=ye.pending;Ue===null?ee.next=ee:(ee.next=Ue.next,Ue.next=ee),ye.pending=ee}}b.lanes|=p,ee=b.alternate,ee!==null&&(ee.lanes|=p),yu(b.return,p,l),Z.lanes|=p;break}ee=ee.next}}else if(b.tag===10)k=b.type===l.type?null:b.child;else if(b.tag===18){if(k=b.return,k===null)throw Error(t(341));k.lanes|=p,Z=k.alternate,Z!==null&&(Z.lanes|=p),yu(k,p,l),k=b.sibling}else k=b.child;if(k!==null)k.return=b;else for(k=b;k!==null;){if(k===l){k=null;break}if(b=k.sibling,b!==null){b.return=k.return,k=b;break}k=k.return}b=k}nt(o,l,A.children,p),l=l.child}return l;case 9:return A=l.type,y=l.pendingProps.children,Po(l,p),A=gr(A),y=y(A),l.flags|=1,nt(o,l,y,p),l.child;case 14:return y=l.type,A=Fr(y,l.pendingProps),A=Fr(y.type,A),xr(o,l,y,A,p);case 15:return _e(o,l,l.type,l.pendingProps,p);case 17: return y=l.type,A=l.pendingProps,A=l.elementType===y?A:Fr(y,A),vm(o,l),l.tag=1,Ri(y)?(o=!0,ha(l)):o=!1,Po(l,p),c(l,y,A),v(l,y,A,p),Vt(null,l,y,!0,o,p);case 19: return Jx(o,l,p);case 22: return ae(o,l,p)}throw Error(t(156,l.tag))};function xS(o,l){return Dc(o,l)}function WA(o,l,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(o,l,p,y){return new WA(o,l,p,y)}function z_(o){return o=o.prototype,!(!o||!o.isReactComponent)}function XA(o){if(typeof o=="function")return z_(o)?1:0;if(o!=null){if(o=o.$$typeof,o===$)return 11;if(o===me)return 14}return 2}function wl(o,l){var p=o.alternate;return p===null?(p=Ds(o.tag,l,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=l,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lane s=o.lanes、p.child=o.child、p.memoizedProps=o.memoizedProps、p.memoizedState=o.memoizedState、p.updateQueue=o.updateQueue、l=o.dependencies、p.dependencies=l===null?null:{lanes:l.lanes、firstContext:l.firstContext}、p.sibling=o.sibling、p.index=o.index、p.ref=o.ref、p}関数bm(o,l,p,y,A,b){var k=2;if(y=o,typeof o=="function")z_(o)&&(k=1);else if(typeof o=="string")k=5;else e:switch(o){case F:return Du(p.children,A,b,l);case z:k=8,A|=8;break;case D:return o=Ds(12,p,l,A|2),o.elementType=D,o.lanes=b,o;case Q:return o=Ds(13,p,l,A),o.elementType=Q,o.lanes=b,o;case ce:return o=Ds(19,p,l,A),o.elementType=ce,o.lanes=b,o;case de:return Pm(p,A,b,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:k=10;break e;case G:k=9;break e;case $:k=11;break e;case me:k=14;break e;case ue:k=16,y=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Ds(k,p,l,A),l.elementType=o,l.type=y,l.lanes=b,l}function Du(o,l,p,y){return o=Ds(7,o,y,l),o.lanes=p,o}function Pm(o,l,p,y){return o=Ds(22,o,y,l),o.elementType=de,o.lanes=p,o.stateNode={isHidden:!1},o}function B_(o,l,p){return o=Ds(6,o,null,l),o.lanes=p,o}function V_(o,l,p){return l=Ds(4,o.children!==null?o.children:[],o.key,l),l.lanes=p,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function YA(o,l,p,y,A){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=y,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}関数H_(o,l,p,y,A,b,k,Z,ee){戻り値 o=new YA(o,l,p,Z,ee),l===1?(l=1,b===!0&&(l|=8)):l=0,b=Ds(3,null,null,l),o.current=b,b.stateNode=o,b.memoizedState={要素:y,isDehydrated:p,キャッシュ:null,遷移:null,保留サスペンス境界:null},Gt(b),o}関数 qA(o,l,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;戻り値{$$typeof:U,キー:y==null?null:""+y,子:o,コンテナ情報:l,実装:p}}関数SS(o){if(!o)return js;o=o._reactInternals;e:{if(Ms(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ri(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(Ri(p))return hu(o,p,l)}return l}function MS(o,l,p,y,A,b,k,Z,ee){return o=H_(p,y,!0,o,A,b,k,Z,ee),o.context=SS(null),p=o.current,y=Sr(),A=Sl(p),b=yn(y,A),b.callback=l??null,In(p,b,A),o.current.lanes=A,ri(o,A,y),zr(o,y),o}関数Im(o,l,p,y){var A=l.current,b=Sr(),k=Sl(A);return p=SS(p),l.context===null?l.context=p:l.pendingContext=p,l=yn(b,k),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=In(A,l,k),o!==null&&(ao(o,A,k,b),bi(o,A,k)),k}function Lm(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function wS(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<l?p:l}}function G_(o,l){wS(o,l),(o=o.alternate)&&wS(o,l)}function jA(){return null}var ES=typeof reportError=="function"?reportError:function(o){console.error(o)};function W_(o){this._internalRoot=o}Dm.prototype.render=W_.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Im(o,l,null,null)},Dm.prototype.unmount=W_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Pu(function(){Im(null,o,null,null)}),l[mr]=null}};function Dm(o){this._internalRoot=o}Dm.prototype.unstable_scheduleHydration=function(o){if(o){var l=Nc();o={blockedOn:null,target:o,優先度:l};for(var p=0;p<So.length&&l!==0&&l<So[p].priority;p++);So.splice(p,0,o),p===0&&Fc(o)}};function X_(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Nm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function TS(){}function ZA(o,l,p,y,A){if(A){if(typeof y=="function"){var b=y;y=function(){var ye=Lm(k);b.call(ye)}}var k=MS(l,y,o,0,null,!1,!1,"",TS);return o._reactRootContainer=k,o[mr]=k.current,al(o.nodeType===8?o.parentNode:o),Pu(),k}for(;A=o.lastChild;)o.removeChild(A);if(typeof y=="function"){var Z=y;y=function(){var ye=Lm(ee);Z.call(ye)}}var ee=H_(o,0,!1,null,null,!1,!1,"",TS);return o._reactRootContainer=ee,o[mr]=ee.current,al(o.nodeType===8?o.parentNode:o),Pu(function(){Im(l,ee,p,y)}),ee}function Um(o,l,p,y,A){var b=p._reactRootContainer;if(b){var k=b;if(typeof A=="function"){var Z=A;A=function(){var ee=Lm(k);Z.call(ee)}}Im(l,k,o,A)}else k=ZA(p,l,o,A,y);return Lm(k)}Zl=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var p=jt(l.pendingLanes);p!==0&&(Bn(l,p|1),zr(l,fe()),!(hn&6)&&(Pf=fe()+500,Rs()))}break;case 13:Pu(function(){var y=os(o,1);if(y!==null){var A=Sr();ao(y,o,1,A)}}),G_(o,1)}},Lh=function(o){if(o.tag===13){var l=os(o,134217728);if(l!==null){var p=Sr();ao(l,o,134217728,p)}G_(o,134217728)}},Xp=function(o){if(o.tag===13){var l=Sl(o),p=os(o,l);if(p!==null){var y=Sr();ao(p,o,l,y)}G_(o,l)}},Nc=function(){return nn},Uc=function(o,l){var p=nn;try{return nn=o,l()}最後に{nn=p}},Je=function(o,l,p){switch(l){case"input":if(rt(o,p),l=p.name,p.type==="radio"&&l!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==o&&y.form===o.form){var A=df(y);if(!A)throwエラー(t(90));Ne(y),rt(y,A)}}}break;case"textarea":Ee(o,p);break;case"select":l=p.value,l!=null&&X(o,!!p.multiple,l,!1)}},An=O_,Yn=Pu;var JA={usingClientEntryPoint:!1,Events:[qs,Vn,df,Ke,Ut,O_]},Td={findFiberByHostInstance:Ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:Td.bundleType,version:Td.version,rendererPackageName:Td.rendererPackageName,rendererConfig:Td.rendererConfig,overrideHookState:null 、overrideHookStateDeletePath:null、overrideHookStateRenamePath:null、overrideProps:null、overridePropsDeletePath:null、overridePropsRenamePath:null、setErrorHandler:null、setSuspenseHandler:null、scheduleUpdate:null、currentDispatcherRef:I.ReactCurrentDispatcher、findHostInstanceByFiber:function(o){return o=Ic(o),o===null?null:o.stateNode}、findFiberByHostInstance:Td.findFiberByHostInstance||jA、findHostInstancesForRefresh:null、scheduleRefresh:null、scheduleRoot:null、setRefreshHandler:null、getCurrentFiber:null、reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Om.isDisabled&&Om.supportsFiber)try{wt=Om.inject(KA),He=Om}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA,Br.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(l))throw Error(t(200));return qA(o,l,null,p)},Br.createRoot=function(o,l){if(!X_(o))throw Error(t(299));var p=!1,y="",A=ES;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=H_(o,1,!1,null,null,p,!1,y,A),o[mr]=l.current,al(o.nodeType===8?o.parentNode:o),new W_(l)},Br.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Om.isDisabled&&Om.supportsFiber)try{wt=Om.inject(KA),He=Om}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA,Br.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(l))throw Error(t(200));return qA(o,l,null,p)},Br.createRoot=function(o,l){if(!X_(o))throw Error(t(299));var p=!1,y="",A=ES;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=H_(o,1,!1,null,null,p,!1,y,A),o[mr]=l.current,al(o.nodeType===8?o.parentNode:o),new W_(l)},Br.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Om.isDisabled&&Om.supportsFiber)try{wt=Om.inject(KA),He=Om}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA,Br.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(l))throw Error(t(200));return qA(o,l,null,p)},Br.createRoot=function(o,l){if(!X_(o))throw Error(t(299));var p=!1,y="",A=ES;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=H_(o,1,!1,null,null,p,!1,y,A),o[mr]=l.current,al(o.nodeType===8?o.parentNode:o),new W_(l)},Br.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(l))throw Error(t(200));return qA(o,l,null,p)},Br.createRoot=function(o,l){if(!X_(o))throw Error(t(299));var p=!1,y="",A=ES;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=H_(o,1,!1,null,null,p,!1,y,A),o[mr]=l.current,al(o.nodeType===8?o.parentNode:o),new W_(l)},Br.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(l))throw Error(t(200));return qA(o,l,null,p)},Br.createRoot=function(o,l){if(!X_(o))throw Error(t(299));var p=!1,y="",A=ES;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=H_(o,1,!1,null,null,p,!1,y,A),o[mr]=l.current,al(o.nodeType===8?o.parentNode:o),new W_(l)},Br.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throwエラー(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ic(l),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return Pu(o)},Br.hydrate=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!0,p)},Br.hydrateRoot=function(o,l,p){if(!X_(o))throwエラー(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,b="",k=ES;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onRecoverableError!==void 0&&(k=p.onRecoverableError)),l=MS(l,null,o,1,p??null,A,!1,b,k),o[mr]=l.current,al(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new Dm(l)},Br.render=function(o,l,p){if(!Nm(l))throw Error(t(200));return Um(null,o,l,!1,p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**p)},Br.unmountComponentAtNode=function(o){if(!Nm(o))throw Error(t(40));return o._reactRootContainer?(Pu(function(){Um(null,null,o,!1,function(){o._reactRootContainer=null,o[mr]=null})}),!0):!1},Br.unstable_batchedUpdates=O_,Br.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Nm(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Um(o,l,p,!1,y)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var DS;function sC(){if(DS)return j_.exports;DS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),j_.exports=rC(),j_.exports}var NS;function oC(){if(NS)return Fm;NS=1;var s=sC();return Fm.createRoot=s.createRoot,Fm.hydrateRoot=s.hydrateRoot,Fm}var aC=oC();/**
 * @ライセンス
 * 著作権 2010-2025 Three.js 作者
 * SPDX ライセンス識別子: MIT
 */const N0="173",lC={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},uC={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lw=0,uy=1,uw=2,cC=3,cw=0,U0=1,Yd=2,fo=3,Va=0,Ar=1,Uo=2,za=0,oc=1,cy=2,fy=3,hy=4,fw=5,Nl =100,hw=101,dw=102,pw=103,mw=104,gw=200,_w=201,vw=202,yw=203,zg=204,Bg=205,xw=206,Sw=207,Mw=208,w w=209,Ew=210,Tw=211,Aw=212,Cw=213,Rw=214,Vg=0,Hg=1,Gg=2,mc=3,Wg=4,Xg=5,Yg=6,qg=7,Pp=0,bw=1,Pw=2,zo =0,Iw=1,Lw=2,Dw=3,Hy=4,Nw=5,Uw=6,Ow=7,dy=”取り付け”,Fw=”取り外し”,O0=300,Ha=301,Bl=302,sp=303,op= 304、Ah=306、ap=1e3、Os=1001、lp=1002、qi=1003、Gy=1004、fC=1004、nh=1005、hC=1005、Ei=1006、qd=1007、dC=1007、 Fo=1008,pC=1008,mo=1009,Wy=1010,Xy=1011,ph=1012,F0=1013,Ga=1014,Xr=1015,Ch=1016,k0=1017,z0=1018,gc =1020,Yy=35902,qy=1021,jy=1022,ar=1023,Zy=1024,Jy=1025,ac=1026,_c=1027,B0=1028,Ip=1029,Ky=1030,V0= 1031,mC=1032,H0=1033,jd=33776,Zd=33777,Jd=33778,Kd=33779,jg=35840,Zg=35841,Jg=35842,Kg=35843,Qg=36196,$g=37492,e0=37496,t0=37808,n0=37809,i0=37810,r0=37811,s0=37812,o0=37813,a0=37814,l0=37815,u0= 37816,c0=37817,f0=37818,h0=37819,d0=37820,p0=37821,Qd=36492,m0=36494,g0=36495,Qy=36283,_0=36284,v0=36285,y0=36286,kw=2200,zw=2201,Bw=2202,up=2300,x0=2301,Lg=2302,ec=2400,tc=2401,cp=2402,G0=2500,$ y=2501,gC=0,_C=1,vC=2,Vw=3200,Hw=3201,yC=3202,xC=3203,Wl=0,Gw=1,Oa="",Gr="srgb",vc="srgb-linear",fp="linear",Sn="srgb",SC=0,Ju=7680,MC=7681,wC=7682,EC=7683,TC=34055,AC=34056,CC=5386,RC=512,bC=513 ,PC=514,IC=515,LC=516,DC=517,NC=518,py=519,Ww=512,Xw=513,Yw=514,ex=515,qw=516,jw=517,Zw=518,Jw=519,hp=35044,UC=35048,OC=35040,FC=35045,kC=35049,zC=35041,BC=35046,VC=35050,HC=35042,GC="100",my="300 es",po=2e3,dp=2001,WC={COMPUTE:"compute",RENDER:"render"};class Yo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,a=i.length;r<a;r++)i[r].call(this,e);e.target=null}}}const ir=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12", "13"、"14"、"15"、"16"、"17"、"18"、"19"、"1a"、"1b"、"1c"、"1d​​"、"1e"、"1f"、"20"、"21"、"22"、"23"、"24"、"25"、"26"、"27"、"28"、"29"、"2a"、"2b"、"2c"、"2d"、"2e"、"2f"、"30"、"31"、"32"、"3 3"、"34"、"35"、"36"、"37"、"38"、"39"、"3a"、"3b"、"3c"、"3d"、"3e"、"3f"、 「40」、「41」、「42」、「43」、「44」、「45」、「46」、「47」、「48」、「49」、「4a」、「4b」、「4」 c"、"4d"、"4e"、"4f"、"50"、"51"、"52"、"53"、"54"、"55"、"56"、"57"、"58"、 「59」、「5a」、「5b」、「5c」、「5d」、「5e」、「5f」、「60」、「61」、「62」、「63」、「64」、「6」 5"、"66"、"67"、"68"、"69"、"6a"、"6b"、"6c"、"6d"、"6e"、"6f"、"70"、"71"、 "72"、"73"、"74"、"75"、"76"、"77"、"78"、"79"、"7a"、"7b"、"7c"、"7d"、"7 e"、"7f"、"80"、"81"、"82"、"83"、"84"、"85"、"86"、"87"、"88"、"89"、"8a"、 「8b」、「8c」、「8d」、「8e」、「8f」、「90」、「91」、「92」、「93」、「94」、「95」、「96」、「9」 7"、"98"、"99"、"9a"、"9b"、"9c"、"9d"、"9e"、"9f"、"a0"、"a1"、"a2"、"a3"、 "a4"、"a5"、"a6"、"a7"、"a8"、"a9"、"aa"、"ab"、"ac"、"ad"、"ae"、"af"、"b0"、"b1"、"b2"、"b3"、"b4"、"b5"、"b6"、"b7"、"b8"、"b9"、"ba"、"bb"、"bc"、 「bd」、「be」、「bf」、「c0」、「c1」、「c2」、「c3」、「c4」、「c5」、「c6」、「c7」、「c8」、「c9」、「ca」、「cb」、「cc」、「cd」、「ce」、「cf」、「d0」、「d1」、「d2」、「d3」、「d4」、「d5」、「d6」、「d7」、「d8」、「d9」、「da」、「db」、「dc」、「dd」、「de」、「df」、「e0」、「e1」、「e2」、「e3」、「e4」、「e5」、「e6」、「e7」、「e8」、「e9」、「ea」、「eb」、「ec」、「ed」、「ee」"ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let US=1234567;const lc=Math.PI/180,mh=180/Math.PI;function gs(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ir[s&255]+ir[s>>8&255]+ir[s>>16&255]+ir[s>>24&255]+"-"+ir[e&25 5]+ir[e>>8&255]+"-"+ir[e>>16&15|64]+ir[e>>24&255]+"-"+ir[t&63|128]+ir[t>>8&255]+"-"+ir[t>>16& 255]+ir[t>>24&255]+ir[n&255]+ir[n>>8&255]+ir[n>>16&255]+ir[n>>24&255]).toLowerCase()}関数Ht(s,e,t){return Math.max(e,Math.min(t,s))}関数tx(s,e){return (s%e+e)%e}関数XC(s,e,t,n,i){return n+(se)*(in)/(te)}関数YC(s,e,t){return s!==e?(ts)/(es):0}関数$d(s,e,t){return (1-t)*s+t*e}関数qC(s,e,t,n){return $d(s,e,1-Math.exp(-t*n))}関数jC(s,e=1){return e-Math.abs(tx(s,e*2)-e)}関数ZC(s,e,t){return s<=e?0:s>=t?1:(s=(se)/(te),s*s*(3-2*s))}関数 JC(s,e,t){戻り値 s<=e?0:s>=t?1:(s=(se)/(te),s*s*s*(s*(s*(s*6-15)+10))}関数 KC(s,e){戻り値 s+Math.floor(Math.random()*(e-s+1))}関数 QC(s,e){戻り値 s+Math.random()*(es)}関数 $C(s){戻り値 s*(.5-Math.random())}関数 eR(s){s!==void 0&&(US=s);let e=US+=1831565813;戻り値e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}関数tR(s){return s*lc}関数nR(s){return s*mh}関数iR(s){return(s&s-1)===0&&s!==0}関数rR(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}関数sR(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}関数oR(s,e,t,n,i){const r=Math.cos、a=Math.sin、u=r(t/2)、h=a(t/2)、d=r((e+n)/2)、m=a((e+n)/2)、g=r((en)/2)、_=a((en)/2)、x=r((ne)/2)、M=a((ne)/2);switch(i){case"XYX":s.set(u*m,h*g,h*_,u*d);break;case"YZY":s.set(h*_,u*m,h*g,u*d);br eak;case"ZXZ":s.set(h*g,h*_,u*m,u*d);break;case"XZX":s.set(u*m,h*M,h*x,u*d);break;case"YXY":s.set(h*x,u*m,h*M,u*d);break;case"ZYZ":s.set(h*M,h*x,u*m,u*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() は不明な順序に遭遇しました: "+i)}}function Er(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("無効なコンポーネントタイプです。")}}function qt(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("無効なコンポーネントタイプです。")}}const aR={DEG2RAD:lc,RAD2DEG:mh,generateUUID:gs,clamp:Ht,euclideanModulo:tx,mapLinear:XC,inverseLerp:YC,lerp:$d,damp:qC,pingpong:jC,smoothstep:ZC,smootherstep:JC,randInt:KC,randFloat:QC,randFloatSpread:$C,seededRandom:eR,degToRad:tR,radToDeg:nR,isPowerOfTwo:iR,ceilPowerOfTwo:rR,floorPowerOfTwo:sR,setQuaternionFromProperEuler:oR,normalize:qt,denormalize:Er};クラスIe{constructor(e=0,t=0){Ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("インデックスが範囲外です: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;ケース1:return this.y;デフォルト:throw new Error("インデックスが範囲外です: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=ex,this.y=ey,this}add(e){return this.x+=ex,this.y+=ey,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+tx,this.y=e.y+ty,this}addScaledVector(e,t){return this.x+=ex*t,this.y+=ey*t,this}sub(e){return this.x-=ex,this.y-=ey,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=ex-tx,this.y=ey-ty,this}multiply(e){return this.x*=ex,this.y*=ey,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=ex,this.y/=ey,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,ex),this.y=Math.min(this.y,ey),this}max(e){return this.x=Math.max(this.x,ex),this.y=Math.max(this.y,ey),this}clamp(e,t){return this.x=Ht(this.x,ex,tx),this.y=Ht(this.y,ey,ty),this}clampScalar(e,t){return this.x=Ht(this.x,e,t),this.y=Ht(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Ht(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*ey}cross(e){return this.x*ey-this.y*ex}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ht(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.xe.x,n=this.ye.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.xe.x)+Math.abs(this.ye.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(ex-this.x)*t,this.y+=(ey-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(tx-ex)*n,this.y=e.y+(ty-ey)*n,this}equals(e){return ex===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.xe.x,a=this.ye.y;return this.x=r*na*i+ex,this.y=r*i+a*n+ey,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,t,n,i,r,a,u,h,d){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,r,a,u,h,d)}set(e,t,n,i,r,a,u,h,d){const m=this.elements;return m[0]=e,m[1]=i,m[2]=u,m[3]=t,m[4]=r,m[5]=h,m[6]=n,m[7]=a,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],u=n[3],h=n[6],d=n[1],m=n[4],g=n[7],_=n[2],x=n[5],M=n[8],T=i[0],E=i[3],S=i[6],R=i[1],P=i[4],I=i[7],O=i[2],U=i[5],F=i[8];return r[0]=a*T+u*R+h*O,r[3]=a*E+u*P+h*U,r[6]=a*S+u*I+h*F,r[1]=d*T+m*R+g*O,r[4]=d*E+m*P+g*U,r[7]=d*S+m*I+g*F,r[2]=_*T+x*R+M*O,r[5]=_*E+x*P+M*U,r[8]=_*S+x*I+M*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}行列式(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],u=e[5],h=e[6],d=e[7],m=e[8]; return t*a*mt*u*dn*r*m+n*u*h+i*r*di*a*h}反転(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],u=e[5],h=e[6],d=e[7],m=e[8],g=m*au*d,_=u*hm*r,x=d*ra*h,M=t*g+n*_+i*x;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/M;return e[0]=g*T、e[1]=(i*dm*n)*T、e[2]=(u*ni*a)*T、e[3]=_*T、e[4]=(m*ti*h)*T、e[5]=(i*ru*t)*T、e[6]=x*T、e[7]=(n*hd*t)*T、e[8]=(a*tn*r)*T、this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e、this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,u){const h=Math.cos(r),d=Math.sin(r);return this.set(n*h,n*d,-n*(h*a+d*u)+a+e,-i*d,i*h,-i*(-d*a+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(K_.makeScale(e,t)),this}rotate(e){return this.premultiply(K_.makeRotation(-e)),this}translate(e,t){return this.premultiply(K_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,ex,0,1,ey,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const K_=new Wt;function Kw(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}const lR={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ih(s,e){return new lR[s](e)}function pp(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function Qw(){const s=pp("canvas");return s.style.display="block",s}const OS={};function $f(s){s in OS||(OS[s]=!0,console.warn(s))}function uR(s,e,t){return new Promise(function(n,i){function r(){switch(s.clientWaitSync(e,s.SYNC_FLUSH_COMMANDS_BIT,0)){case s.WAIT_FAILED:i();break;case s.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}function cR(s){const e=s.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function fR(s){const e=s.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const FS=new Wt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),kS=new Wt().set(3.2409699,-1.53​​73832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function hR(){const s={enabled:!0,workingColorSpace:vc,spaces:{},convert:function(i,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===Sn&&(ir=Ba(ir),ig=Ba(ig),ib=Ba(ib)),this.spaces[r].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[r].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Sn&&(ir=ch(ir),ig=ch(ig),ib=ch(ib))),i},fromWorkingColorSpace:function(i,r){return this.convert(i,this.workingColorSpace,r)},toWorkingColorSpace:function(i,r){return this.convert(i,r,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Oa?fp:this.spaces[i].transfer},getLuminanceCoefficients:function(i,r=this.workingColorSpace){return i.fromArray(this.spaces[r].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,r,a){return i.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return s.define({[vc]:{primaries:e,whitePoint:n,transfer:fp,toXYZ:FS,fromXYZ:kS,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Gr},outputColorSpaceConfig:{drawingBufferColorSpace:Gr}},[Gr]:{primaries:e,whitePoint:n,transfer:Sn,toXYZ:FS,fromXYZ:kS,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Gr}}}),s}const fn=hR();function Ba(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function ch(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let Lf;class $w{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Lf===void 0&&(Lf=pp("canvas")),Lf.width=e.width,Lf.height=e.height;const n=Lf.getContext("2d");e ImageDataのインスタンス?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Lf}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=pp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let a=0;a<r.length;a++)r[a]=Ba(r[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ba(t[n]/255)*255):t[n]=Ba(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): サポートされていない画像タイプです。色空間変換は適用されません。",e}}let dR=0;class nc{コンストラクタ(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:dR++}),this.uuid=gs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let a=0,u=i.length;a<u;a++)i[a].isDataTexture?r.push(Q_(i[a].image)):r.push(Q_(i[a]))}else r=Q_(i);n.url=r}return t||(e.images[this.uuid]=n),n}}function Q_(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?$w.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: テクスチャをシリアル化できません。"),{})}let pR=0;class zn extends Yo{constructor(e=zn.DEFAULT_IMAGE,t=zn.DEFAULT_MAPPING,n=Os,i=Os,r=Ei,a=Fo,u=ar,h=mo,d=zn.DEFAULT_ANISOTROPY,m=Oa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pR++}),this.uuid=gs(),this.name="",this.source=new nc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=d,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return新しい this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotati on、this.matrixAutoUpdate=e.matrixAutoUpdate、this.matrix.copy(e.matrix)、this.generateMipmaps=e.generateMipmaps、this.premultiplyAlpha=e.premultiplyAlpha、this.flipY=e.flipY、this.unpackAlignment=e.unpackAlignment、this.colorSpace=e.colorSpace、this.renderTarget=e.renderTarget、this.isRenderTargetTexture=e.isRenderTargetTexture、this.userData=JSON.parse(JSON.stringify(e.userData))、this.needsUpdate=!0、this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter、anisotropy:this.anisotropy、flipY:this.flipY、generateMipmaps:this.generateMipmaps、premultiplyAlpha:this.premultiplyAlpha、unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==O0)return e;if(e.applyMatrix3(this.matrix),ex<0||ex>1)switch(this.wrapS){case ap:ex=ex-Math.floor(ex);break;case Os:ex=ex<0?0:1;break;case lp:Math.abs(Math.floor(ex)%2)===1?ex=Math.ceil(ex)-ex:ex=ex-Math.floor(ex);break}if(ey<0||ey>1)switch(this.wrapT){case ap:ey=ey-Math.floor(ey);break;case Os:ey=ey<0?0:1;break;case lp:Math.abs(Math.floor(ey)%2)===1?ey=Math.ceil(ey)-ey:ey=ey-Math.floor(ey);break}return this.flipY&&(ey=1-ey),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}zn.DEFAULT_IMAGE=null;zn.DEFAULT_MAPPING=O0;zn.DEFAULT_ANISOTROPY=1;クラスpn{コンストラクタ(e=0,t=0,n=0,i=1){pn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}幅を取得(){return this.z}幅を設定(e){this.z=e}高さを取得(){return this.w}高さを設定(e){this.w=e}設定(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}Scalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("インデックスが範囲外です: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("インデックスが範囲外です: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=ex,this.y=ey,this.z=ez,this.w=ew!==void 0?ew:1,this}add(e){return this.x+=ex,this.y+=ey,this.z+=ez,this.w+=ew,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+tx,this.y=e.y+ty,this.z=e.z+tz,this.w=e.w+tw,this}addScaledVector(e,t){return this.x+=ex*t、this.y+=ey*t、this.z+=ez*t、this.w+=ew*t、this}sub(e){return this.x-=ex、this.y-=ey、this.z-=ez、this.w-=ew、this}subScalar(e){return this.x-=e、this.y-=e、this.z-=e、this.w-=e、this}subVectors(e,t){return this.x=ex-tx、this.y=ey-ty、this.z=ez-tz、this.w=ew-tw、this}multiply(e){return this.x*=ex、this.y*=ey、this.z*=ez、this.w*=ew、this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divide(e){return this.x/=ex、this.y/=ey、this.z/=ez、this.w/=ew、this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(ew);const t=Math.sqrt(1-ew*ew);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=ex/t,this.y=ey/t,this.z=ez/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const h=e.elements,d=h[0],m=h[4],g=h[8],_=h[1],x=h[5],M=h[9],T=h[2],E=h[6],S=h[10];if(Math.abs(m-_)<.01&&Math.abs(gT)<.01&&Math.abs(ME)<.01){if(Math.abs(m+_)<.1&&Math.abs(g+T)<.1&&Math.abs(M+E)<.1&&Math.abs(d+x+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(d+1)/2,I=(x+1)/2,O=(S+1)/2,U=(m+_)/4,F=(g+T)/4,z=(M+E)/4;戻るP>I&&P>O?P<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(P),i=U/n,r=F/n):I>O?I<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(I),n=U/i,r=z/i):O<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(O),n=F/r,i=z/r),this.set(n,i,r,t),this}let R=Math.sqrt((EM)*(EM)+(gT)*(gT)+(_-m)*(_-m));return Math.abs(R)<.001&&(R=1),this.x=(EM)/R,this.y=(gT)/R,this.z=(_-m)/R,this.w=Math.acos((d+x+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,ex),this.y=Math.min(this.y,ey),this.z=Math.min(this.z,ez),this.w=Math.min(this.w,ew),this}max(e){return this.x=Math.max(this.x,ex),this.y=Math.max(this.y,ey),this.z=Math.max(this.z,ez),this.w=Math.max(this.w,ew),this}clamp(e,t){return this.x=Ht(this.x,ex,tx),this.y=Ht(this.y,ey,ty),this.z=Ht(this.z,ez,tz),this.w=Ht(this.w,ew,tw),this}clampScalar(e,t){return this.x=Ht(this.x,e,t),this.y=Ht(this.y,e,t),this.z=Ht(this.z,e,t),this.w=Ht(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Ht(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*ew}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(ex-this.x)*t,this.y+=(ey-this.y)*t,this.z+=(ez-this.z)*t,this.w+=(ew-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(tx-ex)*n,this.y=e.y+(ty-ey)*n,this.z=e.z+(tz-ez)*n,this.w=e.w+(tw-ew)*n,this}equals(e){return ex===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class W0 extends Yo{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new pn(0,0,e,t),this.scissorTest=!1,this.viewport=new pn(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ei,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new zn(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let u=0;u<a;u++)this.textures[u]=r.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new nc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:「破棄」}}クラスWoはW0を拡張します{コンストラクタ(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}クラスLpはznを拡張します{コンストラクタ(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=qi,this.minFilter=qi,this.wrapR=Os,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}クラスmRはWo{コンストラクタ(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Lp(null,e,t,n),this.texture.isRenderTargetTexture=!0}}クラスX0はzn{コンストラクタ(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=qi,this.minFilter=qi,this.wrapR=Os,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}クラスgRはWo{コンストラクタ(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new X0(null,e,t,n),this.texture.isRenderTargetTexture=!0}}クラスYr{コンストラクタ(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,u){let h=n[i+0],d=n[i+1],m=n[i+2],g=n[i+3];const _=r[a+0],x=r[a+1],M=r[a+2],T=r[a+3];if(u===0){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(u===1){e[t+0]=_,e[t+1]=x,e[t+2]=M,e[t+3]=T;return}if(g!==T||h!==_||d!==x||m!==M){E=1-uとします;const S=h*_+d*x+m*M+g*T,R=S>=0?1:-1,P=1-S*S;if(P>Number.EPSILON){const O=Math.sqrt(P),U=Math.atan2(O,S*R);E=Math.sin(E*U)/O,u=Math.sin(u*U)/O}const I=u*R;if(h=h*E+_*I,d=d*E+x*I,m=m*E+M*I,g=g*E+T*I,E===1-u){const O=1/Math.sqrt(h*h+d*d+m*m+g*g);h*=O,d*=O,m*=O,g*=O}}e[t]=h,e[t+1]=d,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,i,r,a){const u=n[i],h=n[i+1],d=n[i+2],m=n[i+3],g=r[a],_=r[a+1],x=r[a+2],M=r[a+3];return e[t]=u*M+m*g+h*xd*_,e[t+1]=h*M+m*_+d*gu*x,e[t+2]=d*M+m*x+u*_-h*g,e[t+3]=m*Mu*gh*_-d*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=ex,this._y=ey,this._z=ez,this._w=ew,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,r=e._z,a=e._order,u=Math.cos,h=Math.sin,d=u(n/2),m=u(i/2),g=u(r/2),_=h(n/2),x=h(i/2),M=h(r/2);switch(a){case"XYZ":this._x=_*m*g+d*x*M,this._y=d*x*g-_*m*M,this._z=d*m*M+_*x*g,this._w=d*m*g-_*x*M;break;case"YXZ":thi s._x=_*m*g+d*x*M、this._y=d*x*g-_*m*M、this._z=d*m*M-_*x*g、this._w=d*m*g+_*x*M;break;case"ZXY":this._x=_*m*gd*x*M、this._y=d*x*g+_*m*M、this._z=d*m*M+_*x*g、this._w=d*m*g-_*x*M;break;case"ZYX":this._x=_*m*gd*x*M、this._y=d*x*g+_*m*M、this._z=d*m*M-_*x*g,this._w=d*m*g+_*x*M;break;case"YZX":this._x=_*m*g+d*x*M,this._y=d*x*g+_*m*M,this._z=d*m*M-_*x*g,this._w=d*m*g-_*x*M;break;case"XZY":this._x=_*m*gd*x*M,this._y=d*x*g-_*m*M,this._z=d*m*M+_*x*g,this._w=d*m*g+_*x*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() で不明な次数が検出されました: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=ex*i,this._y=ey*i,this._z=ez*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],u=t[5],h=t[9],d=t[2],m=t[6],g=t[10],_=n+u+g;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(mh)*x,this._y=(rd)*x,this._z=(ai)*x}else if(n>u&&n>g){const x=2*Math.sqrt(1+nug);this._w=(mh)/x,this._x=.25*x,this._y=(i+a)/x,this._z=(r+d)/x}else if(u>g){const x=2*Math.sqrt(1+ung);this._w=(rd)/x,this._x=(i+a)/x,this._y=.25*x,this._z=(h+m)/x}else{const x=2*Math.sqrt(1+gnu);this._w=(ai)/x,this._x=(r+d)/x,this._y=(h+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(ex)>Math.abs(ez)?(this._x=-ey,this._y=ex,this._z=0,this._w=n):(this._x=0,this._y=-ez,this._z=ey,this._w=n)):(this._x=ey*tz-ez*ty,this._y=ez*tx-ex*tz,this._z=ex*ty-ey*tx,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ht(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,u=t._x,h=t._y,d=t._z,m=t._w;return this._x=n*m+a*u+i*dr*h、this._y=i*m+a*h+r*un*d、this._z=r*m+a*d+n*hi*u、this._w=a*mn*ui*hr*d、this._onChangeCallback()、this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x、i=this._y、r=this._z、a=this._w;let u=a*e._w+n*e._x+i*e._y+r*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const h=1-u*u;if(h<=Number.EPSILON){const x=1-t;return this._w=x*a+t*this._w,this._x=x*n+t*this._x,this._y=x*i+t*this._y,this._z=x*r+t*this._z,this.normalize(),this}const d=Math.sqrt(h),m=Math.atan2(d,u),g=Math.sin((1-t)*m)/d,_=Math.sin(t*m)/d;return this._w=a*g+this._w*_,this._x=n*g+this._x*_,this._y=i*g+this._y*_,this._z=r*g+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}クラスq{constructor(e=0,t=0,n=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("インデックスが範囲外です: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("インデックスが範囲外です: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=ex,this.y=ey,this.z=ez,this}add(e){return this.x+=ex,this.y+=ey,this.z+=ez,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+tx,this.y=e.y+ty,this.z=e.z+tz,this}addScaledVector(e,t){return this.x+=ex*t,this.y+=ey*t,this.z+=ez*t,this}sub(e){return this.x-=ex,this.y-=ey,this.z-=ez,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=ex-tx,this.y=ey-ty,this.z=ez-tz,this}multiply(e){return this.x*=ex,this.y*=ey,this.z*=ez,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=ex*tx,this.y=ey*ty,this.z=ez*tz,this}applyEuler(e){return this.applyQuaternion(zS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(zS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=ex,a=ey,u=ez,h=ew,d=2*(a*iu*n),m=2*(u*tr*i),g=2*(r*na*t);return this.x=t+h*d+a*gu*m,this.y=n+h*m+u*dr*g,this.z=i+h*g+r*ma*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=ex,this.y/=ey,this.z/=ez,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,ex),this.y=Math.min(this.y,ey),this.z=Math.min(this.z,ez),this}max(e){return this.x=Math.max(this.x,ex),this.y=Math.max(this.y,ey),this.z=Math.max(this.z,ez),this}clamp(e,t){return this.x=Ht(this.x,ex,tx),this.y=Ht(this.y,ey,ty),this.z=Ht(this.z,ez,tz),this}clampScalar(e,t){return this.x=Ht(this.x,e,t),this.y=Ht(this.y,e,t),this.z=Ht(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Ht(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*ez}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(ex-this.x)*t,this.y+=(ey-this.y)*t,this.z+=(ez-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(tx-ex)*n,this.y=e.y+(ty-ey)*n,this.z=e.z+(tz-ez)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=ex,i=ey,r=ez,a=tx,u=ty,h=tz;return this.x=i*hr*u,this.y=r*an*h,this.z=n*ui*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return $_.copy(this).projectOnVector(e),this.sub($_)}reflect(e){return this.sub($_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ht(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.xe.x,n=this.ye.y,i=this.ze.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.xe.x)+Math.abs(this.ye.y)+Math.abs(this.ze.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,ey)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=er,this.y=eg,this.z=eb,this}equals(e){return ex===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $_=new q,zS=new Yr;class Cr{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(lo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(lo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=lo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.ジオメトリ;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,u=r.count;a<u;a++)e.isMesh===!0?e.getVertexPosition(a,lo):lo.fromBufferAttribute(r,a),lo.applyMatrix4(e.matrixWorld),this.expandByPoint(lo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),km.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),km.copy(n.boundingBox)),km.applyMatrix4(e.matrixWorld),this.union(km)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return ex>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((ex-this.min.x)/(this.max.x-this.min.x),(ey-this.min.y)/(this.max.y-this.min.y),(ez-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,lo),lo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*この最小x、n=e.normal.x*この最大x):(t=e.normal.x*この最大x、n=e.normal.x*この最小x)、e.normal.y>0?(t+=e.normal.y*この最小y、n+=e.normal.y*この最大y):(t+=e.normal.y*この最大y、n+=e.normal.y*この最小y)、e.normal.z>0?(t+=e.normal.z*この最小z、n+=e.normal.z*この最大z):(t+=e. normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}はTriangle(e)と交差します{if(this.isEmpty())return!1;this.getCenter(Cd),zm.subVectors(this.max,Cd),Df.subVectors(ea,Cd),Nf.subVectors(eb,Cd),Uf.subVectors(ec,Cd),Tl.subVectors(Nf,Df),Al.subVectors(Uf,Nf),Nu.subVectors(Df,Uf);let t=[0,-Tl.z,Tl.y,0,-Al.z,Al.y,0,-Nu.z,Nu.y,Tl.z,0,-Tl.x,Al.z,0,-Al.x,N u.z,0,-Nu.x,-Tl.y,Tl.x,0,-Al.y,Al.x,0,-Nu.y,Nu.x,0];return!ev(t,Df,Nf ,Uf,zm)||(t=[1,0,0,0,1,0,0,0,1],!ev(t,Df,Nf,Uf,zm))?!1:(Bm.crossVecto rs(Tl,Al),t=[Bm.x,Bm.y,Bm.z],ev(t,Df,Nf,Uf,zm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(lo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ca[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ca[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ca[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ca[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ca[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ca[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ca[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ca[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ca),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ca=[新しいq、新しいq、新しいq、新しいq、新しいq、新しいq、新しいq、新しいq]、lo=新しいq、km=新しいCr、Df=新しいq、Nf=新しいq、Uf=新しいq、Tl=新しいq、Al=新しいq、Nu=新しいq、Cd=新しいq、zm=新しいq、Bm=新しいq、Uu=新しいq;function ev(s,e,t,n,i){for(let r=0,a=s.length-3;r<=a;r+=3){Uu.fromArray(s,r);const u=ix*Math.abs(Uu.x)+iy*Math.abs(Uu.y)+iz*Math.abs(Uu.z),h=e.dot(Uu),d=t.dot(Uu),m=n.dot(Uu);if(Math.max(-Math.max(h,d,m),Math.min(h,d,m))>u)return!1}return!0}const _R=new Cr,Rd=new q,tv=new q;class ur{constructor(e=new q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_R.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rd.subVectors(e,this.center);const t=Rd.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t), i=(n-this.radius)*.5;this.center.addScaledVector(Rd,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(tv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rd.copy(e.center).add(tv)),this.expandByPoint(Rd.copy(e.center).sub(tv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ra=新しいq、nv=新しいq、Vm=新しいq、Cl=新しいq、iv=新しいq、Hm=新しいq、rv=新しいq;class Rh{constructor(e=新しいq、t=新しいq(0,0,-1)){this.origin=e、this.direction=t}set(e、t){return this.origin.copy(e)、this.direction.copy(t)、this}copy(e){return this.origin.copy(e.origin)、this.direction.copy(e.direction)、this}at(e、t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ra)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ra.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ra.copy(this.origin).addScaledVector(this.direction,t),Ra.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){nv.copy(e).add(t).multiplyScalar(.5),Vm.copy(t).sub(e).normalize(),Cl.copy(this.origin).sub(nv);const r=e.distanceTo(t)*.5,a=-this.direction.dot(Vm),u=Cl.dot(this.direction),h=-Cl.dot(Vm),d=Cl.lengthSq(),m=Math.abs(1-a*a);let g,_,x,M;if(m>0)if(g=a*hu,_=a*uh,M=r*m,g>=0)if(_>=-M)if(_<=M){const T=1/m;g*=T,_*=T,x=g*(g+a*_+2*u)+_*(a*g+_+2*h)+d}else _=r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;else _=-r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;else _<=-M?(g=Math.max(0,-(-a*r+u)),_=g>0?-r:Math.min(Math.max(-r,-h),r),x=-g*g+_*(_+2*h)+d):_<=M?(g=0,_=Math.min(Math.max(-r,-h),r),x=_*(_+2*h)+d):(g=Math.max(0,-(a*r+u)),_=g>0?r:Math.min(Math.max(-r,-h),r),x=-g*g+_*(_+2*h)+d);そうでない場合 _=a>0?-r:r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;戻るn&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(nv).addScaledVector(Vm,_),x}intersectSphere(e,t){Ra.subVectors(e.cente方向),h=-Cl.dot(Vm),d=Cl.lengthSq(),m=Math.abs(1-a*a);let g,_,x,M;if(m>0)if(g=a*hu,_=a*uh,M=r*m,g>=0)if(_>=-M)if(_<=M){const T=1/m;g*=T,_*=T,x=g*(g+a*_+2*u)+_*(a*g+_+2*h)+d}else _=r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;else _=-r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;else _<=-M?(g=Math.max(0,-(-a*r+u)),_=g>0?-r:Math.min(Math.max(-r,-h),r),x=-g*g+_*(_+2*h)+d):_<=M?(g=0,_=Math.min(Math.max(-r,-h),r),x=_*(_+2*h)+d):(g=Math.max(0,-(a*r+u)),_=g>0?r:Math.min(Math.max(-r,-h),r),x=-g*g+_*(_+2*h)+d);そうでない場合 _=a>0?-r:r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;戻るn&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(nv).addScaledVector(Vm,_),x}intersectSphere(e,t){Ra.subVectors(e.cente方向),h=-Cl.dot(Vm),d=Cl.lengthSq(),m=Math.abs(1-a*a);let g,_,x,M;if(m>0)if(g=a*hu,_=a*uh,M=r*m,g>=0)if(_>=-M)if(_<=M){const T=1/m;g*=T,_*=T,x=g*(g+a*_+2*u)+_*(a*g+_+2*h)+d}else _=r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;else _=-r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;else _<=-M?(g=Math.max(0,-(-a*r+u)),_=g>0?-r:Math.min(Math.max(-r,-h),r),x=-g*g+_*(_+2*h)+d):_<=M?(g=0,_=Math.min(Math.max(-r,-h),r),x=_*(_+2*h)+d):(g=Math.max(0,-(a*r+u)),_=g>0?r:Math.min(Math.max(-r,-h),r),x=-g*g+_*(_+2*h)+d);そうでない場合 _=a>0?-r:r,g=Math.max(0,-(a*_+u)),x=-g*g+_*(_+2*h)+d;戻るn&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(nv).addScaledVector(Vm,_),x}intersectSphere(e,t){Ra.subVectors(e.center,this.origin);const n=Ra.dot(this.direction),i=Ra.dot(Ra)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(ri),u=na,h=n+a;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,u,h;const d=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,_=this.origin;return d>=0?(n=(e.min.x-_.x)*d,i=(e.max.x-_.x)*d):(n=(e.max.x-_.x)*d,i=(e.min.x-_.x)*d),m>=0?(r=(e.min.y-_.y )*m,a=(e.max.y-_.y)*m):(r=(e.max.y-_.y)*m,a=(e.min.y-_.y)*m),n>a||r>i||((r>n||isNaN(n))&&(n=r),(a<i|| isNaN(i))&&(i=a),g>=0?(u=(e.min.z-_.z)*g,h=(e.max.z-_.z)*g):(u=(e.max.z-_.z)*g,h=(e.min.z-_.z)*g),n>h||u>i)||((u>n||n!==n)&&(n=u),(h<i||i!==i)&&(i=h),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Ra)!==null}intersectTriangle(e,t,n,i,r){iv.subVectors(t,e),Hm.subVectors(n,e),rv.crossVectors(iv,Hm);let a=this.direction.dot(rv),u;if(a>0){if(i)return null;u=1}else if(a<0)u=-1,a=-a;else return null;Cl.subVectors(this.origin,e);const h=u*this.direction.dot(Hm.crossVectors(Cl,Hm));if(h<0)return null;const d=u*this.direction.dot(iv.cross(Cl));if(d<0||h+d>a)return null;const m=-u*Cl.dot(rv);return m<0?null:this.at(m/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Dt{constructor(e,t,n,i,r,a,u,h,d,m,g,_,x,M,T,E){Dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,r,a,u,h,d,m,g,_,x,M,T,E)}set(e,t,n,i,r,a,u,h,d,m,g,_,x,M,T,E){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=i,S[1]=r,S[5]=a,S[9]=u,S[13]=h,S[2]=d,S[6]=m,S[10]=g,S[14]=_,S[3]=x,S[7]=M,S[11]=T,S[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Dt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2)、this}makeBasis(e,t,n){return this.set(ex,tx,nx,0,ey,ty,ny,0,ez,tz,nz,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Of.setFromMatrixColumn(e,0).length(),r=1/Of.setFromMatrixColumn(e,1).length(),a=1/Of.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements、n=ex、i=ey、r=ez、a=Math.cos(n)、u=Math.sin(n)、h=Math.cos(i)、d=Math.sin(i)、m=Math.cos(r)、g=Math.sin(r);if(e.order==="XYZ"){const _=a*m、x=a*g、M=u*m、T=u*g;t[0]=h*m、t[4]=-h*g、t[8]=d、t[1]=x+M*d、t[5]=_-T*d、t[9]=-u*h、t[2]=T-_*d、t[6]=M+x*d、t[10]=a*h}else if(e.order==="YXZ"){const _=h*m,x=h*g,M=d*m,T=d*g;t[0]=_+T*u,t[4]=M*ux,t[8]=a*d,t[1]=a*g,t[5]=a*m,t[9]=-u,t[2]=x*uM,t[6]=T+_*u,t[10]=a*h}else if(e.order==="ZXY"){const _=h*m,x=h*g,M=d*m,T=d*g;t[0]=_-T*u,t[4]=-a*g,t[8]=M+x*u,t[1]=x+M*u,t[5]=a*m,t[9]=T-_*u,t[2]=-a*d,t[6]=u,t[10]=a*h}else if(e.order==="ZYX"){const _=a*m,x=a*g,M=u*m,T=u*g;t[0]=h*m,t[4]=M*dx,t[8]=_*d+T,t[1]=h*g,t[5]=T*d+_,t[9]=x*dM,t[2]=-d,t[6]=u*h,t[10]=a*h}else if(e.order==="YZX"){const _=a*h,x=a*d,M=u*h,T=u*d;t[0]=h*m,t[4]=T-_*g,t[8]=M*g+x,t[1]=g,t[5]=a*m,t[9]=-u*m,t[2]=-d*m,t[6]=x*g+M,t[10]=_-T*g}else if(e.order==="XZY"){const _=a*h,x=a*d,M=u*h,T=u*d;t[0]=h*m,t[4]=-g,t[8]=d*m,t[1]=_*g+T,t[5]=a*m,t[9]=x*gM,t[2]=M*gx,t[6]=u*m,t[10]=T*g+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vR,e,yR)}lookAt(e,t,n){const i=this.elements;return fs.subVectors(e,t),fs.lengthSq()===0&&(fs.z=1),fs.normalize(),Rl.crossVectors(n,fs),Rl.lengthSq()===0&&(Math.abs(nz)===1?fs.x+=1e-4:fs.z+=1e-4,fs.normalize(),Rl.crossVectors(n,fs)),Rl.normalize(),Gm.crossVectors(fs,Rl),i[0]=Rl.x,i[4]=Gm.x,i[8]=fs.x,i[1]=Rl.y,i[5]=Gm.y,i[9]=fs.y,i[2]=Rl.z,i[6]=Gm.z,i[10]=fs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],u=n[4],h=n[8],d=n[12],m=n[1],g=n[5],_=n[9],x=n[13],M=n[2],T=n[6],E=n[10],S=n[14],R=n[3],P=n[7], I=n[11],O=n[15],U=i[0],F=i[4],z=i[8],D=i[12],N=i[1],G=i[5],$=i[9],Q=i[13],ce=i[2],me=i[6],ue=i[10],de=i[14],B=i[3],K=i[7],J=i[11],W=i[15];戻るr[0]=a*U+u*N+h*ce+d*B,r[4]=a*F+u*G+h*me+d*K,r[8]=a*z+u*$+h*ue+d*J,r[12]=a*D+u*Q+h*de+d*W,r[1]=m*U+g*N+_*ce+x*B,r[5]=m*F+g*G+_*me+x*K,r[9]=m*z+g*$+_*ue+x*J,r[13]=m*D+g*Q+_*de+x*W,r[2]=M*U+T*N+E* ce+S*B、r[6]=M*F+T*G+E*me+S*K、r[10]=M*z+T*$+E*ue+S*J、r[14]=M*D+T*Q+E*de+S*W、r[3]=R*U+P*N+I*ce+O*B、r[7]=R*F+P*G+I*me+O*K、r[11]=R*z+P*$+I*ue+O*J、r[15]=R*D+P*Q+I*de+O*W、これ}multiplyScalar(e){const t=this.elements;t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,を返します。this}行列式(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],u=e[5],h=e[9],d=e[13],m=e[2],g=e[6],_=e[10],x=e[14],M=e[3],T=e[7],E=e[11],S=e[15];return M*(+r*h*gi*d*gr*u*_+n*d*_+i*u*xn*h*x)+T*(+t*h*xt*d*_+r*a*_-i*a*x+i*d*mr*h*m)+E*(+t*d*gt*u*xr*a*g+n*a*x+r*u*mn*d*m)+S*(-i*u*mt*h*g+t*u*_+i*a*gn*a*_+n*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=ex,i[13]=ey,i[14]=ez):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=この要素、t=e[0]、n=e[1]、i=e[2]、r=e[3]、a=e[4]、u=e[5]、h=e[6]、d=e[7]、m=e[8]、g=e[9]、_=e[10]、x=e[11]、M=e[12]、T=e[13]、E=e[14]、S=e[15]、R=g*E*dT*_*d+T*h*xu *E*xg*h*S+u*_*S,P=M*_*dm*E*dM*h*x+a*E*x+m*h*Sa*_*S,I=m*T*dM*g*d+M*u*xa*T*xm*u*S+a*g*S,O=M*g*hm*T*hM*u*_+a*T*_+m*u*Ea*g*E,U=t*R+n*P+i*I+r*O;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/U;return e[0]=R*F,e[1]=(T*_*rg*E*rT*i*x+n*E*x+g*i*Sn*_*S)*F,e[2]=(u*E*rT*h*r+T*i*dn*E*du*i*S+n*h*S)*F,e[3]=(g*h*ru*_*rg*i*d+n*_*d+u*i*xn*h*x)*F,e[4]=P *F,e[5]=(m*E*rM*_*r+M*i*xt*E*xm*i*S+t*_*S)*F,e[6]=(M*h*ra*E*rM*i*d+t*E*d+a*i*St*h*S)*F,e[7]=(a*_*rm*h*r+m*i*dt*_*da*i*x+t*h*x)*F,e[8]=I*F,e[9] =(M*g*rm*T*rM*n*x+t*T*x+m*n*St*g*S)*F,e[10]=(a*T*rM*u*r+M*n*dt*T*da*n*S+t*u*S)*F,e[11]=(m*u*ra*g*rm*n*d+t*g*d+a*n*xt*u*x)*F,e[12]=O*F,e[13]=(m *T*iM*g*i+M*n*_-t*T*_-m*n*E+t*g*E)*F,e[14]=(M*u*ia*T*iM*n*h+t*T*h+a*n*Et*u*E)*F,e[15]=(a*g*im*u*i+m*n*ht*g*ha*n*_+t*u*_)*F,this}scale(e){const t=this.elements,n=ex,i=ey,r=ez;戻り値 t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];戻り値Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,ex,0,1,0,ey,0,0,1,ez,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=ex,u=ey,h=ez,d=r*a,m=r*u;return this.set(d*a+n,d*ui*h,d*h+i*u,0,d*u+i*h,m*u+n,m*hi*a,0,d*hi*u,m*h+i*a,r*h*h+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements、r=t._x、a=t._y、u=t._z、h=t._w、d=r+r、m=a+a、g=u+u、_=r*d、x=r*m、M=r*g、T=a*m、E=a*g、S=u*g、R=h*d、P=h*m、I=h*g、O=nx、U=ny、F=nz; 戻り値 i[0]=(1-(T+S))*O、i[1]=(x+I)*O、i[2]=(MP)*O、i[3]=0、i[4]=(xI)*U、i[5]=(1-(_+S))*U,i[6]=(E+R)*U,i[7]=0,i[8]=(M+P)*F,i[9]=(ER)*F,i[10]=(1-(_+T))*F,i[11]=0,i[12]=ex,i[13]=ey,i[14]=ez,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Of.set(i[0],i[1],i[2]).length();const a=Of.set(i[4],i[5],i[6]).length(),u=Of.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),ex=i[12],ey=i[13],ez=i[14],uo.copy(this);const d=1/r,m=1/a,g=1/u;return uo.elements[0]*=d,uo.elements[1]*=d,uo.elements[2]*=d,uo.elements[4]*=m,uo.elements[5]*=m,uo.elements[6]*=m,uo.elements[8]*=g,uo.elements[9]*=g,uo.elements[10]*=g,t.setFromRotationMatrix(uo),nx=r,ny=a,nz=u,this}makePerspective(e,t,n,i,r,a,u=po){const h=this.elements,d=2*r/(te),m=2*r/(ni),g=(t+e)/(te),_=(n+i)/(ni);let x,M;if(u===po)x=-(a+r)/(ar),M=-2*a*r/(ar);else if(u===dp)x=-a/(ar),M=-a*r/(ar);else throw new Error("THREE.Matrix4.makePerspective(): 座標系が無効です: "+u);return h[0]=d,h[4]=0,h[8]=g,h[12]=0,h[1]=0,h[5]=m,h[9]=_,h[13]=0,h[2]=0,h[6]=0,h[10]=x,h[14]=M,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,n,i,r,a,u=po){const h=this.elements、d=1/(te)、m=1/(ni)、g=1/(ar)、_=(t+e)*d、x=(n+i)*m;let M、T;if(u===po)M=(a+r)*g、T=-2*g;else if(u===dp)M=r*g、T=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): 無効な座標系: "+u);return h[0]=2*d,h[4]=0,h[8]=0,h[12]=-_,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-x,h[2]=0,h[6]=0,h[10]=T,h[14]=-M,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Of=new q,uo=new Dt、vR=新しいq(0,0,0)、yR=新しいq(1,1,1)、Rl=新しいq、Gm=新しいq、fs=新しいq、BS=新しいDt、VS=新しいYr;クラスvs{コンストラクタ(e=0、t=0、n=0、i=vs.DEFAULT_ORDER){this.isEuler=!0、this._x=e、this._y=t、this._z=n、this._order=i}get x(){return this._x}set x(e){this._x=e、this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e、this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e、this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements、r=i[0]、a=i[4]、u=i[8]、h=i[1]、d=i[5]、m=i[9]、g=i[2]、_=i[6]、x=i[10];switch(t){case"XYZ":this._y=Math.asin(Ht(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(_,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Ht(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,x),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ht(_,-1,1)),Math.abs(_)<.9999999?(th is._y=Math.atan2(-g,x),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(h,r));break;case"ZYX":this._y=Math.asin(-Ht(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2( h,r)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Ht(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(u,x) );break;case"XZY":this._z=Math.asin(-Ht(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(_,d),this._y=Math.atan2(u,r)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() は不明な順序に遭遇しました: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return BS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BS,t,n)}setFromVector3(e,t=this._order){return this.set(ex,ey,ez,t)}reorder(e){return VS.setFromEuler(this),this.setFromQuaternion(VS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}vs.DEFAULT_ORDER="XYZ";クラスuc{コンストラクタ(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xR=0;const HS=new q、Ff=new Yr、ba=new Dt、Wm=new q、bd=new q、SR=new q、MR=new Yr、GS=new q(1,0,0),WS=new q(0,1,0),XS=new q(0,0,1),YS={type:"added"},wR={type:"removed"},kf={type:"childadded",child:null},sv={type:"childremoved",child:null};class mn extends Yo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xR++}),this.uuid=gs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mn.DEFAULT_UP.clone();const e=new q,t=new vs,n=new Yr,i=new q(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{位置:{設定可能:!0,列挙可能:!0,値:e},回転:{設定可能:!0,列挙可能:!0,値:t},クォータニオン:{設定可能:!0,列挙可能:!0,値:n},スケール:{設定可能:!0,列挙可能:!0,値:i},モデルビューマトリックス:{値:新しいDt},normalMatrix:{value:新しいWt}}),this.matrix=新しいDt、this.matrixWorld=新しいDt、this.matrixAutoUpdate=mn.DEFAULT_MATRIX_AUTO_UPDATE、this.matrixWorldAutoUpdate=mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE、this.matrixWorldNeedsUpdate=!1、this.layers=新しいuc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ff.setFromAxisAngle(e,t),this.quaternion.multiply(Ff),this}rotateOnWorldAxis(e,t){return Ff.setFromAxisAngle(e,t),this.quaternion.premultiply(Ff),this}rotateX(e){return this.rotateOnAxis(GS,e)}rotateY(e){return this.rotateOnAxis(WS,e)}rotateZ(e){return this.rotateOnAxis(XS,e)}translateOnAxis(e,t){return HS.copy(e).applyQuaternion(this.quaternion),this.position.add(HS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(GS,e)}translateY(e){return this.translateOnAxis(WS,e)}translateZ(e){return this.translateOnAxis(XS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ba.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Wm.copy(e):Wm.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),bd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ba.lookAt(bd,Wm,this.up):ba.lookAt(Wm,bd,this.up),this.quaternion.setFromRotationMatrix(ba),i&&(ba.extractRotation(i.matrixWorld),Ff.setFromRotationMatrix(ba),this.quaternion.premultiply(Ff.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: オブジェクトはそれ自身の子として追加できません。",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(YS),kf.child=e,this.dispatchEvent(kf),kf.child=null):console.error("THREE.Object3D.add: オブジェクトはTHREE.Object3Dのインスタンスではありません。",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wR),sv.child=e,this.dispatchEvent(sv),sv.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ba.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ba.multiply(e.parent.matrixWorld)),e.applyMatrix4(ba),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(YS),kf.child=e,this.dispatchEvent(kf),kf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bd,e,SR),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bd,MR,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="文字列",n={};t&&(e={ジオメトリ:{},マテリアル:{},テクスチャ:{},画像:{},シェイプ:{},スケルトン:{},アニメーション:{},ノード:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid、i.type=this.type、th​​is.name!==""&&(i.name=this.name)、this.castShadow===!0&&(i.castShadow=!0)、this.receiveShadow===!0&&(i.receiveShadow=!0)、this.visible===!1&&(i.visible=!1)、this.frustumCulled===!1&&(i.frustumCulled=!1)、this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this. instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(u=>({boxInitialized:u.boxIn初期化済み、boxMin:u.box.min.toArray()、boxMax:u.box.max.toArray()、sphereInitialized:u.sphereInitialized、sphereRadius:u.sphere.radius、sphereCenter:u.sphere.center.toArray()}))、i.maxInstanceCount=this._maxInstanceCount、i.maxVertexCount=this._maxVertexCount、i.maxIndexCount=this._maxIndexCount、i.geometryInitialized=this._geometryInitialized、i.geometryCount=this._geometryC ount、i.matricesTexture=this._matricesTexture.toJSON(e)、this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e))、this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray()、radius:i.boundingSphere.radius})、this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray()、max:i.boundingBox.max.toArray()}));関数r(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let d=0,m=h.length;d<m;d++){const g=h[d];r(e.shapes,g)}else r(e.shapes,h)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0、d=this.material.length;h<d;h++)u.push(r(e.materials、this.material[h]));i.material=u}else i.material=r(e.materials、this.material);if(this.children.length>0){i.children=[];for(let u=0;u<this.children.length;u++)i.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];i.animations.push(r(e.animations,h))}}if(t){const u=a(e.geometries),h=a(e.materials),d=a(e.textures),m=a(e.images),g=a(e.shapes),_=a(e.skeletons),x=a(e.animations),M=a(e.nodes);u.length>0&&(n.geometries=u),h.length>0&&(n.materials=h),d.length>0&&(n.textures=d),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),_.length>0&&(n.skeletons=_),x.length>0&&(n.animations=x),M.length>0&&(n.nodes=M)}return n.object=i,n;function a(u){const h=[];for(const d in u){const m=u[d];m.metadataを削除、h.push(m)}hを返す}}clone(e){新しいthis.constructor().copy(this、e)を返す}copy(e、t=!0){if(this.name=e.name、this.up.copy(e.up)、this.position.copy(e.position)、this.rotation.order=e.rotation.order、this.quaternion.copy(e.quaternion)、this.scale.copy(e.scale)、this.matrix.copy(e.matrix)、this.matrixWorld.copy(e.matrixWorld)、this.matrixAutoUpdate=e.matrixAutoUpdate、this.matrixWorldAutoUpdate=e.matrixWo rldAutoUpdate、this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate、this.layers.mask=e.layers.mask、this.visible=e.visible、this.castShadow=e.castShadow、this.receiveShadow=e.receiveShadow、this.frustumCulled=e.frustumCulled、this.renderOrder=e.renderOrder、this.animations=e.animations.slice()、this.userData=JSON.parse(JSON.stringify(e.userData))、t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}mn.DEFAULT_UP=新しいq(0,1,0);mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const co=新しいq、Pa=新しいq、ov=新しいq、Ia=新しいq、zf=新しいq、Bf=新しいq、qS=新しいq、av=新しいq、lv=新しいq、uv=新しいq、cv=新しいpn、fv=新しいpn、hv=新しいpn;class Wr{コンストラクタ(e=新しいq、t=新しいq、n=新しいq){this.a=e、this.b=t、this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),co.subVectors(e,t),i.cross(co);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){co.subVectors(i,t),Pa.subVectors(n,t),ov.subVectors(e,t);const a=co.dot(co),u=co.dot(Pa),h=co.dot(ov),d=Pa.dot(Pa),m=Pa.dot(ov),g=a*du*u;if(g===0)return r.set(0,0,0),null;const _=1/g、x=(d*hu*m)*_、M=(a*mu*h)*_;return r.set(1-xM,M,x)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Ia)===null?!1:Ia.x>=0&&Ia.y>=0&&Ia.x+Ia.y<=1}static getInterpolation(e,t,n,i,r,a,u,h){return this.getBarycoord(e,t,n,i,Ia)===null?(hx=0、hy=0,"z"in h&&(hz=0),"w"in h&&(hw=0),null):(h.setScalar(0),h.addScaledVector(r,Ia.x),h.addScaledVector(a,Ia.y),h.addScaledVector(u,Ia.z),h)}static getInterpolatedAttribute(e,t,n,i,r,a){return cv.setScalar(0),fv.setScalar(0),hv.setScalar(0),cv.fromBufferAttribute(e,t),fv.fromBufferAttribute(e,n),hv.fromBuff erAttribute(e,i),a.setScalar(0),a.addScaledVector(cv,rx),a.addScaledVector(fv,ry),a.addScaledVector(hv,rz),a}static isFrontFacing(e,t,n,i){return co.subVectors(n,t),Pa.subVectors(e,t),co.cross(Pa).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(ea),this.b.copy(eb),this.c.copy(ec),this}getArea(){return co.subVectors(this.c,this.b),Pa.subVectors(this.a,this.b),co.cross(Pa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return Wr.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Wr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a、i=this.b、r=this.c;let a、u;zf.subVectors(i、n)、Bf.subVectors(r、n)、av.subVectors(e、n);const h=zf.dot(av)、d=Bf.dot(av);if(h<=0&&d<=0)return t.copy(n);lv.subVectors(e、i);const m=zf.dot(lv)、g=Bf.dot(lv);if(m>=0&&g<=m)return t.copy(i);const _=h*gm*d;if(_<=0&&h>=0&&m<=0)return a=h/(hm),t.copy(n).addScaledVector(zf,a);uv.subVectors(e,r);const x=zf.dot(uv),M=Bf.dot(uv);if(M>=0&&x<=M)return t.copy(r);const T=x*dh*M;if(T<=0&&d>=0&&M<=0)return u=d/(dM),t.copy(n).addScaledVector(Bf,u);const E=m*Mx*g;if(E<=0&&g-m>=0&&x-M>=0)return qS.subVectors(r,i),u=(gm)/(g-m+(xM)),t.copy(i).addScaledVector(qS,u);const S=1/(E+T+_);return a=T*S,u=_*S,t.copy(n).addScaledVector(zf,a).addScaledVector(Bf,u)}equals(e){return eaequals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const eE={アリスブルー:15792383,アンティークホワイト:16444375,アクア:65535,アクアマリン:8388564,アズール:15794175,ベージュ:16119260,ビスク:16770244,ブラック:0,ブランシュダルモンド:16772045,ブルー:255,ブルーバイオレット:9055202,ブラウン:10824234,バーリーウッド:14596231,カデットブルー:6266528,シャルトリューズ:8388352,チョコレート:13789470,コーラル:16 744272、コーンフラワーブルー:6591981、コーンシルク:16775388、クリムゾン:14423100、シアン:65535、ダークブルー:139、ダークシアン:35723、ダークゴールデンロッド:12092939、ダークグレー:111 19017、ダークグリーン:25600、ダークグレー:11119017、ダークカーキ:12433259、ダークマゼンタ:9109643、ダークライブグリーン:5597999、ダークオレンジ:16747520、ダークオーキッド:1004001 2、ダークレッド:9109504、ダークサーモン:15308410、ダークシーグリーン:9419919、ダークスレートブルー:4734347、ダークスレートグレー:3100495、ダークスレートグレー:3100495、ダークターコイズ:52945、ダークバイオレット:9699539、ディープピンク:16716947、ディープスカイブルー:49151、ディムグレー:6908265、ディムグレー:6908265、ドジャーブルー:2003199、ファイアブリック:11674146、フローラルホワイトte:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,ラベンダー:15132410、ラベンダーブラッシュ:16773365、ローングリーン:8190976、レモンシフォン:16775885、ライトブルー:11393254、ライトコーラル:15761536、ライトシアン:14745599、ライトゴールデンロディイエロー:16448210、ライトグレー:13882323、ライトグリーン:9498 256,ライトグレー:13882323,ライトピンク:16758465,ライトサーモン:16752762,ライトシーグリーン:2142890,ライトスカイブルー:8900346,ライトスレートグレー:7833753,ライトスレートグレー:7833753,ライトスチールブルー:11584734,ライトイエロー:16777184,ライム:6 5280、ライムグリーン:3329330、リネン:16445670、マゼンタ:16711935、マルーン:8388608、ミディアムアクアマリン:6737322、ミディアムブルー:205、ミディアムオーキッド:12211667、ミディアムパープル:9662683、ミディアムシーグリーン:3978097、ミディアムスレートブルー:8087790、ミディアムiumspringgreen:64154、mediumturquoise:4772300、mediumvioletred:13047173、midnightblue:1644912、mintcream:16121850、mistyrose:16770273、moccasin:16770229、navajowhite:16768685、navy:128、oldlace:16643558、olive:8421 376,オリーブドラブ:7048739,オレンジ:16753920,オレンジレッド:16729344,オーキッド:14315734,ペールゴールデンロッド:15657130,ペールグリーン:10025880,ペールターコイズ:11529966,ペールバイオレットレッド:14381203,パパイヤホイップ:16773077,ピーチパフ:16767673,パーu:13468991,ピンク:16761035,プラム:14524637,パウダーブルー:11591910,パープル:8388736,レベッカパープル:6697881,レッド:16711680,ロージーブラウン:12357519,ロイヤルブルー:4286945,サドルブラウン:9127187,サーモン:16416882,サンディブラウン:16032864,s eagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal :32896,アザミ:14204888,トマト:16737095,ターコイズ:4251856,バイオレット:15631086,小麦:16113331,白:16777215,ホワイトスモーク:16119285,黄:16776960,黄緑:10145074},bl={h:0,s:0,l:0},Xm={h:0,s:0,l:0};関数dv(s,e,t){戻り値 t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(es)*6*t:t<1/2?e:t<2/3?s+(es)*6*(2/3-t):s}クラス lt{コンストラクタ(e,t,n){戻り値 this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);戻り値 this}setScalar(e){戻り値this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=fn.workingColorSpace){return this.r=e,this.g=t,this.b=n,fn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=fn.workingColorSpace){if(e=tx(e,1),t=Ht(t,0,1),n=Ht(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+tn*t,a=2*nr;this.r=dv(a,r,e+1/3),this.g=dv(a,r,e),this.b=dv(a,r,e-1/3)}return fn.toWorkingColorSpace(this,i),this}setStyle(e,t=Gr){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: "+e+" のアルファ成分は無視されます。")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=i[1],u=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t)​​;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: 不明なカラーモデル "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: 無効な16進カラー "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gr){const n=eE[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: 不明なカラー "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=er,this.g=eg,this.b=eb,this}copySRGBToLinear(e){return this.r=Ba(er),this.g=Ba(eg),this.b=Ba(eb),this}copyLinearToSRGB(e){return this.r=ch(er),this.g=ch(eg),this.b=ch(eb),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gr){return fn.fromWorkingColorSpace(rr.copy(this),e),Math.round(Ht(rr.r*255,0,255))*65536+Math.round(Ht(rr.g*255,0,255))*256+Math.round(Ht(rr.b*255,0,255))}getHexString(e=Gr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fn.workingColorSpace){fn.fromWorkingColorSpace(rr.copy(this),t);const n=rr.r,i=rr.g,r=rr.b,a=Math.max(n,i,r),u=Math.min(n,i,r);let h,d;const m=(u+a)/2;if(u===a)h=0,d=0;else{const g=au;switch(d=m<=.5?g/(a+u):g/(2-au),a){case n:h=(ir)/g+(i<r?6:0);break;case i:h=(rn)/g+2;break;case r:h=(ni)/g+4;break}h/=6}return eh=h,es=d,el=m,e}getRGB(e,t=fn.workingColorSpace){return fn.fromWorkingColorSpace(rr.copy(this),t),er=rr.r,eg=rr.g,eb=rr.b,e}getStyle(e=Gr){fn.fromWorkingColorSpace(rr.copy(this),e);const t=rr.r,n=rr.g,i=rr.b;return e!==Gr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(bl),this.setHSL(bl.h+e,bl.s+t,bl.l+n)}add(e){return this.r+=er,this.g+=eg,this.b+=eb,this}addColors(e,t){return this.r=e.r+tr,this.g=eg+tg,this.b=e.b+tb,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.re.r),this.g=Math.max(0,this.ge.g),this.b=Math.max(0,this.be.b),this}multiply(e){return this.r*=er,this.g*=eg,this.b*=eb,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(er-this.r)*t,this.g+=(eg-this.g)*t,this.b+=(eb-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(tr-er)*n,this.g=e.g+(tg-eg)*n,this.b=e.b+(tb-eb)*n,this}lerpHSL(e,t){this.getHSL(bl),e.getHSL(Xm);const n=$d(bl.h,Xm.h,t),i=$d(bl.s,Xm.s,t),r=$d(bl.l,Xm.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=ex,this.g=ey,this.b=ez,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return er===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const rr=new lt;lt.NAMES=eE;let ER=0;class fr extends Yo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ER++}),this.uuid=gs(),this.name="",this.type="Material",this.blending=oc,this.side=Va,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zg,this.blendDst=Bg,this.blendEquation=Nl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lt(0,0,0)、this.blendAlpha=0、this.depthFunc=mc、this.depthTest=!0、this.depthWrite=!0、this.stencilWriteMask=255、this.stencilFunc=py、this.stencilRef=0、this.stencilFuncMask=255、this.stencilFail=Ju、this.stencilZFail=Ju、this.stencilZPass=Ju、this.stencilWrite=!1、this.clippingPlanes=null、this.clipIntersection=!1、this.clipShadow s=!1、this.shadowSide=null、this.colorWrite=!0、this.precision=null、this.polygonOffset=!1、this.polygonOffsetFactor=0、this.polygonOffsetUnits=0、this.dithering=!1、this.alphaToCoverage=!1、this.premultipliedAlpha=!1、this.forceSinglePass=!1、this.visible=!0、this.toneMapped=!0、this.userData={}、this.version=0、this._alphaTest=0} を取得alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: パラメータ '${t}' の値は undefined です。`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' は3.${this.type}.`);続ける}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.al phaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTe xture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularInten sityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==oc&&(n.blending=this.blending),this.side!==Va&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==zg&&(n.blendSrc=this.blendSrc),this.blendDst!==Bg&&(n.blendDst=this.blendDst),this.blendEquation!==Nl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor =this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==mc&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.color書き込み = this.colorWrite)、this.stencilWriteMask! = = 255 &&(n.stencilWriteMask = this.stencilWriteMask)、this.stencilFunc! = = py &&(n.stencilFunc = this.stencilFunc)、this.stencilRef! = = 0 &&(n.stencilRef = this.stencilRef)、this.stencilFuncMask! = = 255 &&(n.stencilFuncMask = this.stencil FuncMask),this.stencilFail!==Ju&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ju&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ju&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=th is.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);関数i(r){const a=[];for(const u in r){const h=r[u];delete h.metadata,a.push(h)}return a}if(t){const r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors、this.opacity=e.opacity、this.transparent=e.transparent、this.blendSrc=e.blendSrc、this.blendDst=e.blendDst、this.blendEquation=e.blendEquation、this.blendSrcAlpha=e.blendSrcAlpha、this.blendDstAlpha=e.blendDstAlpha、this.blendEquationAlpha=e.blendEquationAlpha、this.blendColor.copy(e.blendColor)、this.blendAlpha=e.blendAlpha、this.depthFun c=e.depthFunc、this.depthTest=e.depthTest、this.depthWrite=e.depthWrite、this.stencilWriteMask=e.stencilWriteMask、this.stencilFunc=e.stencilFunc、this.stencilRef=e.stencilRef、this.stencilFuncMask=e.stencilFuncMask、this.stencilFail=e.stencilFail、this.stencilZFail=e.stencilZFail、this.stencilZPass=e.stencilZPass、this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n、this.clipIntersection=e.clipIntersection、this.clipShadows=e.clipShadows、this.shadowSide=e.shadowSide、this.colorWrite=e.colorWrite、this.precision=e.precision、this.polygonOffset=e.polygonOffset、this.polygonOffsetFactor=e.polygonOffsetFactor、this.polygonOffsetUnits=e.polygonOffsetUnits、this.dithering=e.dithering、th is.alphaTest=e.alphaTest、this.alphaHash=e.alphaHash、this.alphaToCoverage=e.alphaToCoverage、this.premultipliedAlpha=e.premultipliedAlpha、this.forceSinglePass=e.forceSinglePass、this.visible=e.visible、this.toneMapped=e.toneMapped、this.userData=JSON.parse(JSON.stringify(e.userData))、this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("マテリアル: onBuild() は削除されました。")}}class Xl extends fr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vs,this.combine=Pp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fa=TR();関数TR(){const s=新しいArrayBuffer(4),e=新しいFloat32Array(s),t=新しいUint32Array(s),n=新しいUint32Array(512),i=新しいUint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(n[h]=0,n[h|256]=32768,i[h]=24,i[h|256]=24):d<-14?(n[h]=1024>>-d-14,n[h|256]=1024>>-d-14|32768,i[h]=-d-1,i[h|256]=-d-1):d<=15?(n[h]=d+15<<10,n[h|256]=d+15<<10|32768,i[h]=13,i[h|256]=13):d<128?(n[h]=31744,n[h|256]=64512,i[h]=24,i[h|256]=24):(n[h]=31744,n[h|256]=64512,i[h]=13,i[h|256]=13)}定数r=新しいUint32Array(2048),a=新しいUint32Array(64),u=新しいUint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,m=0;for(;!(d&8388608);)d<<=1,m-=8388608;d&=-8388609,m+=947912704,r[h]=d|m}for(let h=1024;h<2048;++h)r[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)a[h]=h<<23;a[31]=1199570944,a[32]=2147483648;for(let h=33;h<63;++h)a[h]=2147483648+(h-32<<23);a[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:r,exponentTable:a,offsetTable:u}}function Hr(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): 値がrange."),s=Ht(s,-65504,65504),Fa.floatView[0]=s;const e=Fa.uint32View[0],t=e>>23&511;return Fa.baseTable[t]+((e&8388607)>>Fa.shiftTable[t])}function Hd(s){const e=s>>10;return Fa.uint32View[0]=Fa.mantissaTable[Fa.offsetTable[e]+(s&1023)]+Fa.exponentTable[e],Fa.floatView[0]}const AR={toHalfFloat:Hr,fromHalfFloat:Hd},fi=new q,Ym=new Ie;let CR=0;class Tn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: 配列は型付き配列である必要があります。");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:CR++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=hp,this.updateRanges=[],this.gpuType=Xr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Ym.fromBufferAttribute(this,t),Ym.applyMatrix3(e),this.setXY(t,Ym.x,Ym.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)fi.fromBufferAttribute(this,t),fi.applyMatrix3(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)fi.fromBufferAttribute(this,t),fi.applyMatrix4(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fi.fromBufferAttribute(this,t),fi.applyNormalMatrix(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fi.fromBufferAttribute(this,t),fi.transformDirection(e),this.setXYZ(t,fi.x,fi.y,fi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Er(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Er(t,this.array)),t}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Er(t,this.array)),t}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Er(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Er(t,this.array)),t}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),i=qt(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),i=qt(i,this.array),r=qt(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==hp&&(e.usage=this.usage),e}}クラスRRはTn{constructor(e,t,n){super(new Int8Array(e),t,n)}}を拡張します。クラスbRはTn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}を拡張します。クラスPRはTn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}を拡張します。クラスIRはTn{コンストラクタ(e,t,n){super(new Int16Array(e),t,n)}}クラスnxはTn{コンストラクタ(e,t,n){super(new Uint16Array(e),t,n)}}を拡張します。クラスLRはTn{コンストラクタ(e,t,n){super(new Int32Array(e),t,n)}}を拡張します。クラスixはTn{コンストラクタ(e,t,n){super(new Uint32Array(e),t,n)}}を拡張します。クラスDRはTn{コンストラクタ(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Hd(this.array[e*this.itemSize]);return this.normalized&&(t=Er(t,this.array)),t}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize]=Hr(t),this}getY(e){let t=Hd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Er(t,this.array)),t}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+1]=Hr(t),this}getZ(e){let t=Hd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Er(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+2]=Hr(t),this}getW(e){let t=Hd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Er(t,this.array)),t}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+3]=Hr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.array[e+0]=Hr(t),this.array[e+1]=Hr(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),i=qt(i,this.array)),this.array[e+0]=Hr(t),this.array[e+1]=Hr(n),this.array[e+2]=Hr(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),i=qt(i,this.array),r=qt(r,this.array)),this.array[e+0]=Hr(t),this.array[e+1]=Hr(n),this.array[e+2]=Hr(i),this.array[e+3]=Hr(r),this}}クラスStはTnを拡張します{コンストラクタ(e,t,n){super(new Float32Array(e),t,n)}}let NR=0;const Ns=new Dt,pv=new mn,Vf=new q,hs=new Cr,Pd=new Cr,Di=new q;クラスKtは拡張しますYo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NR++}),this.uuid=gs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Kw(e)?ix:nx)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Wt().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ns.makeRotationFromQuaternion(e),this.applyMatrix4(Ns),this}rotateX(e){return Ns.makeRotationX(e),this.applyMatrix4(Ns),this}rotateY(e){return Ns.makeRotationY(e),this.applyMatrix4(Ns),this}rotateZ(e){return Ns.makeRotationZ(e),this.applyMatrix4(Ns),this}translate(e,t,n){return Ns.makeTranslation(e,t,n),this.applyMatrix4(Ns),this}scale(e,t,n){return Ns.makeScale(e,t,n),this.applyMatrix4(Ns),this}lookAt(e){return pv.lookAt(e),pv.updateMatrix(),this.applyMatrix4(pv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vf).negate(),this.translate(Vf.x,Vf.y,Vf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,r=e.length;i<r;i++){const a=e[i];n.push(ax,ay,az||0)}this.setAttribute("position",new St(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const r=e[i];t.setXYZ(i,rx,ry,rz||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: バッファサイズがポイントデータには小さすぎます。.dispose() を使用して新しいジオメトリを作成してください。",t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute には手動のバウンディングボックスが必要です。",this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];hs.setFromBufferAttribute(r),this.morphTargetsRelative?(Di.addVectors(this.boundingBox.min,hs.min),this.boundingBox.expandByPoint(Di),Di.addVectors(this.boundingBox.max,hs.max),this.boundingBox.expandByPoint(Di)):(this.boundingBox.expandByPoint(hs.min),this.boundingBox.expandByPoint(hs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): 計算された最小値/最大値はNaN値です。"position"属性はNaN値を持つ可能性があります。',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttributeには手動の境界球が必要です。",this),this.boundingSphere.set(new q,1/0);return}if(e){const n=this.boundingSphere.center;if(hs.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const u=t[r];Pd.setFromBufferAttribute(u),this.morphTargetsRelative?(Di.addVectors(hs.min,Pd.min),hs.expandByPoint(Di),Di.addVectors(hs.max,Pd.max),hs.expandByPoint(Di)):(hs.expandByPoint(Pd.min),hs.expandByPoint(Pd.max))}hs.getCenter(n);let i=0;for(let r=0,a=e.count;r<a;r++)Di.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(Di));if(t)for(let r=0,a=t.length;r<a;r++){const u=t[r],h=this.morphTargetsRelative;for(let d=0,m=u.count;d<m;d++)Di.fromBufferAttribute(u,d),h&&(Vf.fromBufferAttribute(e,d),Di.add(Vf)),i=Math.max(i,n.distanceToSquared(Di))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): 計算された半径は NaN です。 "position"属性はNaN値を持つ可能性があります。',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() が失敗しました。必要な属性（index、position、normal、またはuv）がありません");return}const n=t.position,i=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Tn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),u=[],h=[];for(let z=0;z<n.count;z++)u[z]=new q,h[z]=新しいq;const d=新しいq,m=新しいq,g=新しいq,_=新しいIe,x=新しいIe,M=新しいIe,T=新しいq,E=新しいq;関数S(z,D,N){d.fromBufferAttribute(n,z),m.fromBufferAttribute(n,D),g.fromBufferAttribute(n,N),_.fromBufferAttribute(r,z),x.fromBufferAttribute(r,D),M.fromBufferAttribute(r,N),m.sub(d),g.sub(d),x.sub(_),M.sub(_);const G=1/(xx*My-Mx*xy);isFinite(G)&&(T.copy(m).multiplyScalar(My).addScaledVector(g,-xy).multiplyScalar(G),E.copy(g).multiplyScalar(xx).addScaledVector(m,-Mx).multiplyScalar(G),u[z].add(T),u[D].add(T),u[N].add(T),h[z].add(E),h[D].add(E),h[N].add(E))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let z=0,D=R.length;z<D;++z){const N=R[z],G=N.start,$=N.count;for(let Q=G,ce=G+$;Q<ce;Q+=3)S(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const P=新しいq,I=新しいq,O=新しいq,U=新しいq;function F(z){O.fromBufferAttribute(i,z),U.copy(O);const D=u[z];P.copy(D),P.sub(O.multiplyScalar(O.dot(D))).normalize(),I.crossVectors(U,D);const G=I.dot(h[z])<0?-1:1;a.setXYZW(z,Px,Py,Pz,G)}for(let z=0,D=R.length;z<D;++z){const N=R[z],G=N.start,$=N.count;for(let Q=G,ce=G+$;Q<ce;Q+=3)F(e.getX(Q+0)),F(e.getX(Q+1)),F(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Tn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let _=0,x=n.count;_<x;_++)n.setXYZ(_,0,0,0);const i=new q,r=new q,a=new q,u=new q,h=new q,d=new q,m=new q,g=new q;if(e)for(let _=0,x=e.count;_<x;_+=3){const M=e.getX(_+0),T=e.getX(_+1),E=e.getX(_+2);i.fromBufferAttribute(t,M),r.fromBufferAttribute(t,T),a.fromBufferAttribute(t,E),m.subVectors(a,r),g.subVectors(i,r),m.cross(g),u.fromBufferAttribute(n,M),h.fromBufferAttribute(n,T),d.fromBufferAttribute(n,E),u.add(m),h.add(m),d.add(m),n.setXYZ(M,ux,uy,uz),n.setXYZ(T,hx,hy,hz),n.setXYZ(E,dx,dy,dz)}else for(let _=0、x=t.count;_<x;_+=3)i.fromBufferAttribute(t、_+0)、r.fromBufferAttribute(t、_+1)、a.fromBufferAttribute(t、_+2)、m.subVectors(a、r)、g.subVectors(i、r)、m.cross(g)、n.setXYZ(_+0、mx、my、mz)、n.setXYZ(_+1、mx、my、mz)、n.setXYZ(_+2、mx、my、mz);this.normalizeNormals()、n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0、n=e.count;t<n;t++)Di.fromBufferAttribute(e、t)、Di.normalize(),e.setXYZ(t,Di.x,Di.y,Di.z)}toNonIndexed(){function e(u,h){const d=u.array,m=u.itemSize,g=u.normalized,_=new d.constructor(h.length*m);let x=0,M=0;for(let T=0,E=h.length;T<E;T++){u.isInterleavedBufferAttribute?x=h[T]*u.data.stride+u.offset:x=h[T]*m;for(let S=0;S<m;S++)_[M++]=d[x++]}return new Tn(_,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry はすでにインデックス化されていません。",this;const t=新しいKt、n=this.index.array、i=this.attributes;for(const u in i){const h=i[u]、d=e(h,n);t.setAttribute(u,d)}const r=this.morphAttributes;for(const u in r){const h=[]、d=r[u];for(let m=0、g=d.length;m<g;m++){const _=d[m]、x=e(_,n);h.push(x)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let u=0、h=a.length;u<h;u++){const d=a[u];t.addGroup(d.start、d.count、d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const h in n){const d=n[h];e.data.attributes[h]=d.toJSON(e.data)}const i={};let r=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],m=[];for(let g=0,_=d.length;g<_;g++){const x=d[g];m.push(x.toJSON(e.data))}m.length>0&&(i[h]=m,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const d in i){const m=i[d];this.setAttribute(d,m.clone(t))}const r=e.morphAttributes;for(const d in r){const m=[],g=r[d];for(let _=0,x=g.length;_<x;_++)m.push(g[_].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let d=0,m=a.length;d<m;d++){const g=a[d];this.addGroup(g.start,g.count,g.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"}})}}const jS=new Dt、Ou=new Rh、qm=new ur、ZS=new q、jm=new q、Zm=new q、Jm=new q、mv=new q、Km=new q、JS=new q、Qm=new q;class pi extends mn{constructor(e=new Kt、t=new Xl){super()、this.isMesh=!0、this.type="Mesh",this.geometry=e、this.material=t、this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},emorphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const u=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}getVertexPosition(e,t){const n=this.geometry、i=n.attributes.position、r=n.morphAttributes.position、a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const u=this.morphTargetInfluences;if(r&&u){Km.set(0,0,0);for(let h=0,d=r.length;h<d;h++){const m=u[h]、g=r[h];m!==0&&(mv.fromBufferAttribute(g,e),a?Km.addScaledVector(mv,m):Km.addScaledVector(mv.sub(t),m))}t.add(Km)}return t}raycast(e,t){const n=this.geometry、i=this.material、r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),qm.copy(n.boundingSphere),qm.applyMatrix4(r),Ou.copy(e.ray).recast(e.near),!(qm.containsPoint(Ou.origin)===!1&&(Ou.intersectSphere(qm,ZS)===null||Ou.origin.distanceToSquared(ZS)>(e.far-e.near)**2))&&(jS.copy(r).invert(),Ou.copy(e.ray).applyMatrix4(jS),!(n.boundingBox!==null&&Ou.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Ou)))}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,u=r.index,h=r.attributes.position,d=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,_=r.groups,x=r.drawRange;if(u!==null)if(Array.isArray(a))for(let M=0,T=_.length;M<T;M++){const E=_[M],S=a[E.materialIndex],R=Math.max(E.start,x.start),P=Math.min(u.count,Math.min(E.start+E.count,x.start+x.count));for(let I=R,O=P;I<O;I+=3){const U=u.getX(I),F=u.getX(I+1),z=u.getX(I+2);i=$m(this,S,e,n,d,m,g,U,F,z),i&&(i.faceIndex=Math.floor(I/3),i.face.materialIndex=E.materialIndex,t.push(i))}}else{const M=Math.max(0,x.start),T=Math.min(u.count,x.start+x.count);for(let E=M,S=T;E<S;E+=3){const R=u.getX(E),P=u.getX(E+1),I=u.getX(E+2);i=$m(this,a,e,n,d,m,g,R,P,I),i&&(i.faceIndex=Math.floor(E/3),t.push(i))}}else if(h!==void 0)if(Array.isArray(a))for(let M=0,T=_.length;M<T;M++){const E=_[M],S=a[E.materialIndex],R=Math.max(E.start,x.start),P=Math.min(h.count,Math.min(E.start+E.count,x.start+x.count));for(let I=R,O=P;I<O;I+=3){const U=I,F=I+1,z=I+2;i=$m(this,S,e,n,d,m,g,U,F,z),i&&(i.faceIndex=Math.floor(I/3),i.face.materialIndex=E.materialIndex,t.push(i))}}else{const M=Math.max(0,x.start),T=Math.min(h.count,x.start+x.count);for(let E=M,S=T;E<S;E+=3){const R=E,P=E+1,I=E+2;i=$m(this,a,e,n,d,m,g,R,P,I),i&&(i.faceIndex=Math.floor(E/3),t.push(i))}}}}関数 UR(s,e,t,n,i,r,a,u){let h;if(e.side===Ar?h=n.intersectTriangle(a,r,i,!0,u):h=n.intersectTriangle(i,r,a,e.side===Va,u),h===null)return null;Qm.copy(u),Qm.applyMatrix4(s.matrixWorld);const d=t.ray.origin.distanceTo(Qm);return d<t.near||d>t.far?null:{距離:d,点:Qm.clone(),オブジェクト:s}}関数$m(s,e,t,n,i,r,a,u,h,d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,newつまり)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}class Mc extends Kt{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);定数h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {{距離:d、点:Qm.clone()、オブジェクト:s}}関数 $m(s,e,t,n,i,r,a,u,h,d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}class Mc extends Kt{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function M(T,E,S,R,P,I,O,U,F,z,D){const N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;let de=0,B=0;const K=new q;for(let J=0;J<ue;J++){const W=J*GQ;for(let te=0;te<me;te++){const Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for(let J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J、Pe=_+W+me*(J+1)、se=_+(W+1)+me*(J+1)、xe=_+(W+1)+me*J;h.push(te,Pe,xe)、h.push(Pe,se,xe)、B+=6}u.addGroup(x,B,D)、x+=B、_+=de}}copy(e){return super.copy(e)、this.parameters=Object.assign({},e.parameters)、this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {{距離:d、点:Qm.clone()、オブジェクト:s}}関数 $m(s,e,t,n,i,r,a,u,h,d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}class Mc extends Kt{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function M(T,E,S,R,P,I,O,U,F,z,D){const N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;let de=0,B=0;const K=new q;for(let J=0;J<ue;J++){const W=J*GQ;for(let te=0;te<me;te++){const Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for(let J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J、Pe=_+W+me*(J+1)、se=_+(W+1)+me*(J+1)、xe=_+(W+1)+me*J;h.push(te,Pe,xe)、h.push(Pe,se,xe)、B+=6}u.addGroup(x,B,D)、x+=B、_+=de}}copy(e){return super.copy(e)、this.parameters=Object.assign({},e.parameters)、this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {clone(),object:s}}function $m(s,e,t,n,i,r,a,u,h,d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}class Mc extends Kt{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function M(T,E,S,R,P,I,O,U,F,z,D){const N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;let de=0,B=0;const K=new q;for(let J=0;J<ue;J++){const W=J*GQ;for(let te=0;te<me;te++){const Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for(let J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J、Pe=_+W+me*(J+1)、se=_+(W+1)+me*(J+1)、xe=_+(W+1)+me*J;h.push(te,Pe,xe)、h.push(Pe,se,xe)、B+=6}u.addGroup(x,B,D)、x+=B、_+=de}}copy(e){return super.copy(e)、this.parameters=Object.assign({},e.parameters)、this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {clone(),object:s}}function $m(s,e,t,n,i,r,a,u,h,d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}class Mc extends Kt{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function M(T,E,S,R,P,I,O,U,F,z,D){const N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;let de=0,B=0;const K=new q;for(let J=0;J<ue;J++){const W=J*GQ;for(let te=0;te<me;te++){const Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for(let J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J、Pe=_+W+me*(J+1)、se=_+(W+1)+me*(J+1)、xe=_+(W+1)+me*J;h.push(te,Pe,xe)、h.push(Pe,se,xe)、B+=6}u.addGroup(x,B,D)、x+=B、_+=de}}copy(e){return super.copy(e)、this.parameters=Object.assign({},e.parameters)、this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}クラスMcはKtを拡張します{コンストラクタ(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {d){s.getVertexPosition(u,jm),s.getVertexPosition(h,Zm),s.getVertexPosition(d,Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}クラスMcはKtを拡張します{コンストラクタ(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}クラスMcはKtを拡張します{コンストラクタ(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {Jm);const m=UR(s,e,t,n,jm,Zm,Jm,JS);if(m){const g=new q;Wr.getBarycoord(JS,jm,Zm,Jm,g),i&&(m.uv=Wr.getInterpolatedAttribute(i,u,h,d,g,new Ie)),r&&(m.uv1=Wr.getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}クラスMcはKtを拡張します{コンストラクタ(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}クラスMcは拡張しますKt{コンストラクタ(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {getInterpolatedAttribute(r,u,h,d,g,new Ie)),a&&(m.normal=Wr.getInterpolatedAttribute(a,u,h,d,g,new q),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new q,materialIndex:0};Wr.getNormal(jm,Zm,Jm,_.normal),m.face=_,m.barycoord=g}return m}クラスMcは拡張しますKt{コンストラクタ(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const u=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const h=[],d=[],m=[],g=[];let _=0,x=0;M("z","y","x",-1,-1,n,t,e,a,r,0),M("z","y","x",1,-1,n,t,-e,a,r,1),M("x","z","y",1,1,e,n,t,i,a,2),M("x","z","y",1,-1,e,n,-t,i,a,3),M("x","y","z",1,-1,e,t,n,i,r,4),M("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(h),this.setAttribute("position",新しいSt(d,3)),this.setAttribute("normal",新しいSt(m,3)),this.setAttribute("uv",新しいSt(g,2));関数M(T,E,S,R,P,I,O,U,F,z,D){定数 N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;de=0,B=0;定数 K=new q;for(J=0;J<ue;J++){定数 W=J*GQ;for(te=0;te<me;te++){定数 Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for( J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J,Pe=_+W+me*(J+1),se=_+(W+1)+me*(J+1),xe=_+(W+1)+me*J;h.push(te,Pe,xe),h.push(Pe,se,xe),B+=6}u.addGroup(x,B,D),x+=B,_+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function M(T,E,S,R,P,I,O,U,F,z,D){const N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;let de=0,B=0;const K=new q;for(let J=0;J<ue;J++){const W=J*GQ;for(let te=0;te<me;te++){const Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for(let J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J、Pe=_+W+me*(J+1)、se=_+(W+1)+me*(J+1)、xe=_+(W+1)+me*J;h.push(te,Pe,xe)、h.push(Pe,se,xe)、B+=6}u.addGroup(x,B,D)、x+=B、_+=de}}copy(e){return super.copy(e)、this.parameters=Object.assign({},e.parameters)、this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function M(T,E,S,R,P,I,O,U,F,z,D){const N=I/F,G=O/z,$=I/2,Q=O/2,ce=U/2,me=F+1,ue=z+1;let de=0,B=0;const K=new q;for(let J=0;J<ue;J++){const W=J*GQ;for(let te=0;te<me;te++){const Pe=te*N-$;K[T]=Pe*R,K[E]=W*P,K[S]=ce,d.push(Kx,Ky,Kz),K[T]=0,K[E]=0,K[S]=U>0?1:-1,m.push(Kx,Ky,Kz),g.push(te/F),g.push(1-J/z),de+=1}}for(let J=0;J<z;J++)for(let W=0;W<F;W++){const te=_+W+me*J、Pe=_+W+me*(J+1)、se=_+(W+1)+me*(J+1)、xe=_+(W+1)+me*J;h.push(te,Pe,xe)、h.push(Pe,se,xe)、B+=6}u.addGroup(x,B,D)、x+=B、_+=de}}copy(e){return super.copy(e)、this.parameters=Object.assign({},e.parameters)、this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: レンダーターゲットのテクスチャは、cloneUniforms() または mergeUniforms() で複製できません。"),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wr(s){const e={};for(let t=0;t<s.length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {length;t++){const n=gh(s[t]);for(const i in n)e[i]=n[i]}return e}関数 OR(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}関数 tE(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const nE={clone:gh,merge:wr};var FR=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( 位置, 1.0 );
}`,kR=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;クラス go は fr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=FR,this.fragmentShader=kR,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void を拡張します。 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gh(e.uniforms),this.uniformsGroups=OR(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a& &a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Dp extends mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dt,this.projectionMatrix=new Dt,this.projectionMatrixInverse=new Dt,this.coordinateSystem=po}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Pl=new q,KS=new Ie,QS=new Ie;class Ni extends Dp{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n、this.far=i、this.focus=10、this.aspect=t、this.view=null、this.filmGauge=35、this.filmOffset=0、this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=mh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(lc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return mh*2*Math.atan(Math.tan(lc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Pl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Pl.x,Pl.y).multiplyScalar(-e/Pl.z),Pl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Pl.x,Pl.y).multiplyScalar(-e/Pl.z)}getViewSize(e,t){return this.getViewBounds(e,KS,QS),t.subVectors(QS,KS)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(lc*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const h=a.fullWidth,d=a.fullHeight;r+=a.offsetX*i/h,t-=a.offsetY*n/d,i*=a.width/h,n*=a.height/d}const u=this.filmOffset;u!==0&&(r+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,tn,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Hf=-90、Gf=1;クラス iE は mn を拡張します{コンストラクタ(e,t,n){super()、this.type="CubeCamera",this.renderTarget=n、this.coordinateSystem=null、this.activeMipmapLevel=0;const i=new Ni(Hf,Gf,e,t);i.layers=this.layers,this.add(i);const r=new Ni(Hf,Gf,e,t);r.layers=this.layers,this.add(r);const a=new Ni(Hf,Gf,e,t);a.layers=this.layers,this.add(a);const u=new Ni(Hf,Gf,e,t);u.layers=this.layers,this.add(u);const h=new Ni(Hf,Gf,e,t);h.layers=this.layers,this.add(h);const d=new Ni(Hf,Gf,e,t);d.layers=this.layers、this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem、t=this.children.concat()、[n、i、r、a、u、h]=t;for(const d of t)this.remove(d);if(e===po)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);その他if(e===dp)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): 無効な座標系: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,u,h,d,m]=this.children,g=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,u),e.setRenderTarget(n,3,i),e.render(t,h),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,i),e.render(t,m),e.setRenderTarget(g,_,x),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}クラスNpは拡張しますzn{コンストラクタ(e,t,n,i,r,a,u,h,d,m){e=e!==void 0?e:[],t=t!==void 0?t:Ha,super(e,t,n,i,r,a,u,h,d,m),this.isCubeTexture=!0,this.flipY=!1}画像を取得(){this.imageを返す}画像を設定する(e){this.image=e}}クラスrEはWoを拡張します{コンストラクタ(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Np(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ei}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`座標システムを更新します());const[r,a,u,h,d,m]=this.children,g=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,u),e.setRenderTarget(n,3,i),e.render(t,h),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,i),e.render(t,m),e.setRenderTarget(g,_,x),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}クラスNpは拡張しますzn{コンストラクタ(e,t,n,i,r,a,u,h,d,m){e=e!==void 0?e:[],t=t!==void 0?t:Ha,super(e,t,n,i,r,a,u,h,d,m),this.isCubeTexture=!0,this.flipY=!1}画像を取得(){this.imageを返す}画像を設定する(e){this.image=e}}クラスrEはWoを拡張します{コンストラクタ(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Np(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ei}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`座標システムを更新します());const[r,a,u,h,d,m]=this.children,g=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,u),e.setRenderTarget(n,3,i),e.render(t,h),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,i),e.render(t,m),e.setRenderTarget(g,_,x),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}クラスNpは拡張しますzn{コンストラクタ(e,t,n,i,r,a,u,h,d,m){e=e!==void 0?e:[],t=t!==void 0?t:Ha,super(e,t,n,i,r,a,u,h,d,m),this.isCubeTexture=!0,this.flipY=!1}画像を取得(){this.imageを返す}画像を設定する(e){this.image=e}}クラスrEはWoを拡張します{コンストラクタ(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Np(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ei}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				変化する vec3 vWorldDirection;

				vec3 transformDirection( vec3 dir, mat4 行列 ) {

					正規化を返します( ( 行列 * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = 変換方向(位置, モデルマトリックス);

					#include <開始頂点>
					#include <プロジェクト頂点>

				}
			`,フラグメントシェーダー:`

				均一サンプラー2D tEquirect;

				変化する vec3 vWorldDirection;

				#include <共通>

				void main() {

					vec3 方向 = 正規化( vWorldDirection );

					vec2 sampleUV = equirectUv( 方向 );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Mc(5,5,5),r=new go({name:"CubemapFromEquirect",uniforms:gh(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ar,blending:za});r.uniforms.tEquirect.value=t;const a=new pi(i,r),u=t.minFilter;return t.minFilter===Fo&&(t.minFilter=Ei),new iE(1,10,this).update(e,a),t.minFilter=u,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}class rh extends mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zR={type:"move"};class Dg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=新しい q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=新しい q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=新しい rh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=新しい q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=新しいq),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const u=this._targetRay,h=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){a=!0;for(const T of e.hand.values()){const E=t.getJointPose(T,n),S=this._getHandJoint(d,T);E!==null&&(S.matrix.fromArray(E.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=E.radius),S​​.visible=E!==null}const m=d.joints["人差し指の先端"],g=d.joints["親指の先端"],_=m.position.distanceTo(g.position),x=.02,M=.005;d.inputState.pinching&&_>x+M?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&_<=xM&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(h.matrix.fromArray(r.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,r.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(r.linearVelocity)):h.hasLinearVelocity=!1,r.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(r.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(i=t.getPose( e.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(zR)))}return u!==null&&(u.visible=i!==null),h!==null&&(h.visible=r!==null),d!==null&&(d.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new rh;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Y0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new lt(e),this.density=t}clone(){return new Y0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class q0{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new lt(e),this.near=t,this.far=n}clone(){return new q0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let rx=class extends mn{コンストラクタ(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new vs,this.environmentIntensity=1,this.environmentRotation=new vs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.envirmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this. を返します。backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class j0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=hp,this.updateRanges=[],this.version=0,this.uuid=gs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Mr=new q;class yc{コンストラクタ(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Mr.fromBufferAttribute(this,t),Mr.applyMatrix4(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Mr.fromBufferAttribute(this,t),Mr.applyNormalMatrix(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Mr.fromBufferAttribute(this,t),Mr.transformDirection(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Er(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Er(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Er(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Er(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Er(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),i=qt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),i=qt(i,this.array),r=qt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): インターリーブされたバッファ属性を複製すると、バッファデータがインターリーブ解除されます。");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new Tn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): インターリーブされたバッファ属性をシリアル化すると、バッファデータがデインターリーブされます。");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class sx extends fr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Wf;const Id=new q,Xf=new q,Yf=new q,qf=new Ie,Ld=new Ie,sE=new Dt,eg=new q,Dd=new q,tg=new q,$S=new Ie,gv=new Ie,e1=new Ie;class oE extends mn{constructor(e=new sx){if(super(),this.isSprite=!0,this.type="Sprite",Wf===void 0){Wf=new Kt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new j0(t,5);Wf.setIndex([0,1,2,0,2,3]),Wf.setAttribute("position",new yc(n,3,0,!1)),Wf.setAttribute("uv",new yc(n,2,3,!1))}this.geometry=Wf,this.material=e,this.center=new Ie(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: スプライトに対してレイキャストするには、「Raycaster.camera」を設定する必要があります。'),Xf.setFromMatrixScale(this.matrixWorld),sE.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Yf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Xf.multiplyScalar(-Yf.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;ng(eg.set(-.5,-.5,0),Yf,a,Xf,i,r),ng(Dd.set(.5,-.5,0),Yf,a,Xf,i,r),ng(tg.set(.5,.5,0),Yf,a,Xf,i,r),$S.set(0,0),gv.set(1,0),e1.set(1,1);let u=e.ray.intersectTriangle(eg,Dd,tg,!1,Id);if(u===null&&(ng(Dd.set(-.5,.5,0),Yf,a,Xf,i,r),gv.set(0,1),u=e.ray.intersectTriangle(eg,tg,Dd,!1,Id),u===null))return;const h=e.ray.origin.distanceTo(Id);h<e.near||h>e.far||t.push({distance:h,point:Id.clone(),uv:Wr.getInterpolation(Id,eg,Dd,tg,$S,gv,e1,new Ie),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ng(s,e,t,n,i,r){qf.subVectors(s,t).addScalar(.5).multiply(n),i!==void 0?(Ld.x=r*qf.xi*qf.y,Ld.y=i*qf.x+r*qf.y):Ld.copy(qf),s.copy(e),s.x+=Ld.x,s.y+=Ld.y,s.applyMatrix4(sE)}const ig=new q,t1=new q;class aE extends mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.レベル;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ig.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(ig);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ig.setFromMatrixPosition(e.matrixWorld),t1.setFromMatrixPosition(this.matrixWorld);const n=ig.distanceTo(t1)/e.zoom;t[0].object.visible=!0;let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const n1=new q,i1=new pn,r1=new pn,BR=new q,s1=new Dt,rg=new q,_v=new ur,o1=new Dt,vv=new Rh;class lE extends pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=dy,this.bindMatrix=new Dt,this.bindMatrixInverse=new Dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Cr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,rg),this.boundingBox.expandByPoint(rg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ur),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,rg),this.boundingSphere.expandByPoint(rg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_v.copy(this.boundingSphere),_v.applyMatrix4(i),e.ray.intersectsSphere(_v)!==!1&&(o1.copy(i).invert(),vv.copy(e.ray).applyMatrix4(o1),!(this.boundingBox!==null&&vv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new pn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,ex,ey,ez,ew)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===dy?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Fw?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: 認識されないbindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;i1.fromBufferAttribute(i.attributes.skinIndex,e),r1.fromBufferAttribute(i.attributes.skinWeight,e),n1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=r1.getComponent(r);if(a!==0){const u=i1.getComponent(r);s1.multiplyMatrices(n.bones[u].matrixWorld,n.boneInverses[u]),t.addScaledVector(BR.copy(n1).applyMatrix4(s1),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}クラスoxは拡張しますmn{コンストラクタ(){super(),this.isBone=!0,this.type="Bone"}}クラスBoはzn{コンストラクタ(e=null,t=1,n=1,i,r,a,u,h,d=qi,m=qi,g,_){super(null,a,u,h,d,m,i,r,g,_),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const a1=new Dt,VR=new Dt;クラスを拡張しますZ0{constructor(e=[],t=[]){this.uuid=gs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: 逆ボーン行列の数がボーンの数と一致しません。"),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Dt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const u=e[r]?e[r].matrixWorld:VR;a1.multiplyMatrices(u,t[r]),a1.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Z0(this.bones、this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Bo(t,e,e,ar,Xr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const r=e.bones[n];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: UUIDのボーンが見つかりません:",r),a=new ox),this.bones.push(a),this.boneInverses.push(new Dt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const a=t[i];e.bones.push(a.uuid);const u=n[i];e.boneInverses.push(u.toArray())}return e}}class _h extends Tn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const jf=new Dt,l1=new Dt,sg=[],u1=new Cr,HR=new Dt,Nd=new pi,Ud=new ur;class uE extends pi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new _h(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,HR)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Cr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,jf),u1.copy(e.boundingBox).applyMatrix4(jf),this.boundingBox.union(u1)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ur),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,jf),Ud.copy(e.boundingSphere).applyMatrix4(jf),this.boundingSphere.union(Ud)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences、i=this.morphTexture.source.data.data、r=n.length+1、a=e*r+1;for(let u=0;u<n.length;u++)n[u]=i[a+u]}raycast(e,t){const n=this.matrixWorld、i=this.count;if(Nd.geometry=this.geometry、Nd.material=this.material、Nd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere()、Ud.copy(this.boundingSphere)、Ud.applyMatrix4(n)、e.ray.intersectsSphere(Ud)!==!1))for(let r=0;r<i;r++){this.getMatrixAt(r,jf),l1.multiplyMatrices(n,jf),Nd.matrixWorld=l1,Nd.raycast(e,sg);for(let a=0,u=sg.length;a<u;a++){const h=sg[a];h.instanceId=r,h.object=this,t.push(h)}sg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new _h(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Bo(new Float32Array(i*this.count),i,this.count,B0,Xr));const r=this.morphTexture.source.data.data;let a=0;for(let d=0;d<n.length;d++)a+=n[d];const u=this.geometry.morphTargetsRelative?1:1-a,h=i*e;r[h]=u,r.set(n,h+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const yv=new q,GR=new q,WR=new Wt;class Dl{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=yv.subVectors(n,t).cross(GR.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(yv),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||WR.getNormalMatrix(e),i=this.coplanarPoint(yv).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Fu=new ur,og=new q;class Up{constructor(e=new Dl,t=new Dl,n=new Dl,i=new Dl,r=new Dl,a=new Dl){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(n),u[3].copy(i),u[4].copy(r),u[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=po){const n=this.planes、i=e.elements、r=i[0]、a=i[1]、u=i[2]、h=i[3]、d=i[4]、m=i[5]、g=i[6]、_=i[7]、x=i[8]、M=i[9]、T=i[10]、E=i[11]、S=i[12]、R=i[13]、P=i[14]、I=i[15];if(n[0].setComponents(hr,_-d,Ex,IS).normalize()、n[1].setComponents(h+r,_+d ,E+x,I+S).normalize(),n[2].setComponents(h+a,_+m,E+M,I+R).normalize(),n[3].setComponents(ha,_-m,EM,IR).normalize(),n[4].setComponents(hu,_-g,ET,IP).normalize(),t===po)n[5].setComponents(h+u,_+g,E+T,I+P).normalize(); そうでなければif(t===dp)n[5].setComponents(u,g,T,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): 無効な座標系: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Fu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Fu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Fu)}intersectsSprite(e){return Fu.center.set(0,0,0),Fu.radius=.7071067811865476,Fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fu)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(og.x=i.normal.x>0?e.max.x:e.min.x,og.y=i.normal.y>0?e.max.y:e.min.y,og.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(og)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function xv(s,e){return se}function XR(s,e){return sz-ez}function YR(s,e){return ez-sz}クラスqR{コンストラクタ(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const u=r[this.index];a.push(u),this.index++,u.start=e,u.count=t,uz=n,u.index=i}reset(){this.list.length=0,this.index=0}}const Vr=new Dt,jR=new lt(1,1,1),Sv=new Up,ag=new Cr,ku=new ur,Od=new q,c1=new q,ZR=new q,Mv=new qR,sr=new pi,lg=[];関数JR(s,e,t=0){const n=e.itemSize;if(s.isInterleavedBufferAttribute||s.array.constructor!==e.array.constructor){const i=s.count;for(let r=0;r<i;r++)for(let a=0;a<n;a++)e.setComponent(r+t,a,s.getComponent(r,a))}else e.array.set(s.array,t*n);e.needsUpdate=!0}function zu(s,e){if(s.constructor!==e.constructor){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++)e[n]=s[n]}else{const t=Math.min(s.length,e.length);e.set(new s.constructor(s.buffer,0,t))}}class cE extends pi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.長さ}未使用頂点数を取得する(){this._maxVertexCount-this._nextVertexStartを返す}未使用インデックス数を取得する(){this._maxIndexCount-this._nextIndexStartを返す}コンストラクタ(e,t,n=t*2,i){super(new Kt,i)、this.isBatchedMesh=!0、this.perObjectFrustumCulled=!0、this.sortObjects=!0、this.boundingBox=null、this.boundingSphere=null、this.customSort=null、this._instanceInfo=[]、this._geometryInfo=[]、this._availableInstanceIds=[]、this._availableGeometryIds=[]、this._nextIndexStart=0、this._nextVertexStart=0、this._geometryCount=0、this._visibilityChanged=!0、this._geometryInitialized=!1、this._maxInstanceCount=e、this._maxVertexCount=t、this._maxIndexCount=n、this._multiDrawCounts=new Int32Array(e)、this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Bo(t,e,e,ar,Xr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Bo(t,e,e,Ip,Ga);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Bo(t,e,e,ar,Xr);n.colorSpace=fn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const a=e.getAttribute(r),{array:u,itemSize:h,normalized:d}=a,m=new u.constructor(n*h),g=new Tn(m,h,d);t.setAttribute(r,g)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Tn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: すべてのジオメトリは一貫して "index" を持つ必要があります。');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: 追加されたジオメトリに "${n}" がありません。すべてのジオメトリは一貫した属性を持つ必要があります。`);const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: すべての属性は、一貫したitemSizeと正規化された値を持つ必要があります。")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: 無効なinstanceId ${e}。インスタンスが範囲外か削除されています。`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: 無効なgeometryId ${e}。ジオメトリが範囲外か削除されています。`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Vr),this.getBoundingBoxAt(r,ag).applyMatrix4(Vr),e.union(ag)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ur);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Vr),this.getBoundingSphereAt(r,ku).applyMatrix4(Vr),e.union(ku)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: アイテムの最大数に達しました。");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(xv),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Vr.identity().toArray(r.image.data,i*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(jR.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?a.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: 予約済みスペース要求が最大バッファサイズを超えています。");let h;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(xv),h=this._availableGeometryIds.shift(),r[h]=i):(h=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(h,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: ジオメトリの最大数に達しました。");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,r=n.getIndex(),a=t.getIndex(),u=this._geometryInfo[e];if(i&&a.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: 指定されたジオメトリに対して予約領域が十分ではありません。");const h=u.vertexStart,d=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const g=t.getAttribute(m),_=n.getAttribute(m);JR(g,_,h);const x=g.itemSize;for(let M=g.count,T=d;M<T;M++){const E=h+M;for(let S=0;S<x;S++)_。setComponent(E,S,0)}_.needsUpdate=!0,_.addUpdateRange(h*x,d*x)}if(i){const m=u.indexStart,g=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let _=0;_<a.count;_++)r.setX(m+_,h+a.getX(_));for(let _=a.count,x=g;_<x;_++)r.setX(m+_,h);r.needsUpdate=!0,r.addUpdateRange(m,u.reservedIndexCount)}return u.start=i?u.indexStart:u.vertexStart,u.count=i?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((a,u)=>u).sort((a,u)=>n[a].vertexStart-n[u].vertexStart),r=this.geometry;for(let a=0,u=n.length;a<u;a++){const h=i[a],d=n[h];if(d.active!==!1){if(r.index!==null){if(d.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:_}=d,x=r.index,M=x.array,T=eg;for(let E=m;E<m+_;E++)M[E]=M[E]+T;x.array.copyWithin(t,m,m+_),x.addUpdateRange(t,_),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=d,_=r.attributes;for(const x in _){const M=_[x],{array:T,itemSize:E}=M;T.copyWithin(e*E,m*E,(m+g)*E),M.addUpdateRange(e*E,g*E)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=r.index?d.indexStart:d.vertexStart,this._nextIndexStart=r.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const r=new Cr,a=n.index,u=n.attributes.position;for(let h=i.start,d=i.start+i.count;h<d;h++){let m=h;a&&(m=a.getX(m)),r.expandByPoint(Od.fromBufferAttribute(u,m))}i.boundingBox=r}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const r=new ur;this.getBoundingBoxAt(e,ag),ag.getCenter(r.center);const a=n.index,u=n.attributes.position;let h=0;for(let d=i.start、m=i.start+i.count;d<m;d++){let g=d;a&&(g=a.getX(g)),Od.fromBufferAttribute(u,g),h=Math.max(h,r.center.distanceToSquared(Od))}r.radius=Math.sqrt(h),i.boundingSphere=r}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart、t.vertexCount=n.vertexCount、t.reservedVertexCount=n.reservedVertexCount、t.indexStart=n.indexStart、t.indexCount=n.indexCount、t.reservedIndexCount=n.reservedIndexCount、t.start=n.start、t.count=n.count、t}setInstanceCount(e){const t=this._availableInstanceIds、n=this._instanceInfo;for(t.sort(xv);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: 範囲 ${e} 外のインスタンス ID が使用されています。インスタンス数を縮小できません。`);const i=new Int32Array(e),r=new Int32Array(e);zu(this._multiDrawCounts,i),zu(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=e;const a=this._indirectTexture,u=this._matricesTexture,h=this._colorsTexture;a.dispose(),this._initIndirectTexture(),zu(a.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),zu(u.image.data,this._matricesTexture.image.data),h&&(h.dispose(),this._initColorsTexture(),zu(h.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...n.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: ジオメトリの頂点値が範囲 ${t} 外で使用されています。これ以上縮小できません。`);if(this.geometry.index&&Math.max(...n.map(h=>h.indexStart+h.reservedIndexCount))>t)throw new Error(`BatchedMesh: ジオメトリのインデックス値が範囲 ${t} 外で使用されています。これ以上縮小できません。`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Kt、this._initializeGeometry(r));const a=this.geometry;r.index&&zu(r.index.array、a.index.array);for(const u in r.attributes)zu(r.attributes[u].array、a.attributes[u].array)}raycast(e、t){const n=this._instanceInfo、i=this._geometryInfo、r=this.matrixWorld、a=this.geometry;sr.material=this.material、sr.geometry.index=a.index、sr.geometry.attributes=a.attributes、sr.geometry.boundingBox===null&&(sr.geometry.boundingBox=new Cr),sr.geometry.boundingSphere===null&&(sr.geometry.boundingSphere=new ur);for(let u=0,h=n.length;u<h;u++){if(!n[u].visible||!n[u].active)continue;const d=n[u].geometryIndex,m=i[d];sr.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(u,sr.matrixWorld).premultiply(r),this.getBoundingBoxAt(d,sr.geometry.boundingBox),this.getBoundingSphereAt(d,sr.geometry.boundingSphere),sr.raycast(e,lg);for(let g=0,_=lg.length;g<_;g++){const x=lg[g];x.object=this,x.batchId=u,t.push(x)}lg.length=0}sr.material=null,sr.geometry.index=null,sr.geometry.attributes={},sr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,thi s._geometryInfo=e._geometryInfo.map(t=>({...t、boundingBox:t.boundingBox!==null?t.boundingBox.clone():null、boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,t his._maxVertexCount=e._maxVertexCount、this._maxIndexCount=e._maxIndexCount、this._geometryInitialized=e._geometryInitialized、this._geometryCount=e._geometryCount、this._multiDrawCounts=e._multiDrawCounts.slice()、this._multiDrawStarts=e._multiDrawStarts.slice()、this._matricesTexture=e._matricesTexture.clone()、this._matricesTexture.image.data=this._matricesTexture.image.data.slice()、this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone()、this._colorsTexture.image.data=this._colorsTexture.image.data.slice())、this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),u=a===null?1:a.array.BYTES_PER_ELEMENT,h=this._instanceInfo,d=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,_=this.perObjectFrustumCulled,x=this._indirectTexture,M=x.image.data;_&&(Vr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Sv.setFromProjectionMatrix(Vr,e.coordinateSystem));let T=0;if(this.sortObjects){Vr.copy(this.matrixWorld).invert(),Od.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Vr),c1.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Vr);for(let R=0,P=h.length;R<P;R++)if(h[R].visible&&h[R].active){const I=h[R].geometryIndex;this.getMatrixAt(R,Vr),this.getBoundingSphereAt(I,ku).applyMatrix4(Vr);let O=!1;if(_&&(O=!Sv.intersectsSphere(ku)),!O){const U=g[I]、F=ZR.subVectors(ku.center、Od).dot(c1);Mv.push(U.start、U.count、F、R)}}const E=Mv.list、S=this.customSort;S===null?E.sort(r.透明ですか?YR:XR):S.call(this,E,n);for(let R=0,P=E.length;R<P;R++){const I=E[R];d[T]=I.start*u,m[T]=I.count,M[T]=I.index,T++}Mv.reset()}else for(let E=0,S=h.length;E<S;E++)if(h[E].visible&&h[E].active){const R=h[E].geometryIndex;let P=!1;if(_&&(this.getMatrixAt(E,Vr),this.getBoundingSphereAt(R,ku).applyMatrix4(Vr),P=!Sv.intersectsSphere(ku)),!P){const I=g[R];d[T]=I.start*u,m[T]=I.count,M[T]=E,T++}}x.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,a){this.onBeforeRender(e,null,i,r,a)}}クラスRrはfr{コンストラクタ(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const S0=新しいq,M0=新しいq,f1=新しいDt,Fd=新しいRh,ug=新しいur,wv=新しいq,h1=新しいq;class Vl extends mn{constructor(e=新しいKt,t=新しいRr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)S0.fromBufferAttribute(t,i-1),M0.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=S0.distanceTo(M0);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.Line.computeLineDistances(): 計算はインデックスなしのBufferGeometryでのみ可能です。");return this}raycast(e,t){const n=this.geometry、i=this.matrixWorld、r=e.params.Line.threshold、a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere()、ug.copy(n.boundingSphere)、ug.applyMatrix4(i)、ug.radius+=r、e.ray.intersectsSphere(ug)===!1)return;f1.copy(i).invert()、Fd.copy(e.ray).applyMatrix4(f1);const u=r/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=this.isLineSegments?2:1,m=n.index,_=n.attributes.position;if(m!==null){const x=Math.max(0,a.start),M=Math.min(m.count,a.start+a.count);for(let T=x,E=M-1;T<E;T+=d){const S=m.getX(T),R=m.getX(T+1),P=cg(this,e,Fd,h,S,R,T);P&&t.push(P)}if(this.isLineLoop){const T=m.getX(M-1),E=m.getX(x),S=cg(this,e,Fd,h,T,E,M-1);S&&t.push(S)}}else{const x=Math.max(0,a.start),M=Math.min(_.count,a.start+a.count);for(let T=x,E=M-1;T<E;T+=d){const S=cg(this,e,Fd,h,T,T+1,T);S&&t.push(S)}if(this.isLineLoop){const T=cg(this,e,Fd,h,M-1,x,M-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const u=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}}function cg(s,e,t,n,i,r,a){const u=s.geometry.attributes.position;if(S0.fromBufferAttribute(u,i),M0.fromBufferAttribute(u,r),t.distanceSqToSegment(S0,M0,wv,h1)>n)return;wv.applyMatrix4(s.matrixWorld);const d=e.ray.origin.distanceTo(wv);if(!(d<e.near||d>e.far))return{distance:d,point:h1.clone().applyMatrix4(s.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:s}}const d1=new q,p1=new q;class qo extends Vl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)d1.fromBufferAttribute(t,i),p1.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+d1.distanceTo(p1);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): 計算はインデックスなしのBufferGeometryでのみ可能です。");return this}}class fE Vlを拡張します{コンストラクタ(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}クラスaxはfrを拡張します{コンストラクタ(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const m1=new Dt,gy=new Rh,fg=new ur,hg=new q;クラスhE は mn を拡張します{コンストラクタ(e=new Kt,t=new ax){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry、i=this.matrixWorld、r=e.params.Points.threshold、a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere()、fg.copy(n.boundingSphere)、fg.applyMatrix4(i)、fg.radius+=r、e.ray.intersectsSphere(fg)===!1)return;m1.copy(i).invert()、gy.copy(e.ray).applyMatrix4(m1);const u=r/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=n.index,g=n.attributes.position;if(d!==null){const _=Math.max(0,a.start),x=Math.min(d.count,a.start+a.count);for(let M=_,T=x;M<T;M++){const E=d.getX(M);hg.fromBufferAttribute(g,E),g1(hg,E,h,i,e,t,this)}}else{const _=Math.max(0,a.start),x=Math.min(g.count,a.start+a.count);for(let M=_,T=x;M<T;M++)hg.fromBufferAttribute(g,M),g1(hg,M,h,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const u=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}}function g1(s,e,t,n,i,r,a){const u=gy.distanceSqToPoint(s);if(u<t){const h=new q;gy.closestPointToPoint(s,h),h.applyMatrix4(n);const d=i.ray.origin.distanceTo(h);if(d<i.near||d>i.far)return;r.push({distance:d,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class dE extends zn{constructor(e,t,n,i,r,a,u,h,d){super(e,t,n,i,r,a,u,h,d),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Ei,this.magFilter=r!==void 0?r:Ei,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class KR extends dE{constructor(e,t,n,i,r,a,u,h){super({},e,t,n,i,r,a,u,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class QR extends zn{コンストラクタ(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=qi,this.minFilter=qi,this.generateMipmaps=!1,this.needsUpdate=!0}}クラスJ0はzn{コンストラクタ(e,t,n,i,r,a,u,h,d,m,g,_){super(null,a,u,h,d,m,i,r,g,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}クラス$RはJ0{コンストラクタ(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}クラスebはJ0を拡張します{コンストラクタ(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ha),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}クラスtbは拡張しますzn{constructor(e,t,n,i,r,a,u,h,d){super(e,t,n,i,r,a,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lx extends zn{constructor(e,t,n,i,r,a,u,h,d,m=ac){if(m!==ac&&m!==_c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&m===ac&&(n=Ga),n===void 0&&m===_c&&(n=gc),super(null,i,r,a,u,h,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:qi,this.minFilter=h!==void 0?h:qi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}クラス_o{コンストラクタ(){this.type="Curve",this.arcLengthDivisions=200}getPoint(1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class KR extends dE{constructor(e,t,n,i,r,a,u,h){super({},e,t,n,i,r,a,u,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}クラスQRはzn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=qi,this.minFilter=qi,this.generateMipmaps=!1,this.needsUpdate=!0}}クラスJ0はzn{constructor(e,t,n,i,r,a,u,h,d,m,g,_){super(null,a,u,h,d,m,i,r,g,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}クラス$RはJ0{コンストラクタ(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}クラスebはJ0を拡張します{コンストラクタ(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ha),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}クラスtbは拡張しますzn{constructor(e,t,n,i,r,a,u,h,d){super(e,t,n,i,r,a,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lx extends zn{constructor(e,t,n,i,r,a,u,h,d,m=ac){if(m!==ac&&m!==_c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&m===ac&&(n=Ga),n===void 0&&m===_c&&(n=gc),super(null,i,r,a,u,h,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:qi,this.minFilter=h!==void 0?h:qi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}クラス_o{コンストラクタ(){this.type="Curve",this.arcLengthDivisions=200}getPoint(1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class KR extends dE{constructor(e,t,n,i,r,a,u,h){super({},e,t,n,i,r,a,u,h),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}クラスQRはzn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=qi,this.minFilter=qi,this.generateMipmaps=!1,this.needsUpdate=!0}}クラスJ0はzn{constructor(e,t,n,i,r,a,u,h,d,m,g,_){super(null,a,u,h,d,m,i,r,g,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}クラス$RはJ0{コンストラクタ(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}クラスebはJ0を拡張します{コンストラクタ(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ha),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}クラスtbは拡張しますzn{constructor(e,t,n,i,r,a,u,h,d){super(e,t,n,i,r,a,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lx extends zn{constructor(e,t,n,i,r,a,u,h,d,m=ac){if(m!==ac&&m!==_c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&m===ac&&(n=Ga),n===void 0&&m===_c&&(n=gc),super(null,i,r,a,u,h,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:qi,this.minFilter=h!==void 0?h:qi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}クラス_o{コンストラクタ(){this.type="Curve",this.arcLengthDivisions=200}getPoint(0}}クラスJ0はznを拡張します{コンストラクタ(e,t,n,i,r,a,u,h,d,m,g,_){super(null,a,u,h,d,m,i,r,g,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}クラス$RはJ0を拡張します{コンストラクタ(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}クラスebはJ0{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ha),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class tb extends zn{constructor(e,t,n,i,r,a,u,h,d){super(e,t,n,i,r,a,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lx extends zn{constructor(e,t,n,i,r,a,u,h,d,m=ac){if(m!==ac&&m!==_c)throw new Error("DepthTextureフォーマットはTHREE.DepthFormatまたはTHREE.DepthStencilFormatである必要があります");n===void 0&&m===ac&&(n=Ga),n===void 0&&m===_c&&(n=gc),super(null,i,r,a,u,h,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:qi,this.minFilter=h!==void 0?h:qi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}クラス_o{コンストラクタ(){this.type="Curve",this.arcLengthDivisions=200}getPoint(0}}クラスJ0はznを拡張します{コンストラクタ(e,t,n,i,r,a,u,h,d,m,g,_){super(null,a,u,h,d,m,i,r,g,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}クラス$RはJ0を拡張します{コンストラクタ(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}クラスebはJ0{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ha),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class tb extends zn{constructor(e,t,n,i,r,a,u,h,d){super(e,t,n,i,r,a,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lx extends zn{constructor(e,t,n,i,r,a,u,h,d,m=ac){if(m!==ac&&m!==_c)throw new Error("DepthTextureフォーマットはTHREE.DepthFormatまたはTHREE.DepthStencilFormatである必要があります");n===void 0&&m===ac&&(n=Ga),n===void 0&&m===_c&&(n=gc),super(null,i,r,a,u,h,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:qi,this.minFilter=h!==void 0?h:qi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}クラス_o{コンストラクタ(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() は実装されていません。",null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let u=0,h=r-1,d;for(;u<=h;)if(i=Math.floor(u+(hu)/2),d=n[i]-a,d<0)u=i+1;else if(d>0)h=i-1;else{h=i;break}if(i=h,n[i]===a)return i/(r-1);const m=n[i],_=n[i+1]-m,x=(am)/_;return(i+x)/(r-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),u=this.getPoint(r),h=t||(a.isVector2?new Ie:new q);return h.copy(u).sub(a).normalize(),h}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new q,i=[],r=[],a=[],u=new q,h=new Dt;for(let x=0;x<=e;x++){const M=x/e;i[x]=this.getTangentAt(M,new q)}r[0]=new q,a[0]=new q;let d=Number.MAX_VALUE;const m=Math.abs(i[0].x),g=Math.abs(i[0].y),_=Math.abs(i[0].z);m<=d&&(d=m,n.set(1,0,0)),g<=d&&(d=g,n.set(0,1,0)),_<=d&&n.set(0,0,1),u.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],u),a[0].crossVectors(i[0],r[0]);for(let x=1;x<=e;x++){if(r[x]=r[x-1].clone(),a[x]=a[x-1].clone(),u.crossVectors(i[x-1],i[x]),u.length()>Number.EPSILON){u.normalize();const M=Math.acos(Ht(i[x-1].dot(i[x]),-1,1));r[x].applyMatrix4(h.makeRotationAxis(u,M))}a[x].crossVectors(i[x],r[x])}if(t===!0){let x=Math.acos(Ht(r[0].dot(r[e]),-1,1));x/=e,i[0].dot(u.crossVectors(r[0],r[e]))>0&&(x=-x);for(let M=1;M<=e;M++)r[M].applyMatrix4(h.makeRotationAxis(i[M],x*M)),a[M].crossVectors(i[M],r[M])}return{tangents:i,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}クラスK0は拡張します_o{コンストラクター(e=0,t=0,n=1,i=1,r=0,a=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=u,this.aRotation=h}getPoint(e,t=new Ie){const n=t,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(a?r=0:r=i),this.aClockwise===!0&&!a&&(r===i?r=-i:r=ri);const u=this.aStartAngle+e*r;let h=this.aX+this.xRadius*Math.cos(u),d=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),_=h-this.aX,x=d-this.aY;h=_*mx*g+this.aX,d=_*g+x*m+this.aY}return n.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}クラス pE は拡張しますK0{コンストラクタ(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function ux(){let s=0,e=0,t=0,n=0;function i(r,a,u,h){s=r,e=u,t=-3*r+3*a-2*uh,n=2*r-2*a+u+h}return{initCatmullRom:function(r,a,u,h,d){i(a,u,d*(ur),d*(ha))},initNonuniformCatmullRom:function(r,a,u,h,d,m,g){let _=(ar)/d-(ur)/(d+m)+(ua)/m,x=(ua)/m-(ha)/(m+g)+(hu)/g;_*=m,x*=m,i(a,u,_,x)},calc:function(r){const a=r*r,u=a*r;return s+e*r+t*a+n*u}}}const dg=new q,Ev=new ux,Tv=new ux,Av=new ux;クラス mE は拡張します_o{コンストラクタ(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new q){const n=t,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let u=Math.floor(a),h=au;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/r)+1)*r:h===0&&u===r-1&&(u=r-2,h=1);let d,m;this.closed||u>0?d=i[(u-1)%r]:(dg.subVectors(i[0],i[1]).add(i[0]),d=dg);const g=i[u%r],_=i[(u+1)%r];if(this.closed||u+2<r?m=i[(u+2)%r]:(dg.subVectors(i[r-1],i[r-2]).add(i[r-1]),m=dg),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let M=Math.pow(d.distanceToSquared(g),x),T=Math.pow(g.distanceToSquared(_),x),E=Math.pow(_.distanceToSquared(m),x);T<1e-4&&(T=1),M<1e-4&&(M=T),E<1e-4&&(E=T),Ev.initNonuniformCatmullRom(dx,gx,_.x,mx,M,T,E),Tv.initNonuniformCatmullRom(dy,gy,_.y,my,M,T,E),Av.initNonuniformCatmullRom(dz,gz,_.z,mz,M,T,E)}else this.curveType==="catmullrom"&&(Ev.initCatmullRom(dx,gx,_.x,mx,this.tension),Tv.initCatmullRom(dy,gy,_.y,my,this.tension),Av.initCatmullRom(dz,gz,_.z,mz,this.tension));return n.set(Ev.calc(h),Tv.calc(h),Av.calc(h)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new q().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _1(s,e,t,n,i){const r=(ne)*.5,a=(it)*.5,u=s*s,h=s*u;return(2*t-2*n+r+a)*h+(-3*t+3*n-2*ra)*u+r*s+t}function nb(s,e){const t=1-s;return t*t*e}function ib(s,e){return 2*(1-s)*s*e}function rb(s,e){return s*s*e}関数 ep(s,e,t,n){return nb(s,e)+ib(s,t)+rb(s,n)}関数 sb(s,e){const t=1-s;return t*t*t*e}関数 ob(s,e){const t=1-s;return 3*t*t*s*e}関数 ab(s,e){return 3*(1-s)*s*s*e}関数 lb(s,e){return s*s*s*e}関数 tp(s,e,t,n,i){return sb(s,e)+ob(s,t)+ab(s,n)+lb(s,i)}クラス cx は _o{コンストラクタ (e=new Ie,t=new Ie,n=new Ie,i=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ie){const n=t,i=this.v0,r=this.v1,a=this.v2,u=this.v3;return n.set(tp(e,ix,rx,ax,ux),tp(e,iy,ry,ay,uy)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}クラス gE は _o{constructor(e=new q,t=new q,n=new q,i=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new q){const n=t,i=this.v0,r=this.v1,a=this.v2,u=this.v3;return n.set(tp(e,ix,rx,ax,ux),tp(e,iy,ry,ay,uy),tp(e,iz,rz,az,uz)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}クラスfxは_o{コンストラクタ(e=new Ie,t=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ie){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _E extends _o{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}クラスhxは_oを拡張します{コンストラクタ(e=new Ie,t=new Ie,n=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ie){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(ep(e,ix,rx,ax),ep(e,iy,ry,ay)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}クラス dx は _o{コンストラクタ(e=new q,t=new q,n=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new q){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(ep(e,ix,rx,ax),ep(e,iy,ry,ay),ep(e,iz,rz,az)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}クラスpxは_oを拡張します{コンストラクタ(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ie){const n=t、i=this.points、r=(i.length-1)*e、a=Math.floor(r)、u=ra、h=i[a===0?a:a-1]、d=i[a]、m=i[a>i.length-2?i.length-1:a+1]、g=i[a>i.length-3?i.length-1:a+2];return n.set(_1(u,hx,dx,mx,gx),_1(u,hy,dy,my,gy)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ie().fromArray(i))}return this}}var w0=Object.freeze({__proto__:null,ArcCurve:pE,CatmullRomCurve3:mE,CubicBezierCurve:cx,CubicBezierCurve3:gE、EllipseCurve:K0、LineCurve:fx、LineCurve3:_E、QuadraticBezierCurve:hx、QuadraticBezierCurve3:dx、SplineCurve:px});クラスvEは_o{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new w0[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const a=i[r]-n,u=this.curves[r],h=u.getLength(),d=h===0?0:1-a/h;return u.getPointAt(d,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],u=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,h=a.getPoints(u);for(let d=0;d<h.length;d++){const m=h[d];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.cu​​rves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new w0[i.type]().fromJSON(i))}return this}}class mp extends vE{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new fx(this.currentPoint.clone(),new Ie(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new hx(this.currentPoint.clone(),new Ie(e,t),new Ie(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const u=new cx(this.currentPoint.clone(),new Ie(e,t),new Ie(n,i),new Ie(r,a));return this.curves.push(u),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new px(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,u,h){const d=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+d,t+m,n,i,r,a,u,h),this}absellipse(e,t,n,i,r,a,u,h){const d=new K0(e,t,n,i,r,a,u,h);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(gx,gy)}this.curves.push(d);const m=d.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}クラスOpはKtを拡張します{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Ht(i,0,Math.PI*2);const r=[],a=[],u=[],h=[],d=[],m=1/t,g=new q,_=new Ie,x=new q,M=new q,T=new q;let E=0,S=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:E=e[R+1].xe[R].x,S=e[R+1].ye[R].y,xx=S*1,xy=-E,xz=S*0,T.copy(x),x.normalize(),h.push(xx,xy,xz);break;case e.length-1:h.push(Tx,Ty,Tz);break;default:E=e[R+1].xe[R].x,S=e[R+1].ye[R].y,xx=S*1,xy=-E,xz=S*0,M.copy(x),x.x+=Tx,x.y+=Ty,x.z+=Tz,x.normalize(),h.push(xx,xy,xz),T.copy(M)}for(let R=0;R<=t;R++){const P=n+R*m*i, I=Mat​​h.sin(P), O=Math.cos(P); for(let U=0; U<=e.length-1; U++){gx=e[U].x*I, gy=e[U].y, gz=e[U].x*O, a.push(gx,gy,gz), _.x=R/t, _.y=U/(e.length-1), u.push(_.x,_.y); const F=h[3*U+0]*I, z=h[3*U+1], D=h[3*U+0]*O; d.push(F,z,D)}} for(let R=0; R<t; R++) for(let P=0; P<e.length-1; P++){const I=P+R*e.length、O=I、U=I+e.length、F=I+e.length+1、z=I+1;r.push(O,U,z),r.push(F,z,U)}this.setIndex(r),this.setAttribute("position",new St(a,3)),this.setAttribute("uv",new St(u,2)),this.setAttribute("normal",new St(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Op(e.points,e.segments,e.phiStart,e.phiLength)}}class Q0 extends Op{constructor(e=1,t=1,n=4,i=8){const r=new mp;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Q0(e.radius,e.length,e.capSegments,e.radialSegments)}}class $0 extends Kt{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],a=[],u=[],h=[],d=new q,m=new つまり、a.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let g=0,_=3;g<=t;g++,_+=3){const x=n+g/t*i;dx=e*Math.cos(x),dy=e*Math.sin(x),a.push(dx,dy,dz),u.push(0,0,1),mx=(a[_]/e+1)/2,my=(a[_+1]/e+1)/2,h.push(mx,my)}for(let g=1;g<=t;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(u,3)),this.setAttribute("uv",new St(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}クラスbhは拡張しますKt{コンストラクター(e=1,t=1,n=1,i=32,r=1,a=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:u,thetaLength:h};const d=this;i=Math.floor(i),r=Math.floor(r);const m=[],g=[],_=[],x=[];let M=0;const T=[],E=n/2;let S=0;R(),a===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(m),this.setAttribute("position",new St(g,3)),this.setAttribute("normal",new St(_,3)),this.setAttribute("uv",new St(x,2));function R(){const I=new q,O=new q;let U=0;const F=(te)/n;for(let z=0;z<=r;z++){const D=[],N=z/r,G=N*(te)+e;for(let $=0;$<=i;$++){const Q=$/i,ce=Q*h+u,me=Math.sin(ce),ue=Math.cos(ce);Ox=G*me,Oy=-N*n+E,Oz=G*ue,g.push(Ox,Oy,Oz),I.set(me,F,ue).normalize(),_.push(Ix,Iy,Iz),x.push(Q,1-N),D.push(M++)}T.push(D)}for(let z=0;z<i;z++)for(let D=0;D<r;D++){const N=T[D][z],G=T[D+1][z],$=T[D+1][z+1],Q=T[D][z+1];(e>0||D!==0)&&(m.push(N,G,Q),U+=3),(t>0||D!==r-1)&&(m.push(G,$,Q),U+=3)}d.addGroup(S,U,0),S+=U}関数 P(I){const O=M,U=new Ie,F=new q;let z=0;const D=I===!0?e:t,N=I===!0?1:-1;for(let $=1;$<=i;$++)g.push(0,E*N,0),_.push(0,N,0),x.push(.5,.5),M++;const G=M;for(let $=0;$<=i;$++){const ce=$/i*h+u,me=Math.cos(ce),ue=Math.sin(ce);Fx=D*ue,Fy=E*N,Fz=D*me,g.push(Fx,Fy,Fz),_.push(0,N,0),Ux=me*.5+.5,Uy=ue*.5*N+.5,x.push(Ux,Uy),M++}for(let $=0;$<i;$++){const Q=O+$,ce=G+$;I===!0?m.push(ce,ce+1,Q):m.push(ce+1,ce,Q),z+=3}d.addGroup(S,z,I===!0?1:2),S+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class e_ extends bh{constructor(e=1,t=1,n=32,i=1,r=!1,a=0,u=Math.PI*2){super(0,e,t,n,i,r,a,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:u}}static fromJSON(e){return new e_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}クラスYlはKtを拡張します{コンストラクタ(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],a=[];u(i),d(n),m(),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(r.slice(),3)),this.setAttribute("uv",new St(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();関数u(R){const P=new q,I=new q,O=新しいq; for(let U=0;U<t.length;U+=3)x(t[U+0],P),x(t[U+1],I),x(t[U+2],O),h(P,I,O,R)}関数 h(R,P,I,O){const U=O+1,F=[]; for(let z=0;z<=U;z++){F[z]=[];const D=R.clone().lerp(I,z/U),N=P.clone().lerp(I,z/U),G=Uz; for(let $=0;$<=G;$++)$===0&&z===U?F[z][$]=D:F[z][$]=D.clone().lerp(N,$/G)} for(let z=0;z<U;z++) for(let D=0;D<2*(Uz)-1;D++){const N=Math.floor(D/2);D%2===0?(_(F[z][N+1]),_(F[z+1][N]),_(F[z][N])):(_(F[z][N+1]),_(F[z+1][N+1]),_(F[z+1][N]))}}関数 d(R){const P=new q;for(let I=0;I<r.length;I+=3)Px=r[I+0],Py=r[I+1],Pz=r[I+2],P.normalize().multiplyScalar(R),r[I+0]=Px,r[I+1]=Py,r[I+2]=Pz}関数 m(){const R=new q;for(let P=0;P<r.length;P+=3){Rx=r[P+0],Ry=r[P+1],Rz=r[P+2];const I=E(R)/2/Math.PI+.5,O=S(R)/Math.PI+.5;a.push(I,1-O)}M(),g()}関数 g(){for(let R=0;R<a.length;R+=6){const P=a[R+0],I=a[R+2],O=a[R+4],U=Math.max(P,I,O),F=Math.min(P,I,O);U>.9&&F<.1&&(P<.2&&(a[R+0]+=1),I<.2&&(a[R+2]+=1),O<.2&&(a[R+4]+=1))}}関数_(R){r.push(Rx,Ry,Rz)}関数 x(R,P){const I=R*3;Px=e[I+0],Py=e[I+1],Pz=e[I+2]}関数 M(){const R=新しいq,P=新しいq,I=新しいq,O=新しいq,U=新しいIe,F=新しいIe,z=新しいIe;for(let D=0,N=0;D<r.length;D+=9,N+=6){R.set(r[D+0],r[D+1],r[D+2]),P.set(r[D+3],r[D+4],r[D+5]),I.set(r[D+6],r[D+7],r[D+8]),U.set(a[N+0],a[N+1]),F.set(a[N+2],a[N+3]),z.set(a[N+4],a[N+5]),O.copy(R).add(P).add(I).divideScalar(3);const G=E(O);T(U,N+0,R,G),T(F,N+2,P,G),T(z,N+4,I,G)}}関数T(R,P,I,O){O<0&&R.x===1&&(a[P]=Rx-1),Ix===0&&I.z===0&&(a[P]=O/2/Math.PI+.5)}関数E(R){return Math.atan2(Rz,-Rx)}関数S(R){return Math.atan2(-Ry,Math.sqrt(Rx*R.x+Rz*Rz))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yl(e.vertices,e.indices,e.radius,e.details)}}クラスt_はYlを拡張します{コンストラクタ(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0, i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,​​7,19,17,7,17​​,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0 ,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new t_(e.radius,e.detail)}}const pg=new q,mg=new q,Cv=new q,gg=new Wr;class yE extends Kt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),r=Math.cos(lc*t),a=e.getIndex(),u=e.getAttribute("position"),h=a?a.count:u.count,d=[0,0,0],m=["a","b","c"],g=new Array(3),_={},x=[];for(let M=0;M<h;M+=3){a?(d[0]=a.getX(M),d[1]=a.getX(M+1),d[2]=a.getX(M+2)):(d[0]=M,d[1]=M+1,d[2]=M+2);const{a:T,b:E,c:S}=gg;if(T.fromBufferAttribute(u,d[0]),E.fromBufferAttribute(u,d[1]),S.fromBufferAttribute(u,d[2]),gg.getNormal(Cv),g[0]=`${Math.round(Tx*i)},${Math.round(Ty*i)},${Math. round(Tz*i)}`,g[1]=`${Math.round(Ex*i)},${Math.round(Ey*i)},${Math.round(Ez*i)}`,g[2]=`${Math.round(Sx*i)},${Math.round(Sy*i)},${Math.round(Sz*i)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const P=(R+1)%3,I=g[R],O=g[P],U=gg[m[R]],F=gg[m[P]],z=`${I}_${O}`,D=`${O}_${I}`;D in _&&_[D]?(Cv.dot(_[D].normal)<=r&&(x.push(Ux,Uy,Uz),x.push(Fx,Fy,Fz)),_[D]=null):z in _||(_[z]={index0:d[R],index1:d[P],normal:Cv.clone()})}}for(const M in _)if(_[M]){const{index0:T,index1:E}=_[M];pg.fromBufferAttribute(u,T),mg.fromBufferAttribute(u,E),x.push(pg.x,pg.y,pg.z),x.push(mg.x,mg.y,mg.z)}this.setAttribute("position",new St(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}クラスccはmpを拡張します{constructor(e){super(e),this.uuid=gs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new mp().fromJSON(i))}return this}}const ub={triangulate:function(s,e,t=2){const n=e&&e.length,i=n?e[0]*t:s.length;let r=xE(s,0,i,t,!0);const a=[];if(!r||r.next===r.prev)return a;let u,h,d,m,g,_,x;if(n&&(r=pb(s,e,r,t)),s.length>80*t){u=d=s[0],h=m=s[1];for(let M=t;M<i;M+=t)g=s[M],_=s[M+1],g<u&&(u=g),_<h&&(h=_),g>d&&(d=g),_>m&&(m=_);x=Math.max(du,mh),x=x!==0?32767/x:0}return gp(r,a,t,u,h,x,0),a}};function xE(s,e,t,n,i){let r,a;if(i===Tb(s,e,t,n)>0)for(r=e;r<t;r+=n)a=v1(r,s[r],s[r+1],a);else for(r=tn;r>=e;r-=n)a=v1(r,s[r],s[r+1],a);return a&&n_(a,a.next)&&(vp(a),a=a.next),a}function xc(s,e){if(!s)return s;e||(e=s);let t=s,n;do if(n=!1,!t.steiner&&(n_(t,t.next)||Wn(t.prev,t,t.next)===0)){if(vp(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function gp(s,e,t,n,i,r,a){if(!s)return;!a&&r&&yb(s,n,i,r);let u=s,h,d;for(;s.prev!==s.next;){if(h=s.prev,d=s.next,r?fb(s,n,i,r):cb(s)){e.push(hi/t|0),e.push(si/t|0),e.push(di/t|0),vp(s),s=d.next,u=d.next;続く}if(s=d,s===u){a?a===1?(s=hb(xc(s),e,t),gp(s,e,t,n,i,r,2)):a===2&&db(s,e,t,n,i,r):gp(xc(s),e,t,n,i,r,1);break}}}関数 cb(s){const e=s.prev,t=s,n=s.next;if(Wn(e,t,n)>=0)return!1;const i=ex,r=t.x,a=nx,u=ey,h=ty,d=ny,m=i<r?i<a?i:a:r<a?r:a,g=u<h?u<d?u:d:h<d?h:d,_=i>r?i>a?i:a:r>a?r:a,x=u>h?u>d?u:d:h>d?h:d;let M=n.next;for(;M!==e;){if(Mx>=m&&M.x<=_&&M.y>=g&&M.y<=x&&sh(i,u,r,h,a,d,Mx,My)&&Wn(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function fb(s,e,t,n){const i=s.prev,r=s,a=s.next;if(Wn(i,r,a)>=0)return!1;const u=ix,h=rx,d=ax,m=iy,g=ry,_=ay,x=u<h?u<d?u:d:h<d?h:d,M=m<g?m<_?m:_:g<_?g:_,T=u>h?u>d?u:d:h>d?h:d,E=m>g?m>_?m:_:g>_?g:_,S=_y(x,M,e,t,n),R=_y(T,E,e,t,n);let P=s.prevZ,I=s.nextZ;for(;P&&P.z>=S&&I&&I.z<=R;){if(Px>=x&&P.x<=T&&P.y>=M&&P.y<=E&&P!==i&&P!==a&&sh(u,m,h,g,d,_,Px,Py)&&Wn(P.prev,P,P.next)>=0||(P=P.prevZ,Ix>=x&&I.x<=T&&I.y>=M&&I.y<=E&&I!==i&&I!==a&&sh(u,m,h,g,d,_,Ix,Iy)&&Wn(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;P &&P.z>=S;){if(Px>=x&&P.x<=T&&P.y>=M&&P.y<=E&&P!==i&&P!==a&&sh(u,m,h,g,d,_,Px,Py)&&Wn(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;I&&I.z<=R;){if(Ix>=x&&I.x<=T&&I.y>=M&&I.y<=E&&I!==i&&I!==a&&sh(u,m,h,g,d,_,Ix,Iy)&&Wn(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}関数hb(s,e,t){let n=s;do{const i=n.prev,r=n.next.next;!n_(i,r)&&SE(i,n,n.next,r)&&_p(i,r)&&_p(r,i)&&(e.push(ii/t|0),e.push(ni/t|0),e.push(ri/t|0),vp(n),vp(n.next),n=s=r),n=n.next}while(n!==s);return xc(n)}function db(s,e,t,n,i,r){let a=s;do{let u=a.next.next;for(;u!==a.prev;){if(ai!==ui&&Mb(a,u)){let h=ME(a,u);a=xc(a,a.next),h=xc(h,h.next),gp(a,e,t,n,i,r,0),gp(h,e,t,n,i,r,0);return}u=u.next}a=a.next}while(a!==s)}function pb(s,e,t,n){const i=[];let r,a,u,h,d;for(r=0,a=e.length;r<a;r++)u=e[r]*n,h=r<a-1?e[r+1]*n:s.length,d=xE(s,u,h,n,!1),d===d.next&&(d.steiner=!0),i.push(Sb(d));for(i.sort(mb),r=0;r<i.length;r++)t=gb(i[r],t);return t}function mb(s,e){return sx-ex}function gb(s,e){const t=_b(s,e);if(!t)return e;const n=ME(t,s);return xc(n,n.next),xc(t,t.next)}function _b(s,e){let t=e,n=-1/0,i;const r=sx,a=sy;do{if(a<=ty&&a>=t.next.y&&t.next.y!==ty){const _=t.x+(at.y)*(t.next.xt.x)/(t.next.yt.y);if(_<=r&&_>n&&(n=_,i=tx<t.next.x?t:t.next,_===r))return i}t=t.next}while(t!==e);if(!i)return null;const u=i,h=ix,d=iy;let m=1/0,g;t=i;do r>=tx&&t.x>=h&&r!==tx&&sh(a<d?r:n,a,h,d,a<d?n:r,a,tx,ty)&&(g=Math.abs(at.y)/(rt.x),_p(t,s)&&(g<m||g===m&&(tx>ix||tx===ix&&vb(i,t)))&&(i=t,m=g)),t=t.next;while(t!==u);return i}function vb(s,e){return Wn(s.prev,s,e.prev)<0&&Wn(e.next,s,s.next)<0}関数 yb(s,e,t,n){let i=s;do iz===0&&(iz=_y(ix,iy,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==s);i.prevZ.nextZ=null,i.prevZ=null,xb(i)}関数 xb(s){let e,t,n,i,r,a,u,h,d=1;do{for(t=s,s=null,r=null,a=0;t;){for(a++,n=t,u=0,e=0;e<d&&(u++,n=n.nextZ,!!n);e++);for(h=d;u>0||h>0&&n;)u!==0&&(h===0||!n||tz<=nz)?(i=t,t=t.nextZ,u--):(i=n,n=n.nextZ,h--),r?r.nextZ=i:s=i,i.prevZ=r,r=i;t=n}r.nextZ=null,d*=2}while(a>1);return s}function _y(s,e,t,n,i){return s=(st)*i|0,e=(en)*i|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,s|e<<1}関数Sb(s){let e=s,t=s;do(ex<tx||ex===tx&&e.y<ty)&&(t=e),e=e.next;while(e!==s);return t}関数sh(s,e,t,n,i,r,a,u){return(ia)*(eu)>=(sa)*(ru)&&(sa)*(nu)>=(ta)*(eu)&&(ta)*(ru)>=(ia)*(nu)}関数Mb(s,e){return s.next.i!==ei&&s.prev.i!==ei&&!wb(s,e)&&(_p(s,e)&&_p(e,s)&&Eb(s,e)&&(Wn(s.prev,s,e.prev)||Wn(s,e.prev,e))||n_(s,e)&&Wn(s.prev,s,s.next)>0&&Wn(e.prev,e,e.next)>0)}関数 Wn(s,e,t){return(ey-sy)*(tx-ex)-(ex-sx)*(ty-ey)}関数 n_(s,e){return sx===ex&&s.y===ey}関数 SE(s,e,t,n){const i=vg(Wn(s,e,t)),r=vg(Wn(s,e,n)),a=vg(Wn(t,n,s)),u=vg(Wn(t,n,e));return!!(i!==r&&a!==u||i===0&&_g(s,t,e)||r===0&&_g(s,n,e)||a===0&&_g(t,s,n)||u===0&&_g(t,e,n))}関数 _g(s,e,t){return ex<=Math.max(sx,tx)&&e.x>=Math.min(sx,tx)&&e.y<=Math.max(sy,ty)&&e.y>=Math.min(sy,ty)}関数 vg(s){return s>0?1:s<0?-1:0}function wb(s,e){let t=s;do{if(ti!==si&&t.next.i!==si&&t.i!==ei&&t.next.i!==ei&&SE(t,t.next,s,e))return!0;t=t.next}while(t!==s);return!1}function _p(s,e){return Wn(s.prev,s,s.next)<0?Wn(s,e,s.next)>=0&&Wn(s,s.prev,e)>=0:Wn(s,e,s.prev)<0||Wn(s,s.next,e)<0}function Eb(s,e){let t=s,n=!1;const i=(s.x+ex)/2,r=(s.y+ey)/2;do ty>r!=t.next.y>r&&t.next.y!==ty&&i<(t.next.xt.x)*(rt.y)/(t.next.yt.y)+tx&&(n=!n),t=t.next;while(t!==s);return n}関数 ME(s,e){const t=new vy(si,sx,sy),n=new vy(ei,ex,ey),i=s.next,r=e.prev;return s.next=e,e.prev=s,t.next=i,i.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}関数 v1(s,e,t,n){const i=new vy(s,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}関数 vp(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}関数 vy(s,e,t){this.i=s,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}関数 Tb(s,e,t,n){let i=0;for(let r=e,a=tn;r<t;r+=n)i+=(s[a]-s[r])*(s[r+1]+s[a+1]),a=r;return i}class Vo{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].ye[r].x*e[i].y;return n*.5}static isClockWise(e){return Vo.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];y1(e),x1(n,e);let a=e.length;t.forEach(y1);for(let h=0;h<t.length;h++)i.push(a),a+=t[h].length,x1(n,t[h]);const u=ub.triangulate(n,i);for(let h=0;h<u.length;h+=3)r.push(u.slice(h,h+3));return r}}function y1(s){const e=s.length;e>2&&s[e-1].equals(s[0])&&s.pop()}function x1(s,e){for(let t=0;t<e.length;t++)s.push(e[t].x),s.push(e[t].y)}class i_ extends Kt{constructor(e=new cc([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),newすなわち(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];a(d)}this.setAttribute("position",new St(i,3)),this.setAttribute("uv",new St(r,2)),this.computeVertexNormals();function a(u){const h=[],d=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0、x=t.bevelThickness!==void 0?t.bevelThickness:.2、M=t.bevelSize!==void 0?t.bevelSize:x-.1、T=t.bevelOffset!==void 0?t.bevelOffset:0、E=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath、R=t.UVGenerator!==void 0?t.UVGenerator:Ab;let P、I=!1、O、U、F、z;S&&(P=S.getSpacedPoints(m),I=!0、_=!1、O=S.computeFrenetFrames(m,!1),U=new q、F=new q、z=new q),_||(E=0,x=0,M=0,T=0);const D=u.extractPoints(d);let N=D.shape;const G=D.holes;if(!Vo.isClockWise(N)){N=N.reverse();for(let Ne=0,Ce=G.length;Ne<Ce;Ne++){const Y=G[Ne];Vo.isClockWise(Y)&&(G[Ne]=Y.reverse())}}const Q=Vo.triangulateShape(N,G),ce=N;for(let Ne=0,Ce=G.length;Ne<Ce;Ne++){const Y=G[Ne];N=N.concat(Y)}function me(Ne,Ce,Y){return Ce||console.error("THREE.ExtrudeGeometry: vec は存在します"),Ne.clone().addScaledVector(Ce,Y)}const ue=N.length,de=Q.length;function B(Ne,Ce,Y){let _t,Fe,rt;const We=Ne.x-Ce.x,Tt=Ne.y-Ce.y,qe=Yx-Ne.x,X=Yy-Ne.y,V=We*We+Tt*Tt,pe=We*X-Tt*qe;if(Math.abs(pe)>Number.EPSILON){const Ee=Math.sqrt(V),Le=Math.sqrt(qe*qe+X*X),Ae=Ce.x-Tt/Ee,dt=Ce.y+We/Ee,je=Yx-X/Le,st=Y.y +qe/Le,Bt=((je-Ae)*X-(st-dt)*qe)/(We*X-Tt*qe);_t=Ae+We*Bt-Ne.x,Fe=dt+Tt*Bt-Ne.y;const ke=_t*_t+Fe*Fe;if(ke<=2)return new Ie(_t,Fe);rt=Math.sqrt(ke/2)}else{let Ee=!1;We>Number.EPSILON?qe>Number.EPSILON&&(Ee=!0):We<-Number.EPSILON?qe<-Number.EPSILON&&(Ee=!0):Math.s ign(Tt)===Math.sign(X)&&(Ee=!0),Ee?(_t=-Tt,Fe=We,rt=Math.sqrt(V)):(_t=We,Fe=Tt,rt=Math.sqrt(V/2))}return new Ie(_t/rt,Fe/rt)}const K=[];for(let Ne=0,Ce=ce.length,Y=Ce-1,_t=Ne+1;Ne<Ce;Ne++,Y++,_t++)Y===Ce&&(Y=0),_t===Ce&&(_t=0),K[Ne]=B(ce[Ne],ce[Y],ce[_t]);const J=[];let W,te=K.concat();for(let Ne=0、Ce=G。length;Ne<Ce;Ne++){const Y=G[Ne];W=[];for(let _t=0,Fe=Y.length,rt=Fe-1,We=_t+1;_t<Fe;_t++,rt++,We++)rt===Fe&&(rt=0),We===Fe&&(We=0),W[_t]=B(Y[_t],Y[rt],Y[We]);J.push(W),te=te.concat(W)}for(let Ne=0;Ne<E;Ne++){const Ce=Ne/E,Y=x*Math.cos(Ce*Math.PI/2),_t=M*Math.sin(Ce*Math.PI/2)+T;for(let Fe=0,rt=ce.length;Fe<rt;Fe++){const We=me(ce[Fe],K[Fe],_t);Te(We.x,We.y,-Y)}for(let Fe=0,rt=G.length;Fe<rt;Fe++){const We=G[Fe];W=J[Fe];for(let Tt=0,qe=We.length;Tt<qe;Tt++){const X=me(We[Tt],W[Tt],_t);Te(Xx,Xy,-Y)}}}const Pe=M+T;for(let Ne=0;Ne<ue;Ne++){const Ce=_?me(N[Ne],te[Ne],Pe):N[Ne];I?(F.copy(O.normals[0]).multiplyScalar(Ce.x),U.copy(O.binorma ls[0]).multiplyScalar(Ce.y),z.copy(P[0]).add(F).add(U),Te(zx,zy,zz)):Te(Ce.x,Ce.y,0)}for(let Ne=1;Ne<=m;Ne++)for(let Ce=0;Ce<ue;Ce++){const Y=_?me(N[Ce],te[Ce],Pe):N[Ce];I?(F.copy(O.normals[Ne]).multiplyScalar(Yx),U.copy(O.binormals[Ne]).multiplyScalar(Yy),z.copy(P[Ne]).add(F).add(U),Te(zx,zy,zz)):Te(Yx,Yy,g/m*Ne)}for(let Ne=E-1;Ne>=0;Ne--){const Ce=Ne/E,Y=x*Math.cos(Ce*Math.PI/2),_t=M*Math.sin(Ce*Math.PI/2)+T;for(let Fe=0,rt=ce.length;Fe<rt;Fe++){const We=me(ce[Fe],K[Fe],_t);Te(We.x,We.y,g+Y)}for(let Fe=0,rt=G.length;Fe<rt;Fe++){const We=G[Fe];W=J[Fe];for(let Tt=0,qe=We.length;Tt<qe;Tt++){const X=me(We[Tt],W[Tt],_t);I?Te(Xx,X.y+P[m-1].y,P[m-1].x+Y):Te(Xx,Xy,g+Y)}}}se(),xe();function se(){const Ne=i.length/3;if(_){let Ce=0,Y=ue*Ce;for(let _t=0;_t<de;_t++){const Fe=Q[_t];Xe(Fe[2]+Y,Fe[1]+Y,Fe[0]+Y)}Ce=m+E*2,Y=ue*Ce;for(let _t=0;_t<de;_t++){const Fe=Q[_t];Xe(Fe[0]+Y,Fe[1]+Y,Fe[2]+Y)}}else{for(let Ce=0;Ce<de;Ce++){const Y=Q[Ce];Xe(Y[2],Y[1],Y[0])}for(let Ce=0;Ce<de;Ce++){const Y=Q[Ce];Xe(Y[0]+ue*m,Y[1]+ue*m,Y[2]+ue*m)}}n.addGroup(Ne,i.length/3-Ne,0)}function xe(){const Ne=i.length/3;let Ce=0;be(ce,Ce),Ce+=ce.length;for(let Y=0,_t=G.length;Y<_t;Y++){const Fe=G[Y];be(Fe,Ce),Ce+=Fe.length}n.addGroup(Ne,i.length/3-Ne,1)}関数 be(Ne,Ce){let Y=Ne.length;for(;--Y>=0;){const _t=Y;let Fe=Y-1;Fe<0&&(Fe=Ne.length-1);for(let rt=0,We=m+E*2;rt<We;rt++){const Tt=ue*rt,qe=ue*(rt+1),X=Ce+_t+Tt,V=Ce+Fe+Tt,pe=Ce+Fe+qe,Ee=Ce+_t+qe;gt(X,V,pe,Ee)}}}関数Te(Ne,Ce,Y){h.push(Ne),h.push(Ce),h.push(Y)}関数 Xe(Ne,Ce,Y){et(Ne),et(Ce),et(Y);const _t=i.length/3,Fe=R.generateTopUV(n,i,_t-3,_t-2,_t-1);Lt(Fe[0]),Lt(Fe[1]),Lt(Fe[2])}関数gt(Ne,Ce,Y,_t){et(Ne),et(Ce),et(_t),et(Ce),et(Y),et(_t);const Fe=i.length/3,rt=R.generateSideWallUV(n,i,Fe-6,Fe-3,Fe-2,Fe-1);Lt(rt[0]),Lt(rt[1]),Lt(rt[3]),Lt(rt[1]),Lt(rt[2]),Lt(rt[3])}function et(Ne){i.push(h[Ne*3+0]),i.push(h[Ne*3+1]),i.push(h[Ne*3+2])}function Lt(Ne){r.push(Ne.x),r.push(Ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Cb(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const u=t[e.shapes[r]];n.push(u)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new w0[i.type]().fromJSON(i)),new i_(n,e.options)}}const Ab={generateTopUV:function(s,e,t,n,i){const r=e[t*3],a=e[t*3+1],u=e[n*3],h=e[n*3+1],d=e[i*3],m=e[i*3+1];return[new Ie(r,a),new Ie(u,h),new Ie(d,m)]},generateSideWallUV:function(s,e,t,n,i,r){const a=e[t*3],u=e[t*3+1],h=e[t*3+2],d=e[n*3],m=e[n*3+1],g=e[n*3+2],_=e[i*3],x=e[i*3+1],M=e[i*3+2],T=e[r*3],E=e[r*3+1],S=e[r*3+2];関数を返す Math.abs(um)<Math.abs(ad)?[new Ie(a,1-h),new Ie(d,1-g),new Ie(_,1-M),new Ie(T,1-S)]:[new Ie(u,1-h),new Ie(m,1-g),new Ie(x,1-M),new Ie(E,1-S)]}};関数Cb(s,e,t){if(t.shapes=[],Array.isArray(s))for(let n=0,i=s.length;n<i;n++){const r=s[n];t.shapes.push(r.uuid)}else t.shapes.push(s.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}クラスr_はYlを拡張します{コンストラクタ(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,0,1,-n,0,1,-n,0,1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2 ,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new r_(e.radius,e.detail)}}クラスFpはYlを拡張します{コンストラクタ(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fp(e.radius,e.detail)}}クラスPhを拡張しますKt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,u=Math.floor(n),h=Math.floor(i),d=u+1,m=h+1,g=e/u,_=t/h,x=[],M=[],T=[],E=[];for(let S=0;S<m;S++){const R=S*_-a;for(let P=0;P<d;P++){const I=P*gr;M.push(I,-R,0),T.push(0,0,1),E.push(P/u),E.push(1-S/h)}}for(let S=0;S<h;S++)for(let R=0;R<u;R++){const P=R+d*S,I=R+d*(S+1),O=R+1+d*(S+1),U=R+1+d*S;x.push(P,I,U),x.push(I,O,U)}this.setIndex(x),this.setAttribute("position",new St(M,3)),this.setAttribute("normal",new St(T,3)),this.setAttribute("uv",new St(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ph(e.width,e.height,e.widthSegments,e.heightSegments)}}クラス s_ は拡張されますKt{constructor(e=.5,t=1,n=32,i=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const u=[],h=[],d=[],m=[];let g=e;const _=(te)/i,x=new q,M=new Ie;for(let T=0;T<=i;T++){for(let E=0;E<=n;E++){const S=r+E/n*a;xx=g*Math.cos(S),xy=g*Math.sin(S),h.push(xx,xy,xz),d.push(0,0,1),Mx=(xx/t+1)/2,My=(xy/t+1)/2,m.push(Mx,M.y)}g+=_}for(let T=0;T<i;T++){const E=T*(n+1);for(let S=0;S<n;S++){const R=S+E,P=R,I=R+n+1,O=R+n+2,U=R+1;u.push(P,I,U),u.push(I,O,U)}}this.setIndex(u),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}クラスo_はKtを拡張します{コンストラクタ(e=new cc([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let u=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let m=0;m<e.length;m++)d(e[m]),this.addGroup(u,h,m),u+=h,h=0;this.setIndex(n),this.setAttribute("position",new St(i,3)),this.setAttribute("normal",new St(r,3)),this.setAttribute("uv",new St(a,2));function d(m){const g=i.length/3,_=m.extractPoints(t);let x=_.shape;const M=_.holes;Vo.isClockWise(x)===!1&&(x=x.reverse());for(let E=0,S=M.length;E<S;E++){const R=M[E];Vo.isClockWise(R)===!0&&(M[E]=R.reverse())}const T=Vo.triangulateShape(x,M);for(let E=0,S=M.length;E<S;E++){const R=M[E];x=x.concat(R)}for(let E=0,S=x.length;E<S;E++){const R=x[E];i.push(Rx,Ry,0),r.push(0,0,1),a.push(Rx,Ry)}for(let E=0,S=T.length;E<S;E++){const R=T[E],P=R[0]+g,I=R[1]+g,O=R[2]+g;n.push(P,I,O),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Rb(t,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const a=t[e.shapes[i]];n.push(a)}return new o_(n,e.curveSegments)}}function Rb(s,e){if(e.shapes=[],Array.isArray(s))for(let t=0,n=s.length;t<n;t++){const i=s[t];e.shapes.push(i.uuid)}else e.shapes.push(s.uuid);return e}クラスkpは拡張しますKt{constructor(e=1,t=32,n=16,i=0,r=Math.PI*2,a=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:u},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const h=Math.min(a+u,Math.PI);let d=0;const m=[],g=new q,_=new q,x=[],M=[],T=[],E=[];for(let S=0;S<=n;S++){const R=[],P=S/n;let I=0;S===0&&a===0?I=.5/t:S===n&&h===Math.PI&&(I=-.5/t);for(let O=0;O<=t;O++){const U=O/t;gx=-e*Math.cos(i+U*r)*Math.sin(a+P*u),gy=e*Math.cos(a+P*u),gz=e*Math.sin(i+U*r)*Math.sin(a+P*u),M.push(gx,gy,gz),_.copy(g).normalize(),T.push(_.x,_.y,_.z),E.push(U+I,1-P),R.push(d++)}m.push(R)}for(let S=0;S<n;S++)for(let R=0;R<t;R++){const P=m[S][R+1],I=m[S][R],O=m[S+1][R],U=m[S+1][R+1];(S!==0||a>0)&&x.push(P,I,U),(S!==n-1||h<Math.PI)&&x.push(I,O,U)}this.setIndex(x),this.setAttribute("position",新しいSt(M,3)),this.setAttribute("normal",新しいSt(T,3)),this.setAttribute("uv",new St(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class a_ extends Yl{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new a_(e.radius,e.detail)}}class l_ extends Kt{constructor(e=1,t=.4,n=12,i=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],u=[],h=[],d=[],m=new q,g=new q,_=new q;for(let x=0;x<=n;x++)for(let M=0;M<=i;M++){const T=M/i*r、E=x/n*Math.PI*2、gx=(e+t*Math.cos(E))*Math.cos(T)、gy=(e+t*Math.cos(E))*Math.sin(T)、gz=t*Math.sin(E)、u.push(gx,gy,gz)、mx=e*Math.cos(T)、my=e*Math.sin(T)、_.subVectors(g,m).normalize()、h.push(_.x,_.y,_.z)、d.push(M/i)、d.push(x/n)}の場合(x=1;x<=n;x++の場合)、M=1;M<=i;M++の場合{const T=(i+1)*x+M-1,E=(i+1)*(x-1)+M-1,S=(i+1)*(x-1)+M,R=(i+1)*x+M;a.push(T,E,R),a.push(E,S,R)}this.setIndex(a),this.setAttribute("position",new St(u,3)),this.setAttribute("normal",new St(h,3)),this.setAttribute("uv",new St(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}クラス u_ は拡張しますKt{constructor(e=1,t=.4,n=64,i=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const u=[],h=[],d=[],m=[],g=新しいq,_=新しいq,x=新しいq,M=新しいq,T=新しいq,E=新しいq,S=新しいq;for(let P=0;P<=n;++P){const I=P/n*r*Math.PI*2;R(I,r,a,e,x),R(I+.01,r,a,e,M),E.subVectors(M,x),S.addVectors(M,x),T.crossVectors(E,S),S.crossVectors(T,E),T.normalize(),S.normalize();for(let O=0;O<=i;++O){const U=O/i*Math.PI*2、F=-t*Math.cos(U)、z=t*Math.sin(U);gx=x.x+(F*S.x+z*Tx)、gy=x.y+(F*S.y+z*Ty)、gz=x.z+(F*S.z+z*Tz)、h.push(gx,gy,gz)、_.subVectors(g,x).normalize()、d.push(_.x,_.y,_.z)、m.push(P/n)、m.push(O/i)}}for(let P=1;P<=n;P++)for(let I=1;I<=i;I++){const O=(i+1)*(P-1)+(I-1)、U=(i+1)*P+(I-1)、F=(i+1)*P+I、z=(i+1)*(P-1)+I;u.push(O,U,z),u.push(U,F,z)}this.setIndex(u),this.setAttribute("position",新しいSt(h,3)),this.setAttribute("normal",新しいSt(d,3)),this.setAttribute("uv",新しいSt(m,2));関数R(P,I,O,U,F){const z=Math.cos(P),D=Math.sin(P),N=O/I*P,G=M​​ath.cos(N);Fx=U*(2+G)*.5*z,Fy=U*(2+G)*D*.5,Fz=U*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u_(e.radius,e.tube,e.tubularSegments,e.radialSegments,ep,eq)}}class c_ extends Kt{constructor(e=new dx(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const u=new q,h=new q,d=new Ie;let m=new q;const g=[],_=[],x=[],M=[];T(),this.setIndex(M),this.setAttribute("position",new St(g,3)),this.setAttribute("normal",new St(_,3)),this.setAttribute("uv",new St(x,2));function T(){for(let P=0;P<t;P++)E(P);E(r===!1?t:0),R(),S()}関数E(P){m=e.getPointAt(P/t,m);const I=a.normals[P],O=a.binormals[P];for(let U=0;U<=i;U++){const F=U/i*Math.PI*2,z=Math.sin(F),D=-Math.cos(F);hx=D*I.x+z*Ox,hy=D*I.y+z*Oy,hz=D*I.z+z*Oz,h.normalize(),_.push(hx,hy,hz),ux=m.x+n*hx,uy=m.y+n*hy,uz=m.z+n*hz,g.push(ux,uy,uz)}}関数S(){for(let P=1;P<=t;P++)for(let I=1;I<=i;I++){const O=(i+1)*(P-1)+(I-1),U=(i+1)*P+(I-1),F=(i+1)*P+I,z=(i+1)*(P-1)+I;M.push(O,U,z),M.push(U,F,z)}}function R(){for(let P=0;P<=t;P++)for(let I=0;I<=i;I++)dx=P/t,dy=I/i,x.push(dx,dy)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new c_(new w0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class wE extends Kt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new q,r=new q;if(e.index!==null){const a=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let d=0,m=h.length;d<m;++d){const g=h[d],_=g.start,x=g.count;for(let M=_,T=_+x;M<T;M+=3)for(let E=0;E<3;E++){const S=u.getX(M+E),R=u.getX(M+(E+1)%3);i.fromBufferAttribute(a,S),r.fromBufferAttribute(a,R),S1(i,r,n)===!0&&(t.push(ix,iy,iz),t.push(rx,ry,rz))}}}else{const a=e.attributes.position;for(let u=0,h=a.count/3;u<h;u++)for(let d=0;d<3;d++){const m=3*u+d,g=3*u+(d+1)%3;i.fromBufferAttribute(a,m),r.fromBufferAttribute(a,g),S1(i,r,n)===!0&&(t.push(ix,iy,iz),t.push(rx,ry,rz))}}this.setAttribute("position",new St(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function S1(s,e,t){const n=`${sx},${sy},${sz}-${ex},${ey},${ez}`,i=`${ex},${ey},${ez}-${sx},${sy},${sz}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var M1=Object.freeze({__proto__:null,BoxGeometry:Mc,CapsuleGeometry:Q0,CircleGeometry:$0,ConeGeometry:e_,CylinderGeometry:bh,DodecahedronGeometry:t_,EdgesGeometry:yE,ExtrudeGeometry:i_,IcosahedronGeometry:r_,LatheGeometry:Op,OctahedronGeometry:Fp,PlaneGeometry:Ph,PolyhedronGeometry:Yl,RingGeometry:s_,ShapeGeometry:o_,SphereGeometry:kp,TetrahedronGeometry:a_,TorusGeometry:l_,TorusKnotGeometry:u_,TubeGeometry:c_,WireframeGeometry:wE});クラス EE ​​は fr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}クラス TE は go{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}を拡張しますクラス mx は fr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new を拡張しますlt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.dis placementMap=e.displacementMap、this.displacementScale=e.displacementScale、this.displacementBias=e.displacementBias、this.roughnessMap=e.roughnessMap、this.metalnessMap=e.metalnessMap、this.alphaMap=e.alphaMap、this.envMap=e.envMap、this.envMapRotation.copy(e.envMapRotation)、this.envMapIntensity=e.envMapIntensity、this.wireframe=e.wireframe、this.wireframeLinewidth=e.wireframeLinewidth、this.wireframeLinecap=e.wireframeLinecap、this.wireframeLinejoin=e.wireframeLinejoin、this.flatShading=e.flatShading、this.fog=e.fog、this}}クラスAEはmx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ht(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lt(0),this.sheenColorMap=null、this.sheenRoughness=1、this.sheenRoughnessMap=null、this.transmissionMap=null、this.thickness=0、this.thicknessMap=null、this.attenuationDistance=1/0、this.attenuationColor=new lt(1,1,1)、this.specularIntensity=1、this.specularIntensityMap=null、this.specularColor=new lt(1,1,1)、this.specularColorMap=null、this._anisotropy=0、this._clearcoat=0、this._dispersion=0、this._iridescence=0、this._sheen=0、this._transmission=0、this.setValues(e)}異方性を取得(){this._anisotropyを返す}設定異方性(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}クリアコートを取得(){return this._clearcoat}クリアコートを設定(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}虹彩を取得(){return this._iridescence}虹彩を設定(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}分散を取得(){return this._dispersion}分散を設定(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}光沢を取得(){return this._sheen}光沢を設定(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}透過率を取得(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMa p、this.clearcoatNormalMap=e.clearcoatNormalMap、this.clearcoatNormalScale.copy(e.clearcoatNormalScale)、this.dispersion=e.dispersion、this.ior=e.ior、this.iridescence=e.iridescence、this.iridescenceMap=e.iridescenceMap、this.iridescenceIOR=e.iridescenceIOR、this.iridescenceThicknessRange=[...e.iridescenceThicknessRange]、th is.iridescenceThicknessMap=e.iridescenceThicknessMap、this.sheen=e.sheen、this.sheenColor.copy(e.sheenColor)、this.sheenColorMap=e.sheenColorMap、this.sheenRoughness=e.sheenRoughness、this.sheenRoughnessMap=e.sheenRoughnessMap、this.transmission=e.transmission、this.transmissionMap=e.transmissionMap、this.thickness=e.thickness、this.thicknessMap=e.thicknessMap、this.attenuationDistance=e.attenuationDistance、this.attenuationColor.copy(e.attenuationColor)、this.specularIntensity=e.specularIntensity、this.specularIntensityMap=e.specularIntensityMap、this.specularColor.copy(e.specularColor)、this.specularColorMap=e.specularColorMap、this}}クラスCE は fr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new lt(16777215),this.specular=new lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wl,this.normalScale=new Ie(1,1),this.変位マップ=null、this.displacementScale=1、this.displacementBias=0、this.specularMap=null、this.alphaMap=null、this.envMap=null、this.envMapRotation=new vs、this.combine=Pp、this.reflectivity=1、this.refractionRatio=.98、t​​his.wireframe=!1、this.wireframeLinewidth=1、this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1、this.fog=!0、this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displac ementMap、this.displacementScale=e.displacementScale、this.displacementBias=e.displacementBias、this.specularMap=e.specularMap、this.alphaMap=e.alphaMap、this.envMap=e.envMap、this.envMapRotation.copy(e.envMapRotation)、this.combine=e.combine、this.reflectivity=e.reflectivity、this.refractionRatio=e.refractionRatio、this.wireframe=e.wireframe、this.wireframeLinewidth=e.wireframeLinewidth、this.wireframeLinecap=e.wireframeLinecap、this.wireframeLinejoin=e.wireframeLinejoin、this.flatShading=e.flatShading、this.fog=e.fog、this}}クラスRE は fr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wl,this.normalScale=new を拡張します。つまり(1,1)、this.displacementMap=null、this.displacementScale=1、this.displacementBias=0、this.alphaMap=null、this.wireframe=!1、this.wireframeLinewidth=1、this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0、this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap, this.normalMapType=e.normalMapType、th​​is.normalScale.copy(e.normalScale)、this.displacementMap=e.displacementMap、this.displacementScale=e.displacementScale、this.displacementBias=e.displacementBias、this.alphaMap=e.alphaMap、this.wireframe=e.wireframe、this.wireframeLinewidth=e.wireframeLinewidth、this.wireframeLinecap=e.wireframeLinecap、this.wireframeLinejoin=e.wireframeLinejoin、this.fog=e.fog、this}}クラスbEはfr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}クラスPEはfr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=newを拡張しますlt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wl,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new vs,this.combine=Pp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementSca le=e.displacementScale、this.displacementBias=e.displacementBias、this.specularMap=e.specularMap、this.alphaMap=e.alphaMap、this.envMap=e.envMap、this.envMapRotation.copy(e.envMapRotation)、this.combine=e.combine、this.reflectivity=e.reflectivity、this.refractionRatio=e.refractionRatio、this.wireframe=e.wireframe、this.wireframeLinewidth=e.wireframeLinewidth、this.wireframeLinecap=e.wireframeLinecap、this.wireframeLinejoin=e.wireframeLinejoin、this.flatShading=e.flatShading、this.fog=e.fog、this}}クラスgx は fr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Vw,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap、this.displacementMap=e.displacementMap、this.displacementScale=e.displacementScale、this.displacementBias=e.displacementBias、this.wireframe=e.wireframe、this.wireframeLinewidth=e.wireframeLinewidth、this}}class _x extends fr{constructor(e){super()、this.isMeshDistanceMaterial=!0、this.type="MeshDistanceMaterial",this.map=null、this.alphaMap=null、this.displacementMap=null、this.displacementScale=1、this.displacementBias=0、this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}クラスIEはfr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wl,this.normalScale=newを拡張しますつまり(1,1)、this.displacementMap=null、this.displacementScale=1、this.displacementBias=0、this.alphaMap=null、this.flatShading=!1、this.fog=!0、this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}クラス LE は拡張しますRr{コンストラクタ(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}関数ic(s,e,t){return!s||!t&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)}関数DE(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}関数NE(s){関数e(i,r){return s[i]-s[r]}const t=s.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function yy(s,e,t){const n=s.length,i=new s.constructor(n);for(let r=0,a=0;a!==n;++r){const u=t[r]*e;for(let h=0;h!==e;++h)i[a++]=s[u+h]}return i}function vx(s,e,t,n){let i=1,r=s[0];for(;r!==void 0&&r[n]===void 0;)r=s[i++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(e.push(r.time),t.push.apply(t,a)),r=s[i++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=s[i++];while(r!==void 0);else do a=r[n],a!==void 0&&(e.push(r.time),t.push(a)),r=s[i++];while(r!==void 0)}function bb(s,e,t,n,i=30){const r=s.clone();r.name=e;const a=[];for(let h=0;h<r.tracks.length;++h){const d=r.tracks[h],m=d.getValueSize(),g=[],_=[];for(let x=0;x<d.times.length;++x){const M=d.times[x]*i;if(!(M<t||M>=n)){g.push(d.times[x]);for(let T=0;T<m;++T)_.push(d.values[x*m+T])}}g.length!==0&&(d.times=ic(g,d.times.constructor),d.values=ic(_,d.values.constructor),a.push(d))}r.tracks=a;let u=1/0;for(let h=0;h<r.tracks.length;++h)u>r.tracks[h].times[0]&&(u=r.tracks[h].times[0]);for(let h=0;h<r.tracks.length;++h)r.tracks[h].shift(-1*u);return r.resetDuration(),r}function Pb(s,e=0,t=s,n=30){n<=0&&(n=30);const i=t.tracks.length,r=e/n;for(let a=0;a<i;++a){const u=t.tracks[a],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const d=s.tracks.find(function(S){return S.name===u.name&&S.ValueTypeName===h});if(d===void 0)continue;let m=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let _=0;const x=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const M=u.times.length-1;let T;if(r<=u.times[0]){const S=m,R=gm;T=u.values.slice(S,R)}else if(r>=u.times[M]){const S=M*g+m,R=S+gm;T=u.values.slice(S,R)}else{const S=u.createInterpolant(),R=m,P=gm;S.evaluate(r),T=S.resultBuffer.slice(R,P)}h==="quaternion"&&new Yr().fromArray(T).normalize().conjugate().toArray(T);const E=d.times.length;for(let S=0;S<E;++S){const R=S*x+_;if(h==="quaternion")Yr.multiplyQuaternionsFlat(d.values,R,T,0,d.values,R);else{const P=x-_*2;for(let I=0;I<P;++I)d.values[R+I]-=T[I]}}}return s.blendMode=$y,s}const Ib={convertArray:ic,isTypedArray:DE,getKeyframeOrder:NE,sortedArray:yy,flattenJSON:vx,subclip:bb,makeClipAdditive:Pb};class zp{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let u=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=r)){const u=t[1];e<u&&(n=2,r=u);for(let h=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===h)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const u=n+a>>>1;e<t[u]?a=u:n=u+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length、this._cachedIndex=n、this.copySampleValue_(n-1)}this._cachedIndex=n、this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer、n=this.sampleValues、i=this.valueSize、r=e*i;for(let a=0;a!==i;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("抽象メソッドの呼び出し")}intervalChanged_(){}}class UE extends zp{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ec,endingEnd:ec}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,u=i[r],h=i[a];if(u===void 0)switch(this.getSettings_().endingStart){case tc:r=e,u=2*tn;break;case cp:r=i.length-2,u=t+i[r]-i[r+1];break;default:r=e,u=n}if(h===void 0)switch(this.getSettings_().endingEnd){case tc:a=e,h=2*nt;break;case cp:a=1,h=n+i[1]-i[0];break;default:a=e-1,h=t}const d=(nt)*.5,m=this.valueSize;this._weightPrev=d/(tu),this._weightNext=d/(h-n),this._offsetPrev=r*m,this._offsetNext=a*m}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,u=this.valueSize,h=e*u,d=hu,m=this._offsetPrev,g=this._offsetNext,_=this._weightPrev,x=this._weightNext,M=(nt)/(it),T=M*M,E=T*M,S=-_*E+2*_*T-_*M,R=(1+_)*E+(-1.5-2*_)*T+(-.5+_)*M+1,P=(-1-x)*E+(1.5+x)*T+.5*M,I=x*Ex*T;for(let O=0;O!==u;++O)r[O]=S*a[m+O]+R*a[d+O]+P*a[h+O]+I*a[g+O];return r}}クラスyxはzp{コンストラクタ(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,u=this.valueSize,h=e*u,d=hu,m=(nt)/(it),g=1-m;for(let _=0;_!==u;++_)r[_]=a[d+_]*g+a[h+_]*m;return r}}クラスOEはzp{コンストラクタ(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class vo{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: トラック名が未定義です");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: トラック名 "+e" にはキーフレームがありません);this.name=e,this.times=ic(t,this.TimeBufferType),this.values=ic(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ic(e.times,Array),values:ic(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new OE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new UE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case up:t=this.InterpolantFactoryMethodDiscrete;break;case x0:t​​=this.InterpolantFactoryMethodLinear;break;case Lg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="「+this.ValueTypeName+」キーフレームトラック「+this.name」ではサポートされていない補間です;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return up;case this.InterpolantFactoryMethodLinear:return x0;case this.InterpolantFactoryMethodSmooth:return Lg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0、a=i-1;for(;r!==i&&n[r]<e;)++r;for(;a!==-1&&n[a]>t;)--a;if(++a、r!==0||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const u=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*u,a*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: トラックの値のサイズが無効です。",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: トラックが空です。",this),e=!1);let a=null;for(let u=0;u!==r;u++){const h=n[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: 時間は有効な数値ではありません。",this,u,h),e=!1;break}if(a!==null&&a>h){console.error("THREE.KeyframeTrack: 順序が間違っていますキー.",this,u,h,a),e=!1;break}a=h}if(i!==void 0&&DE(i))for(let u=0,h=i.​​length;u!==h;++u){const d=i[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: 値は有効な数値ではありません。",this,u,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Lg,r=e.length-1;let a=1;for(let u=1;u<r;++u){let h=!1;const d=e[u],m=e[u+1];if(d!==m&&(u!==1||d!==e[0]))if(i)h=!0;else{const g=u*n,_=gn,x=g+n;for(let M=0;M!==n;++M){const T=t[g+M];if(T!==t[_+M]||T!==t[x+M]){h=!0;break}}}if(h){if(u!==a){e[a]=e[u];const g=u*n,_=a*n;for(let x=0;x!==n;++x)t[_+x]=t[g+x]}++a}}if(r>0){e[a]=e[r];for(let u=r*n、h=a*n、d=0;d!==n;++d)t[h+d]=t[u+d];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e、this.values=t),this}clone(){const e=this.times.slice()、t=this.values.slice()、n=this.constructor、i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}vo.prototype.TimeBufferType=Float32Array;vo.prototype.ValueBufferType=Float32Array;vo.prototype.DefaultInterpolation=x0;class wc extends vo{コンストラクタ(e,t,n){super(e,t,n)}}wc.prototype.ValueTypeName="bool";wc.prototype.ValueBufferType=Array;wc.prototype.DefaultInterpolation=up;wc.prototype.InterpolantFactoryMethodLinear=void 0;wc.prototype.InterpolantFactoryMethodSmooth=void 0;class xxはvo{}xx.prototype.ValueTypeName="color"を拡張します。class ypはvo{}yp.prototype.ValueTypeName="number"を拡張します。class FEはzp{コンストラクタ(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,u=this.valueSize,h=(nt)/(it);let d=e*u;for(let m=d+u;d!==m;d+=4)Yr.slerpFlat(r,0,a,du,a,d,h);return r}}class Bp extends vo{InterpolantFactoryMethodLinear(e){return new FE(this.times,this.values,this.getValueSize(),e)}}Bp.prototype.ValueTypeName="quaternion";Bp.prototype.InterpolantFactoryMethodSmooth=void 0;class Ec extends vo{constructor(e,t,n){super(e,t,n)}}Ec.prototype.ValueTypeName="string";Ec.prototype.ValueBufferType=Array;Ec.prototype.DefaultInterpolation=up;Ec.prototype.InterpolantFactoryMethodLinear=void 0;Ec.prototype.InterpolantFactoryMethodSmooth=void 0;class xp extends vo{}xp.prototype.ValueTypeName="vector";クラス Sp{コンストラクター(e="",t=-1,n=[],i=G0){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=gs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,u=n.length;a!==u;++a)t.push(Db(n[a]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(vo.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let u=0;u<r;u++){let h=[],d=[];h.push((u+r-1)%r,u,(u+1)%r),d.push(0,1,0);const m=NE(h);h=yy(h,1,m),d=yy(d,1,m),!i&&h[0]===0&&(h.push(r),d.push(d[0])),a.push(new yp(".morphTargetInfluences["+t[u].name+"]",h,d).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const d=e[u],m=d.name.match(r);if(m&&m.length>1){const g=m[1];let _=i[g];_||(i[g]=_=[]),_.push(d)}}const a=[];for(const u in i)a.push(this.CreateFromMorphTargetSequence(u,i[u],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: JSONLoaderデータにアニメーションがありません。",null;const n=function(g,_,x,M,T){if(x.length!==0){const E=[],S=[];vx(x,E,S,M),E.length!==0&&T.push(new g(_,E,S))}},i=[],r=e.name||"default",a=e.fps||30,u=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const _=d[g].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let M;for(M=0;M<_.length;M++)if(_[M].morphTargets)for(let T=0;T<_[M].morphTargets.length;T++)x[_[M].morphTargets[T]]=-1;for(const T in x){const E=[],S=[];for(let R=0;R!==_[M].morphTargets.length;++R){const P=_[M];E.push(P.time),S.push(P.morphTarget===T?1:0)}i.push(new yp(".morphTargetInfluence["+T+"]",E,S))}h=x.length*a}else{const x=".bones["+t[g].name+"]";n(xp,x+".position",_,"pos",i),n(Bp,x+".quaternion",_,"rot",i),n(xp,x+".scale",_,"scl",i)}}return i.length===0?null:new this(r,h,i,u)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Lb(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yp;case"vector":case"vector2":case"vector3":case"vector4":return xp;case"color":return xx;case"quaternion":return Bp;case"bool":case"boolean":return wc;case"string":return Ec}throw new Error("THREE.KeyframeTrack: サポートされていないtypeName: "+s)}function Db(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: トラックタイプが未定義のため、解析できません");const e=Lb(s.type);if(s.times===void 0){const t=[],n=[];vx(s.keys,t,n,"value"),s.times=t,s.values=n}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const ka={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class Sx{constructor(e,t,n){const i=this;let r=!1,a=0,u=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(m){u++,r===!1&&i.onStart!==void 0&&i.onStart(m,a,u),r=!0},this.itemEnd=function(m){a++,i.onProgress!==void 0&&i.onProgress(m,a,u),a===u&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(m){i.onError!==void 0&&i.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m、this}、this.addHandler=function(m,g){return d.push(m,g),this}、this.removeHandler=function(m){const g=d.indexOf(m);return g!==-1&&d.splice(g,2),this}、this.getHandler=function(m){for(let g=0,_=d.length;g<_;g+=2){const x=d[g],M=d[g+1];if(x.global&&(x.lastIndex=0),x.test(m))return M}return null}}}const kE=new Sx;class Qr{constructor(e){this.manager=e!==void 0?e:kE、this.crossOrigin="anonymous",this.withCredentials=!1、this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qr.DEFAULT_MATERIAL_NAME="__DEFAULT";const La={};class Nb extendsエラー{コンストラクタ(e,t){super(e),this.response=t}}クラスWaはQr{コンストラクタ(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=ka.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(La[e]!==void 0){La[e].push({onLoad:t,onProgress:n,onError:i});return}La[e]=[],La[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(a).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTPステータス0を受信しました。"),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=La[e],g=d.body.getReader(),_=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),x=_?parseInt(_):0,M=x!==0;let T=0;const E=new ReadableStream({start(S){R();function R(){g.read().then(({done:P,value:I})=>{if(P)S.close();else{T+=I.byteLength;const O=new ProgressEvent("progress",{lengthComputable:M,loaded:T,total:x});for(let U=0,F=m.length;U<F;U++){const z=m[U];z.onProgress&&z.onProgress(O)}S.enqueue(I),R()}},P=>{S.error(P)})}}});return new Response(E)}else throw new Nb(`"${d.url}" の fetch が ${d.status}: ${d.statusText} で応答しました`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return d.json();default:if(u===void 0)return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(u),_=g&&g[1]?g[1].toLowerCase():void 0,x=new TextDecoder(_);return d.arrayBuffer().then(M=>x.decode(M))}}}).then(d=>{ka.add(e,d);const m=La[e];delete La[e];for(let g=0,_=m.length;g<_;g++){const x=m[g];x.onLoad&&x.onLoad(d)}}).catch(d=>{const m=La[e];if(m===void 0)throw this.manager.itemError(e),d;delete La[e];for(let g=0,_=m.length;g<_;g++){const x=m[g];x.onError&&x.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}クラスUbはQrを拡張します{コンストラクタ(e){super(e)}load(e,t,n,i){const r=this,a=new Wa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{t(r.parse(JSON.parse(u)))}catch(h){i?i(h):console.error(h),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Sp.parse(e[n]);t.push(i)}return t}}クラスObはQrを拡張します{constructor(e){super(e)}load(e,t,n,i){const r=this,a=[],u=new J0,h=new Wa(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(r.withCredentials);let d=0;function m(g){h.load(e[g],function(_){const x=r.parse(_,!0);a[g]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},d+=1,d===6&&(x.mipmapCount===1&&(u.minFilter=Ei),u.image=a,u.format=x.format,u.needsUpdate=!0,t&&t(u))},n,i)}if(Array.isArray(e))for(let g=0,_=e.length;g<_;++g)m(g);そうでなければh.load(e,function(g){const _=r.parse(g,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let M=0;M<x;M++){a[M]={mipmaps:[]};for(let T=0;T<_.mipmapCount;T++)a[M].mipmaps.push(_.mipmaps[M*_.mipmapCount+T]),a[M].format=_.format,a[M].width=_.width,a[M].height=_.height}u.image=a}else u.image.width=_.width,u.image.height=_.height,u.mipmaps=_.mipmaps;_.mipmapCount===1&&(u.minFilter=Ei),u.format=_.format,u.needsUpdate=!0,t&&t(u)},n,i);return u}}class Mp extends Qr{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ka.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const u=pp("img");function h(){m(),ka.add(e,this),t&&t(this),r.manager.itemEnd(e)}関数 d(g){m(),i&&i(g),r.manager.itemError(e),r.manager.itemEnd(e)}関数 m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),r.manager.itemStart(e),u.src=e,u}}クラスFbは拡張しますQr{コンストラクタ(e){super(e)}load(e,t,n,i){const r=new Np;r.colorSpace=Gr;const a=new Mp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let u=0;function h(d){a.load(e[d],function(m){r.images[d]=m,u++,u===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let d=0;d<e.length;++d)h(d);return r}}クラスkbはQr{コンストラクタ(e){super(e)}load(e,t,n,i){const r=this,a=new Bo,u=new Wa(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(r.withCredentials),u.load(e,function(h){let d;try{d=r.parse(h)}catch(m){if(i!==void 0)i(m);else{console.error(m);return}}d.image!==void 0?a.image=d.image:d.data!==void 0&&(a.image.width=d.width,a.image.height=d.height,a.image.data=d.data),a.wrapS=d.wrapS!==void 0?d.wrapS:Os,a.wrapT=d.wrapT!==void 0?d.wrapT:Os,a.magFilter=d.magFilter!==void 0?d.magFilter:Ei、a.minFilter=d.minFilter!==void 0?d.minFilter:Ei、a.anisotropy=d.anisotropy!==void 0?d.anisotropy:1、d.colorSpace!==void 0&&(a.colorSpace=d.colorSpace)、d.flipY!==void 0&&(a.flipY=d.flipY)、d.format!==void 0&&(a.format=d.format)、d.type!==void 0&&(a.type=d.type)、d.mipmaps!==void 0&&(a.mipmaps=d.mipmaps、a.minFilter=Fo)、d.mipmapCount===1&&(a.minFilter=Ei)、d.generateMipmaps!==void 0&&(a.generateMipmaps=d.generateMipmaps),a.needsUpdate=!0,t&&t(a,d)},n,i),a}}クラス f_ は Qr{コンストラクタ(e){super(e)}load(e,t,n,i){const r=new zn,a=new Mp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(u){r.image=u,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}}クラス ql は mn{コンストラクタ(e,t=1){super(),this.isLight=!0、this.type="Light"、this.color=new lt(e)、this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t)、this.color.copy(e.color)、this.intensity=e.intensity、this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex()、t.object.intensity=this.intensity、this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex())、this.distance!==void 0&&(t.object.distance=this.distance)、this.angle!==void 0&&(t.object.angle=this.angle)、this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}クラスzEはqlを拡張します{コンストラクタ(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Rv=new Dt,w1=new q,E1=new q;クラスMx{コンストラクタ(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new Dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Up,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;w1.setFromMatrixPosition(e.matrixWorld),t.position.copy(w1),E1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(E1),t.updateMatrixWorld(),Rv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rv),n.set(.5,0,0,.5,0,.5,0,0,.5,0,0,0,1),n.multiply(Rv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zb extends Mx{constructor(){super(new Ni(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera、n=mh*2*e.angle*this.focus、i=this.mapSize.width/this.mapSize.height、r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n、t.aspect=i、t.far=r、t.updateProjectionMatrix())、super.updateMatrices(e)}copy(e){return super.copy(e)、this.focus=e.focus,this}}クラスBEはqlを拡張します{constructor(e,t,n=0,i=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mn.DEFAULT_UP),this.updateMatrix(),this.target=new mn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new zb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const T1=new Dt,kd=new q,bv=new q;class Bb extends Mx{constructor(){super(new Ni(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new pn(2,1,1,1),new pn(0,1,1,1),new pn(3,1,1,1),new pn(1,1,1,1),new pn(3,0,1,1),new pn(1,0,1,1)],this._cubeDirections=[新しいq(1,0,0),新しいq(-1,0,0),新しいq(0,0,1),新しいq(0,0,-1),新しいq(0,1,0),新しいq(0,-1,0)],this._cubeUps=[新しいq(0,1,0),新しいq(0,1,0),新しいq(0,1,0),新しいq(0,1,0),新しいq(0,0,1),新しいq(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera、i=this.matrix、r=e.distance||n.far;r!==n.far&&(n.far=r、n.updateProjectionMatrix())、kd.setFromMatrixPosition(e.matrixWorld)、n.position.copy(kd)、bv.copy(n.position)、bv.add(this._cubeDirections[t])、n.up.copy(this._cubeUps[t])、n.lookAt(bv)、n.updateMatrixWorld()、i.makeTranslation(-kd.x、-kd.y、-kd.z)、T1.multiplyMatrices(n.projectionMatrix、n.matrixWorldInverse)、this._frustum.setFromProjectionMatrix(T1)}}クラスVEは拡張しますql{コンストラクタ(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Bb}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}クラスVpは拡張しますDp{コンストラクタ(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,w idth:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=ne,a=n+e,u=i+t,h=it;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=d*this.view.offsetX,a=r+d*this.view.width,u-=m*this.view.offsetY,h=um*this.view.height}this.projectionMatrix.makeOrthographic(r,a,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom、t.object.left=this.left、t.object.right=this.right、t.object.top=this.top、t.object.bottom=this.bottom、t.object.near=this.near、t.object.far=this.far、this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}クラスVbはMx{constructor(){super(new Vp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}クラスHEはql{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mn.DEFAULT_UP),this.updateMatrix(),this.target=new mn,this.shadow=new Vb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}クラスGEはql{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}クラスWEはql{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class XE{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=ex,i=ey,r=ez,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.add ScaledVector(a[5],1.092548*(i*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(n*r)),t.addScaledVector(a[8],.546274*(n*ni*i)),t}getIrradianceAt(e,t){const n=ex,i=ey,r=ez,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n* i),t.addScaledVector(a[5],2*.429043*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*n*r),t.addScaledVector(a[8],.429043*(n*ni*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=ex,i=ey,r=ez;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*ni*i)}}クラスYEは拡張しますql{コンストラクタ(e=new XE,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}クラスh_はQrを拡張します{コンストラクタ(e){super(e),this.textures={}}load(e,t,n,i){const r=this,a=new Wa(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(u){try{t(r.parse(JSON.parse(u)))}catch(h){i?i(h):console.error(h),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: 未定義のテクスチャ",r),t[r]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.ポリゴンオフセット単位),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const a=e.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=new lt().setHex(a.value);break;case"v2":i.uniforms[r].value=new Ie().fromArray(a.value);break;case"v3":i.uniforms[r].value=new q().fromArray(a.value);break;case"v4":i.uniforms[r].value=new pn().fromArray(a.value);break;case"m3":i.uniforms[r].value=new Wt().fromArray(a.value);break;case"m4":i.uniforms[r].value=new Dt().fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new Ie().fromArray(r)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return h_.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:EE,SpriteMaterial:sx,RawShaderMaterial:TE,ShaderMaterial:go,PointsMaterial:ax,MeshPhysicalMaterial:AE,MeshStandardMaterial:mx,MeshPhongMaterial:CE,MeshToonMaterial:RE,MeshNormalMaterial:bE,MeshLambertMaterial:PE,MeshDepthMaterial:gx,MeshDistanceMaterial:_x,MeshBasicMaterial:Xl,MeshMatcapMaterial:IE,LineDashedMaterial:LE,LineBasicMaterial:Rr,Material:fr};return new t[e]}}class xy{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() は r165 で非推奨となり、r175 で削除されます。代わりに TextDecoder を使用してください。"),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="文字列"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}クラス qE は Kt{コンストラクター(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class jE extends Qr{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new Wa(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(u){try{t(r.parse(JSON.parse(u)))}catch(h){i?i(h):console.error(h),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(x,M){if(t[M]!==void 0)return t[M];const E=x.interleavedBuffers[M],S=r(x,E.buffer),R=ih(E.type,S),P=new j0(R,E.stride);return P.uuid=E.uuid,t[M]=P,P}function r(x,M){if(n[M]!==void 0)return n[M];const E=x.arrayBuffers[M],S=new Uint32Array(E).buffer;return n[M]=S,S}const a=e.isInstancedBufferGeometry?new qE:new Kt,u=e.data.index;if(u!==void 0){const x=ih(u.type,u.array);a.setIndex(new Tn(x,1))}const h=e.data.attributes;for(const x in h){const M=h[x];let T;if(M.isInterleavedBufferAttribute){const E=i(e.data,M.data);T=new yc(E,M.itemSize,M.offset,M.normalized)}else{const E=ih(M.type,M.array),S=M.isInstancedBufferAttribute?_h:Tn;T=new S(E,M.itemSize,M.normalized)}M.name!==void 0&&(T.name=M.name),M.usage!==void 0&&T.setUsage(M.usage),a.setAttribute(x,T)}const d=e.data.morphAttributes;if(d)for(const x in d){const M=d[x],T=[];for(let E=0,S=M.length;E<S;E++){const R=M[E];let P;if(R.isInterleavedBufferAttribute){const I=i(e.data,R.data);P=new yc(I,R.itemSize,R.​​offset,R.normalized)}else{const I=ih(R.type,R.array);P=new Tn(I,R.itemSize,R.​​normalized)}R.name!==void 0&&(P.name=R.name),T.push(P)}a.morphAttributes[x]=T}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let x=0,M=g.length;x!==M;++x){const T=g[x];a.addGroup(T.start,T.count,T.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const x=new q;_.center!==void 0&&x.fromArray(_.center),a.boundingSphere=new ur(x,_.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Hb extends Qr{constructor(e){super(e)}load(e,t,n,i){const r=this,a=this.path===""?xy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const u=new Wa(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(g){i!==void 0&&i(g),console.error("THREE:ObjectLoader: "+e+" を解析できません",g.message);return}const m=d.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: "+e" をロードできません)),console.error("THREE.ObjectLoader: "+e" をロードできません);return}r.parse(d,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?xy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const r=new Wa(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),u=JSON.parse(a),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: ロードできません "+e);return await n.parseAsync(u)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(d)}),u=this.parseTextures(e.textures,a),h=this.parseMaterials(e.materials,u),d=this.parseObject(e.object,r,h,u,n),m=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,m),this.bindLightTargets(d),t!==void 0){let g=!1;for(const _ in a)if(a[_].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),u=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,i,u,a,t),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),this.bindLightTargets(h),h}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const r=new cc().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(r){r.isBone&&(i[r.uuid]=r)}),e!==void 0)for(let r=0,a=e.length;r<a;r++){const u=new Z0().fromJSON(e[r],i);n[u.uuid]=u}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new jE;for(let r=0,a=e.length;r<a;r++){let u;const h=e[r];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=i.parse(h);break;default:M1 の h.type?u=M1[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: サポートされていないジオメトリタイプ "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),h.userData!==void 0&&(u.userData=h.userData),n[h.uuid]=u}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const r=new h_;r.setTextures(t);for(let a=0,u=e.length;a<u;a++){const h=e[a];n[h.uuid]===void 0&&(n[h.uuid]=r.parse(h)),i[h.uuid]=n[h.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],r=Sp.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function a(h){return n.manager.itemStart(h),r.load(h,function(){n.manager.itemEnd(h)},void 0,function(){n.manager.itemError(h),n.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const d=h,m=/^(\/\/)|([az]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return a(m)}else return h.data?{data:ih(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new Sx(t);r=new Mp(h),r.setCrossOrigin(this.crossOrigin);for(let d=0,m=e.length;d<m;d++){const g=e[d],_=g.url;if(Array.isArray(_)){const x=[];for(let M=0,T=_.length;M<T;M++){const E=_[M],S=u(E);S!==null&&(S instanceof HTMLImageElement?x.push(S):x.push(new Bo(S.data,S.width,S.height)))}i[g.uuid]=new nc(x)}else{const x=u(g.url);i[g.uuid]=new nc(x)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(a){if(typeof a=="string"){const u=a,h=/^(\/\/)|([az]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await i.loadAsync(h)}else return a.data?{data:ih(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new Mp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,u=e.length;a<u;a++){const h=e[a],d=h.url;if(Array.isArray(d)){const m=[];for(let g=0,_=d.length;g<_;g++){const x=d[g],M=await r(x);M!==null&&(M instanceof HTMLImageElement?m.push(M):m.push(new Bo(M.data,M.width,M.height)))}n[h.uuid]=new nc(m)}else{const m=await r(h.url);n[h.uuid]=new nc(m)}}}return n}parseTextures(e,t){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: 定数は数値形式でなければなりません。",r),a[r])}const i={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const u=e[r];u.image===void 0&&console.warn('THREE.ObjectLoader: いいえ"image"が指定されました',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: 未定義の画像",u.image);const h=t[u.image],d=h.data;let m;Array.isArray(d)?(m=new Np,d.length===6&&(m.needsUpdate=!0)):(d&&d.data?m=new Bo:m=new zn,d&&(m.needsUpdate=!0)),m.source=h,m.uuid=u.uuid,u.name!==void 0&&(m.name=u.name),u.mapping!==void 0&&(m.mapping=n(u.mapping,Gb)),u.channel!==void 0&&(m.channel=u.channel),u.offset!==void 0&&m.offset.fromArray(u.offset),u.repeat!==void 0&&m.repeat.fromArray(u.repeat),u.center!==void 0&&m.center.fromArray(u.center),u.rotation!==void 0&&(m.rotation=u.rotation),u.wrap!==void 0&&(m.wrapS=n(u.wrap[0],A1),m.wrapT=n(u.wrap[1],A1)),u.format!==void 0&&(m.format=u.format),u.internalFormat!==void 0&&(m.internalFormat=u.internalFormat),u.type!==void 0&&(m.type=u.type),u.colorSpace!==void 0&&(m.colorSpace=u.colorSpace),u.minFilter!==void 0&&(m.minFilter=n(u.minFilter,C1)),u.magFilter!==void 0&&(m.magFilter=n(u.magFilter,C1)),u.anisotropy!==void 0&&(m.anisotropy=u.anisotropy),u.flipY!==void 0&&(m.flipY=u.flipY),u.generateMipmaps!==void 0&&(m.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(m.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(m.compareFunction=u.compareFunction),u.userData!==void 0&&(m.userData=u.userData),i[u.uuid]=m}return i}parseObject(e,t,n,i,r){let a;function u(_){return t[_]===void 0&&console.warn("THREE.ObjectLoader: 未定義のジオメトリ",_),t[_]}function h(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let M=0,T=_.length;M<T;M++){const E=_[M];n[E]===void 0&&console.warn("THREE.ObjectLoader: 未定義のマテリアル",E),x.push(n[E])}return x}return n[_]===void 0&&console.warn("THREE.ObjectLoader: 未定義のマテリアル",_),n[_]}}function d(_){return i[_]===void 0&&console.warn("THREE.ObjectLoader: 未定義のテクスチャ",_),i[_]}let m,g;switch(e.type){case"Scene":a=new rx,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new lt(e.background):a.background=d(e.background)),e.environment!==void 0&&(a.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new q0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Y0(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Ni(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Vp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new GE(e.color,e.intensity);break;case"DirectionalLight":a=new HE(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new VE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new WE(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new BE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new zE(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new YE().fromJSON(e);break;case"SkinnedMesh":m=u(e.geometry),g=h(e.material),a=new lE(m,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":m=u(e.geometry),g=h(e.material),a=new pi(m,g);break;case"InstancedMesh":m=u(e.geometry),g=h(e.material);const _=e.count,x=e.instanceMatrix,M=e.instanceColor;a=new uE(m,g,_),a.instanceMatrix=new _h(new Float32Array(x.array),16),M!==void 0&&(a.instanceColor=new _h(new Float32Array(M.array),M.itemSize));break;case"BatchedMesh":m=u(e.geometry),g=h(e.material),a=new cE(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(T=>{const E=new Cr;E.min.fromArray(T.boxMin),E.max.fromArray(T.boxMax);const S=new ur;return S.radius=T.sphereRadius、S.center.fromArray(T.sphereCenter)、{boxInitialized:T.boxInitialized、box:E、sphereInitialized:T.sphereInitialized、sphere:S}}),a._maxInstanceCount=e.maxInstanceCount、a._maxVertexCount=e.maxVertexCount、a._maxIndexCount=e.maxIndexCount、a._geometryInitialized=e.geometryInitialized、a._geometryCount=e.geometryCount、a._matricesTexture=d(e.matricesTexture.uuid)、e.colorsTexture!==void 0&&(a._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":a=new aE;break;case"Line":a=new Vl(u(e.geometry),h(e.material));break;case"LineLoop":a=new fE(u(e.geometry),h(e.material));break;case"LineSegments":a=new qo(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":a=new hE(u(e.geometry),h(e.material));break;case"Sprite":a=new oE(h(e.material));break;case"Group":a=new rh;break;case"Bone":a=new ox;break;default:a=new mn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let x=0;x<_.length;x++)a.add(this.parseObject(_[x],t,n,i,r))}if(e.animations!==void 0){const _=e.animations;for(let x=0;x<_.length;x++){const M=_[x];a.animations.push(r[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const _=e.levels;for(let x=0;x<_.length;x++){const M=_[x],T=a.getObjectByProperty("uuid",M.object);T!==void 0&&a.addLevel(T,M.distance,M.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: UUIDのスケルトンが見つかりません:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new mn}})}}const Gb={UVMapping:O0,CubeReflectionMapping:Ha,CubeRefractionMapping:Bl,EquirectangularReflectionMapping:sp,EquirectangularRefractionMapping:op,CubeUVReflectionMapping:Ah},A1={RepeatWrapping:ap,ClampToEdgeWrapping:Os,MirroredRepeatWrapping:lp},C1={NearestFilter:qi,NearestMipmapNearestFilter:Gy,NearestMipmapLinearFilter:nh,LinearFilter:Ei,LinearMipmapNearestFilter:qd,LinearMipmapLinearFilter:Fo};クラスWbは拡張しますQr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() はサポートされていません。"),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() はサポートされていません。"),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=ka.get(e);if(a!==void 0){if(r.manager.itemStart(e),a.then){a.then(d=>{t&&t(d),r.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const h=fetch(e,u).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(d){return ka.add(e,d),t&&t(d),r.manager.itemEnd(e),d}).catch(function(d){i&&i(d),ka.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});ka.add(e,h),r.manager.itemStart(e)}}let yg;class wx{static getContext(){return yg===void 0&&(yg=new(window.AudioContext||window.webkitAudioContext)),yg}static setContext(e){yg=e}}class Xb extends Qr{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new Wa(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(h){try{const d=h.slice(0);wx.getContext().decodeAudioData(d,function(g){t(g)}).catch(u)}catch(d){u(d)}},n,i);function u(h){i?i(h):console.error(h),r.manager.itemError(e)}}}const R1=new Dt,b1=new Dt,Bu=new Dt;class Yb{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ni,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ni,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Bu.copy(e.projectionMatrix);const i=t.eyeSep/2,r=i*t.near/t.focus,a=t.near*Math.tan(lc*t.fov*.5)/t.zoom;let u,h;b1.elements[12]=-i,R1.elements[12]=i,u=-a*t.aspect+r,h=a*t.aspect+r,Bu.elements[0]=2*t.near/(hu),Bu.elements[8]=(h+u)/(hu),this.cameraL.projectionMatrix.copy(Bu),u=-a*t.aspect-r,h=a*t.aspect-r,Bu.elements[0]=2*t.near/(hu),Bu.elements[8]=(h+u)/(hu),this.cameraR.projectionMatrix.copy(Bu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(b1),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(R1)}}クラスZEは拡張しますNi{コンストラクタ(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}クラスEx{コンストラクタ(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=P1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=P1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function P1(){return performance.now()}const Vu=new q,I1=new Yr,qb=new q,Hu=new q;class jb extends mn{constructor(){super(),this.type="AudioListener",this.context=wx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ex}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vu,I1,qb),Hu.set(0,0,-1).applyQuaternion(I1),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Vu.x,i),t.positionY.linearRampToValueAtTime(Vu.y,i),t.positionZ.linearRampToValueAtTime(Vu.z,i),t.forwardX.linearRampToValueAtTime(Hu.x,i),t.forwardY.linearRampToValueAtTime(Hu.y,i),t.forwardZ.linearRampToValueAtTime(Hu.z,i),t.upX.linearRampToValueAtTime(nx,i),t.upY.linearRampToValueAtTime(ny,i),t.upZ.linearRampToValueAtTime(nz,i)}else t.setPosition(Vu.x,Vu.y,Vu.z),t.setOrientation(Hu.x,Hu.y,Hu.z,nx,ny,nz)}}class JE extends mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: オーディオは既に再生中です。");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: このオーディオには再生コントロールがありません。");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer、t.loop=this.loop、t.loopStart=this.loopStart、t.loopEnd=this.loopEnd、t.onended=this.onEnded.bind(this)、t.start(this._startedAt、this._progress+this.offset、this.duration)、this.isPlaying=!0、this.source=t、this.setDetune(this.detune)、this.setPlaybackRate(this.playbackRate)、this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: このオーディオには再生コントロールがありません。");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: このオーディオには再生コントロールがありません。");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: このオーディオには再生コントロールがありません。");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: このオーディオには再生コントロールがありません。"),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: このオーディオには再生コントロールがありません。");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: オーディオソースタイプはコピーできません。"),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Gu=new q,L1=new Yr,Zb=new q,Wu=new q;class Jb extends JE{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Gu,L1,Zb),Wu.set(0,0,1).applyQuaternion(L1);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Gu.x,n),t.positionY.linearRampToValueAtTime(Gu.y,n),t.positionZ.linearRampToValueAtTime(Gu.z,n),t.orientationX.linearRampToValueAtTime(Wu.x,n),t.orientationY.linearRampToValueAtTime(Wu.y,n),t.orientationZ.linearRampToValueAtTime(Wu.z,n)}else t.setPosition(Gu.x,Gu.y,Gu.z),t.setOrientation(Wu.x,Wu.y,Wu.z)}}クラスKb{コンストラクタ(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}クラスKE{コンストラクタ(e,t,n){this.binding=e,this.valueSize=n;let i,r,a;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let u=0;u!==i;++u)n[r+u]=n[u];a=t}else{a+=t;const u=t/a;this._mixBufferRegion(n,r,0,u,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer、n=this.valueSize、i=n*this._addIndex、this.cumulativeWeightAdditive===0&&this._setIdentity()、this._mixBufferRegionAdditive(t、i、0、e、n)、this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize、n=this.buffer、i=e*t+t、r=this.cumulativeWeight、a=this.累積重量追加、u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const h=t*this._origIndex;this._mixBufferRegion(n,i,h,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let h=t,d=t+t;h!==d;++h)if(n[h]!==n[h+t]){u.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){Yr.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;Yr.multiplyQuaternionsFlat(e,a,e,t,e,n),Yr.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let u=0;u!==r;++u){const h=t+u;e[h]=e[h]*a+e[n+u]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const u=t+a;e[u]=e[u]+e[n+a]*i}}}const Tx="\\[\\]\\.:\\/",Qb=new正規表現("["+Tx+"]","g"),Ax="[^"+Tx+"]",$b="[^"+Tx.replace("\\.","")+"]",e2=/((?:WC+[\/:])*)/.source.replace("WC",Ax),t2=/(WCOD+)?/.source.replace("WCOD",$b),n2=/(?:\.(WC+)(?e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let u=0;u!==r;++u){const h=t+u;e[h]=e[h]*a+e[n+u]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const u=t+a;e[u]=e[u]+e[n+a]*i}}}const Tx="\\[\\]\\.:\\/",Qb=new正規表現("["+Tx+"]","g"),Ax="[^"+Tx+"]",$b="[^"+Tx.replace("\\.","")+"]",e2=/((?:WC+[\/:])*)/.source.replace("WC",Ax),t2=/(WCOD+)?/.source.replace("WCOD",$b),n2=/(?:\.(WC+)(?e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let u=0;u!==r;++u){const h=t+u;e[h]=e[h]*a+e[n+u]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const u=t+a;e[u]=e[u]+e[n+a]*i}}}const Tx="\\[\\]\\.:\\/",Qb=new正規表現("["+Tx+"]","g"),Ax="[^"+Tx+"]",$b="[^"+Tx.replace("\\.","")+"]",e2=/((?:WC+[\/:])*)/.source.replace("WC",Ax),t2=/(WCOD+)?/.source.replace(:\[(.+)\])?)?/.source.replace("WC",Ax),i2=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ax),r2=new RegExp("^"+e2+t2+n2+i2+"$"),s2=["material","materials","bones","map"];class o2{constructor(e,t,n){const i=n||dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}クラスdn{constructor(e,t,n){this.path=t,this.parsedPath=n||dn.parseTrackName(t),this.node=dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new dn.Composite(e,t,n):new dn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Qb,"")}static parseTrackName(e){const t=r2.exec(e);if(t===null)throw new Error("PropertyBinding: trackNameを解析できません: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);s2.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: trackNameからpropertyNameを解析できません: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let a=0;a<r.length;a++){const u=r[a];if(u.name===t||u.uuid===t)return u;const h=n(u.children);if(h)return h}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0 }_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: トラック「+this.path+」のターゲットノードが見つかりません。");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: ノードにマテリアルがないため、マテリアルにバインドできません。",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: バインドできません。 node.material にはマテリアル配列がないため、material.materials にバインドできません。",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: ノードにスケルトンがないため、ボーンにバインドできません。",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: ノードにマテリアルがないため、マテリアルにバインドできません。",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: ノードにマテリアルがないため、マテリアルにバインドできません。",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: ノードにマテリアルがないため、material.map にバインドできません。マップ.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: 未定義のノードのobjectNameにバインドできません。",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: objectNameのobjectIndexにバインドしようとしましたが、未定義です。",this,e);return}e=e[d]}}const a=e[i];if(a===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: トラック「+d+」."+i+"のプロパティを更新しようとしましたが、見つかりませんでした。",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: ノードにジオメトリがないため、morphTargetInfluences にバインドできません。",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: ノードにジオメトリがないため、morphTargetInfluences にバインドできません。",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}h=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(h=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.s etValue=this._setValue_unbound}}dn.Composite=o2;dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dn.prototype.GetterByBindingType=[dn.prototype._getValue_direct,dn.prototype._getValue_array,dn.prototype._getValue_arrayE lement,dn.prototype._getValue_toArray];dn.prototype.SetterByBindingTypeAndVersioning=[[dn.prototype._setValue_direct,dn.prototype._setValue_direct_setNeedsUpdate,dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_array,dn.prototype._setValue_array_setNeedsUpdate,dn.prototype._setValue_array_se tMatrixWorldNeedsUpdate],[dn.prototype._setValue_arrayElement、dn.prototype._setValue_arrayElement_setNeedsUpdate、dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_fromArray、dn.prototype._setValue_fromArray_setNeedsUpdate、dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];クラスa2{コンストラクター(){this.isAnimationObjectGroup=!0,this.uuid=gs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects、t=this._indicesByUUID、n=this._paths、i=this._parsedPaths、r=this._bindings、a=r.length;let u、h=e.length、d=this.nCachedObjects_;for(let m=0、g=arguments.length;m!==g;++m){const _=arguments[m]、x=_.uuid;let M=t[x];if(M===void 0){M=h++、t[x]=M、e.push(_);for(let T=0、E=a;T!==E;++T)r[T].push(new dn(_,n[T],i[T]))}else if(M<d){u=e[M];const T=--d,E=e[T];t[E.uuid]=M,e[M]=E,t[x]=T,e[T]=_;for(let S=0,R=a;S!==R;++S){const P=r[S],I=P[T];let O=P[M];P[M]=I,O===void 0&&(O=new dn(_,n[S],i[S])),P[T]=O}}else e[M]!==u&&console.error("THREE.AnimationObjectGroup: 同じUUIDを持つ異なるオブジェクトが検出されました。シーンをリロードするときに、キャッシュを消去するか、インフラストラクチャを再作成してください。")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,u=arguments.length;a!==u;++a){const h=arguments[a],d=h.uuid,m=t[d];if(m!==void 0&&m>=r){const g=r++,_=e[g];t[_.uuid]=m,e[m]=_,t[d]=g,e[g]=h;for(let x=0,M=i;x!==M;++x){const T=n[x],E=T[g],S=T[m];T[m]=E,T[g]=S}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],m=d.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<r){const _=--r,x=e[_],M=--a,T=e[M];t[x.uuid]=g,e[g]=x,t[T.uuid]=_,e[_]=T,e.pop();for(let E=0,S=i;E!==S;++E){const R=n[E],P=R[_],I=R[M];R[g]=P,R[_]=I,R.pop()}}else{const _=--a,x=e[_];_>0&&(t[x.uuid]=g),e[g]=x,e.pop();for(let M=0,T=i;M!==T;++M){const E=n[M];E[g]=E[_],E.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(i!==void 0)return r[i];const a=this._paths,u=this._parsedPaths,h=this._objects,d=h.length,m=this.nCachedObjects_,g=new Array(d);i=r.length,n[e]=i,a.push(e),u.push(t),r.push(g);for(let _=m,x=h.length;_!==x;++_){const M=h[_];g[_]=new dn(M,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,r=this._parsedPaths,a=this._bindings,u=a.length-1,h=a[u],d=e[u];t[d]=n,a[n]=h,a.pop(),r[n]=r[u],r.pop(),i[n]=i[u],i.pop()}}}class QE{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,u=new Array(a),h={endingStart:ec,endingEnd:ec};for(let d=0;d!==a;++d){const m=r[d].createInterpolant(null);u[d]=m,m.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zw,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,r=e._clip.duration,a=r/i,u=i/r;e.warp(1,a,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer、r=i.time、a=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=i._lendControlInterpolant()、this._timeScaleInterpolant=u);const h=u.parameterPositions、d=u.sampleValues;return h[0]=r、h[1]=r+n、d[0]=e/a、d[1]=t/a、this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null、this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const h=(er)*n;h<0||n===0?t=0:(this._startTime=null,t=n*h)}t*=this._updateTimeScale(e);const a=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case $y:for(let m=0,g=h.length;m!==g;++m)h[m].evaluate(a),d[m].accumulateAdditive(u);break;case G0:default:for(let m=0,g=h.length;m!==g;++m)h[m].evaluate(a),d[m].accumulate(i,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=n===Bw;if(e===0)return r===-1?i:a&&(r&1)===1?ti:i;if(n===kw){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const u=Math.floor(i/t);i-=t*u,r+=Math.abs(u);const h=this.repetitions-r;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=i;if(a&&(r&1)===1)return ti}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=tc,i.endingEnd=tc):(e?i.endingStart=this.zeroSlopeAtStart?tc:ec:i.endingStart=cp,t?i.endingEnd=this.zeroSlopeAtEnd?tc:ec:i.endingEnd=cp)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const u=a.parameterPositions,h=a.sampleValues;return u[0]=r,h[0]=t,u[1]=r+e,h[1]=n,this}}const l2=new Float32Array(1);クラス u2 は拡張しますYo{コンストラクタ(e){super(),this._root=e,this._initMemoryManager(),this._accuInde​​x=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,u=e._interpolants,h=n.uuid,d=this._bindingsByRootAndName;let m=d[h];m===void 0&&(m={},d[h]=m);for(let g=0;g!==r;++g){const _=i[g],x=_.name;let M=m[x];if(M!==void 0)++M.referenceCount,a[g]=M;else{if(M=a[g],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,h,x));continue}const T=t&&t._propertyBindings[g].binding.parsedPath;M=new KE(dn.create(n,x,T),_.ValueTypeName,_.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,h,x),a[g]=M}u[g].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const u=a.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid、a=this._actionsByClip、u=a[r]、h=u.knownActions、d=h[h.length-1]、m=e._byClipCacheIndex;d._byClipCacheIndex=m、h[m]=d、h.pop()、e._byClipCacheIndex=null;const g=u.actionByRoot、_=(e._localRoot||this._root).uuid;delete g[_]、h.length===0&&delete a[r]、this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName、r=this._bindings;let a=i[t];a===void 0&&(a={}、i[t]=a)、a[n]=e、e._cacheIndex=r.length、r.push(e)}_removeInactiveBinding(e){const t=this._bindings、n=e.binding、i=n.rootNode.uuid、r=n.path、a=this._bindingsByRootAndName、u=a[i]、h=t[t.length-1]、d=e._cacheIndex;h._cacheIndex=d、t[d]=h、t.pop()、delete u[r]、Object.keys(u).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new yx(new Float32Array(2),new Float32Array(2),1,l2),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a=typeof e=="string"?Sp.findByName(i,e):e;const u=a!==null?a.uuid:e,h=this._actionsByClip[u];let d=null;if(n===void 0&&(a!==null?n=a.blendMode:n=G0),h!==void 0){const g=h.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;d=h.knownActions[0],a===null&&(a=d._clip)}if(a===null)return null;const m=new QE(this,a,t,n);return this._bindAction(m,d),this._addInactiveAction(m,u,r),m}existingAction(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?Sp.findByName(n,e):e,a=r?r.uuid:e,u=this._actionsByClip[a];return u!==void 0&&u.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuInde​​x^=1;for(let d=0;d!==n;++d)t[d]._update(i,e,r,a);const u=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)u[d].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const a=r.knownActions;for(let u=0,h=a.length;u!==h;++u){const d=a[u];this._deactivateAction(d);const m=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const u=n[a].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const a in r){const u=r[a];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}クラスc2はW0を拡張します{コンストラクタ(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new X0(null,e,t,n),this.texture.isRenderTargetTexture=!0}}クラスf2はW0を拡張します{コンストラクタ(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Lp(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Cx{constructor(e){this.value=e}clone(){return new Cx(this.value.clone===void 0?this.value:this.value.clone())}}let h2=0;class d2 extends Yo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:h2++}),this.name="",this.usage=hp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}クラスp2は拡張しますj0{コンストラクター(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class m2{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const D1=new Dt;class $E{constructor(e,t,n=0,i=1/0){this.ray=new Rh(e,t)、this.near=n、this.far=i、this.camera=null、this.layers=new uc,this.params={メッシュ:{},ライン:{しきい値:1},LOD:{},ポイント:{しきい値:1},スプライト:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(ex,ey,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(ex,ey,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster:サポートされていないカメラタイプ: "+t.type)}setFromXRController(e){return D1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(D1),this}intersectObject(e,t=!0,n=[]){return Sy(e,this,n,t),n.sort(N1),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)Sy(e[i],this,n,t);return n.sort(N1),n}}function N1(s,e){return s.distance-e.distance}function Sy(s,e,t,n){let i=!0;if(s.layers.test(e.layers)&&s.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const r=s.children;for(let a=0,u=r.length;a<u;a++)Sy(r[a],e,t,!0)}}class g2{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ht(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(ex,ey,ez)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ht(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _2{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=ey,this}setFromVector3(e){return this.setFromCartesianCoords(ex,ey,ez)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Rx{constructor(e,t,n,i){Rx.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const r=this.要素;return r[0]=e,r[2]=t,r[1]=n,r[3]=i,this}}const U1=new Ie;class v2{constructor(e=new Ie(1/0,1/0),t=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=U1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return ex>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((ex-this.min.x)/(this.max.x-this.min.x),(ey-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,U1).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const O1=new q,xg=new q;class y2{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){O1.subVectors(e,this.start),xg.subVectors(this.end,this.start);const n=xg.dot(xg);let r=xg.dot(O1)/n;return t&&(r=Ht(r,0,1)),r}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.コンストラクタ().copy(this)}}const F1=new q;class x2 extends mn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Kt,i=[0,0,0,0,0,1,0,0,0,1,0,0,0,-1,0,1,0,0,0,0,0,1,1,0,0,0,-1,1];for(let a=0,u=1,h=32;a<h;a++,u++){const d=a/h*Math.PI*2,m=u/h*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new St(i,3));const r=new Rr({fog:!1,toneMapped:!1});this.cone=new qo(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),F1.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(F1),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Il=new q,Sg=new Dt,Pv=new Dt;class S2 extends qo{constructor(e){const t=eT(e),n=new Kt,i=[],r=[],a=new lt(0,0,1),u=new lt(0,1,0);for(let d=0;d<t.length;d++){const m=t[d];m.parent&&m.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(ar,ag,ab),r.push(ur,ug,ub))}n.setAttribute("position",new St(i,3)),n.setAttribute("color",new St(r,3));const h=new Rr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones、n=this.geometry、i=n.getAttribute("position");Pv.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const u=t[r];u.parent&&u.parent.isBone&&(Sg.multiplyMatrices(Pv,u.matrixWorld),Il.setFromMatrixPosition(Sg),i.setXYZ(a,Il.x,Il.y,Il.z),Sg.multiplyMatrices(Pv,u.parent.matrixWorld),Il.setFromMatrixPosition(Sg),i.setXYZ(a+1,Il.x,Il.y,Il.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function eT(s){const e=[];s.isBone===!0&&e.push(s);for(let t=0;t<s.children.length;t++)e.push.apply(e,eT(s.children[t]));return e}クラスM2はpiを拡張します{コンストラクタ(e,t,n){const i=new kp(t,4,2),r=new Xl({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const w2=new q,k1=new lt,z1=new lt;class E2 extends mn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Fp(t);i.rotateY(Math.PI*.5),this.material=new Xl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(r.count*3);i.setAttribute("color",new Tn(a,3)),this.add(new pi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");k1.copy(this.light.color),z1.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const r=n<i/2?k1:z1;t.setXYZ(n,rr,rg,rb)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(w2.setFromMatrixPosition(this.light.matrixWorld).negate())}}クラスT2はqoを拡張します{constructor(e=10,t=10,n=4473924,i=8947848){n=new lt(n),i=new lt(i);const r=t/2,a=e/t,u=e/2,h=[],d=[];for(let _=0,x=0,M=-u;_<=t;_++,M+=a){h.push(-u,0,M,u,0,M),h.push(M,0,-u,M,0,u);const T=_===r?n:i;T.toArray(d,x),x+=3,T.toArray(d,x),x+=3,T.toArray(d,x),x+=3,T.toArray(d,x),x+=3}const m=new Kt;m.setAttribute("position",new St(h,3)),m.setAttribute("color",new St(d,3));const g=new Rr({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class A2 extends qo{constructor(e=10,t=16,n=8,i=64,r=4473924,a=8947848){r=new lt(r),a=new lt(a);const u=[],h=[];if(t>1)for(let g=0;g<t;g++){const _=g/t*(Math.PI*2),x=Math.sin(_)*e,M=Math.cos(_)*e;u.push(0,0,0),u.push(x,0,M);const T=g&1?r:a;h.push(Tr,Tg,Tb),h.push(Tr,Tg,Tb)}for(let g=0;g<n;g++){const _=g&1?r:a,x=ee/n*g;for(let M=0;M<i;M++){let T=M/i*(Math.PI*2),E=Math.sin(T)*x,S=Math.cos(T)*x;u.push(E,0,S),h.push(_.r,_.g,_.b),T=(M+1)/i*(Math.PI*2),E=Math.sin(T)*x,S=Math.cos(T)*x,u.push(E,0,S),h.push(_.r,_.g,_.b)}}const d=new Kt;d.setAttribute("position",new St(u,3)),d.setAttribute("color",new St(h,3));const m=new Rr({vertexColors:!0,toneMapped:!1});super(d,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const B1=new q,Mg=new q,V1=new q;class C2 extends mn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Kt;i.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Rr({fog:!1,toneMapped:!1});this.lightPlane=new Vl(i,r),this.add(this.lightPlane),i=new Kt,i.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new Vl(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose()、this.lightPlane.material.dispose()、this.targetLine.geometry.dispose()、this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1)、this.light.target.updateWorldMatrix(!0,!1)、B1.setFromMatrixPosition(this.light.matrixWorld)、Mg.setFromMatrixPosition(this.light.target.matrixWorld)、V1.subVectors(Mg,B1)、this.lightPlane.lookAt(Mg)、this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mg),this.targetLine.scale.z=V1.length()}}const wg=new q,Jn=new Dp;クラスR2はqo{コンストラクタ(e){const t=new Kt,n=new Rr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u(" n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");関数u(M,T){h(M),h(T)}関数 h(M){i.push(0,0,0),r.push(0,0,0),a[M]===void 0&&(a[M]=[]),a[M].push(i.length/3-1)}t.setAttribute("position",新しいSt(i,3)),t.setAttribute("color",新しいSt(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const d=new lt(16755200),m=new lt(16711680),g=new lt(43775),_=new lt(16777215),x=new lt(3355443);this.setColors(d,m,g,_,x)}setColors(e,t,n,i,r){const u=this.geometry.getAttribute("color");u.setXYZ(0,er,eg,eb),u.setXYZ(1,er,eg,eb),u.setX YZ(2,er,eg,eb),u.setXYZ(3,er,eg,eb),u.setXYZ(4,er,eg,eb),u.setXYZ(5,er,eg,eb),u.setXYZ (6,er,eg,eb),u.setXYZ(7,er,eg,eb),u.setXYZ(8,er,eg,eb),u.setXYZ(9,er,eg,eb),u.setXYZ(1 0,er,eg,eb),u.setXYZ(11,er,eg,eb),u.setXYZ(12,er,eg,eb),u.setXYZ(13,er,eg,eb),u.setXYZ( 14,er,eg,eb),u.setXYZ(15,er,eg,eb),u.setXYZ(16,er,eg,eb),u.setXYZ(17,er,eg,eb),u.setXY Z(18,er,eg,eb),u.setXYZ(19,er,eg,eb),u.setXYZ(20,er,eg,eb),u.setXYZ(21,er,eg,eb),u.set XYZ(22,er,eg,eb),u.setXYZ(23,er,eg,eb),u.setXYZ(24,tr,tg,tb),u.setXYZ(25,tr,tg,tb),u.setXYZ(26,tr,tg,tb),u.setXYZ(27,tr,tg,tb),u.setXYZ(28,tr,tg,tb),u.setXYZ(29,tr,tg,tb),u.setXYZ(30,tr,tg,tb),u.setXYZ(31,tr,tg,tb),u.setXYZ(32,nr,ng,nb),u.setXYZ(33,nr,ng,nb),u.setXYZ(34,nr,ng,nb),u.setXYZ(35,nr,ng,nb),u.setXYZ(36,nr,ng,nb),u.setXYZ(37,nr,ng,nb),u.setXYZ(38,ir,ig,ib),u.setXYZ(39,ir,ig,ib),u.setXYZ(40,rr,r g,rb),u.setXYZ(41,rr,rg,rb),u.setXYZ(42,rr,rg,rb),u.setXYZ(43,rr,rg,rb),u.setXYZ(44,rr,rg,rb),u.setXYZ(45,rr,rg,rb),u.setXYZ(46,rr,rg,rb),u.setXYZ(47,rr,rg,rb),u.setXYZ(48,rr,rg,rb),u.setXYZ(49,rr,rg,rb),u.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;Jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===po?-1:0;ti("c",t,e,Jn,0,0,r),ti("t",t,e,Jn,0,0,1),ti("n1",t,e,Jn,-1,-1,r),ti("n2",t,e,Jn,n,-1,r),ti("n3",t,e,Jn,-1,i,r),ti("n4", t,e,Jn,n,i,r),ti("f1",t,e,Jn,-1,-1,1),ti("f2",t,e,Jn,n,-1,1),ti("f3",t,e,Jn,-1,i,1),ti("f4",t,e,Jn,n,i,1),ti("u1",t,e,Jn,n*.7,i*1.1,r),ti("u2",t,e,Jn,-1*.7,i*1.1, r),ti("u3",t,e,Jn,0,i*2,r),ti("cf1",t,e,Jn,-1,0,1),ti("cf2",t,e,Jn,n,0,1),ti("cf3",t,e,Jn,0,-1,1),ti("cf4",t,e,Jn,0,i,1),ti("cn1",t,e,Jn,-1,0,r),ti("cn2",t,e,Jn,n,0,r),ti("cn3",t,e,Jn,0,-1,r),ti("cn4",t,e,Jn,0,i,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}関数ti(s,e,t,n,i,r,a){wg.set(i,r,a).unproject(n);const u=e[s];if(u!==void 0){const h=t.getAttribute("position");for(let d=0,m=u.length;d<m;d++)h.setXYZ(u[d],wg.x,wg.y,wg.z)}}const Eg=new Cr;class b2 extends qo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),r=new Kt;r.setIndex(new Tn(n,1)),r.setAttribute("position",new Tn(i,3)),super(r,new Rr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() には引数がありません。"),this.object!==void 0&&Eg.setFromObject(this.object),Eg.isEmpty())return;const t=Eg.min,n=Eg.max,i=this.geometry.attributes.position,r=i.array;r[0]=nx,r[1]=ny,r[2]=nz,r[3]=tx,r[4]=ny,r[5]=nz,r[6]=tx,r[7]=ty,r[8]=nz,r[9]=nx,r[10]=ty,r[11]=nz,r[12]=nx,r[1 3]=ny,r[14]=tz,r[15]=tx,r[16]=ny,r[17]=tz,r[18]=tx,r[19]=ty,r[20]=tz,r[21]=nx,r[22]=ty,r[23]=tz,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}クラスP2はqoを拡張します{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,1,-1,1,1,-1,1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1],r=new Kt;r.setIndex(new Tn(n,1)),r.setAttribute("position",new St(i,3)),super(r,new Rr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class I2 extends Vl{constructor(e,t=1,n=16776960){const i=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Kt;a.setAttribute("position",new St(r,3)),a.computeBoundingSphere(),super(a,new Rr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new Kt;h.setAttribute("position",new St(u,3)),h.computeBoundingSphere(),this.add(new pi(h,new Xl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const H1=new q;let Tg,Iv;class L2 extends mn{constructor(e=new q(0,0,1),t=new q(0,0,0),n=1,i=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",Tg===void 0&&(Tg=new Kt,Tg.setAttribute("position",new St([0,0,0,0,1,0],3)),Iv=new bh(0,.5,1,5,1),Iv.translate(0,-.5,0)),this.position.copy(t),this.line=new Vl(Tg,new Rr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new pi(Iv,new Xl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(ey>.99999)this.quaternion.set(0,0,0,1);else if(ey<-.99999)this.quaternion.set(1,0,0,0);else{H1.set(ez,0,-ex).normalize();const t=Math.acos(ey);this.quaternion.setFromAxisAngle(H1,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,et),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}クラスD2はqo{コンストラクタ(e=1){const t=[0,0,0,e,0,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Kt;i.setAttribute("position",new St(t,3)),i.setAttribute("color",new St(n,3));const r=new Rr({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(e,t,n){const i=new lt,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15)、this.geometry.attributes.color.needsUpdate=!0、this}dispose(){this.geometry.dispose()、this.material.dispose()}}クラスN2{コンストラクタ(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new mp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const R=[];for(let P=0,I=S.length;P<I;P++){const O=S[P],U=new cc;U.curves=O.curves,R.push(U)}return R}function n(S,R){const P=R.length;let I=!1;for(let O=P-1,U=0;U<P;O=U++){let F=R[O],z=R[U],D=zx-Fx,N=zy-Fy;if(Math.abs(N)>Number.EPSILON){if(N<0&&(F=R[U],D=-D,z=R[O],N=-N),Sy<Fy||Sy>zy)継続;if(Sy===Fy){if(Sx===Fx)return!0}else{const G=N*(Sx-Fx)-D*(Sy-Fy);if(G===0)return!0;if(G<0)継続;I=!I}}else{if(Sy!==Fy)継続;if(zx<=Sx&&S.x<=Fx||Fx<=Sx&&S.x<=zx)return!0}}return I}const i=Vo.isClockWise, r=this.subPaths;if(r.length===0)return[];let a,u,h;const d=[];if(r.length===1)return u=r[0],h=new cc,h.curves=u.curves,d.push(h),d;let m=!i(r[0].getPoints());m=e?!m:m;const g=[],_=[];let x=[],M=0,T;_[M]=void 0,x[M]=[];for(let S=0,R=r.length;S<R;S++)u=r[S],T=u.getPoints(),a=i(T),a=e?!a:a,a?(!m&&_[M]&&M++,_[M]={s:new cc,p:T},_[M].s.curves=u.curves,m&&M++,x[M]=[]):x[M].push({h:u,p:T[0]});if(!_[0])return t(r);if(_.length>1){let S=!1,R=0;for(let P=0,I=_.length;P<I;P++)g[P]=[];for(let P=0,I=_.length;P<I;P++){const O=x[P];for(let U=0;U<O.length;U++){const F=O[U];let z=!0;for(let D=0;D<_.length;D++)n(Fp,_[D].p)&&(P!==D&&R++,z?(z=!1,g[D].push(F)):S=!0);z&&g[P].push(F)}}R>0&&S===!1&&(x=g)}let E;for(let S=0,R=_.length;S<R;S++){h=_[S].s,d.push(h),E=x[S];for(let P=0,I=E.length;P<I;P++)h.holes.push(E[P].h)}return d}}クラスU2は拡張しますYo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function O2(s,e){const t=s.image&&s.image.width?s.image.width/s.image.height:1;return t>e?(s.repeat.x=1,s.repeat.y=t/e,s.offset.x=0,​​s.offset.y=(1-s.repeat.y)/2):(s.repeat.x=e/t,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0),s}関数 F2(s,e){const t=s.image&&s.image.width?s.image.width/s.image.height:1;return t>e?(s.repeat.x=e/t,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0):(s.repeat.x=1,s.repeat.y=t/e,s.offset.x=0,​​s.offset.y=(1-s.repeat.y)/2),s}関数k2(s){return s.repeat.x=1,s.repeat.y=1,s.offset.x=0,​​s.offset.y=0,s}関数 My(s,e,t,n){const i=z2(n);switch(t){case qy:return s*e;case Zy:return s*e;case Jy:return s*e*2;case B0:return s*e/i.components*i.byteLength;case Ip:return s*e/i.components*i.byteLength;case Ky:return s*e*2/i.components*i.byteLength;case V0:return s*e*2/i.components*i.byteLength;case jy:return s*e*3/i.components*i.byteLength;case ar:return s*e*4/i.components*i.byteLength;case H0:return s*e*4/i.components*i.byteLength;case jd:case Zd:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;case Jd:case Kd:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case Zg:case Kg:return Math.max(s,16)*Math.max(e,8)/4;case jg:case Jg:return Math.max(s,8)*Math.max(e,8)/2;case Qg:case $g:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;case e0:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case t0:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case n0:return Math.floor((s+4)/5)*Math.floor((e+3)/4)*16;case i0:return Math.floor((s+4)/5)*Math.floor((e+4)/5)*16;case r0:return Math.floor((s+5)/6)*Math.floor((e+4)/5)*16;case s0:return Math.floor((s+5)/6)*Math.floor((e+5)/6)*16;case o0:return Math.floor((s+7)/8)*Math.floor((e+4)/5)*16;case a0:return Math.floor((s+7)/8)*Math.floor((e+5)/6)*16;case l0:return Math.floor((s+7)/8)*Math.floor((e+7)/8)*16;case u0:return Math.floor((s+9)/10)*Math.floor((e+4)/5)*16;case c0:return Math.floor((s+9)/10)*Math.floor((e+5)/6)*16;case f0:return Math.floor((s+9)/10)*Math.floor((e+7)/8)*16;case h0:return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case d0:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case p0:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case Qd:case m0:case g0:return Math.ceil(s/4)*Math.ceil(e/4)*16;case Qy:case _0:return Math.ceil(s/4)*Math.ceil(e/4)*8;case v0:case y0:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`${t}形式のテクスチャバイト長を判定できません。`)}function z2(s){switch(s){case mo:case Wy:return{byteLength:1,components:1};case ph:case Xy:case Ch:return{byteLength:2,components:1};case k0:case z0:return{byteLength:2,components:4};case Ga:case F0:case Xr:return{byteLength:4,components:1};case Yy:return{byteLength:4,components:3}}throw new Error(`不明なテクスチャタイプ ${s}.`)}const B2={contain:O2,cover:F2,fill:k2,getByteLength:My};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:N0}}));typeof window<"u"&&(window.__THREE__?console.warn("警告: Three.js のインスタンスが複数インポートされています。"):window.__THREE__=N0);/**ケース Kd:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;ケース Zg:case Kg:return Math.max(s,16)*Math.max(e,8)/4;ケース jg:case Jg:return Math.max(s,8)*Math.max(e,8)/2;ケース Qg:case $g:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;ケース e0:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;ケース t0:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;ケース n0:return Math.floor((s+4)/5)*Math.floor((e+3)/4)*16;case i0:return Math.floor((s+4)/5)*Math.floor((e+4)/5)*16;case r0:return Math.floor((s+5)/6)*Math.floor((e+4)/5)*16;case s0:return Math.floor((s+5)/6)*Math.floor((e+5)/6)*16;case o0:return Math.floor((s+7)/8)*Math.floor((e+4)/5)*16;case a0:return Math.floor((s+7)/8)*Math.floor((e+5)/6)*16;case l0:return Math.floor((s+7)/8)*Math.floor((e+7)/8)*16;case u0:return Math.floor((s+9)/10)*Math.floor((e+4)/5)*16;case c0:return Math.floor((s+9)/10)*Math.floor((e+5)/6)*16;case f0:return Math.floor((s+9)/10)*Math.floor((e+7)/8)*16;case h0:return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case d0:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case p0:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case Qd:case m0:case g0:return Math.ceil(s/4)*Math.ceil(e/4)*16;case Qy:case _0:return Math.ceil(s/4)*Math.ceil(e/4)*8;case v0:case y0:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`${t}形式のテクスチャバイト長を判定できません。`)}function z2(s){switch(s){case mo:case Wy:return{byteLength:1,components:1};case ph:case Xy:case Ch:return{byteLength:2,components:1};case k0:case z0:return{byteLength:2,components:4};case Ga:case F0:case Xr:return{byteLength:4,components:1};case Yy:return{byteLength:4,components:3}}throw new Error(`不明なテクスチャタイプ ${s}.`)}const B2={contain:O2,cover:F2,fill:k2,getByteLength:My};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:N0}}));typeof window<"u"&&(window.__THREE__?console.warn("警告: Three.js の複数のインスタンスがインポートされています。"):window.__THREE__=N0);/**ケース Kd:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;ケース Zg:case Kg:return Math.max(s,16)*Math.max(e,8)/4;ケース jg:case Jg:return Math.max(s,8)*Math.max(e,8)/2;ケース Qg:case $g:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;ケース e0:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;ケース t0:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;ケース n0:return Math.floor((s+4)/5)*Math.floor((e+3)/4)*16;case i0:return Math.floor((s+4)/5)*Math.floor((e+4)/5)*16;case r0:return Math.floor((s+5)/6)*Math.floor((e+4)/5)*16;case s0:return Math.floor((s+5)/6)*Math.floor((e+5)/6)*16;case o0:return Math.floor((s+7)/8)*Math.floor((e+4)/5)*16;case a0:return Math.floor((s+7)/8)*Math.floor((e+5)/6)*16;case l0:return Math.floor((s+7)/8)*Math.floor((e+7)/8)*16;case u0:return Math.floor((s+9)/10)*Math.floor((e+4)/5)*16;case c0:return Math.floor((s+9)/10)*Math.floor((e+5)/6)*16;case f0:return Math.floor((s+9)/10)*Math.floor((e+7)/8)*16;case h0:return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case d0:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case p0:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case Qd:case m0:case g0:return Math.ceil(s/4)*Math.ceil(e/4)*16;case Qy:case _0:return Math.ceil(s/4)*Math.ceil(e/4)*8;case v0:case y0:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`${t}形式のテクスチャバイト長を判定できません。`)}function z2(s){switch(s){case mo:case Wy:return{byteLength:1,components:1};case ph:case Xy:case Ch:return{byteLength:2,components:1};case k0:case z0:return{byteLength:2,components:4};case Ga:case F0:case Xr:return{byteLength:4,components:1};case Yy:return{byteLength:4,components:3}}throw new Error(`不明なテクスチャタイプ ${s}.`)}const B2={contain:O2,cover:F2,fill:k2,getByteLength:My};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:N0}}));typeof window<"u"&&(window.__THREE__?console.warn("警告: Three.js の複数のインスタンスがインポートされています。"):window.__THREE__=N0);/**return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case d0:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case p0:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case Qd:case m0:case g0:return Math.ceil(s/4)*Math.ceil(e/4)*16;case Qy:case _0:return Math.ceil(s/4)*Math.ceil(e/4)*8;case v0:case y0:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`テクスチャを決定できません${t} 形式のバイト長です。`)}function z2(s){switch(s){case mo:case Wy:return{byteLength:1,components:1};case ph:case Xy:case Ch:return{byteLength:2,components:1};case k0:case z0:return{byteLength:2,components:4};case Ga:case F0:case Xr:return{byteLength:4,components:1};case Yy:return{byteLength:4,components:3}}throw new Error(`不明なテクスチャタイプ ${s}。`)}const B2={contain:O2,cover:F2,fill:k2,getByteLength:My};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:N0}}));typeof window<"u"&&(window.__THREE__?console.warn("警告: Three.js のインスタンスが複数インポートされています。"):window.__THREE__=N0);/**return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case d0:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case p0:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case Qd:case m0:case g0:return Math.ceil(s/4)*Math.ceil(e/4)*16;case Qy:case _0:return Math.ceil(s/4)*Math.ceil(e/4)*8;case v0:case y0:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`テクスチャを決定できません${t} 形式のバイト長です。`)}function z2(s){switch(s){case mo:case Wy:return{byteLength:1,components:1};case ph:case Xy:case Ch:return{byteLength:2,components:1};case k0:case z0:return{byteLength:2,components:4};case Ga:case F0:case Xr:return{byteLength:4,components:1};case Yy:return{byteLength:4,components:3}}throw new Error(`不明なテクスチャタイプ ${s}。`)}const B2={contain:O2,cover:F2,fill:k2,getByteLength:My};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:N0}}));typeof window<"u"&&(window.__THREE__?console.warn("警告: Three.js のインスタンスが複数インポートされています。"):window.__THREE__=N0);/**
 * @ライセンス
 * 著作権 2010-2025 Three.js 作者
 * SPDX ライセンス識別子: MIT
 */function tT(){let s=null,e=!1,t=null,n=null;function i(r,a){t(r,a),n=s.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=s.requestAnimationFrame(i),e=!0)},stop:function(){s.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){s=r}}}function V2(s){const e=new WeakMap;function t(u,h){const d=u.array、m=u.usage、g=d.byteLength、_=s.createBuffer();s.bindBuffer(h,_),s.bufferData(h,d,m),u.onUploadCallback();let x;if(d instanceof Float32Array)x=s.FLOAT;else if(d instanceof Uint16Array)u.isFloat16BufferAttribute?x=s.HALF_FLOAT:x=s.UNSIGNED_SHORT;else if(d instanceof Int16Array)x=s.SHORT;else if(d instanceof Uint32Array)x=s.UNSIGNED_INT;else if(d instanceof Int32Array)x=s.INT;else if(d instanceof Int8Array)x=s.BYTE;else if(d instanceof Uint8Array)x=s.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)x=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: サポートされていないバッファデータ形式: "+d);return{buffer:_,type:x,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version,size:g}}function n(u,h,d){const m=h.array,g=h.updateRanges;if(s.bindBuffer(d,u),g.length===0)s.bufferSubData(d,0,m);else{g.sort((x,M)=>x.start-M.start);let _=0;for(let x=1;x<g.length;x++){const M=g[_],T=g[x];T.start<=M.start+M.count+1?M.count=Math.max(M.count,T.start+T.count-M.start):(++_,g[_]=T)}g.length=_+1;for(let x=0,M=g.length;x<M;x++){const T=g[x];s.bufferSubData(d,T.start*m.BYTES_PER_ELEMENT,m,T.start,T.count)}h.clearUpdateRanges()}h.onUploadCallback()}function i(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function r(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=e.get(u);h&&(s.deleteBuffer(h.buffer),e.delete(u))}function a(u,h){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const m=e.get(u);(!m||m.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const d=e.get(u);if(d===void 0)e.set(u,t(u,h));else if(d.version<u.version){if(d.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: バッファ属性の配列バッファのサイズが元のサイズと一致しません。バッファ属性のサイズを変更することはできません。サポートされています。");n(d.buffer,u,h),d.version=u.version}}return{get:i,remove:r,update:a}}var H2=`#ifdef USE_ALPHAHASH
	diffuseColor.a < getAlphaHashThreshold( vPosition ) の場合、破棄します。
#endif`,G2=`#ifdef USE_ALPHAHASH
	定数float ALPHA_HASH_SCALE = 0.05;
	浮動小数点ハッシュ2D(vec2値){
		fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) ); を返します。
	}
	浮動小数点ハッシュ3D(vec3値){
		hash2D(vec2(hash2D(value.xy), value.z))を返します。
	}
	float getAlphaHashThreshold( vec3 位置 ) {
		浮動小数点数maxDeriv = max(
			長さ(dFdx(位置.xyz))、
			長さ(dFdy(位置.xyz))
		）;
		浮動小数点ピクセルスケール = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		）;
		vec2 アルファ = vec2(
			ハッシュ3D( floor( pixScales.x * position.xyz ) ),
			ハッシュ3D( floor( pixScales.y * position.xyz ) )
		）;
		フロート lerpFactor = fract( log2( pixScale ) );
		浮動小数点数 x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		浮動小数点数 a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 ケース = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) )、
			( x - 0.5 * a ) / ( 1.0 - a ) 、
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		）;
		浮動小数点閾値 = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: ケース.z;
		クランプ(しきい値、1.0e-6、1.0)を返します。
	}
#endif`,W2=`#ifdef USE_ALPHAMAP
	拡散色.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,X2=`#ifdef USE_ALPHAMAP
	均一サンプラー2Dアルファマップ;
#endif`,Y2=`#ifdef USE_ALPHATEST
	#ifdef アルファからカバレッジへ
	拡散カラー.a = スムーズステップ( alphaTest, alphaTest + fwidth( 拡散カラー.a ), 拡散カラー.a );
	もしdiffuseColor.a == 0.0であれば破棄します。
	＃それ以外
	（diffuseColor.a < alphaTest）の場合、破棄します。
	#endif
#endif`,q2=`#ifdef USE_ALPHATEST
	均一な浮動小数点数の alphaTest;
#endif`,j2=`#ifdef USE_AOMAP
	浮動小数点アンビエントオクルージョン = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	反射光.indirectDiffuse * = ambientOcclusion;
	#定義されている場合( USE_CLEARCOAT )
		クリアコートスペキュラ間接 *= アンビエントオクルージョン;
	#endif
	#定義されている場合( USE_SHEEN )
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#定義されている場合(USE_ENVMAP) &&定義されている場合(STANDARD)
		float dotNV = saturate( dot( geométroNormal, geométroViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Z2=`#ifdef USE_AOMAP
	均一なサンプラー2D aoMap;
	均一な float aoMapIntensity;
#endif`,J2=`#ifdef USE_BATCHING
	#if ! 定義済み( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	均一な int _gl_DrawID;
	#endif
	均一な高解像度サンプラー2Dバッチングテクスチャ;
	均一な高解像度 usampler2D バッチング ID テクスチャ;
	mat4 getBatchingMatrix(定数 in float i) {
		int size = textureSize( バッチテクスチャ、 0 ).x;
		int j = int( i ) * 4;
		int x = j % サイズ;
		int y = j / サイズ;
		vec4 v1 = texelFetch( バッチテクスチャ、 ivec2( x, y )、 0 );
		vec4 v2 = texelFetch( バッチテクスチャ、 ivec2( x + 1、 y )、 0 );
		vec4 v3 = texelFetch( バッチテクスチャ、 ivec2( x + 2、 y )、 0 );
		vec4 v4 = texelFetch(batchingTexture, ivec2( x + 3, y ), 0 );
		戻り mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex(const in int i) {
		int size = textureSize( バッチングIDテクスチャ、 0 ).x;
		int x = i % サイズ;
		int y = i / サイズ;
		float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r ) を返します。
	}
#endif
#ifdef USE_BATCHING_COLOR
	均一サンプラー2Dバッチングカラーテクスチャ;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( バッチングカラーテクスチャ、 0 ).x;
		int j = int( i );
		int x = j % サイズ;
		int y = j / サイズ;
		texelFetch(batchingColorTexture, ivec2(x,y),0).rgb を返します。
	}
#endif`,K2=`#ifdef USE_BATCHING
	mat4 バッチングマトリックス = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Q2=`vec3 変換された = vec3( 位置 );
#ifdef USE_ALPHAHASH
	vPosition = vec3( 位置 );
#endif`,$2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 オブジェクト接線 = vec3( tangent.xyz );
#endif`,eP=`float G_BlinnPhong_Implicit( ) {
	0.25を返します。
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	RECIPROCAL_PI * ( 光沢 * 0.5 + 1.0 ) * pow( dotNH, 光沢 ) を返します。
}
vec3 BRDF_BlinnPhong( vec3 lightDir の定数、 vec3 viewDir の定数、 vec3 normal の定数、 vec3 specularColor の定数、 float shininess の定数 ) {
	vec3 halfDir = 正規化( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick(specularColor, 1.0, dotVH );
	フロート G = G_BlinnPhong_Implicit();
	float D = D_BlinnPhong( 光沢, dotNH );
	F * ( G * D ) を返します。
} // 検証済み`,tP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660, 0.0556434,
		-1.53​​71385, 1.8760108, -0.2040259,
		-0.4985314, 0.0415560, 1.0572252
	）;
	vec3 フレネル0ToIor( vec3 フレネル0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		(vec3(1.0) + sqrtF0) / (vec3(1.0) - sqrtF0) を返します。
	}
	vec3 IorToFresnel0( vec3 透過Ior、 float 入射Ior ) {
		pow2( ( 送信Ior - vec3( 発生Ior ) ) / ( 送信Ior + vec3( 発生Ior ) ) ); を返します。
	}
	float IorToFresnel0( float 透過Ior、 float 入射Ior ) {
		return pow2( ( 送信済み Ior - 事件 Ior ) / ( 送信済み Ior + 事件 Ior ));
	}
	vec3 evalSensitivity( float OPD, vec3 シフト) {
		浮動小数点位相 = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * 位相 + シフト ) * exp( - pow2( 位相 ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * 位相 + シフト[ 0 ] ) * exp( - 4.5282e+09 * pow2( 位相 ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		rgb を返します。
	}
	vec3 evalIridescence( float 外側IOR、 float η2、 float cosTheta1、 float 薄膜厚さ、 vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( 外側IOR / 虹彩IOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		cosTheta2Sq < 0.0 の場合
			vec3(1.0)を返す。
		}
		浮動小数点cosTheta2 = sqrt(cosTheta2Sq);
		float R0 = IorToFresnel0( 虹彩IOR、外側IOR );
		フロート R12 = F_Schlick( R0, 1.0, cosTheta1 );
		浮動小数点数 T121 = 1.0 - R12;
		浮動小数点数 phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		浮動小数点数 phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) ); vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		baseIOR[ 0 ] < iridescenceIOR の場合、phi23[ 0 ] = PI;
		baseIOR[ 1 ] < iridescenceIOR の場合、phi23[ 1 ] = PI;
		baseIOR[ 2 ] < iridescenceIOR の場合、phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = クランプ( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		私 = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		max(I,vec3(0.0))を返します。
	}
#endif`,nP=`#ifdef USE_BUMPMAP
	均一サンプラー2Dバンプマップ;
	均一な浮動小数点のバンプスケール;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		vec2( dBx, dBy ) を返します。
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = 正規化( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = 正規化( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = クロス( vSigmaY, vN );
		vec3 R2 = クロス( vN, vSigmaX );
		フロート fDet = dot( vSigmaX, R1 ) * 面方向;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		正規化を返します( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iP=`#if NUM_CLIPPING_PLANES > 0
	vec4 平面;
	#ifdef アルファからカバレッジへ
		float distanceToPlane、distanceGradient;
		フロートクリップ不透明度 = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i++ ) {
			平面 = clippingPlanes[ i ];
			平面までの距離 = - dot( vClipPosition, plane.xyz ) + plane.w;
			距離勾配 = fwidth(平面までの距離) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			clipOpacity == 0.0 の場合、破棄します。
		}
		#pragma unroll_loop_end
		#UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES の場合
			浮動小数点ユニオンクリップ不透明度 = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i++ ) {
				平面 = clippingPlanes[ i ];
				平面までの距離 = - dot( vClipPosition, plane.xyz ) + plane.w;
				距離勾配 = fwidth(平面までの距離) / 2.0;
				unionClipOpacity *= 1.0 - スムーズステップ( - distanceGradient、 distanceGradient、 distanceToPlane );
			}
			#pragma unroll_loop_end
			クリップ不透明度 *= 1.0 - クリップ不透明度を結合します。
		#endif
		拡散色.a * = クリップ不透明度;
		もしdiffuseColor.a == 0.0であれば破棄します。
	＃それ以外
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i++ ) {
			平面 = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) 破棄;
		}
		#pragma unroll_loop_end
		#UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES の場合
			bool クリップ = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i++ ) {
				平面 = clippingPlanes[ i ];
				クリップされた = ( dot( vClipPosition, plane.xyz ) > plane.w ) && クリップされた;
			}
			#pragma unroll_loop_end
			（クリップされた）場合は破棄します。
		#endif
	#endif
#endif`,rP=`#if NUM_CLIPPING_PLANES > 0
	vec3 vClipPosition を変更します。
	均一なvec4クリッピングプレーン[NUM_CLIPPING_PLANES];
#endif`,sP=`#if NUM_CLIPPING_PLANES > 0
	vec3 vClipPosition を変更します。
#endif`,oP=`#if NUM_CLIPPING_PLANES > 0
	vクリップ位置 = - mvPosition.xyz;
#endif`,aP=`#定義されている場合( USE_COLOR_ALPHA )
	拡散色 * = vColor;
#elif 定義済み( USE_COLOR )
	拡散色.rgb * = vColor;
#endif`,lP=`#if defined( USE_COLOR_ALPHA )
	変化する vec4 vColor;
#elif 定義済み( USE_COLOR )
	変化する vec3 vColor;
#endif`,uP=`#if defined( USE_COLOR_ALPHA )
	変化する vec4 vColor;
#elif 定義済み( USE_COLOR ) || 定義済み( USE_INSTANCING_COLOR ) || 定義済み( USE_BATCHING_COLOR )
	変化する vec3 vColor;
#endif`,cP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif 定義済み( USE_COLOR ) || 定義済み( USE_INSTANCING_COLOR ) || 定義済み( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= 色;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 バッチングカラー = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= バッチングカラー.xyz;
#endif`,fP=`#define PI 3.141592653589793
#定義 PI2 6.283185307179586
#定義 PI_HALF 1.5707963267948966
#定義 RECIPROCAL_PI 0.3183098861837907
#定義 RECIPROCAL_PI2 0.15915494309189535
#イプシロン 1e-6 を定義する
#ifndef 飽和
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) (1.0 - saturate(a))
float pow2( const in float x ) { return x*x; }
vec3 pow2( vec3 x の定数) { x*x を返します; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3(const in vec3 v) { return max(max(vx,vy), vz); }
float average(const in vec3 v) { return dot(v, vec3(0.3333333)); }
highp float rand(const in vec2 uv) {
	const highp float a = 12.9898、b = 78.233、c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	fract( sin( sn ) * c ) を返します。
}
#ifdef 高精度
	float precisionSafeLength( vec3 v ) { return length( v ); }
＃それ以外
	浮動小数点精度安全長さ(vec3 v) {
		フロートmaxComponent = max3(abs(v));
		長さ( v / maxComponent ) * maxComponent を返します。
	}
#endif
構造体インシデントライト{
	vec3 カラー;
	vec3 方向;
	bool 表示;
};
構造体ReflectedLight{
	vec3 直接拡散;
	vec3 ダイレクトスペキュラー;
	vec3 間接拡散;
	vec3 間接スペキュラー;
};
#ifdef USE_ALPHAHASH
	vec3 vPosition を変更する;
#endif
vec3 transformDirection( vec3 dir, mat4 行列 ) {
	正規化を返します( ( 行列 * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( vec3 dir, mat4 行列 ) {
	正規化を返します( ( vec4( dir, 0.0 ) * 行列 ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	tmp を返します。
}
ブール値isPerspectiveMatrix(mat4 m) {
	m[ 2 ][ 3 ] == - 1.0 を返します。
}
vec2 equirectUv( vec3 dir 内 ) {
	浮動小数点2乗（reciprocal_pi2）は、atan(dir.z, dir.x)の逆数です。
	フロート v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	vec2(u,v) を返します。
}
vec3 BRDF_Lambert( vec3 拡散カラー定数 ) {
	RECIPROCAL_PI * 拡散色を返します。
}
vec3 F_Schlick( vec3 f0 の定数、 float f90 の定数、 float dotVH の定数 ) {
	フロートフレネル = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	f0 * ( 1.0 - フレネル ) + ( f90 * フレネル ) を返します。
}
float F_Schlick( float f0 の定数、 float f90 の定数、 float dotVH の定数) {
	フロートフレネル = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	f0 * ( 1.0 - フレネル ) + ( f90 * フレネル ) を返します。
} // 検証済み`,hP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#cubeUV_minMipLevel 4.0 を定義します
	#define cubeUV_minTileSize 16.0
	float getFace(vec3 方向) {
		vec3 absDirection = abs( 方向 );
		フロート面 = - 1.0;
		もし ( absDirection.x > absDirection.z ) {
			もし ( absDirection.x > absDirection.y )
				面 = direction.x > 0.0 ? 0.0 : 3.0;
			それ以外
				面 = 方向.y > 0.0 ? 1.0 : 4.0;
		} それ以外 {
			もし ( absDirection.z > absDirection.y )
				面 = direction.z > 0.0 ? 2.0 : 5.0;
			それ以外
				面 = 方向.y > 0.0 ? 1.0 : 4.0;
		}
		顔を返す;
	}
	vec2 getUV( vec3 方向、 float 面 ) {
		vec2 uv;
		if ( 面 == 0.0 ) {
			uv = vec2( 方向.z, 方向.y ) / abs( 方向.x );
		} そうでなければ ( 面 == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} そうでなければ ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} そうでなければ ( フェイス == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} そうでなければ ( フェイス == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} それ以外 {
			uv = vec2( 方向.x、 方向.y ) / abs( 方向.z );
		}
		0.5 * ( uv + 1.0 ) を返します。
	}
	vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
		float face = getFace( 方向 );
		フロートフィルターInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt、 cubeUV_minMipLevel );
		浮動小数点のfaceSizeをexp2(mipInt);
		highp vec2 uv = getUV( 方向、面 ) * ( 面サイズ - 2.0 ) + 1.0;
		面が2.0より大きい場合
			uv.y += 顔のサイズ;
			面 -= 3.0;
		}
		uv.x += 顔 * 顔サイズ;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - 面サイズ );
		uv.x * = CUBEUV_TEXEL_WIDTH;
		uv.y * = CUBEUV_TEXEL_HEIGHT;
		#ifdef テクスチャ2DグラッドEXTtexture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb
			を返します。
		＃それ以外
			texture2D(envMap, uv).rgb を返します。
		#endif
	}
	#cubeUV_r0 1.0 を定義します
	#cubeUV_m0 を定義します - 2.0
	#cubeUV_r1 0.8 を定義します
	#cubeUV_m1 を 1.0 で定義します
	#cubeUV_r4 0.4 を定義します
	#cubeUV_m4 2.0 を定義します
	#cubeUV_r5 0.305 を定義します
	#cubeUV_m5 3.0 を定義します
	#cubeUV_r6 0.21 を定義します
	#cubeUV_m6 4.0 を定義します
	float roughnessToMip( float roughness ) {
		浮動小数点ミップ = 0.0;
		if ( 粗さ >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - 粗さ ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} そうでない場合 ( 粗さ >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - 粗さ ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} そうでない場合 ( 粗さ >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - 粗さ ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} そうでない場合 ( 粗さ >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - 粗さ ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} それ以外 {
			mip = - 2.0 * log2( 1.16 * 粗さ ); }
		mip を返します。
	}
	vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
		float mip = clamp( roughnessToMip( 粗さ ), cubeUV_m0, CUBEUV_MAX_MIP );
		浮動小数点数 mipF = fract( mip );
		浮動小数点数 mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		mipF == 0.0 の場合
			vec4( color0, 1.0 ) を返します。
		} それ以外 {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			vec4( mix( color0, color1, mipF ), 1.0 ) を返します。
		}
	}
#endif`,dP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 変換された接線 = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3(batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	変換された法線 = bm * 変換された法線;
	#ifdef USE_TANGENT
		変換されたタンジェント = bm * 変換されたタンジェント;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( インスタンスマトリックス );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	変換されたノーマル = im * 変換されたノーマル;
	#ifdef USE_TANGENT
		変換されたタンジェント = im * 変換されたタンジェント;
	#endif
#endif
変換された法線 = 通常の行列 * 変換された法線;
#ifdef FLIP_SIDED
	変換された通常値 = - 変換された通常値;
#endif
#ifdef USE_TANGENT
	変換された接線 = ( modelViewMatrix * vec4( 変換された接線、 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		変換されたタンジェント = - 変換されたタンジェント;
	#endif
#endif`,pP=`#ifdef USE_DISPLACEMENTMAP
	均一サンプラー2D変位マップ;
	均一な浮動小数点変位スケール;
	均一な浮動小数点変位バイアス;
#endif`,mP=`#ifdef USE_DISPLACEMENTMAP
	変換された += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gP=`#ifdef USE_EMISSIVEMAP
	vec4 発光カラー = texture2D(発光マップ、vEmissiveMapUv);
	#ifdef デコード_ビデオ_テクスチャ_発光
		発光色 = sRGBTransferEOTF( 発光色 );
	#endif
	総放射輝度 *= emissiveColor.rgb;
#endif`,_P=`#ifdef USE_EMISSIVEMAP
	均一なサンプラー2D emissiveMap;
#endif`,vP="gl_FragColor = linearToOutputTexel( gl_FragColor );",yP=`vec4 LinearTransferOETF( vec4 値 ) {
	戻り値;
}
vec4 sRGBTransferEOTF( vec4 値内 ) {
	vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a ); を返します。
}
vec4 sRGBTransferOETF( vec4 値内 ) {
	vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a ); を返します。
}`,xP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 カメラからフラグへ;
		if (isOrthographic) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} それ以外 {
			cameraToFrag = 正規化( vWorldPosition - cameraPosition );
		}
		vec3 ワールドノーマル = inverseTransformDirection( 法線、 ビューマトリックス );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		＃それ以外
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	＃それ以外
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	＃それ以外
		vec4 環境カラー = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight、 outgoingLight * envColor.xyz、 specularStrength * 反射率 );
	#elif 定義済み( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight、 envColor.xyz、 specularStrength * 反射率 );
	#elif 定義済み( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * 反射率;
	#endif
#endif`,SP=`#ifdef USE_ENVMAP
	均一な浮動小数点のenvMapIntensity;
	ユニフォームフロート flipEnvMap;
	均一なmat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		均一なサンプラーCube envMap;
	＃それ以外
		均一なサンプラー2D envMap;
	#endif
	
#endif`,MP=`#ifdef USE_ENVMAP
	均一なフロート反射率。
	#定義済み( USE_BUMPMAP ) || 定義済み( USE_NORMALMAP ) || 定義済み( PHONG ) || 定義済み( LAMBERT )
		#ENV_WORLDPOS を定義します
	#endif
	#ifdef ENV_WORLDPOS
		変化する vec3 vWorldPosition;
		均一な浮動小数点屈折比;
	＃それ以外
		変化する vec3 vReflect;
	#endif
#endif`,wP=`#ifdef USE_ENVMAP
	#定義済み( USE_BUMPMAP ) || 定義済み( USE_NORMALMAP ) || 定義済み( PHONG ) || 定義済み( LAMBERT )
		#ENV_WORLDPOS を定義します
	#endif
	#ifdef ENV_WORLDPOS
		
		変化する vec3 vWorldPosition;
	＃それ以外
		変化する vec3 vReflect;
		均一な浮動小数点屈折比;
	#endif
#endif`,EP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vワールド位置 = ワールド位置.xyz;
	＃それ以外
		vec3 カメラを頂点に変換します。
		if (isOrthographic) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} それ以外 {
			cameraToVertex = 正規化( worldPosition.xyz - cameraPosition );
		}
		vec3 ワールド法線 = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( カメラの頂点、 ワールド法線 );
		＃それ以外
			vReflect = refract( カメラの頂点、 ワールド法線、 屈折比 );
		#endif
	#endif
#endif`,TP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,AP=`#ifdef USE_FOG
	可変長の float vFogDepth;
#endif`,CP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float 霧ファクター = 1.0 - exp( - 霧密度 * 霧密度 * vFogDepth * vFogDepth );
	＃それ以外
		フロート フォグファクター = スムーズステップ ( fogNear、 fogFar、 vFogDepth )。
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb、 fogColor、 fogFactor );
#endif`,RP=`#ifdef USE_FOG
	均一な vec3 フォグカラー;
	可変長の float vFogDepth;
	#ifdef FOG_EXP2
		均一なフロート霧の密度;
	＃それ以外
		均一な浮遊霧近く;
		均一な浮遊霧遠い;
	#endif
#endif`,bP=`#ifdef USE_GRADIENTMAP
	均一サンプラー2Dグラデーションマップ;
#endif
vec3 getGradientIrradiance( vec3 法線、 vec3 光方向 ) {
	float dotNL = dot( 法線、 光の方向 );
	vec2 座標 = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		vec3( texture2D( gradientMap, coord ).r ) を返します。
	＃それ以外
		vec2 fw = fwidth( 座標 ) * 0.5;
		mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );を返します。
	#endif
}`,PP=`#ifdef USE_LIGHTMAP
	均一サンプラー2Dライトマップ;
	均一な float lightMapIntensity;
#endif`,IP=`LambertMaterial マテリアル;
マテリアルの拡散色を拡散色.rgb に設定します。
material.specularStrength = specularStrength;`,LP=`varying vec3 vViewPosition;
構造体LambertMaterial {
	vec3 拡散色;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geomologyNormal, directLight.direction ) );
	vec3 放射照度 = dotNL * directLight.color;
	reflectLight.directDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct RE_Direct_Lambert
#define RE_IndirectDiffuse RE_IndirectDiffuse_Lambert`,DP=`uniform bool receiveShadow;
均一な vec3 ambientLightColor;
#定義されている場合( USE_LIGHT_PROBES )
	均一なvec3 lightProbe[9];
#endif
vec3 shGetIrradianceAt( vec3 normal, vec3 shCoefficients[ 9 ] ) {
	浮動小数点数 x = normal.x、y = normal.y、z = normal.z;
	vec3結果 = shCoefficients[0] * 0.886227;
	結果 += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	結果 += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	結果 += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	結果 += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	結果 += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	結果 += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	結果 += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	結果 += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	結果を返します。
}
vec3 getLightProbeIrradiance( vec3 lightProbe[ 9 ]のconst、 vec3 normalのconst) {
	vec3 ワールドノーマル = inverseTransformDirection( 法線、 ビューマトリックス );
	vec3 放射照度 = shGetIrradianceAt( worldNormal, lightProbe );
	放射照度を返します。
}
vec3 getAmbientLightIrradiance( vec3 ambientLightColor の定数) {
	vec3 放射照度 = ambientLightColor;
	放射照度を返します。
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	カットオフ距離 > 0.0 の場合
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	distanceFalloff を返します。
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	smoothstep( coneCosine, penumbraCosine, angleCosine ) を返します。
}
#NUM_DIR_LIGHTS > 0 の場合
	構造体DirectionalLight {
		vec3 方向;
		vec3 カラー;
	};
	均一なDirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo(const in DirectionalLight 方向ライト、out IncidentLight ライト) {
		light.color = 方向ライト.color;
		light.direction = 方向ライト.direction;
		ライトが見える = true;
	}
#endif
#NUM_POINT_LIGHTS > 0 の場合
	構造体PointLight {
		vec3 位置;
		vec3 カラー;
		フロート距離;
		フロート減衰;
	};
	均一なPointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geomologyPosition;
		light.direction = 正規化( lVector );
		フロート lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#NUM_SPOT_LIGHTS > 0 の場合
	構造体スポットライト{
		vec3 位置;
		vec3 方向;
		vec3 カラー;
		フロート距離;
		フロート減衰;
		フロートコーンCos;
		半影Cosをフロートします。
	};
	均一なスポットライト spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geomologyPosition;
		light.direction = 正規化( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		スポット減衰 > 0.0 の場合
			フロート lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} それ以外 {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#NUM_RECT_AREA_LIGHTS > 0 の場合
	構造体RectAreaLight {
		vec3 カラー;
		vec3 位置;
		vec3 半幅;
		vec3 ハーフハイト;
	};
	ユニフォームサンプラー2D ltc_1; ユニフォームサンプラー2D ltc_2;
	均一な RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#NUM_HEMI_LIGHTS > 0 の場合
	構造体HemisphereLight {
		vec3 方向;
		vec3 スカイカラー;
		vec3 地面の色;
	};
	均一な HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance(HemisphereLight hemiLight の定数、vec3 normal の定数) {
		float dotNL = dot( normal, hemiLight.direction );
		浮動小数点拡散重み = 0.5 * dotNL + 0.5;
		vec3 放射照度 = mix( hemiLight.groundColor、 hemiLight.skyColor、 hemiDiffuseWeight );
		放射照度を返します。
	}
#endif`,NP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( vec3 法線内の定数 ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 ワールドノーマル = inverseTransformDirection( 法線、 ビューマトリックス );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			PI * envMapColor.rgb * envMapIntensity を返します。
		＃それ以外
			vec3(0.0)を返す。
		#endif
	}
	vec3 getIBLRadiance( vec3 viewDir の定数、 vec3 normal の定数、 float roughness の定数 ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			envMapColor.rgb * envMapIntensity を返します。
		＃それ以外
			vec3(0.0)を返す。
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( vec3 viewDir の定数、 vec3 normal の定数、 float roughness の定数、 vec3 bitangent の定数、 float anisotropy の定数 ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize(cross(bentNormal, bitangent));
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - 異方性 * ( 1.0 - 粗さ ) ) ) ) );
				getIBLRadiance( viewDir, bentNormal, roughness ) を返します。
			＃それ以外
				vec3(0.0)を返す。
			#endif
		}
	#endif
#endif`,UP=`ToonMaterial マテリアル;
material.diffuseColor = diffuseColor.rgb;`,OP=`varying vec3 vViewPosition;
構造体トゥーンマテリアル{
	vec3 拡散色;
};
void RE_Direct_Toon( const in IncidentLight directLight、const in vec3 geometryPosition、const in vec3 geometryNormal、const in vec3 geometryViewDir、const in vec3 geometryClearcoatNormal、const in ToonMaterial material、inout ReflectedLight reflectedLight ) {
	vec3 放射照度 = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectLight.directDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct RE_Direct_Toon
#define RE_IndirectDiffuse RE_IndirectDiffuse_Toon`,FP=`BlinnPhongMaterial マテリアル;
マテリアルの拡散色を拡散色.rgb に設定します。
material.specularColor = スペキュラ;
material.specularShininess = 光沢;
material.specularStrength = specularStrength;`,kP=`varying vec3 vViewPosition;
構造体 BlinnPhongMaterial {
	vec3 拡散色;
	vec3 スペキュラーカラー;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geomologyNormal, directLight.direction ) );
	vec3 放射照度 = dotNL * directLight.color;
	reflectLight.directDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
	reflectLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct RE_Direct_BlinnPhong
#define RE_IndirectDiffuse RE_IndirectDiffuse_BlinnPhong`,zP=`PhysicalMaterial マテリアル;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - メタルネス係数 );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
フロートgeometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geomologyRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	マテリアル.ior = ior;
	#ifdef USE_SPECULAR
		浮動小数点反射強度係数 = 反射強度;
		vec3 スペキュラーカラー係数 = スペキュラーカラー;
		#ifdef USE_SPECULAR_COLORMAP
			スペキュラーカラー係数 *= texture2D( スペキュラーカラーマップ、 vスペキュラーカラーマップUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			スペキュラー強度係数 *= texture2D( スペキュラー強度マップ、 vスペキュラー強度マップUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	＃それ以外
		浮動小数点鏡面強度係数 = 1.0;
		vec3 スペキュラーカラー係数 = vec3( 1.0 );
		マテリアル.スペキュラーF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
＃それ以外
	material.specularColor = mix( vec3( 0.04 ), diffusionColor.rgb, metalnessFactor );
	マテリアル.スペキュラーF90 = 1.0;
#endif
#ifdef クリアコートを再利用
	material.clearcoat = クリアコート;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	マテリアル.クリアコートF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat ); material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geomologyRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = 分散;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = 虹彩;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	＃それ以外
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 異方性Mat = mat2( 異方性ベクトルx、 異方性ベクトルy、 - 異方性ベクトルy、 異方性ベクトルx );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	＃それ以外
		vec2 異方性V = 異方性ベクトル;
	#endif
	material.anisotropy = length( anisotropyV );
	if( 材質.異方性 == 0.0 ) {
		異方性V = vec2( 1.0, 0.0 );
	} それ以外 {
		異方性V /= 材質.異方性;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,BP=`構造体物理マテリアル {
	vec3 拡散色;
	フロート粗さ;
	vec3 スペキュラーカラー;
	浮動小数点スペキュラF90;
	フロート分散;
	#ifdef クリアコートを再利用
		フロートクリアコート;
		フロートクリアコート粗さ;
		vec3 クリアコートF0;
		フロートクリアコートF90;
	#endif
	#ifdef USE_IRIDESCENCE
		虹彩を浮かべる;
		浮動小数点虹彩IOR;
		フロートの虹彩の厚さ;
		vec3 虹彩フレネル;
		vec3 虹彩F0;
	#endif
	#ifdef USE_SHEEN
		vec3 シーンカラー;
		フロート光沢粗さ;
	#endif
	#ifdef IOR
		フロートior;
	#endif
	#ifdef USE_TRANSMISSION
		フロートトランスミッション;
		フロートトランスミッションアルファ;
		フロートの厚さ;
		float attenuationDistance;
		vec3 減衰カラー;
	#endif
	#ifdef USE_ANISOTROPY
		フロートの異方性;
		float alphaT;
		vec3 異方性T;
		vec3 異方性B;
	#endif
};
vec3 クリアコートスペキュラーダイレクト = vec3( 0.0 );
vec3 クリアコートスペキュラー間接 = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( vec3 f の定数、 float f90 の定数、 float dotVH の定数 ) {
    浮動小数点数 x = クランプ ( 1.0 - dotVH, 0.0, 1.0 ) ;
    浮動小数点数 x2 = x * x;
    フロート x5 = クランプ ( x * x2 * x2, 0.0, 0.9999 ) ;
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( float alpha の定数、 float dotNL の定数、 float dotNV の定数) {
	フロートa2 = pow2(アルファ);
	浮動小数点数 gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	浮動小数点数 gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	0.5 / max( gv + gl, EPSILON ) を返します。
}
float D_GGX( float alpha の定数、 float dotNH の定数) {
	フロートa2 = pow2(アルファ);
	浮動小数点数 = pow2(dotNH) * (a2 - 1.0) + 1.0;
	RECIPROCAL_PI * a2 / pow2( denom ) を返します。
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT、const in float alphaB、const in float dotTV、const in float dotBV、const in float dotTL、const in float dotBL、const in float dotNV、const in float dotNL ) {
		フロートgv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		フロートgl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		フロート v = 0.5 / ( gv + gl );
		saturate(v) を返します。
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		浮動小数点数 a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		高解像度フロート v2 = dot( v, v );
		フロート w2 = a2 / v2;
		RECIPROCAL_PI * a2 * pow2 ( w2 ) を返します。
	}
#endif
#ifdef クリアコートを再利用
	vec3 BRDF_GGX_Clearcoat( vec3 lightDir の定数、 vec3 viewDir の定数、 vec3 normal の定数、 PhysicalMaterial の定数) {
		vec3 f0 = material.clearcoatF0;
		フロート f90 = material.clearcoatF90;
		フロート 粗さ = material.clearcoatRoughness;
		float alpha = pow2( 粗さ );
		vec3 halfDir = 正規化( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		フロート V = V_GGX_SmithCorrelated( アルファ、ドットNL、ドットNV );
		フロートD = D_GGX(アルファ、ドットNH);
		F * ( V * D ) を返します。
	}
#endif
vec3 BRDF_GGX( vec3 lightDir の定数、 vec3 viewDir の定数、 vec3 normal の定数、 PhysicalMaterial の定数 ) {
	vec3 f0 = material.specularColor;
	フロート f90 = material.specularF90;
	フロート粗さ = material.roughness;
	float alpha = pow2( 粗さ );
	vec3 halfDir = 正規化( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		フロートdotTL = dot( material.anisotropyT, lightDir );
		フロートdotTV = dot( material.anisotropyT, viewDir );
		フロートdotTH = dot( material.anisotropyT, halfDir );
		フロートdotBL = dot( material.anisotropyB, lightDir );
		フロートdotBV = dot( material.anisotropyB, viewDir );
		フロートドットBH = ドット( material.anisotropyB, halfDir );
		フロート V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		フロート D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	＃それ以外
		フロート V = V_GGX_SmithCorrelated( アルファ、ドットNL、ドットNV );
		フロートD = D_GGX(アルファ、ドットNH);
	#endif
	F * ( V * D ) を返します。
}
vec2 LTC_Uv( vec3 N の定数、 vec3 V の定数、 float の粗さの定数 ) {
	定数floatLUT_SIZE = 64.0;
	定数浮動小数点LUT_SCALE = (LUT_SIZE - 1.0) / LUT_SIZE;
	定数float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( 粗さ, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	uv を返します。
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	フロート l = length( f );
	max( (l * l + fz) / (l + 1.0), 0.0 を返します。
}
vec3 LTC_EdgeVectorFormFactor( vec3 v1 の定数、 vec3 v2 の定数 ) {
	浮動小数点数 x = ドット ( v1 、 v2 ) ;
	浮動小数点数 y = abs( x );
	浮動小数点数 a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	浮動小数点数 b = 3.4175940 + ( 4.1616724 + y ) * y;
	フロート v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	returncross(v1,v2)*theta_sintheta;
}
vec3 LTC_Evaluate( vec3 N の定数、 vec3 V の定数、 vec3 P の定数、 mat3 mInv の定数、 vec3 rectCoords[ 4 ] の定数) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 ライトノーマル = cross( v1, v2 );
	if(dot(lightNormal,P - rectCoords[0])<0.0)の場合、vec3(0.0)を返します。
	vec3 T1、T2;
	T1 = 正規化( V - N * ドット( V、 N ) );
	T2 = - クロス( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3座標[4];
	coords[0] = mat * (rectCoords[0] - P);
	coords[1] = mat * (rectCoords[1] - P );
	coords[2] = mat * (rectCoords[2] - P);
	coords[3] = mat * (rectCoords[3] - P);
	座標[0] = 正規化(座標[0]);
	座標[ 1 ] = 正規化( 座標[ 1 ] );
	座標[ 2 ] = 正規化( 座標[ 2 ] );
	座標[ 3 ] = 正規化( 座標[ 3 ] );
	vec3 ベクトルフォームファクター = vec3( 0.0 );
	VectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	VectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	VectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	VectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	浮動小数点結果 = LTC_ClippedSphereFormFactor( vectorFormFactor );
	vec3(結果)を返します。
}
#定義されている場合( USE_SHEEN )
float D_Charlie( float 粗さ, float dotNH ) {
	float alpha = pow2( 粗さ );
	浮動小数点アルファ = 1.0 / アルファ;
	フロートcos2h = dotNH * dotNH;
	浮動小数点 sin2h = max( 1.0 - cos2h, 0.0078125 );
	戻り値: (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
フロートV_ニューベルト(フロートドットNV、フロートドットNL){
	saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) ); を返します。
}
vec3 BRDF_Sheen( vec3 lightDir の定数、 vec3 viewDir の定数、 vec3 normal の定数、 vec3 sheenColor の定数、 float sheenRoughness の定数 ) {
	vec3 halfDir = 正規化( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	フロート D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	sheenColor * ( D * V ) を返します。
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = 粗さ * 粗さ;
	float a = 粗さ < 0.25 ? -339.2 * r2 + 161.4 * 粗さ - 25.9 : -8.48 * r2 + 14.3 * 粗さ - 9.95;
	float b = 粗さ < 0.25 ? 44.0 * r2 - 23.7 * 粗さ + 3.26 : 1.97 * r2 - 3.27 * 粗さ + 0.72;
	float DG = exp( a * dotNV + b ) + ( 粗さ < 0.25 ? 0.0 : 0.1 * ( 粗さ - 0.25 ) );
	飽和を返す(DG * RECIPROCAL_PI);
}
vec2 DFGapprox( vec3 normal の定数、 vec3 viewDir の定数、 float roughness の定数 ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	定数vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	定数vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = 粗さ * c0 + c1;
	フロートa004 = min(rx * rx, exp2( - 9.28 * dotNV) ) * rx + ry;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	fab を返します。
}
vec3 EnvironmentBRDF( vec3 normal の定数、 vec3 viewDir の定数、 vec3 specularColor の定数、 float specularF90 の定数、 float roughness の定数 ) {
	vec2 fab = DFGapprox( 法線、 viewDir、 粗さ );
	specularColor * fab.x + specularF90 * fab.y を返します。
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
＃それ以外
void computeMultiscattering(const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter) {
#endif
	vec2 fab = DFGapprox( 法線、 viewDir、 粗さ );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	＃それ以外
		vec3 Fr = スペキュラーカラー;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	フロート Ess = fab.x + fab.y;
	浮動小数点数 Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619; vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	シングルスキャッター += FssEss;
	マルチスキャッター += Fms * Ems;
}
#NUM_RECT_AREA_LIGHTS > 0 の場合
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight、const in vec3 geometryPosition、const in vec3 geometryNormal、const in vec3 geometryViewDir、const in vec3 geometryClearcoatNormal、const in PhysicalMaterial material、inout ReflectedLight reflectedLight ) {
		vec3 法線 = geomologyNormal;
		vec3 ビューディレクトリ = geomologyViewDir;
		vec3 位置 = geomologyPosition;
		vec3 ライト位置 = rectAreaLight.position;
		vec3 の halfWidth = rectAreaLight.halfWidth;
		vec3 ハーフハイト = rectAreaLight.halfHeight;
		vec3 ライトカラー = rectAreaLight.color;
		フロート粗さ = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight; rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( 法線、 viewDir、 粗さ );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y )、
			vec3(0,1,0),
			vec3( t1.z, 0, t1.w )
		）;
		vec3 フレネル = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geomologyNormal, directLight.direction ) );
	vec3 放射照度 = dotNL * directLight.color;
	#ifdef クリアコートを再利用
		float dotNLcc = saturate( dot( geomologyClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geomioViewDir, geomioClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geomioViewDir, geomioNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectLight.directSpecular += 放射照度 * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectLight.directDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += 放射照度 * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef クリアコートを再利用
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometroClearcoatNormal、 geometroViewDir、 material.clearcoatF0、 material.clearcoatF90、 material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geomioNormal, geomioViewDir, material.sheenRoughness );
	#endif
	vec3 単一散乱 = vec3( 0.0 );
	vec3 マルチ散乱 = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = 放射照度 * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		多重散乱イリデッセンスを計算します(geometryNormal、geometryViewDir、material.specularColor、material.specularF90、material.iridescence、material.iridescenceFresnel、material.roughness、singleScattering、multiScattering);
	＃それ以外
		多重散乱を計算します(geometryNormal、geometryViewDir、material.specularColor、material.specularF90、material.roughness、singleScattering、multiScattering);
	#endif
	vec3 合計散乱 = 単一散乱 + 複数散乱;
	vec3 拡散 = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	反射光.間接鏡面反射 += multiScattering * cosineWeightedIrradiance;
	反射光.indirectDiffuse += 拡散 * cosineWeightedIrradiance;
}
#RE_Direct と RE_Direct_Physical を定義します
#RE_Direct_RectArea を RE_Direct_RectArea_Physical として定義します
#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion ); を返します。
}`,VP=`
vec3 ジオメトリ位置 = - vViewPosition;
vec3 ジオメトリNormal = normal;
vec3 geometryViewDir = (isOrthographic) ? vec3( 0, 0, 1 ): normalize( vViewPosition );
vec3 ジオメトリクリアコートノーマル = vec3( 0.0 );
#ifdef クリアコートを再利用
	ジオメトリクリアコートノーマル = クリアコートノーマル;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geomologyViewDir ) );
	material.iridescenceThickness == 0.0 の場合
		material.iridescence = 0.0;
	} それ以外 {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight 直接光;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	ポイントライト ポイントライト;
	#定義されている場合( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	ポイントライトシャドウ ポイントライトシャドウ;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i++ ) {
		ポイントライト = pointLights[ i ];
		getPointLightInfo( ポイントライト、ジオメトリ位置、直接ライト );
		#定義されている場合( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		ポイントライトシャドウ = ポイントライトシャドウ[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ): 1.0;
		#endif
		RE_Direct( directLight、geometryPosition、geometryNormal、geometryViewDir、geometryClearcoatNormal、material、reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	スポットライト スポットライト;
	vec4 スポットカラー;
	vec3 スポットライト座標;
	bool inSpotLightMap;
	#定義されている場合( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	スポットライトシャドウ スポットライトシャドウ;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i++ ) {
		スポットライト = spotLights[ i ];
		getSpotLightInfo( スポットライト、ジオメトリ位置、直接ライト );
		#if ( UNROLLED_LOOP_INDEX < マップ付きスポットライトシャドウ数 )
		#SPOT_LIGHT_MAP_INDEX と UNROLLED_LOOP_INDEX を定義します。
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS を定義します
		＃それ以外
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			スポットライト座標 = vスポットライト座標[ i ].xyz / vスポットライト座標[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef スポットライトマップインデックス
		#定義されている場合( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		スポットライトシャドウ = スポットライトシャドウ[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ): 1.0;
		#endif
		RE_Direct( directLight、geometryPosition、geometryNormal、geometryViewDir、geometryClearcoatNormal、material、reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight 指向性ライト;
	#定義されている場合( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	方向性ライトシャドウ 方向性ライトシャドウ;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i++ ) {
		方向ライト = 方向ライト[ i ];
		getDirectionalLightInfo( 方向ライト、直接ライト );
		#定義されている場合( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		方向ライトシャドウ = 方向ライトシャドウ[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ): 1.0;
		#endif
		RE_Direct( directLight、geometryPosition、geometryNormal、geometryViewDir、geometryClearcoatNormal、material、reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	長方形エリアライト 長方形エリアライト;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight、geometryPosition、geometryNormal、geometryViewDir、geometryClearcoatNormal、material、reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#定義されている場合( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 放射照度 = getAmbientLightIrradiance( ambientLightColor );
	#定義されている場合( USE_LIGHT_PROBES )
		放射照度 += getLightProbeIrradiance( lightProbe, geomioNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		( int i = 0; i < NUM_HEMI_LIGHTS; i++ ) {
			放射照度 += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#定義されている場合( RE_IndirectSpecular )
	vec3放射輝度 = vec3( 0.0 );
	vec3クリアコートの放射輝度 = vec3( 0.0 );
#endif`,HP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		放射照度 += lightMapIrradiance;
	#endif
	#定義済み( USE_ENVMAP ) && 定義済み( STANDARD ) && 定義済み( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( ジオメトリ法線 );
	#endif
#endif
# 定義されている場合( USE_ENVMAP ) && 定義されている場合( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		放射輝度 += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	＃それ以外
		放射輝度 += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef クリアコートを再利用
		clearcoatRadiance += getIBLRadiance( geomologyViewDir, geomologyClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,GP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( 放射照度、ジオメトリ位置、ジオメトリ法線、ジオメトリビュー方向、ジオメトリクリアコート法線、マテリアル、反射光 );
#endif
#定義されている場合( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance、 iblIrradiance、 clearcoatRadiance、 geometryPosition、 geometryNormal、 geometryViewDir、 geometryClearcoatNormal、 material、 reflectedLight );
#endif`,WP=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,XP=`#if defined( USE_LOGDEPTHBUF )
	ユニフォームフロート logDepthBufFC;
	可変長の float vFragDepth;
	可変フロート vIsPerspective;
#endif`,YP=`#ifdef USE_LOGDEPTHBUF
	可変長の float vFragDepth;
	可変フロート vIsPerspective;
#endif`,qP=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( 投影マトリックス ) );
#endif`,jP=`#ifdef USE_MAP
	vec4 サンプリングされた拡散色 = texture2D( map, vMapUv );
	#ifdef デコード_ビデオ_テクスチャ
		サンプル拡散カラー = sRGBTransferEOTF( サンプル拡散カラー );
	#endif
	拡散色 *= サンプリングされた拡散色;
#endif`,ZP=`#ifdef USE_MAP
	均一サンプラー2Dマップ;
#endif`,JP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#定義されている場合( USE_POINTS_UV )
		vec2 uv = vUv;
	＃それ以外
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	拡散色 *= texture2D( マップ、 UV ) ;
#endif
#ifdef USE_ALPHAMAP
	拡散色.a *= texture2D( alphaMap, uv ).g;
#endif`,KP=`#if defined( USE_POINTS_UV )
	変化する vec2 vUv;
＃それ以外
	#定義されている場合(USE_MAP) || 定義されている場合(USE_ALPHAMAP)
		均一なmat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	均一サンプラー2Dマップ;
#endif
#ifdef USE_ALPHAMAP
	均一サンプラー2Dアルファマップ;
#endif`,QP=`float metalnessFactor = メタルネス;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( メタルネスマップ、 vMetalnessMapUv );
	メタルネス係数 *= texelMetalness.b;
#endif`,$P=`#ifdef USE_METALNESSMAP
	均一サンプラー2Dメタルネスマップ;
#endif`,eI=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i++ ) {
		morphTargetInfluences[i] = texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,tI=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i++ ) {
		#定義されている場合( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif 定義済み( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nI=`#ifdef USE_MORPHNORMALS
	オブジェクト法線 *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,iI=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		均一な float morphTargetBaseInfluence;
		均一な浮動小数点数 morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	ユニフォームサンプラー2DArray morphTargetsTexture;
	均一な ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		texelFetch( morphTargetsTexture, morphUV, 0 ) を返します。
	}
#endif`,rI=`#ifdef USE_MORPHTARGETS
	変換された *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,sI=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef フラットシェード
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 正規化 = 正規化( cross( fdx, fdy ) );
＃それ以外
	vec3 正規化 = 正規化( vNormal );
	#ifdef 両面
		法線 * = 面の方向;
	#endif
#endif
#定義済み( USE_NORMALMAP_TANGENTSPACE ) || 定義済み( USE_CLEARCOAT_NORMALMAP ) || 定義済み( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( 正規化( v接線 ), 正規化( v二接線 ), 正規 );
	＃それ以外
		mat3 tbn = getTangentFrame( - vViewPosition, 通常,
		#定義されている場合( USE_NORMALMAP )
			vノーマルマップUV
		#elif 定義済み( USE_CLEARCOAT_NORMALMAP )
			vクリアコートノーマルマップUV
		＃それ以外
			vUv
		#endif
		）;
	#endif
	# 定義されている場合( DOUBLE_SIDED ) && ! 定義されている場合( FLAT_SHADED )
		tbn[0] *= 面の方向;
		tbn[1] *= 面の方向;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( 正規化( v接線 ), 正規化( v二接線 ), 正規 );
	＃それ以外
		mat3 tbn2 = getTangentFrame( - vViewPosition、normal、vClearcoatNormalMapUv );
	#endif
	# 定義されている場合( DOUBLE_SIDED ) && ! 定義されている場合( FLAT_SHADED )
		tbn2[0] *= 面の方向;
		tbn2[1] *= 面の方向;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,oI=`#ifdef USE_NORMALMAP_OBJECTSPACE
	法線 = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		正常 = - 正常;
	#endif
	#ifdef 両面
		法線 = 法線 * 面の方向;
	#endif
	正規 = 正規化 ( 正規行列 * 正規 ) ;
#elif 定義済み( USE_NORMALMAP_TANGENTSPACE )
	vec3 マップ N = texture2D(normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= 通常のスケール;
	ノーマル = 正規化( tbn * マップN );
#elif 定義済み( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aI=`#ifndef FLAT_SHADED
	変化する vec3 vNormal;
	#ifdef USE_TANGENT
		可変vec3 vTangent;
		可変vec3 vBitangent;
	#endif
#endif`,lI=`#ifndef FLAT_SHADED
	変化する vec3 vNormal;
	#ifdef USE_TANGENT
		可変vec3 vTangent;
		可変vec3 vBitangent;
	#endif
#endif`,uI=`#ifndef FLAT_SHADED
	vNormal = 正規化(変換された正規形);
	#ifdef USE_TANGENT
		vTangent = 正規化(変換されたTangent);
		vBitangent = 正規化(cross(vNormal, vTangent) * tangent.w);
	#endif
#endif`,cI=`#ifdef USE_NORMALMAP
	均一なサンプラー2D法線マップ;
	均一な vec2 法線スケール;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	均一なmat3の通常の行列;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = サーフノルム;
		vec3 q1perp = クロス( q1, N );
		vec3 q0perp = クロス( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		フロートdet = max(ドット(T,T),ドット(B,B));
		float スケール = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		mat3(T *スケール、B *スケール、N)を返します。
	}
#endif`,fI=`#ifdef クリアコートを使おう
	vec3 クリアコート正常 = 非摂動正常;
#endif`,hI=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 クリアコートマップN = texture2D( クリアコートノーマルマップ、 vクリアコートノーマルマップUv ).xyz * 2.0 - 1.0;
	クリアコートマップN.xy *= クリアコート通常スケール;
	クリアコートノーマル = 正規化( tbn2 * クリアコートマップN );
#endif`,dI=`#ifdef USE_CLEARCOATMAP
	均一なサンプラー2Dクリアコートマップ;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	ユニフォームサンプラー2Dクリアコートノーマルマップ;
	均一な vec2 クリアコートノーマルスケール;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	均一サンプラー2Dクリアコート粗さマップ;
#endif`,pI=`#ifdef USE_IRIDESCENCEMAP
	均一サンプラー2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	均一サンプラー2D iridescenceThicknessMap;
#endif`,mI=`#ifdef 不透明
拡散色.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
拡散色.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gI=`vec3 packNormalToRGB( vec3 法線内の定数 ) {
	正規化( normal ) * 0.5 + 0.5 を返します。
}
vec3 unpackRGBToNormal( vec3 rgb の定数) {
	2.0 * rgb.xyz - 1.0 を返します。
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
定数floatInv255 = 1. / 255.;
const vec4 パックファクター = vec4 ( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( 定数 in float v ) {
	v <= 0.0 の場合
		vec4( 0., 0., 0., 0. ) を返します。
	もし(v >= 1.0)
		vec4( 1., 1., 1., 1. ) を返します。
	フロートVUF;
	フロート af = modf( v * PackFactors.a, vuf );
	フロート bf = modf( vuf * ShiftRight8, vuf );
	フロート gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( 定数 in float v ) {
	v <= 0.0 の場合
		vec3( 0., 0., 0. ) を返します。
	もし(v >= 1.0)
		vec3( 1., 1., 1. ) を返します。
	フロートVUF;
	フロート bf = modf( v * PackFactors.b, vuf );
	フロート gf = modf( vuf * ShiftRight8, vuf );
	vec3( vuf * Inv255, gf * PackUpscale, bf ) を返します。
}
vec2 packDepthToRG( 定数 in float v ) {
	v <= 0.0 の場合
		vec2( 0., 0. ) を返します。
	もし(v >= 1.0)
		vec2(1.,1.) を返します。
	フロートVUF;
	フロートgf = modf( v * 256., vuf );
	vec2( vuf * Inv255, gf ) を返します。
}
float unpackRGBAToDepth( const in vec4 v ) {
	ドット( v, UnpackFactors4 )を返します。
}
float unpackRGBToDepth( const in vec3 v ) {
	ドット( v, UnpackFactors3 )を返します。
}
float unpackRGToDepth( const in vec2 v ) {
	vr * UnpackFactors2.r + vg * UnpackFactors2.g を返します。
}
vec4 pack2HalfToRGBA( vec2 v の定数) {
	vec4 r = vec4( vx, fract( vx * 255.0 ), vy, fract( vy * 255.0 ) );
	vec4( rx - ry / 255.0, ry, rz - rw / 255.0, rw ) を返します。
}
vec2 unpackRGBATo2Half( vec4 v の定数) {
	return vec2( vx + ( vy / 255.0 ), vz + ( vw / 255.0 ) );
}
float viewZToOrthographicDepth( float viewZ の定数、 float near の定数、 float far の定数) {
	(viewZ + near) / (near - far) を返します。
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	深度 * ( 近く - 遠く ) - 近く を返します。
}
float viewZToPerspectiveDepth( float viewZ の定数、 float near の定数、 float far の定数) {
	( (near + viewZ ) * far ) / ( ( far - near ) * viewZ ) を返します。
}
float perspectiveDepthToViewZ( float depth の定数、 float near の定数、 float far の定数) {
	(near * far) / ((far - near) * depth - far) を返します。
}`,_I=`#ifdef プリマルチプライドアルファ
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vI=`vec4 mvPosition = vec4( 変換済み、 1.0 );
#ifdef USE_BATCHING
	mvPosition = バッチ処理行列 * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = インスタンス行列 * mvPosition;
#endif
mvPosition = モデルビューマトリックス * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,yI=`#ifdef ディザリング
	gl_FragColor.rgb = ディザリング( gl_FragColor.rgb );
#endif`,xI=`#ifdef ディザリング
	vec3ディザリング(vec3カラー){
		フロートグリッド位置 = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = ミックス( 2.0 * dither_shift_RGB、 -2.0 * dither_shift_RGB、 グリッド位置 );
		color + dither_shift_RGB を返します。
	}
#endif`,SI​​=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	粗さ係数 *= texelRoughness.g;
#endif`,MI=`#ifdef USE_ROUGHNESSMAP
	均一サンプラー2D roughnessMap;
#endif`,wI=`#if NUM_SPOT_LIGHT_COORDS > 0
	可変vec4 vSpotLightCoord[NUM_SPOT_LIGHT_COORDS];
#endif
#NUM_SPOT_LIGHT_MAPS > 0 の場合
	ユニフォームサンプラー2Dスポットライトマップ[NUM_SPOT_LIGHT_MAPS];
#endif
#ifdef USE_SHADOWMAP
	#NUM_DIR_LIGHT_SHADOWS > 0 の場合
		ユニフォームサンプラー2D 方向シャドウマップ[NUM_DIR_LIGHT_SHADOWS];
		変化するvec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		構造体DirectionalLightShadow{
			float の影の強度;
			フロートシャドウバイアス;
			フロートシャドウノーマルバイアス;
			浮動小数点の影の半径;
			vec2 シャドウマップサイズ;
		};
		均一なDirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#NUM_SPOT_LIGHT_SHADOWS > 0 の場合
		ユニフォームサンプラー2Dスポットシャドウマップ[NUM_SPOT_LIGHT_SHADOWS];
		構造体スポットライトシャドウ{
			float の影の強度;
			フロートシャドウバイアス;
			フロートシャドウノーマルバイアス;
			浮動小数点の影の半径;
			vec2 シャドウマップサイズ;
		};
		均一な SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#NUM_POINT_LIGHT_SHADOWS > 0 の場合
		ユニフォームサンプラー2Dポイントシャドウマップ[NUM_POINT_LIGHT_SHADOWS];
		変化するvec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];
		構造体PointLightShadow{
			float の影の強度;
			フロートシャドウバイアス;
			フロートシャドウノーマルバイアス;
			浮動小数点の影の半径;
			vec2 シャドウマップサイズ;
			フロートシャドウカメラの近く;
			フロート shadowCameraFar;
		};
		均一な PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare(sampler2Dの深度、vec2のUV、floatの比較) {
		ステップを返します( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( サンプラー2D シャドウ、 vec2 uv ) {
		unpackRGBATo2Half( texture2D( shadow, uv ) ) を返します。
	}
	float VSMShadow (sampler2D シャドウ、vec2 uv、float 比較){
		フロートオクルージョン = 1.0;
		vec2 分布 = texture2DDistribution( 影、 uv );
		float hard_shadow = step( compare , distribution.x );
		ハードシャドウが 1.0 の場合
			浮動小数点距離 = compare - distribution.x ;
			浮動小数点分散 = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance ); softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		閉塞を返します。
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		フロートシャドウ = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( フラスタムテスト ) {
		#定義されている場合(SHADOWMAP_TYPE_PCF)
			vec2 texelSize = vec2( 1.0 ) /shadowMapSize;
			浮動小数点数 dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			浮動小数点数 dx1 = + texelSize.x * shadowRadius;
			フロート dy1 = + texelSize.y * shadowRadius;
			浮動小数点数 dx2 = dx0 / 2.0;
			浮動小数点数 dy2 = dy0 / 2.0;
			浮動小数点数 dx3 = dx1 / 2.0;
			浮動小数点数 dy3 = dy1 / 2.0;
			影 = (
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx0, dy0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(0.0, dy0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx1, dy0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx2, dy2), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(0.0, dy2), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx3, dy2), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx0, 0.0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx2, 0.0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy, shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx3, 0.0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx1, 0.0), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx2, dy3), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(0.0, dy3), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx3, dy3), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx0, dy1), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(0.0, dy1), shadowCoord.z) +
				texture2DCompare(shadowMap, shadowCoord.xy + vec2(dx1, dy1), shadowCoord.z)
			) * ( 1.0 / 17.0 );
		#elif 定義済み( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) /shadowMapSize;
			フロート dx = テクセルサイズ.x;
			フロート dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * テクセルサイズ;
			影 = (
				texture2DCompare( シャドウマップ、UV、シャドウ座標.Z ) +
				texture2DCompare(shadowMap, uv + vec2(dx, 0.0), shadowCoord.z) +
				texture2DCompare(shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( シャドウマップ、UV + テクセルサイズ、シャドウコーディッドz ) +
				ミックス( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare(shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 fx ) +
				ミックス( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare(shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 fx ) +
				ミックス( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare(shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 fy ) +
				ミックス( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare(shadowMap, uv + vec2(dx, 2.0 * dy), shadowCoord.z),
					 fy ) +
				ミックス( ミックス( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare(shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  fx ）、
					 ミックス( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare(shadowMap, uv + vec2(2.0 * dx, 2.0 * dy), shadowCoord.z),
						  fx ）、
					 fy )
			) * ( 1.0 / 9.0 );
		#elif 定義済み( SHADOWMAP_TYPE_VSM )
			シャドウ = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		＃それ以外
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		mix( 1.0, shadow, shadowIntensity ) を返します。
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		浮動小数点スケールToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= キューブにスケールする;
		v *= scaleToCube * ( 1.0 - 2.0 * テクセルサイズY );
		vec2 平面 = v.xy;
		浮動小数点数 almostATexel = 1.5 * texelSizeY;
		浮動小数点数 almostOne = 1.0 - almostATexel;
		もし（absV.z >= almostOne）{
			( vz > 0.0 ) の場合
				平面x = 4.0 - vx;
		} そうでなければ ( absV.x >= almostOne ) {
			浮動小数点 signX = sign( vx );
			planar.x = vz * 符号X + 2.0 * 符号X;
		} そうでなければ ( absV.y >= almostOne ) {
			フロート signY = sign(vy);
			planar.x = vx + 2.0 * signY + 2.0;
			planar.y = vz * signY - 2.0;
		}
		vec2( 0.125, 0.25 ) * 平面 + vec2( 0.375, 0.75 ) を返します。
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		フロートシャドウ = 1.0;
		vec3 ライトの位置 = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); dp += shadowBias;
			vec3 bd3D = 正規化( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / (shadowMapSize * vec2( 4.0, 2.0 ) );
			#定義済み(SHADOWMAP_TYPE_PCF) || 定義済み(SHADOWMAP_TYPE_PCF_SOFT) || 定義済み(SHADOWMAP_TYPE_VSM)
				vec2 オフセット = vec2( - 1, 1 ) *shadowRadius * texelSize.y;
				影 = (
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.xyy, texelSize.y), dp) +
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.yyy, texelSize.y), dp) +
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.xyx, texelSize.y), dp) +
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.yyx, texelSize.y), dp) +
					texture2DCompare(shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.xxy, texelSize.y), dp) +
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.yxy, texelSize.y), dp) +
					texture2DCompare(shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare(shadowMap, cubeToUV(bd3D + offset.yxx, texelSize.y), dp)
				) * ( 1.0 / 9.0 );
			＃それ以外
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		mix( 1.0, shadow, shadowIntensity ) を返します。
	}
#endif`,EI=`#if NUM_SPOT_LIGHT_COORDS > 0
	均一なmat4スポットライトマトリックス[NUM_SPOT_LIGHT_COORDS];
	可変vec4 vSpotLightCoord[NUM_SPOT_LIGHT_COORDS];
#endif
#ifdef USE_SHADOWMAP
	#NUM_DIR_LIGHT_SHADOWS > 0 の場合
		均一mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		変化するvec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		構造体DirectionalLightShadow{
			float の影の強度;
			フロートシャドウバイアス;
			フロートシャドウノーマルバイアス;
			浮動小数点の影の半径;
			vec2 シャドウマップサイズ;
		};
		均一なDirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#NUM_SPOT_LIGHT_SHADOWS > 0 の場合
		構造体スポットライトシャドウ{
			float の影の強度;
			フロートシャドウバイアス;
			フロートシャドウノーマルバイアス;
			浮動小数点の影の半径;
			vec2 シャドウマップサイズ;
		};
		均一な SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#NUM_POINT_LIGHT_SHADOWS > 0 の場合
		均一なmat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		変化するvec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];
		構造体PointLightShadow{
			float の影の強度;
			フロートシャドウバイアス;
			フロートシャドウノーマルバイアス;
			浮動小数点の影の半径;
			vec2 シャドウマップサイズ;
			フロートシャドウカメラの近く;
			フロート shadowCameraFar;
		};
		均一な PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,TI=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 シャドウワールド位置;
#endif
#定義されている場合( USE_SHADOWMAP )
	#NUM_DIR_LIGHT_SHADOWS > 0 の場合
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#NUM_POINT_LIGHT_SHADOWS > 0 の場合
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#NUM_SPOT_LIGHT_COORDS > 0 の場合
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i++ ) {
		影ワールド位置 = ワールド位置;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,AI=`float getShadowMask() {
	フロートシャドウ = 1.0;
	#ifdef USE_SHADOWMAP
	#NUM_DIR_LIGHT_SHADOWS > 0 の場合
	DirectionalLightShadow 方向ライト;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i++ ) {
		方向ライト = 方向ライトシャドウ[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ): 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#NUM_SPOT_LIGHT_SHADOWS > 0 の場合
	スポットライトシャドウ スポットライト;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i++ ) {
		スポットライト = スポットライトシャドウ[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ): 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#NUM_POINT_LIGHT_SHADOWS > 0 の場合
	PointLightShadow ポイントライト;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ): 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	影を返します。
}`,CI=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( スキンインデックスx );
	mat4 boneMatY = getBoneMatrix( スキンインデックスy );
	mat4 boneMatZ = getBoneMatrix( スキンインデックスz );
	mat4boneMatW = getBoneMatrix(skinIndex.w);
#endif`,RI=`#ifdef USE_SKINNING
	均一なmat4 bindMatrix;
	均一なmat4 bindMatrixInverse;
	均一な高解像度サンプラー2Dボーンテクスチャ;
	mat4 getBoneMatrix(定数 in float i) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % サイズ;
		int y = j / サイズ;
		vec4 v1 = texelFetch(boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch(boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch(boneTexture, ivec2( x + 3, y ), 0 );
		戻り mat4( v1, v2, v3, v4 );
	}
#endif`,bI=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( 変換済み、 1.0 );
	vec4 スキン = vec4( 0.0 );
	スキン += boneMatX * skinVertex * skinWeight.x;
	スキン += boneMatY * skinVertex * skinWeight.y;
	スキン += boneMatZ * skinVertex * skinWeight.z;
	スキン += boneMatW * skinVertex * skinWeight.w;
	変換 = ( bindMatrixInverse * スキン ).xyz;
#endif`,PI=`#ifdef USE_SKINNING
	mat4 スキンマトリックス = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	スキンマトリックス += スキンウェイト y * ボーンマットY;
	スキンマトリックス += スキンウェイト.z * ボーンマットZ;
	スキンマトリックス += スキンウェイト.w * ボーンマットW;
	スキンマトリックス = bindMatrixInverse * スキンマトリックス * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		オブジェクト接線 = vec4( skinMatrix * vec4( オブジェクト接線、 0.0 ) ).xyz;
	#endif
#endif`,II=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D(specularMap, vSpecularMapUv );
	スペキュラ強度 = テクセルスペキュラ.r;
＃それ以外
	鏡面強度 = 1.0;
#endif`,LI=`#ifdef USE_SPECULARMAP
	均一なサンプラー2Dスペキュラーマップ;
#endif`,DI=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = トーンマッピング( gl_FragColor.rgb );
#endif`,NI=`#ifndef 飽和
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
均一フロートtoneMappingExposure;
vec3 リニアトーンマッピング(vec3 カラー) {
	飽和度を返します(toneMappingExposure * color);
}
vec3 ラインハルトトーンマッピング(vec3 色) {
	カラー *= トーンマッピング露出;
	saturate( color / ( vec3( 1.0 ) + color ) ) を返します。
}
vec3 CineonToneMapping(vec3 カラー) {
	カラー *= トーンマッピング露出;
	色 = max( vec3( 0.0 ), 色 - 0.004 );
	pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) ); を返します。
}
vec3 RRTAndODTFit(vec3 v) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	a / b を返します。
}
vec3 ACESFilmicToneMapping(vec3 カラー) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ), vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	）;
	const mat3 ACESOutputMat = mat3(
		vec3( 1.60475, -0.10208, -0.00327 ), vec3( -0.53108, 1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605, 1.07602 )
	）;
	色 *= トーンマッピング露出 / 0.6;
	色 = ACESInputMat * 色;
	color = RRTAndODTFit( 色 );
	色 = ACESOutputMat * 色;
	saturate( color ) を返します。
}
定数mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
）;
定数mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
）;
vec3 agxDefaultContrastapprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	戻り値 + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping(vec3 カラー) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	）;
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	）;
	定数フロート AgxMinEv = - 12.47393; 定数フロート AgxMaxEv = 4.026069;
	カラー *= トーンマッピング露出;
	色 = LINEAR_SRGB_TO_LINEAR_REC2020 * 色;
	色 = AgXInsetMatrix * 色;
	色 = max( 色, 1e-10 ); 色 = log2( 色 );
	色 = (色 - Agx最小EV) / (Agx最大EV - Agx最小EV);
	color = クランプ( color, 0.0, 1.0 );
	色 = agxDefaultContrastapprox( 色 );
	色 = AgXOutsetMatrix * 色;
	色 = pow( max( vec3( 0.0 ), 色 ), vec3( 2.2 ) );
	色 = LINEAR_REC2020_TO_LINEAR_SRGB * 色;
	color = クランプ( color, 0.0, 1.0 );
	色を返します。
}
vec3 ニュートラルトーンマッピング(vec3カラー){
	定数float StartCompression = 0.8 - 0.04;
	const float 彩度低下 = 0.15;
	カラー *= トーンマッピング露出;
	浮動小数点数 x = min( color.r, min( color.g, color.b ) );
	浮動小数点オフセット = x < 0.08 ? x - 6.25 * x * x : 0.04;
	色 -= オフセット;
	フロートピーク = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1。 - 圧縮開始;
	float newPeak = 1. - d * d / ( ピーク + d - StartCompression );
	色 *= newPeak / peak;
	float g = 1. - 1. / ( 飽和度 * ( ピーク - 新しいピーク ) + 1. );
	mix( color, vec3( newPeak ), g ) を返します。
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UI=`#ifdef USE_TRANSMISSION
	material.transmission = 伝送;
	material.transmissionAlpha = 1.0;
	material.thickness = 厚さ;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D(thicknessMap, vThicknessMapUv).g;
	#endif
	vec3 pos = vワールド位置;
	vec3 v = 正規化( カメラの位置 - pos );
	vec3 n = inverseTransformDirection( 法線、 ビューマトリックス );
	vec4 送信 = getIBLVolumeRefraction(
		n、v、material.roughness、material.diffuseColor、material.specularColor、material.specularF90、
		pos、modelMatrix、viewMatrix、projectionMatrix、material.dispersion、material.ior、material.thickness、
		material.attenuationColor、material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha、 transmitted.a、 material.transmission );
	totalDiffuse = mix( totalDiffuse, 透過率.rgb, 材質.透過 );
#endif`,OI=`#ifdef USE_TRANSMISSION
	均一フロート変速機;
	均一なフロート厚さ。
	均一な浮動小数点の減衰距離;
	均一な vec3 減衰カラー;
	#ifdef USE_TRANSMISSIONMAP
		均一サンプラー2D伝送マップ;
	#endif
	#ifdef USE_THICKNESSMAP
		均一サンプラー2DthicknessMap;
	#endif
	均一な vec2 伝送サンプラーサイズ;
	均一サンプラー2D伝送SamplerMap;
	均一なmat4モデルマトリックス;
	均一なmat4投影行列;
	変化する vec3 vWorldPosition;
	フロート w0( フロート a ) {
		戻り値: ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	フロート w1( フロート a ) {
		戻り値 ( 1.0 / 6.0 ) * ( a * a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	フロート w2( フロート a ){
		戻り値: ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	フロート w3( フロート a ) {
		戻り値 ( 1.0 / 6.0 ) * ( a * a * a );
	}
	フロートg0(フロートa){
		w0(a) + w1(a) を返します。
	}
	フロートg1(フロートa){
		w2(a) + w3(a) を返します。
	}
	フロートh0(フロートa){
		戻り値 - 1.0 + w1(a) / (w0(a) + w1(a));
	}
	フロートh1(フロートa){
		1.0 + w3(a) / (w2(a) + w3(a)) を返します。
	}
	vec4 バイキュービック(sampler2D tex, vec2 uv, vec4 texelSize, float lod) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		フロート g0x = g0( fuv.x );
		フロート g1x = g1( fuv.x );
		フロート h0x = h0( fuv.x );
		フロート h1x = h1( fuv.x );
		フロート h0y = h0( fuv.y );
		フロート h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + を返します。
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic(sampler2D サンプラー、vec2 uv、float lod) {
		vec2 fLodSize = vec2( textureSize( サンプラー、 int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( サンプラー、 int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( サンプラー、uv、vec4( fLodSizeInv、fLodSize )、floor( lod ) );
		vec4 cSample = bicubic( サンプラー、uv、vec4( cLodSizeInv、cLodSize )、ceil( lod ) );
		mix( fSample, cSample, fract( lod ) ) を返します。
	}
	vec3 getVolumeTransmissionRay( vec3 n の定数、 vec3 v の定数、 float thick の定数、 float ior の定数、 mat4 modelMatrix の定数 ) {
		vec3 屈折ベクトル = refract( - v, normalize( n ), 1.0 / ior );
		vec3 モデルスケール;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3(modelMatrix[ 2 ].xyz ) );
		正規化(屈折ベクトル) * 厚さ * モデルスケールを返します。
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		粗さ * クランプ( ior * 2.0 - 2.0, 0.0, 1.0 )を返します。
	}
	vec4 getTransmissionSample( vec2 fragCoord の const、 float roughness の const、 float ior の const ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( 粗さ, ior );
		textureBicubic( transmissionSamplerMap, fragCoord.xy, lod ) を返します。
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( 減衰距離 ) ) {
			vec3(1.0)を返す。
		} それ以外 {
			vec3 減衰係数 = -log( 減衰色 ) / 減衰距離;
			vec3 透過率 = exp( - 減衰係数 * 透過距離 ); 透過率を返します。
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		vec3 specularColor の定数、float specularF90 の定数、vec3 position の定数、mat4 modelMatrix の定数、
		mat4 viewMatrix の const、mat4 projMatrix の const、float dispersion の const、float ior の const、float thickness の const、
		vec3 の attenuationColor の定数、float の attenuationDistance の定数) {
		vec4 透過光;
		vec3 透過率;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * 分散;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			( int i = 0; i < 3; i++ ) の場合 {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = 位置 + 透過Ray;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 屈折座標 = ndcPos.xy / ndcPos.w;
				屈折座標 += 1.0;
				屈折座標 /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				送信光[ i ] = 送信サンプル[ i ];
				送信Light.a += 送信サンプル.a;
				透過率[ i ] = 拡散色[ i ] * ボリューム減衰(長さ( 透過光線 ), 減衰色, 減衰距離 )[ i ];
			}
			送信ライト.a /= 3.0;
		＃それ以外
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = 位置 + 透過Ray;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 屈折座標 = ndcPos.xy / ndcPos.w;
			屈折座標 += 1.0;
			屈折座標 /= 2.0;
			透過光 = getTransmissionSample( 屈折座標、粗さ、ior );
			透過率 = 拡散色 * ボリューム減衰(長さ(透過光線)、減衰色、減衰距離);
		#endif
		vec3 attenuatedColor = 透過率 * 透過光.rgb;
		vec3 F = 環境BRDF( n, v, スペキュラーカラー, スペキュラーF90, 粗さ );
		フロート透過率係数 = (透過率.r + 透過率.g + 透過率.b) / 3.0;
		vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transparentLight.a ) * transmittanceFactor ) を返します。
	}
#endif`,FI=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	変化する vec2 vUv;
#endif
#ifdef USE_MAP
	変化する vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	vec2 vAlphaMapUv を変更します。
#endif
#ifdef USE_LIGHTMAP
	vec2 vLightMapUv を変更します。
#endif
#ifdef USE_AOMAP
	変化する vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	vec2 vBumpMapUv を変更します。
#endif
#ifdef USE_NORMALMAP
	vec2 vNormalMapUv を変更します。
#endif
#ifdef USE_EMISSIVEMAP
	vec2 vEmissiveMapUv を変更します。
#endif
#ifdef USE_METALNESSMAP
	vec2 vMetalnessMapUv を変更します。
#endif
#ifdef USE_ROUGHNESSMAP
	vec2 vRoughnessMapUv を変更します。
#endif
#ifdef USE_ANISOTROPYMAP
	vec2 vAnisotropyMapUv を変更します。
#endif
#ifdef USE_CLEARCOATMAP
	vec2 vClearcoatMapUv を変更します。
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vec2 vClearcoatNormalMapUv を変更します。
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vec2 vClearcoatRoughnessMapUv を変更します。
#endif
#ifdef USE_IRIDESCENCEMAP
	変化する vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vec2 vIridescenceThicknessMapUv を変更します。
#endif
#ifdef USE_SHEEN_COLORMAP
	変化する vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vec2 vSheenRoughnessMapUv を変更します。
#endif
#ifdef USE_SPECULARMAP
	vec2 vSpecularMapUv を変更します。
#endif
#ifdef USE_SPECULAR_COLORMAP
	変化する vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vec2 vSpecularIntensityMapUv を変更します。
#endif
#ifdef USE_TRANSMISSIONMAP
	均一なmat3伝送マップ変換;
	変化するvec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	均一なmat3thicknessMapTransform;
	vec2 vThicknessMapUv を変更します。
#endif`,kI=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	変化する vec2 vUv;
#endif
#ifdef USE_MAP
	均一なmat3 mapTransform;
	変化する vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	均一なmat3 alphaMapTransform;
	vec2 vAlphaMapUv を変更します。
#endif
#ifdef USE_LIGHTMAP
	均一なmat3 lightMapTransform;
	vec2 vLightMapUv を変更します。
#endif
#ifdef USE_AOMAP
	均一な mat3 aoMapTransform;
	変化する vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	均一なmat3バンプマップ変換;
	vec2 vBumpMapUv を変更します。
#endif
#ifdef USE_NORMALMAP
	均一なmat3 normalMapTransform;
	vec2 vNormalMapUv を変更します。
#endif
#ifdef USE_DISPLACEMENTMAP
	均一なmat3変位マップ変換;
	vec2 vDisplacementMapUv を変更します。
#endif
#ifdef USE_EMISSIVEMAP
	均一なmat3 emissiveMapTransform;
	vec2 vEmissiveMapUv を変更します。
#endif
#ifdef USE_METALNESSMAP
	均一なmat3メタルネスマップ変換;
	vec2 vMetalnessMapUv を変更します。
#endif
#ifdef USE_ROUGHNESSMAP
	均一なmat3 roughnessMapTransform;
	vec2 vRoughnessMapUv を変更します。
#endif
#ifdef USE_ANISOTROPYMAP
	均一なmat3 anisotropyMapTransform;
	vec2 vAnisotropyMapUv を変更します。
#endif
#ifdef USE_CLEARCOATMAP
	均一なmat3クリアコートマップ変換;
	vec2 vClearcoatMapUv を変更します。
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	ユニフォームmat3クリアコートノーマルマップトランスフォーム;
	vec2 vClearcoatNormalMapUv を変更します。
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	均一なmat3クリアコートRoughnessMapTransform;
	vec2 vClearcoatRoughnessMapUv を変更します。
#endif
#ifdef USE_SHEEN_COLORMAP
	均一なmat3 sheenColorMapTransform;
	変化する vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	均一なmat3 sheenRoughnessMapTransform;
	vec2 vSheenRoughnessMapUv を変更します。
#endif
#ifdef USE_IRIDESCENCEMAP
	均一なmat3 iridescenceMapTransform;
	変化する vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	均一なmat3 iridescenceThicknessMapTransform;
	vec2 vIridescenceThicknessMapUv を変更します。
#endif
#ifdef USE_SPECULARMAP
	均一なmat3スペキュラーマップ変換;
	vec2 vSpecularMapUv を変更します。
#endif
#ifdef USE_SPECULAR_COLORMAP
	均一なmat3スペキュラカラーマップ変換;
	変化する vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	均一なmat3 specularIntensityMapTransform;
	vec2 vSpecularIntensityMapUv を変更します。
#endif
#ifdef USE_TRANSMISSIONMAP
	均一なmat3伝送マップ変換;
	変化するvec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	均一なmat3thicknessMapTransform;
	vec2 vThicknessMapUv を変更します。
#endif`,zI=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3(uv, 1).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = (displacementMapTransform * vec3(DISPLACEMENTMAP_UV, 1) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = (thicknessMapTransform * vec3(THICKNESSMAP_UV, 1) ).xy;
#endif`,BI=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined( USE_SHADOWMAP ) || defined( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 ワールド位置 = vec4( 変換済み、 1.0 );
	#ifdef USE_BATCHING
		ワールド位置 = バッチ処理行列 * ワールド位置;
	#endif
	#ifdef USE_INSTANCING
		ワールド位置 = インスタンス行列 * ワールド位置;
	#endif
	ワールド位置 = モデル行列 * ワールド位置;
#endif`;const VI=`varying vec2 vUv;
均一なmat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( 位置.xy, 1.0, 1.0 );
}`,HI=`均一サンプラー2D t2D;
均一なフロートの背景強度;
変化する vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef デコード_ビデオ_テクスチャ
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= 背景の強度;
	gl_FragColor = texColor;
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
}`,GI=`varying vec3 vWorldDirection;
#include <共通>
void main() {
	vWorldDirection = 変換方向(位置, モデルマトリックス);
	#include <開始頂点>
	#include <プロジェクト頂点>
	gl_Position.z = gl_Position.w;
}`,WI=`#ifdef ENVMAP_TYPE_CUBE
	均一なサンプラーCube envMap;
#elif 定義済み( ENVMAP_TYPE_CUBE_UV )
	均一なサンプラー2D envMap;
#endif
ユニフォームフロート flipEnvMap;
均一なフロート背景のぼかし;
均一なフロートの背景強度;
均一なmat3背景回転;
変化する vec3 vWorldDirection;
#include <キューブUV反射フラグメント>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif 定義済み( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	＃それ以外
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= 背景の強度;
	gl_FragColor = texColor;
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
}`,XI=`varying vec3 vWorldDirection;
#include <共通>
void main() {
	vWorldDirection = 変換方向(位置, モデルマトリックス);
	#include <開始頂点>
	#include <プロジェクト頂点>
	gl_Position.z = gl_Position.w;
}`,YI=`uniform samplerCube tCube;
均一フロート tFlip;
均一なフロートの不透明度。
変化する vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= 不透明度;
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
}`,qI=`#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
変化する vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <バッチ処理頂点>
	#include <スキンベース頂点>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <スキンの法線頂点>
	#endif
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	vHighPrecisionZW = gl_Position.zw;
}`,jI=`#DEPTH_PACKING == 3200の場合
	均一なフロートの不透明度。
#endif
#include <共通>
#include <パッキング>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
変化する vec2 vHighPrecisionZW;
void main() {
	vec4拡散色 = vec4( 1.0 );
	#include <クリッピングプレーンフラグメント>
	#DEPTH_PACKING == 3200の場合
		拡散色.a = 不透明度;
	#endif
	#include <マップフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <ログ深度バッファフラグメント>
	浮動小数点フラグ座標Z = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#DEPTH_PACKING == 3200の場合
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), 不透明度 );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ZI=`#距離を定義する
変化する vec3 vWorldPosition;
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <バッチ処理頂点>
	#include <スキンベース頂点>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <スキンの法線頂点>
	#endif
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <ワールド位置頂点>
	#include <クリッピングプレーンの頂点>
	vワールド位置 = ワールド位置.xyz;
}`,JI=`#距離を定義する
均一な vec3 参照位置;
均一な float の nearDistance;
均一な float farDistance;
変化する vec3 vWorldPosition;
#include <共通>
#include <パッキング>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4拡散色 = vec4( 1.0 );
	#include <クリッピングプレーンフラグメント>
	#include <マップフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	float dist = length( vWorldPosition - referencePosition );
	距離 = ( 距離 - 近距離 ) / ( 遠距離 - 近距離 );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( 距離 );
}`,KI=`varying vec3 vWorldDirection;
#include <共通>
void main() {
	vWorldDirection = 変換方向(位置, モデルマトリックス);
	#include <開始頂点>
	#include <プロジェクト頂点>
}`,QI=`uniform sampler2D tEquirect;
変化する vec3 vWorldDirection;
#include <共通>
void main() {
	vec3 方向 = 正規化( vWorldDirection );
	vec2 sampleUV = equirectUv( 方向 );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
}`,$I=`均一浮動小数点スケール;
属性 float lineDistance;
可変 float vLineDistance;
#include <共通>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	vLineDistance = スケール * 線距離;
	#include <uv_vertex>
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	#include <フォグ頂点>
}`,e3=`uniform vec3 拡散;
均一なフロートの不透明度。
均一フロート dashSize;
均一な float totalSize;
可変 float vLineDistance;
#include <共通>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <フォグパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	if ( mod ( vLineDistance, totalSize ) > dashSize ) {
		破棄;
	}
	vec3 出力ライト = vec3( 0.0 );
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	出力ライト = 拡散カラー.rgb;
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
}`,t3=`#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <バッチ処理頂点>
	#定義されている場合 (USE_ENVMAP) || 定義されている場合 (USE_SKINNING)
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <スキンベース頂点>
		#include <スキンの法線頂点>
		#include <デフォルトの通常頂点>
	#endif
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	#include <ワールド位置頂点>
	#include <envmap_vertex>
	#include <フォグ頂点>
}`,n3=`uniform vec3 diffusion;
均一なフロートの不透明度。
#ifndef フラットシェード
	変化する vec3 vNormal;
#endif
#include <共通>
#include <ディザリングパースフラグメント>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <ライトマップパースフラグメント>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <フォグパースフラグメント>
#include <スペキュラーマップパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <スペキュラーマップフラグメント>
	反射光 reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	＃それ以外
		反射光.間接拡散 += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	反射光.間接拡散 *= 拡散色.rgb;
	vec3 出力ライト = 反射ライト.indirectDiffuse;
	#include <envmap_fragment>
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
	#include <ディザリングフラグメント>
}`,i3=`#LAMBERT を定義する
vec3 vViewPosition を変更します。
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <シャドウマップのパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <法線頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	vViewPosition = -mvPosition.xyz;
	#include <ワールド位置頂点>
	#include <envmap_vertex>
	#include <シャドウマップ頂点>
	#include <フォグ頂点>
}`,r3=`#LAMBERT を定義する
均一な vec3 拡散;
均一な vec3 発光;
均一なフロートの不透明度。
#include <共通>
#include <パッキング>
#include <ディザリングパースフラグメント>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <ライトマップパースフラグメント>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <フォグパースフラグメント>
#include <bsdfs>
#include <ライトのパース開始>
#include <通常のパースフラグメント>
#include <lights_lambert_pars_fragment>
#include <シャドウマップパースフラグメント>
#include <バンプマップパースフラグメント>
#include <normalmap_pars_fragment>
#include <スペキュラーマップパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	反射光 reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <スペキュラーマップフラグメント>
	#include <通常のフラグメントの開始>
	#include <通常のフラグメントマップ>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <ライトフラグメントの開始>
	#include <ライトフラグメントマップ>
	#include <ライトフラグメントの終了>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
	#include <ディザリングフラグメント>
}`,s3=`#MATCAP を定義する
vec3 vViewPosition を変更します。
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <法線頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	#include <フォグ頂点>
	vViewPosition = -mvPosition.xyz;
}`,o3=`#MATCAP を定義する
均一な vec3 拡散;
均一なフロートの不透明度。
ユニフォームサンプラー2Dマットキャップ;
vec3 vViewPosition を変更します。
#include <共通>
#include <ディザリングパースフラグメント>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <フォグパースフラグメント>
#include <通常のパースフラグメント>
#include <バンプマップパースフラグメント>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <通常のフラグメントの開始>
	#include <通常のフラグメントマップ>
	vec3 viewDir = 正規化( vViewPosition );
	vec3 x = 正規化( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, 法線 ), dot( y, 法線 ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	＃それ以外
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
	#include <ディザリングフラグメント>
}`,a3=`#Normal を定義する
#定義されている場合(FLAT_SHADED) || 定義されている場合(USE_BUMPMAP) || 定義されている場合(USE_NORMALMAP_TANGENTSPACE)
	vec3 vViewPosition を変更します。
#endif
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <法線頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
#定義されている場合(FLAT_SHADED) || 定義されている場合(USE_BUMPMAP) || 定義されている場合(USE_NORMALMAP_TANGENTSPACE)
	vViewPosition = -mvPosition.xyz;
#endif
}`,l3=`#ノーマルを定義する
均一なフロートの不透明度。
#定義されている場合(FLAT_SHADED) || 定義されている場合(USE_BUMPMAP) || 定義されている場合(USE_NORMALMAP_TANGENTSPACE)
	vec3 vViewPosition を変更します。
#endif
#include <パッキング>
#include <uv_pars_fragment>
#include <通常のパースフラグメント>
#include <バンプマップパースフラグメント>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 0.0, 0.0, 0.0, 不透明度 );
	#include <クリッピングプレーンフラグメント>
	#include <ログ深度バッファフラグメント>
	#include <通常のフラグメントの開始>
	#include <通常のフラグメントマップ>
	gl_FragColor = vec4( packNormalToRGB( 法線 ), diffusionColor.a );
	#ifdef 不透明
		gl_FragColor.a = 1.0;
	#endif
}`,u3=`#PHONG を定義する
vec3 vViewPosition を変更します。
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <シャドウマップのパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <色頂点>
	#include <morphcolor_vertex>
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <法線頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	vViewPosition = -mvPosition.xyz;
	#include <ワールド位置頂点>
	#include <envmap_vertex>
	#include <シャドウマップ頂点>
	#include <フォグ頂点>
}`,c3=`#PHONG を定義する
均一な vec3 拡散;
均一な vec3 発光;
均一な vec3 スペキュラ;
均一なフロートの光沢。
均一なフロートの不透明度。
#include <共通>
#include <パッキング>
#include <ディザリングパースフラグメント>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <ライトマップパースフラグメント>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <フォグパースフラグメント>
#include <bsdfs>
#include <ライトのパース開始>
#include <通常のパースフラグメント>
#include <lights_phong_pars_fragment>
#include <シャドウマップパースフラグメント>
#include <バンプマップパースフラグメント>
#include <normalmap_pars_fragment>
#include <スペキュラーマップパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	反射光 reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <スペキュラーマップフラグメント>
	#include <通常のフラグメントの開始>
	#include <通常のフラグメントマップ>
	#include <emissivemap_fragment>
	#include <ライトフォンフラグメント>
	#include <ライトフラグメントの開始>
	#include <ライトフラグメントマップ>
	#include <ライトフラグメントの終了>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
	#include <ディザリングフラグメント>
}`,f3=`#標準を定義する
vec3 vViewPosition を変更します。
#ifdef USE_TRANSMISSION
	変化する vec3 vWorldPosition;
#endif
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <シャドウマップのパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <法線頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	vViewPosition = -mvPosition.xyz;
	#include <ワールド位置頂点>
	#include <シャドウマップ頂点>
	#include <フォグ頂点>
#ifdef USE_TRANSMISSION
	vワールド位置 = ワールド位置.xyz;
#endif
}`,h3=`#標準を定義する
#ifdef 物理
	#IOR を定義する
	#USE_SPECULAR を定義する
#endif
均一な vec3 拡散;
均一な vec3 発光;
均一なフロート粗さ。
均一なフロートメタル性。
均一なフロートの不透明度。
#ifdef IOR
	均一なフロート ior;
#endif
#ifdef USE_SPECULAR
	均一な float specularIntensity;
	均一な vec3 スペキュラーカラー;
	#ifdef USE_SPECULAR_COLORMAP
		均一なサンプラー2Dスペキュラーカラーマップ;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		均一サンプラー2Dスペキュラ強度マップ;
	#endif
#endif
#ifdef クリアコートを再利用
	均一なフロートクリアコート。
	均一なフロートクリアコート粗さ;
#endif
#ifdef USE_DISPERSION
	均一な浮遊分散;
#endif
#ifdef USE_IRIDESCENCE
	均一な浮遊性の虹彩。
	均一なフロート虹彩IOR;
	均一なフロートの虹彩厚さ最小;
	均一なフロートの虹彩厚さ最大;
#endif
#ifdef USE_SHEEN
	均一な vec3 sheenColor;
	均一なフロート光沢粗さ;
	#ifdef USE_SHEEN_COLORMAP
		均一サンプラー2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		均一サンプラー2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	均一な vec2 異方性ベクトル;
	#ifdef USE_ANISOTROPYMAP
		均一サンプラー2D異方性マップ;
	#endif
#endif
vec3 vViewPosition を変更します。
#include <共通>
#include <パッキング>
#include <ディザリングパースフラグメント>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <ライトマップパースフラグメント>
#include <emissivemap_pars_fragment>
#include <虹彩の断片>
#include <キューブUV反射フラグメント>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <フォグパースフラグメント>
#include <ライトのパース開始>
#include <通常のパースフラグメント>
#include <ライトの物理パースフラグメント>
#include <送信パースフラグメント>
#include <シャドウマップパースフラグメント>
#include <バンプマップパースフラグメント>
#include <normalmap_pars_fragment>
#include <クリアコートのパースフラグメント>
#include <iridescence_pars_fragment>
#include <粗さマップのパースフラグメント>
#include <メタルネスマップのパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	反射光 reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <粗さマップフラグメント>
	#include <メタルネスマップフラグメント>
	#include <通常のフラグメントの開始>
	#include <通常のフラグメントマップ>
	#include <クリアコートの通常のフラグメントの開始>
	#include <クリアコートノーマルフラグメントマップ>
	#include <emissivemap_fragment>
	#include <ライトの物理フラグメント>
	#include <ライトフラグメントの開始>
	#include <ライトフラグメントマップ>
	#include <ライトフラグメントの終了>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <送信フラグメント>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		フロート sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		出力ライト = 出力ライト * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef クリアコートを再利用
		float dotNVcc = saturate( dot( geomologyClearcoatNormal, geomologyViewDir ) );
		vec3 Fcc = F_Schlick( マテリアル.クリアコートF0, マテリアル.クリアコートF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
	#include <ディザリングフラグメント>
}`,d3=`#TOONを定義する
vec3 vViewPosition を変更します。
#include <共通>
#include <バッチ処理パース頂点>
#include <uv_pars_vertex>
#include <ディスプレイスメントマップのパース頂点>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <シャドウマップのパース頂点>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <法線頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <ディスプレイスメントマップ頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	vViewPosition = -mvPosition.xyz;
	#include <ワールド位置頂点>
	#include <シャドウマップ頂点>
	#include <フォグ頂点>
}`,p3=`#TOONを定義する
均一な vec3 拡散;
均一な vec3 発光;
均一なフロートの不透明度。
#include <共通>
#include <パッキング>
#include <ディザリングパースフラグメント>
#include <カラーパースフラグメント>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <ライトマップパースフラグメント>
#include <emissivemap_pars_fragment>
#include <グラデーションマップパースフラグメント>
#include <フォグパースフラグメント>
#include <bsdfs>
#include <ライトのパース開始>
#include <通常のパースフラグメント>
#include <ライトトゥーンパースフラグメント>
#include <シャドウマップパースフラグメント>
#include <バンプマップパースフラグメント>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	反射光 reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <カラーフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	#include <通常のフラグメントの開始>
	#include <通常のフラグメントマップ>
	#include <emissivemap_fragment>
	#include <ライトトゥーンフラグメント>
	#include <ライトフラグメントの開始>
	#include <ライトフラグメントマップ>
	#include <ライトフラグメントの終了>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
	#include <ディザリングフラグメント>
}`,m3=`均一な浮動小数点サイズ;
均一なフロートスケール。
#include <共通>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
#ifdef USE_POINTS_UV
	変化する vec2 vUv;
	均一なmat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <色頂点>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <プロジェクト頂点>
	gl_PointSize = サイズ;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( 投影マトリックス ) ;
		if (isPerspective) gl_PointSize *= (scale / - mvPosition.z);
	#endif
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	#include <ワールド位置頂点>
	#include <フォグ頂点>
}`,g3=`uniform vec3 拡散;
均一なフロートの不透明度。
#include <共通>
#include <カラーパースフラグメント>
#include <マップパーティクルパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <フォグパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	vec3 出力ライト = vec3( 0.0 );
	#include <ログ深度バッファフラグメント>
	#include <マップパーティクルフラグメント>
	#include <カラーフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	出力ライト = 拡散カラー.rgb;
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
	#include <premultiplied_alpha_fragment>
}`,_3=`#include <共通>
#include <バッチ処理パース頂点>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <スキニングパース頂点>
#include <logdepthbuf_pars_vertex>
#include <シャドウマップのパース頂点>
void main() {
	#include <バッチ処理頂点>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <スキンベース頂点>
	#include <スキンの法線頂点>
	#include <デフォルトの通常頂点>
	#include <開始頂点>
	#include <モーフターゲット頂点>
	#include <スキニング頂点>
	#include <プロジェクト頂点>
	#include <logdepthbuf_vertex>
	#include <ワールド位置頂点>
	#include <シャドウマップ頂点>
	#include <フォグ頂点>
}`,v3=`均一なvec3カラー;
均一なフロートの不透明度。
#include <共通>
#include <パッキング>
#include <フォグパースフラグメント>
#include <bsdfs>
#include <ライトのパース開始>
#include <logdepthbuf_pars_fragment>
#include <シャドウマップパースフラグメント>
#include <シャドウマスクパースフラグメント>
void main() {
	#include <ログ深度バッファフラグメント>
	gl_FragColor = vec4( 色、不透明度 * ( 1.0 - getShadowMask() ) );
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
}`,y3=`均一な浮動小数点回転;
均一な vec2 中心;
#include <共通>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <クリッピングプレーンのパース頂点>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2スケール = vec2(長さ(モデルマトリックス[ 0 ].xyz),長さ(モデルマトリックス[ 1 ].xyz));
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( 投影マトリックス ) ;
		if (isPerspective) スケール *= - mvPosition.z;
	#endif
	vec2 alignmentPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * スケール;
	vec2 回転位置;
	rotatedPosition.x = cos(回転) * alignmentPosition.x - sin(回転) * alignmentPosition.y;
	rotatedPosition.y = sin(回転) * alignmentPosition.x + cos(回転) * alignmentPosition.y;
	mvPosition.xy += 回転位置;
	gl_Position = 投影行列 * mvPosition;
	#include <logdepthbuf_vertex>
	#include <クリッピングプレーンの頂点>
	#include <フォグ頂点>
}`,x3=`uniform vec3 拡散;
均一なフロートの不透明度。
#include <共通>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <アルファマップパースフラグメント>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <フォグパースフラグメント>
#include <logdepthbuf_pars_fragment>
#include <クリッピングプレーンのパースフラグメント>
void main() {
	vec4 拡散色 = vec4( 拡散、不透明度 );
	#include <クリッピングプレーンフラグメント>
	vec3 出力ライト = vec3( 0.0 );
	#include <ログ深度バッファフラグメント>
	#include <マップフラグメント>
	#include <アルファマップフラグメント>
	#include <アルファテストフラグメント>
	#include <アルファハッシュフラグメント>
	出力ライト = 拡散カラー.rgb;
	#include <不透明フラグメント>
	#include <トーンマッピングフラグメント>
	#include <カラースペースフラグメント>
	#include <フォグフラグメント>
}`,Jt={alphahash_fragment:H2,alphahash_pars_fragment:G2,alphamap_fragment:W2,alphamap_pars_fragment:X2,alphatest_fragment:Y2,alphatest_pars_fragment:q2,aomap_fragment:j2,aomap_pars_fragment:Z2,batching_pars_vertex:J2,batching_vertex:K2,begin_vertex:Q2,beginnormal_vertex:$2,bsdfs:eP,iridescence_fragment:tP,bumpmap_pars_fragment:nP,clipping_planes_fragment:iP,clipping_plane s_pars_fragment:rP、clipping_planes_pars_vertex:sP、clipping_planes_vertex:oP、color_fragment:aP、color_pars_fragment:lP、color_pars_vertex:uP、color_vertex:cP、common:fP、cube_uv_reflection_fragment:hP、defaultnormal_vertex:dP、displacementmap_pars_vertex:pP、displacementmap_vertex:mP、emissivemap_fragment:gP、emissivemap_pars_fragment:_P、colorspace_fragment:vP、colorspace_pars_fragme nt:yP、envmap_fragment:xP、envmap_common_pars_fragment:SP、envmap_pars_fragment:MP、envmap_pars_vertex:wP、envmap_physical_pars_fragment:NP、envmap_vertex:EP、fog_vertex:TP、fog_pars_vertex:AP、fog_fragment:CP、fog_pars_fragment:RP、gradientmap_pars_fragment:bP、lightmap_pars_fragment:PP、lights_lambert_fragment:IP、lights_lambert_pars_fragment:LP、lights_pars_begin:DP、lights_toon_fragm ent:UP、lights_toon_pars_fragment:OP、lights_phong_fragment:FP、lights_phong_pars_fragment:kP、lights_physical_fragment:zP、lights_physical_pars_fragment:BP、lights_fragment_begin:VP、lights_fragment_maps:HP、lights_fragment_end:GP、logdepthbuf_fragment:WP、logdepthbuf_pars_fragment:XP、logdepthbuf_pars_vertex:YP、logdepthbuf_vertex:qP、map_fragment:jP、map_pars_fragment:ZP、map_particle _fragment:JP、map_particle_pars_fragment:KP、metalnessmap_fragment:QP、metalnessmap_pars_fragment:$P、morphinstance_vertex:eI、morphcolor_vertex:tI、morphnormal_vertex:nI、morphtarget_pars_vertex:iI、morphtarget_vertex:rI、normal_fragment_begin:sI、normal_fragment_maps:oI、normal_pars_fragment:aI、normal_pars_vertex:lI、normal_vertex:uI、normalmap_pars_fragment:cI、clearcoat_normal_frag ment_begin:fI、クリアコートの通常のフラグメントマップ:hI、クリアコートのパースフラグメント:dI、イリデッセンスのパースフラグメント:pI、不透明のパースフラグメント:mI、パッキング:gI、プリマルチプライされたアルファのパースフラグメント:_I、プロジェクト頂点:vI、ディザリングフラグメント:yI、ディザリングフラグメント:xI、ラフネスマップのパースフラグメント:SI、ラフネスマップのパースフラグメント:MI、シャドウマップのパースフラグメント:wI、シャドウマップのパース頂点:EI、シャドウマップの頂点:TI、シャドウマスクのパース_fragment:AI、スキンベース頂点:CI、スキニング パース頂点:RI、スキニング頂点:bI、スキンノーマル頂点:PI、スペキュラーマップ フラグメント:II、スペキュラーマップ パース頂点:LI、トーンマッピング フラグメント:DI、トーンマッピング パース頂点:NI、透過フラグメント:UI、透過フラグメント:OI、UV フラグメント:FI、UV フラグメント:kI、UV 頂点:zI、ワールド位置頂点:BI、背景頂点:VI、背景フラグメント:HI、背景dCube_vert:GI,backgroundCube_frag:WI,cube_vert:XI,cube_frag:YI,奥行き_vert:qI,奥行き_frag:jI,距離RGBA_vert:ZI,距離RGBA_frag:JI,equirect_vert:KI,equirect_frag:QI,linedashed_vert:$I,l inedashed_frag:e3,meshbasic_vert:t3,meshbasic_frag:n3,meshlambert_vert:i3,meshlambert_frag:r3,meshmatcap_vert:s3,meshmatcap_frag:o3,meshnormal_vert:a3,meshnormal_frag:l3,meshphong_vert:u3,meshphong_frag:c3,meshphysical_vert:f3,meshphysical_frag:h3,meshtoon_vert:d3,meshtoon_frag:p3,points_vert:m3,points_frag:g3,shadow_vert:_3,shadow_frag:v3,sprite_vert:y3,sprite_frag:x3},$e={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{va lue:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightM ap:{値:[]},spotShadowMap:{値:[]},spotLightMatrix:{値:[]},pointLights:{値:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{値:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadow CameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},不透明度:{値:1},サイズ:{値:1},スケール:{値:1},マップ:{値:null},アルファマップ:{値:null},アルファマップ変換:{値:新しいWt},アルファテスト:{値:0},UV変換:{値:新しいWt}},スプライト:{拡散:{値:新しいlt(16777215)},不透明度:{値:1},中心:{値:新しいIe(.5,.5)},回転:{値:0},マップ:{値:null},マップ変換:{値:新しいWt},アルファマップ:{値:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},ho={basic:{uniforms:wr([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:Jt.meshbasic_vert,fragmentShader:Jt.meshbasic_frag},lambert:{uniforms:wr([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new lt(0)}}]),vertexShader:Jt.meshlambert_vert,fragmentShader:Jt.meshlambert_frag},phong:{uniforms:wr([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},光沢:{値:30}}]),頂点シェーダー:Jt.meshphong_vert,フラグメントシェーダー:Jt.meshphong_frag},標準:{ユニフォーム:wr([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{値:new lt(0)},粗さ:{値:1},金属性:{値:0},環境マップ強度:{値:1}}]),頂点シェーダー:Jt.meshphysical_vert,フラグメントシェーダー:Jt.meshphysical_frag},トゥーン:{ユニフォーム:wr([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{値:new lt(0)}}]),vertexShader:Jt.meshtoon_vert,fragmentShader:Jt.meshtoon_frag},matcap:{uniforms:wr([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:Jt.meshmatcap_vert,fragmentShader:Jt.me shmatcap_frag}、点:{uniforms:wr([$e.points,$e.fog]),vertexShader:Jt.points_vert、fragmentShader:Jt.points_frag}、破線:{uniforms:wr([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jt.line dashed_vert、fragmentShader:Jt.linedashed_frag}、深度:{uniforms:wr([$e.common、$e.displacementmap])、vertexShader:Jt.depth_vert、fragmentShader:Jt.depth_frag}、法線:{uniforms:wr([$e.common、$e.bumpmap、$e.normalmap、$e.displacementmap、{不透明度:{値:1}}])、vertexShader:Jt.meshnormal_vert、fragmentShader:Jt.meshnormal_frag}、スプライト:{uniforms:wr([$e.sprite、$e.fog])、vertexShader:Jt.sprite_vert、fragmentShader:Jt.sprite_frag}、背景:{uniforms:{uvTransform:{値:new Wt},t2D:{値:null},backgroundIntensity:{値:1}},vertexShader:Jt.background_vert,fragmentShader:Jt.background_frag},backgroundCube:{uniforms:{envMap:{値:null},flipEnvMap:{値:-1},backgroundBlurriness:{値:0},backgroundIntensity:{値:1},backgroundRotation:{値:new Wt}},vertexShader:Jt.backgroundCube_vert,fragmentShader:Jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Jt.cube_vert,fragmentShader:Jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jt.equirect_vert,fragmentShader:Jt.equirect_frag},distanceRGBA:{uniforms:wr([$e.common,$e.displacementmap,{referencePosition:{value:new q}、近距離:{値:1}、遠距離:{値:1e3}}])、頂点シェーダー:Jt.distanceRGBA_vert、フラグメントシェーダー:Jt.distanceRGBA_frag}、影:{uniforms:wr([$e.lights,$e.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};ho.physical={uniforms:wr([ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},分散:{値:0},虹彩:{値:0},虹彩マップ:{値:null},虹彩マップ変換:{値:新しい Wt},虹彩IOR:{値:1.3},虹彩の厚さの最小値:{値:100},虹彩の厚さの最大値:{値:400},虹彩の厚さマップ:{値:null},虹彩の厚さマップ変換:{値:新しい Wt},光沢:{値:0},シーンカラー:{値:新しい lt(0)},シーンカラーマップ:{値:null},シーンカラーマップ変換:{値:新しい Wt},シーン粗さ:{値:1},シーン粗さマップ:{値:null},シーン粗さマップ変換:{値:新しいWt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie},transmissionSamplerMap:{値:null},thickness:{値:0},thicknessMap:{値:null},thicknessMapTransform:{値:new Wt},attenuationDistance:{値:0},attenuationColor:{値:new lt(0)},specularColor:{値:new lt(1,1,1)},specularColorMap:{値:null},specularColorMapTransform:{値:new Wt},specularIntensity:{値:1},specularIntensityMap:{値:null},specularIntensityMapTransform:{値:new Wt},anisotropyVector:{値:newすなわち}、anisotropyMap:{value:null}、anisotropyMapTransform:{value:new Wt}}]）、頂点シェーダー:Jt.meshphysical_vert、fragmentシェーダー:Jt.meshphysical_frag};const Ag={r:0,b:0,g:0}、Xu=new vs、S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}関数E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(不透明度:{値:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};ho.physical={uniforms:wr([ho.standard.uniforms,{クリアコート:{値:0},クリアコートマップ:{値:null},クリアコートマップ変換:{値:新しいWt},クリアコートノーマルマップ:{値:null},クリアコートノーマルマップ変換:{値:新しいWt},クリアコートノーマルスケール:{値:新しいIe(1,1)},クリアコート粗さ:{値:0},クリアコート粗さマップ:{値:null},クリアコート粗さマップ変換:{値:新しいWt},分散:{値:0},虹彩:{値:0},虹彩マップ:{値:null},虹彩マップ変換:{値:新しいWt},iridescenceIOR:{値:1.3},iridescenceThicknessMinimum:{値:100},iridescenceThicknessMaximum:{値:400},iridescenceThicknessMap:{値:null},iridescenceThicknessMapTransform:{値:new Wt},sheen:{値:0},sheenColor:{値:new lt(0)},sheenColorMap:{値:null},sheenColorMapTransform:{値:new Wt},sheenRoughness:{値:1},sheenRoughnessMap:{値:null},sheenRoughnessMapTransform:{値:new Wt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie}、transmissionSamplerMap:{value:null}、thickness:{value:0}、thicknessMap:{value:null}、thicknessMapTransform:{value:new Wt}、attenuationDistance:{value:0}、attenuationColor:{value:new lt(0)}、specularColor:{value:new lt(1,1,1)}、specularColorMap:{value:null}、specularColorMapTransform:{value:new Wt}、specularIntensity:{value:1}、specularIntensityMap:{value:null}、specularIntensityMapTransform:{value:new Wt}、anisotropyVector:{value:new Ie}、anisotropyMap:{value:null}、anisotropyMapTransform:{value:new Wt}}]）、頂点シェーダー：Jt.meshphysical_vert、フラグメントシェーダー：Jt.meshphysical_frag};const Ag={r：0、b：0、g：0}、Xu=new vs、S3=new Dt;function M3(s、e、t、n、i、r、a){const u=new lt(0);let h=r===!0?0:1、d、m、g=null、_=0、x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}関数E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(不透明度:{値:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};ho.physical={uniforms:wr([ho.standard.uniforms,{クリアコート:{値:0},クリアコートマップ:{値:null},クリアコートマップ変換:{値:新しいWt},クリアコートノーマルマップ:{値:null},クリアコートノーマルマップ変換:{値:新しいWt},クリアコートノーマルスケール:{値:新しいIe(1,1)},クリアコート粗さ:{値:0},クリアコート粗さマップ:{値:null},クリアコート粗さマップ変換:{値:新しいWt},分散:{値:0},虹彩:{値:0},虹彩マップ:{値:null},虹彩マップ変換:{値:新しいWt},iridescenceIOR:{値:1.3},iridescenceThicknessMinimum:{値:100},iridescenceThicknessMaximum:{値:400},iridescenceThicknessMap:{値:null},iridescenceThicknessMapTransform:{値:new Wt},sheen:{値:0},sheenColor:{値:new lt(0)},sheenColorMap:{値:null},sheenColorMapTransform:{値:new Wt},sheenRoughness:{値:1},sheenRoughnessMap:{値:null},sheenRoughnessMapTransform:{値:new Wt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie}、transmissionSamplerMap:{value:null}、thickness:{value:0}、thicknessMap:{value:null}、thicknessMapTransform:{value:new Wt}、attenuationDistance:{value:0}、attenuationColor:{value:new lt(0)}、specularColor:{value:new lt(1,1,1)}、specularColorMap:{value:null}、specularColorMapTransform:{value:new Wt}、specularIntensity:{value:1}、specularIntensityMap:{value:null}、specularIntensityMapTransform:{value:new Wt}、anisotropyVector:{value:new Ie}、anisotropyMap:{value:null}、anisotropyMapTransform:{value:new Wt}}]）、頂点シェーダー：Jt.meshphysical_vert、フラグメントシェーダー：Jt.meshphysical_frag};const Ag={r：0、b：0、g：0}、Xu=new vs、S3=new Dt;function M3(s、e、t、n、i、r、a){const u=new lt(0);let h=r===!0?0:1、d、m、g=null、_=0、x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}関数E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(standard.uniforms,{クリアコート:{値:0},クリアコートマップ:{値:null},クリアコートマップ変換:{値:新しいWt},クリアコートノーマルマップ:{値:null},クリアコートノーマルマップ変換:{値:新しいWt},クリアコートノーマルスケール:{値:新しいIe(1,1)},クリアコートラフネス:{値:0},クリアコートラフネスマップ:{値:null},クリアコートラフネスマップ変換:{値:新しいWt},分散:{値:0},虹彩:{値:0},虹彩マップ:{値:null},虹彩マップ変換:{値:新しいWt},iridescenceIOR:{値:1.3},iridescenceThicknessMinimum:{値:100},iridescenceThicknessMaximum:{値:400},iridescenceThicknessMap:{値:null},iridescenceThicknessMapTransform:{値:new Wt},sheen:{値:0},sheenColor:{値:new lt(0)},sheenColorMap:{値:null},sheenColorMapTransform:{値:new Wt},sheenRoughness:{値:1},sheenRoughnessMap:{値:null},sheenRoughnessMapTransform:{値:new Wt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie}、transmissionSamplerMap:{value:null}、thickness:{value:0}、thicknessMap:{value:null}、thicknessMapTransform:{value:new Wt}、attenuationDistance:{value:0}、attenuationColor:{value:new lt(0)}、specularColor:{value:new lt(1,1,1)}、specularColorMap:{value:null}、specularColorMapTransform:{value:new Wt}、specularIntensity:{value:1}、specularIntensityMap:{value:null}、specularIntensityMapTransform:{value:new Wt}、anisotropyVector:{value:new Ie}、anisotropyMap:{value:null}、anisotropyMapTransform:{value:new Wt}}]）、頂点シェーダー：Jt.meshphysical_vert、フラグメントシェーダー：Jt.meshphysical_frag};const Ag={r：0、b：0、g：0}、Xu=new vs、S3=new Dt;function M3(s、e、t、n、i、r、a){const u=new lt(0);let h=r===!0?0:1、d、m、g=null、_=0、x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}関数E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(standard.uniforms,{クリアコート:{値:0},クリアコートマップ:{値:null},クリアコートマップ変換:{値:新しいWt},クリアコートノーマルマップ:{値:null},クリアコートノーマルマップ変換:{値:新しいWt},クリアコートノーマルスケール:{値:新しいIe(1,1)},クリアコートラフネス:{値:0},クリアコートラフネスマップ:{値:null},クリアコートラフネスマップ変換:{値:新しいWt},分散:{値:0},虹彩:{値:0},虹彩マップ:{値:null},虹彩マップ変換:{値:新しいWt},iridescenceIOR:{値:1.3},iridescenceThicknessMinimum:{値:100},iridescenceThicknessMaximum:{値:400},iridescenceThicknessMap:{値:null},iridescenceThicknessMapTransform:{値:new Wt},sheen:{値:0},sheenColor:{値:new lt(0)},sheenColorMap:{値:null},sheenColorMapTransform:{値:new Wt},sheenRoughness:{値:1},sheenRoughnessMap:{値:null},sheenRoughnessMapTransform:{値:new Wt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie}、transmissionSamplerMap:{value:null}、thickness:{value:0}、thicknessMap:{value:null}、thicknessMapTransform:{value:new Wt}、attenuationDistance:{value:0}、attenuationColor:{value:new lt(0)}、specularColor:{value:new lt(1,1,1)}、specularColorMap:{value:null}、specularColorMapTransform:{value:new Wt}、specularIntensity:{value:1}、specularIntensityMap:{value:null}、specularIntensityMapTransform:{value:new Wt}、anisotropyVector:{value:new Ie}、anisotropyMap:{value:null}、anisotropyMapTransform:{value:new Wt}}]）、頂点シェーダー：Jt.meshphysical_vert、フラグメントシェーダー：Jt.meshphysical_frag};const Ag={r：0、b：0、g：0}、Xu=new vs、S3=new Dt;function M3(s、e、t、n、i、r、a){const u=new lt(0);let h=r===!0?0:1、d、m、g=null、_=0、x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}関数E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(clearcoatRoughness:{値:0},clearcoatRoughnessMap:{値:null},clearcoatRoughnessMapTransform:{値:新しいWt},dispersion:{値:0},iridescence:{値:0},iridescenceMap:{値:null},iridescenceMapTransform:{値:新しいWt},iridescenceIOR:{値:1.3},iridescenceThicknessMinimum:{値:100},iridescenceThicknessMaximum:{値:400},iridescenceThicknessMap:{値:null},iridescenceThicknessMapTransform:{値:新しいWt},sheen:{値:0},sheenColor:{値:新しいlt(0)},sheenColorMap:{値:null},sheenColorMapTransform:{値:新しいWt},sheenRoughness:{値:1},sheenRoughnessMap:{値:null},sheenRoughnessMapTransform:{値:new Wt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie},transmissionSamplerMap:{値:null},thickness:{値:0},thicknessMap:{値:null},thicknessMapTransform:{値:new Wt},attenuationDistance:{値:0},attenuationColor:{値:new lt(0)},specularColor:{値:new lt(1,1,1)},specularColorMap:{値:null},specularColorMapTransform:{値:new Wt},specularIntensity:{値:1},specularIntensityMap:{値:null},specularIntensityMapTransform:{値:new Wt},anisotropyVector:{値:new Ie},anisotropyMap:{値:null},anisotropyMapTransform:{値:new Wt}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};const Ag={r:0,b:0,g:0},Xu=new vs,S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(clearcoatRoughness:{値:0},clearcoatRoughnessMap:{値:null},clearcoatRoughnessMapTransform:{値:新しいWt},dispersion:{値:0},iridescence:{値:0},iridescenceMap:{値:null},iridescenceMapTransform:{値:新しいWt},iridescenceIOR:{値:1.3},iridescenceThicknessMinimum:{値:100},iridescenceThicknessMaximum:{値:400},iridescenceThicknessMap:{値:null},iridescenceThicknessMapTransform:{値:新しいWt},sheen:{値:0},sheenColor:{値:新しいlt(0)},sheenColorMap:{値:null},sheenColorMapTransform:{値:新しいWt},sheenRoughness:{値:1},sheenRoughnessMap:{値:null},sheenRoughnessMapTransform:{値:new Wt},transmission:{値:0},transmissionMap:{値:null},transmissionMapTransform:{値:new Wt},transmissionSamplerSize:{値:new Ie},transmissionSamplerMap:{値:null},thickness:{値:0},thicknessMap:{値:null},thicknessMapTransform:{値:new Wt},attenuationDistance:{値:0},attenuationColor:{値:new lt(0)},specularColor:{値:new lt(1,1,1)},specularColorMap:{値:null},specularColorMapTransform:{値:new Wt},specularIntensity:{値:1},specularIntensityMap:{値:null},specularIntensityMapTransform:{値:new Wt},anisotropyVector:{値:new Ie},anisotropyMap:{値:null},anisotropyMapTransform:{値:new Wt}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};const Ag={r:0,b:0,g:0},Xu=new vs,S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularColor:{value:new lt(1,1,1)},specularColorMap:{値:null},specularColorMapTransform:{値:new Wt},specularIntensity:{値:1},specularIntensityMap:{値:null},specularIntensityMapTransform:{値:new Wt},anisotropyVector:{値:new Ie},anisotropyMap:{値:null},anisotropyMapTransform:{値:new Wt}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};const Ag={r:0,b:0,g:0},Xu=new vs,S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;関数M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}関数T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularColor:{value:new lt(1,1,1)},specularColorMap:{値:null},specularColorMapTransform:{値:new Wt},specularIntensity:{値:1},specularIntensityMap:{値:null},specularIntensityMapTransform:{値:new Wt},anisotropyVector:{値:new Ie},anisotropyMap:{値:null},anisotropyMapTransform:{値:new Wt}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};const Ag={r:0,b:0,g:0},Xu=new vs,S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;関数M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}関数T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(Jt.meshphysical_frag};const Ag={r:0,b:0,g:0},Xu=new vs,S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(Jt.meshphysical_frag};const Ag={r:0,b:0,g:0},Xu=new vs,S3=new Dt;function M3(s,e,t,n,i,r,a){const u=new lt(0);let h=r===!0?0:1,d,m,g=null,_=0,x=null;function M(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function T(P){let I=!1;const O=M(P);O===null?S(u,h):O&&O.isColor&&(S(O,1),I=!0);const U=s.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(s.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function E(P,I){const O=M(I);O&&(O.isCubeTexture||O.mapping===Ah)?(m===void 0&&(m=new pi(new Mc(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:gh(ho.backgroundCube.uniforms),vertexShader:ho.backgroundCube.vertexShader,fragmentShader:ho.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(m)),Xu.copy(I.backgroundRotation),Xu.x*=-1,Xu.y*=-1,Xu.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(Xu.y*=-1,Xu.z*=-1),m.material.uniforms.envMap.value=O,m.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,m.material.uniforms.back groundIntensity.value=I.backgroundIntensity、m.material.uniforms.backgroundRotation.value.setFromMatrix4(S3.makeRotationFromEuler(Xu))、m.material.toneMapped=fn.getTransfer(O.colorSpace)!==Sn、(g!==O||_!==O.version||x!==s.toneMapping)&&(m.material.needsUpdate=!0、g=O、_=O.version、x=s.toneMapping)、m.layers.enableAll()、P.unshift(m、m.geometry、m.material、0、0、null)):O&&O.isTexture&&(d===void) 0&&(d=新しいpi(新しいPh(2,2),新しいgo({name:"BackgroundMaterial",uniforms:gh(ho.background.uniforms),vertexShader:ho.background.vertexShader,fragmentShader:ho.background.fragmentShader,side:Va,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=O,d.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,d.material.toneMapped=fn.getTransfer(O.colorSpace)!==Sn,O.matrixAutoUpdate===!0&&O.updateMatrix(),d.material.uniforms.uvTransform.value.copy(O.matrix),(g!==O||_!==O.version||x!==s.toneMapping)&&(d.material.needsUpdate=!0,g=O,_=O.version,x=s.toneMapping),d.layers.enableAll(),P.unshift(d,d.geometry,d.material,0,0,null))}関数S(P,I){P.getRGB(Ag,tE(s)),n.buffers.color.setClear(Ag.r,Ag.g,Ag.b,I,a)}関数R(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return u},setClearColor:function(P,I=1){u.set(P),h=I,S(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(P){h=P,S(u,h)},render:T,addToRenderList:E,dispose:R}}関数w3(s,e){const t=s.getParameter(s.MAX_VERTEX_ATTRIBS),n={},i=_(null);let r=i,a=!1;function u(N,G,$,Q,ce){let me=!1;const ue=g(Q,$,G);r!==ue&&(r=ue,d(r.object)),me=x(N,Q,$,ce),me&&M(N,Q,$,ce),ce!==null&&e.update(ce,s.ELEMENT_ARRAY_BUFFER),(me||a)&&(a=!1,I(N,G,$,Q),ce!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.get(ce).buffer))}function h(){return s.createVertexArray()}function d(N){return s.bindVertexArray(N)}function m(N){return s.deleteVertexArray(N)}function g(N,G,$){const Q=$.wireframe===!0;let ce=n[N.id];ce===void 0&&(ce={},n[N.id]=ce);let me=ce[G.id];me===void 0&&(me={},ce[G.id]=me);let ue=me[Q];return ue===void 0&&(ue=_(h()),me[Q]=ue),ue}function _(N){const G=[],$=[],Q=[];for(let ce=0;ce<t;ce++)G[ce]=0,$[ce]=0,Q[ce]=0;return{geometry:null,program:null,ワイヤーフレーム:!1、newAttributes:G、enabledAttributes:$、attributeDivisors:Q、object:N、attributes:{}、index:null}}function x(N,G,$,Q){const ce=r.attributes,me=G.attributes;let ue=0;const de=$.getAttributes();for(const B in de)if(de[B].location>=0){const J=ce[B];let W=me[B];if(W===void 0&&(B==="instanceMatrix"&&N.instanceMatrix&&(W=N.instanceMatrix),B==="instanceColor"&&N.instanceColor&&(W=N.instanceColor)),J===void 0||J.attribute!==W||W&&J.data!==W.data)return!0;ue++}return r.attributesNum!==ue||r.index!==Q}function M(N,G,$,Q){const ce={},me=G.attributes;let ue=0;const de=$.getAttributes();for(const B in de)if(de[B].location>=0){let J=me[B];J===void 0&&(B==="instanceMatrix"&&N.instanceMatrix&&(J=N.instanceMatrix),B==="instanceColor"&&N.instanceColor&&(J=N.instanceColor));const W={};W.attribute=J,J&&J.data&&(W.data=J.data),ce[B]=W,ue++}r.attributes=ce,r.attributesNum=ue,r.index=Q}関数T(){const N=r.newAttributes;for(let G=0,$=N.length;G<$;G++)N[G]=0}関数E(N){S(N,0)}関数S(N,G){const $=r.newAttributes,Q=r.enabledAttributes,ce=r.attributeDivisors;$[N]=1,Q[N]===0&&(s.enableVertexAttribArray(N),Q[N]=1),ce[N]!==G&&(s.vertexAttribDivisor(N,G),ce[N]=G)}関数R(){const N=r.newAttributes、G=r.enabledAttributes;for(let $=0、Q=G.length;$<Q;$++)G[$]!==N[$]&&(s.disableVertexAttribArray($),G[$]=0)}function P(N,G,$,Q,ce,me,ue){ue===!0?s.vertexAttribIPointer(N,G,$,ce,me):s.vertexAttribPointer(N,G,$,Q,ce,me)}function I(N,G,$,Q){T();const ce=Q.attributes、me=$.getAttributes()、ue=G.defaultAttributeValues;for(const de in me){const B=me[de];if(B.location>=0){let K=ce[de];if(K===void 0&&(de==="instanceMatrix"&&N.instanceMatrix&&(K=N.instanceMatrix),de==="instanceColor"&&N.instanceColor&&(K=N.instanceColor)),K!==void 0){const J=K.normalized,W=K.itemSize,te=e.get(K);if(te===void 0)continue;const Pe=te.buffer,se=te.type,xe=te.bytesPerElement,be=se===s.INT||se===s.UNSIGNED_INT||K.gpuType===F0;if(K.isInterleavedBufferAttribute){const Te=K.data,Xe=Te.stride,gt=K.offset;if(Te.isInstancedInterleavedBuffer){for(let et=0;et<B.locationSize;et++)S(B.location+et,Te.meshPerAttribute);N.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let et=0;et<B.locationSize;et++)E(B.location+et);s.bindBuffer(s.ARRAY_BUFFER,Pe);for(let et=0;et<B.locationSize;et++)P(B.location+et,W/B.locationSize,se,J,Xe*xe,(gt+W/B.locationSize*et)*xe,be)}else{if(K.isInstancedBufferAttribute){for(let Te=0;Te<B.locationSize;Te++)S(B.location+Te,K.meshPerAttribute);N.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let Te=0;Te<B.locationSize;Te++)E(B.location+Te);s.bindBuffer(s.ARRAY_BUFFER,Pe);for(let Te=0;Te<B.locationSize;Te++)P(B.location+Te,W/B.locationSize,se,J,W*xe,W/B.locationSize*Te*xe,be)}}else if(ue!==void 0){const J=ue[de];if(J!==void 0)switch(J.length){case 2:s.vertexAttrib2fv(B.location,J);break;case 3:s.vertexAttrib3fv(B.location,J);break;case 4:s.vertexAttrib4fv(B.location,J);break;default:s.vertexAttrib1fv(B.location,J)}}}}R()}function O(){z();for(const N in n){const G=n[N];for(const $ in G){const Q=G[$];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete G[$]}delete n[N]}}関数 U(N){if(n[N.id]===void 0)return;const G=n[N.id];for(const $ in G){const Q=G[$];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete G[$]}delete n[N.id]}関数 F(N){for(const G in n){const $=n[G];if($[N.id]===void 0)continue;const Q=$[N.id];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete $[N.id]}}関数z(){D(),a=!0,r!==i&&(r=i,d(r.object))}関数 D(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:u,reset:z,resetDefaultState:D,dispose:O,releaseStatesOfGeometry:U,releaseStatesOfProgram:F,initAttributes:T,enableAttribute:E,disableUnusedAttributes:R}}関数 E3(s,e,t){let n;function i(d){n=d}function r(d,m){s.drawArrays(n,d,m),t.update(m,n,1)}関数 a(d,m,g){g!==0&&(s.drawArraysInstanced(n,d,m,g),t.update(m,n,g))}関数u(d,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,m,0,g);let x=0;for(let M=0;M<g;M++)x+=m[M];t.update(x,n,1)}function h(d,m,g,_){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let M=0;M<d.length;M++)a(d[M],m[M],_[M]);else{x.multiDrawArraysInstancedWEBGL(n,d,0,m,0,_,0,g);let M=0;for(let T=0;T<g;T++)M+=m[T]*_[T];t.update(M,n,1)}}this.setMode=i,this.render=r,this.renderInstances=a,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function T3(s,e,t,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");i=s.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(F){return!(F!==ar&&n.convert(F)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT))}関数 u(F){const z=F===Ch&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(F!==mo&&n.convert(F)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==Xr&&!z)}関数h(F){if(F==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const m=h(d);m!==d&&(console.warn("THREE.WebGLRenderer:",d,"サポートされていません。代わりに",m,"を使用してください。",d=m);const g=t.logarithmicDepthBuffer===!0,_=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),M=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=s.getParameter(s.MAX_TEXTURE_SIZE),E=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),S=s.getParameter(s.MAX_VERTEX_ATTRIBS),R=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),P=s.getParameter(s.MAX_VARYING_VECTORS),I=s.getParameter( s.MAX_FRAGMENT_UNIFORM_VECTORS),O=M>0,U=s.getParameter(s.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:h,textureFormatReadable:a,textureTypeReadable:u,precision:d,logarithmicDepthBuffer:g,reverseDepthBuffer:_,maxTextures:x,maxVertexTextures:M,maxTextureSize:T,maxCubemapSize:E,maxAttributes:S,maxVertexUniforms:R,maxVaryings:P,maxFragmentUniforms:I,vertexTextures:O,maxSamples:U}}関数A3(s){const e=this;let t=null,n=0,i=!1,r=!1;const a=new Dl,u=new Wt,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(g,_){const x=g.length!==0||_||n!==0||i;return i=_,n=g.length,x},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,_){t=m(g,_,0)},this.setState=function(g,_,x){const M=g.clippingPlanes、T=g.clipIntersection、E=g.clipShadows、S=s.get(g);if(!i||M===null||M.length===0||r&&!E)r?m(null):d();else{const R=r?0:n、P=R*4;let I=S.clippingState||null;h.value=I、I=m(M,_,P,x);for(let O=0;O!==P;++O)I[O]=t[O];S.clippingState=I、this.numIntersection=T?this.numPlanes:0、this.numPlanes+=R}};function d(){h.value!==t&&(h.value=t、h.needsUpdate=n>0),e.numPlanes=n、e.numIntersection=0}function m(g,_,x,M){const T=g!==null?g.length:0;let E=null;if(T!==0){if(E=h.value,M!==!0||E===null){const S=x+T*4,R=_.matrixWorldInverse;u.getNormalMatrix(R),(E===null||E.length<S)&&(E=new Float32Array(S));for(let P=0,I=x;P!==T;++P,I+=4)a.copy(g[P]).applyMatrix4(R,u),a.normal.toArray(E,I),E[I+3]=a.constant}h.value=E,h.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,E}}function C3(s){let e=new WeakMap;function t(a,u){return u===sp?a.mapping=Ha:u===op&&(a.mapping=Bl),a}function n(a){if(a&&a.isTexture){const u=a.mapping;if(u===sp||u===op)if(e.has(a)){const h=e.get(a).texture;return t(h,a.mapping)}else{const h=a.image;if(h&&h.height>0){const d=new rE(h.height);return d.fromEquirectangularTexture(s,a),e.set(a,d),a.addEventListener("dispose",i),t(d.texture,a.mapping)}else return null}}return a}function i(a){const u=a.target;u.removeEventListener("dispose",i);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const oh=4,G1=[.125,.215,.35,.446,.526,.582],$u=20,Lv=new Vp,W1=new lt;let Dv=null,Nv=0,Uv=0,Ov=!1;const Ku=(1+Math.sqrt(5))/2,Zf=1/Ku,X1=[new q(-Ku,Zf,0),new q(Ku,Zf,0),new q(-Zf,0,Ku),new q(Zf,0,Ku)、新しいq(0,Ku,-Zf)、新しいq(0,Ku,Zf),新しいq(-1,1,-1),新しいq(1,1,-1),新しいq(-1,1,1),新しいq(1,1,1)];クラスwy{コンストラクタ(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Dv=this._renderer.getRenderTarget(),Nv=this._renderer.getActiveCubeFace(),Uv=this._renderer.getActiveMipmapLevel(),Ov=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=j1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=q1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!== null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dv,Nv,Uv),this._renderer.xr.enabled=Ov,e.scissorTest=!1,Cg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ha||e.mapping===Bl?this._setSize(e.image.len gth===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dv=this._renderer.getRenderTarget(),Nv=this._renderer.getActiveCubeFace(),Uv=this._renderer.getActiveMipmapLevel(),Ov=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ei,minFilter:Ei,generateMipmaps:!1,type:Ch,format:ar,colorSpace:vc,depthBuffer:!1},i=Y1(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPong RenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Y1(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=R3(r)),this._blurMaterial=b3(r,e,t)}return i}_compileMaterial(e){const t=new pi(this._lodPlanes[0],e);this._renderer.compile(t,Lv)}_sceneToCubeUV(e,t,n,i){const u=new Ni(90,1,t,n),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,g=m.autoClear,_=m.toneMapping;m.getClearColor(W1),m.toneMapping=zo,m.autoClear=!1;const x=new Xl({name:"PMREM.Background",side:Ar,depthWrite:!1,depthTest:!1}),M=new pi(new Mc,x);let T=!1;const E=e.background;E?E.isColor&&(x.color.copy(E),e.background=null,T=!0):(x.color.copy(W1),T=!0);for(let S=0;S<6;S++){const R=S%3;R===0?(u.up.set(0,h[S],0),u.lookAt(d[S],0,0)):R===1?(u.up.set(0,0,h[S]),u.lookAt(0,d[S],0)):(u.up.set(0,h[S],0),u.lookAt(0,0,d[S]));const P=this._cubeSize;Cg(i,R*P,S>2?P:0,P,P),m.setRenderTarget(i),T&&m.render(M,u),m.render(e,u)}M.geometry.dispose(),M.material.dispose(),m.toneMapping=_,m.autoClear=g,e.background=E}_textureToCubeUV(e,t){const n=this._renderer、i=e.mapping===Ha||e.mapping===Bl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=j1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=q1());const r=i?this._cubemapMaterial:this._equirectMaterial、a=new pi(this._lodPlanes[0],r),u=r.uniforms;u.envMap.value=e;const h=this._cubeSize;Cg(t,0,0,3*h,2*h),n.setRenderTarget(t),n.render(a,Lv)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),u=X1[(ir-1)%X1.length];this._blur(e,r-1,r,a,u)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,u){const h=this._renderer,d=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("ぼかし方向は緯度または経度のいずれかである必要があります!");const m=3,g=new pi(this._lodPlanes[i],d),_=d.uniforms,x=this._sizeLods[n]-1,M=isFinite(r)?Math.PI/(2*x):2*Math.PI/(2*$u-1),T=r/M,E=isFinite(r)?1+Math.floor(m*T):$u;E>$u&&console.warn(`sigmaRadians, ${r}, は大きすぎるため、最大値が ${$u} に設定されているときに ${E} サンプルを要求したため、クリップされます`);const S=[];let R=0;for(let F=0;F<$u;++F){const z=F/T,D=Math.exp(-z*z/2);S.push(D),F===0?R+=D:F<E&&(R+=2*D)}for(let F=0;F<S.length;F++)S[F]=S[F]/R;_.envMap.value=e.texture,_.samples.value=E,_.weights.value=S,_.latitudinal.value=a==="latitudinal",u&&(_.poleAxis.value=u);const{_lodMax:P}=this;_.dTheta.value=M,_.mipInt.value=Pn;const I=this._sizeLods[i],O=3*I*(i>P-oh?i-P+oh:0),U=4*(this._cubeSize-I);Cg(t,O,U,3*I,2*I),h.setRenderTarget(t),h.render(g,Lv)}}関数 R3(s){const e=[],t=[],n=[];let i=s;const r=s-oh+1+G1.length;for(let a=0;a<r;a++){const u=Math.pow(2,i);t.push(u);let h=1/u;a>s-oh?h=G1[a-s+oh-1]:a===0&&(h=0),n.push(h);const d=1/(u-2),m=-d,g=1+d,_=[m,m,g,m,g,m,m,g,g,m,g],x=6,M=6,T=3,E=2,S=1,R=new Float32Array(T*M*x),P=new Float32Array(E*M*x),I=new Float32Array(S*M*x);for(let U=0;U<x;U++){const F=U%3*2/3-1、z=U>2?0:-1、D=[F、z、0、F+2/3、z、0、F+2/3、z+1、0、F、z、0、F+2/3、z+1、0、F、z+1、0];R。set(D,T*M*U),P.set(_,E*M*U);const N=[U,U,U,U,U,U];I.set(N,S*M*U)}const O=new Kt;O.setAttribute("position",new Tn(R,T)),O.setAttribute("uv",new Tn(P,E)),O.setAttribute("faceIndex",new Tn(I,S)),e.push(O),i>oh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Y1(s,e,t){const n=new Wo(s,e,t);return n.texture.mapping=Ah,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Cg(s,e,t,n,i){s.viewport.set(e,t,n,i),s.scissor.set(e,t,n,i)}function b3(s,e,t){const n=new Float32Array($u),i=new q(0,1,0);return new go({name:"SphericalGaussianBlur",defines:{n:$u,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:bx(),fragmentShader:`

			精度 mediump float;
			精度 mediump int;

			変化する vec3 vOutputDirection;

			均一なサンプラー2D envMap;
			均一な int サンプル。
			均一な浮動小数点重み[n];
			均一なブール緯度;
			均一な浮動小数点数 dTheta;
			均一な float mipInt;
			均一な vec3 poleAxis;

			#ENVMAP_TYPE_CUBE_UV を定義します
			#include <キューブUV反射フラグメント>

			vec3 getSample( float theta, vec3 axis ) {

				フロートcosTheta = cos(theta);
				// ロドリゲスの軸角回転
				vec3 サンプル方向 = v出力方向 * cosTheta
					+ cross(軸, v出力方向) * sin(θ)
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				bilinearCubeUV( envMap, sampleDirection, mipInt ) を返します。

			}

			void main() {

				vec3 axis = 緯度? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					軸 = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = 正規化( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				( int i = 1; i < n; i++ ) の場合 {

					if ( i >= サンプル ) {

						壊す;

					}

					フロートシータ = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:za,depthTest:!1,depthWrite:!1})}function q1(){return new go({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bx(),fragmentShader:`

			精度 mediump float;
			精度 mediump int;

			変化する vec3 vOutputDirection;

			均一なサンプラー2D envMap;

			#include <共通>

			void main() {

				vec3 出力方向 = 正規化 ( vOutputDirection ) ;
				vec2 uv = equirectUv( 出力方向 );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:za,depthTest:!1,depthWrite:!1})}function j1(){return new go({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bx(),fragmentShader:`

			精度 mediump float;
			精度 mediump int;

			ユニフォームフロート flipEnvMap;

			変化する vec3 vOutputDirection;

			均一なサンプラーCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:za,depthTest:!1,depthWrite:!1})}function bx(){return`

		精度 mediump float;
		精度 mediump int;

		属性 float faceIndex;

		変化する vec3 vOutputDirection;

		// RH座標系; PMREM面インデックス規約
		vec3 getDirection( vec2 uv, float face ) {

			紫外線 = 2.0 * 紫外線 - 1.0;

			vec3 方向 = vec3( uv, 1.0 );

			if ( 面 == 0.0 ) {

				方向 = 方向.zyx; // ( 1, v, u ) 位置 x

			} そうでなければ ( 面 == 1.0 ) {

				方向 = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) 正y

			} そうでなければ ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) 正z

			} そうでなければ ( フェイス == 3.0 ) {

				方向 = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) 負のx

			} そうでなければ ( フェイス == 4.0 ) {

				方向 = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) 負のy

			} そうでなければ ( フェイス == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) 負のz

			}

			戻り方向;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( 位置, 1.0 );

		}
	`}関数 P3(s){let e=new WeakMap,t=null;function n(u){if(u&&u.isTexture){const h=u.mapping,d=h===sp||h===op,m=h===Ha||h===Bl;if(d||m){let g=e.get(u);const _=g!==void 0?g.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==_)return t===null&&(t=new wy(s)),g=d?t.fromEquirectangular(u,g):t.fromCubemap(u,g),g.texture.pmremVersion=u.pmremVersion,e.set(u,g),g.texture;if(g!==void 0) return g.texture;{const x=u.image;return d&&x&&x.height>0||m&&x&&i(x)?(t===null&&(t=new wy(s)),g=d?t.fromEquirectangular(u):t.fromCubemap(u),g.texture.pmremVersion=u.pmremVersion,e.set(u,g),u.addEventListener("dispose",r),g.texture):null}}}return u}function i(u){let h=0;const d=6;for(let m=0;m<d;m++)u[m]!==void 0&&h++;return h===d}function r(u){const h=u.target;h.removeEventListener("dispose",r);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}関数a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}関数I3(s){const e={};関数t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":i=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=s.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&$f("THREE.WebGLRenderer: "+n+" 拡張機能はサポートされていません。"),i}}}function L3(s,e,t,n){const i={},r=new WeakMap;function a(g){const _=g.target;_.index!==null&&e.remove(_.index);for(const M in _.attributes)e.remove(_.attributes[M]);_.removeEventListener("dispose",a),delete i[_.id];const x=r.get(_);x&&(e.remove(x),r.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function u(g,_){return i[_.id]===!0||(_.addEventListener("dispose",a),i[_.id]=!0,t.memory.geometries++),_}関数 h(g){const _=g.attributes;for(const x in _)e.update(_[x],s.ARRAY_BUFFER)}関数 d(g){const _=[],x=g.index,M=g.attributes.position;let T=0;if(x!==null){const R=x.array;T=x.version;for(let P=0,I=R.length;P<I;P+=3){const O=R[P+0],U=R[P+1],F=R[P+2];_.push(O,U,U,F,F,O)}}else if(M!==void 0){const R=M.array;T=M.version;for(let P=0,I=R.length/3-1;P<I;P+=3){const O=P+0,U=P+1,F=P+2;_.push(O,U,U,F,F,O)}}else return;const E=new(Kw(_)?ix:nx)(_,1);E.version=T;const S=r.get(g);S&&e.remove(S),r.set(g,E)}function m(g){const _=r.get(g);if(_){const x=g.index;x!==null&&_.version<x.version&&d(g)}else d(g);return r.get(g)}return{get:u,update:h,getWireframeAttribute:m}}function D3(s,e,t){let n;function i(_){n=_}let r,a;function u(_){r=_.type,a=_.bytesPerElement}関数 h(_,x){s.drawElements(n,x,r,_*a),t.update(x,n,1)}関数 d(_,x,M){M!==0&&(s.drawElementsInstanced(n,x,r,_*a,M),t.update(x,n,M))}関数 m(_,x,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,x,0,r,_,0,M);let E=0;for(let S=0;S<M;S++)E+=x[S];t.update(E,n,1)}関数 g(_,x,M,T){if(M===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let S=0;S<_.length;S++)d(_[S]/a,x[S],T[S]);else{E.multiDrawElementsInstancedWEBGL(n,x,0,r,_,0,T,0,M);let S=0;for(let R=0;R<M;R++)S+=x[R]*T[R];t.update(S,n,1)}}this.setMode=i,this.setIndex=u,this.render=h,this.renderInstances=d,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function N3(s){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,u){switch(t.calls++,a){case s.TRIANGLES:t.triangles+=u*(r/3);break;case s.LINES:t.lines+=u*(r/2);break;case s.LINE_STRIP:t.lines+=u*(r-1);break;case s.LINE_LOOP:t.lines+=u*r;break;case s.POINTS:t.points+=u*r;break;default:console.error("THREE.WebGLInfo: 不明な描画モード:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function U3(s,e,t){const n=new WeakMap,i=new pn;function r(a,u,h){const d=a.morphTargetInfluences,m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=m!==void 0?m.length:0;let _=n.get(u);if(_===void 0||_.count!==g){let N=function(){z.dispose(),n.delete(u),u.removeEventListener("dispose",N)};var x=N;_!==void 0&&_.texture.dispose();const M=u.morphAttributes.position!==void 0,T=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],R=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let I=0;M===!0&&(I=1),T===!0&&(I=2),E===!0&&(I=3);let O=u.attributes.position.count*I,U=1;O>e.maxTextureSize&&(U=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const F=new Float32Array(O*U*4*g),z=new Lp(F,O,U,g);z.type=Xr,z.needsUpdate=!0;const D=I*4;for(let G=0;G<g;G++){const $=S[G],Q=R[G],ce=P[G],me=O*U*4*G;for(let ue=0;ue<$.count;ue++){const de=ue*D;M===!0&&(i.fromBufferAttribute($,ue),F[me+de+0]=ix,F[me+de+1]=iy,F[me+de+2]= iz,F[me+de+3]=0),T===!0&&(i.fromBufferAttribute(Q,ue),F[me+de+4]=ix,F[me+de+5]=iy,F[m] e+de+6]=iz,F[me+de+7]=0),E===!0&&(i.fromBufferAttribute(ce,ue),F[me+de+8]=ix,F[me+de+ 9]=iy,F[me+de+10]=iz,F[me+de+11]=ce.itemSize===4?iw:1)}}_={カウント:g,テクスチャ:z,サイズ:新規つまり(O,U)},n.set(u,_),u.addEventListener("dispose",N)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)h.getUniforms().setValue(s,"morphTexture",a.morphTexture,t);else{let M=0;for(let E=0;E<d.length;E++)M+=d[E];const T=u.morphTargetsRelative?1:1-M;h.getUniforms().setValue(s,"morphTargetBaseInfluence",T),h.getUniforms().setValue(s,"morphTargetInfluences",d)}h.getUniforms().setValue(s,"morphTargetsTexture",_.texture,t),h.getUniforms().setValue(s,"morphTargetsTextureSize",_.size)}return{update:r}}function O3(s,e,t,n){let i=new WeakMap;function r(h){const d=n.render.frame、m=h.geometry、g=e.get(h,m);if(i.get(g)!==d&&(e.update(g),i.set(g,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),i.get(h)!==d&&(t.update(h.instanceMatrix,s.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,s.ARRAY_BUFFER),i.set(h,d))),h.isSkinnedMesh){const _=h.skeleton;i.get(_)!==d&&(_.update(),i.set(_,d))}return g}function a(){i=new WeakMap}function u(h){const d=h.target;d.removeEventListener("dispose",u),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:r,dispose:a}}const nT=new zn,Z1=new lx(1,1),iT=new Lp,rT=new X0,sT=new Np,J1=[],K1=[],Q1=new Float32Array(16),$1=new Float32Array(9),eM=new Float32Array(4);function Ih(s,e,t){const n=s[0];if(n<=0||n>0)return s;const i=e*t;let r=J1[i];if(r===void 0&&(r=new Float32Array(i),J1[i]=r),e!==0){n.toArray(r,0);for(let a=1,u=0;a!==e;++a)u+=t,s[a].toArray(r,u)}return r}function Ti(s,e){if(s.length!==e.length)return!1;for(let t=0,n=s.length;t<n;t++)if(s[t]!==e[t])return!1;return!0}function Ai(s,e){for(let t=0,n=e.length;t<n;t++)s[t]=e[t]}function d_(s,e){let t=K1[e];t===void 0&&(t=new Int32Array(e),K1[e]=t);for(let n=0;n!==e;++n)t[n]=s.allocateTextureUnit();return t}function F3(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function k3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey)&&(s.uniform2f(this.addr,ex,ey),t[0]=ex,t[1]=ey);else{if(Ti(t,e))return;s.uniform2fv(this.addr,e),Ai(t,e)}}function z3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey||t[2]!==ez)&&(s.uniform3f(this.addr,ex,ey,ez),t[0]=ex,t[1]=ey,t[2]=ez);else if(er!==void 0)(t[0]!==er||t[1]!==eg||t[2]!==eb)&&(s.uniform3f(this.addr,er,eg,eb),t[0]=er,t[1]=eg,t[2]=eb);else{if(Ti(t,e))return;s.uniform3fv(this.addr,e),Ai(t,e)}}関数B3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey||t[2]!==ez||t[3]!==ew)&&(s.uniform4f(this.addr,ex,ey,ez,ew),t[0]=ex,t[1]=ey,t[2]=ez,t[3]=ew);else{if(Ti(t,e))return;s.uniform4fv(this.addr,e),Ai(t,e)}}関数V3(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ti(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),Ai(t,e)}else{if(Ti(t,n))return;eM.set(n),s.uniformMatrix2fv(this.addr,!1,eM),Ai(t,n)}}関数H3(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ti(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),Ai(t,e)}else{if(Ti(t,n))return;$1.set(n),s.uniformMatrix3fv(this.addr,!1,$1),Ai(t,n)}}関数G3(s,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ti(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),Ai(t,e)}else{if(Ti(t,n))return;Q1.set(n),s.uniformMatrix4fv(this.addr,!1,Q1),Ai(t,n)}}関数W3(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}関数X3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey)&&(s.uniform2i(this.addr,ex,ey),t[0]=ex,t[1]=ey);else{if(Ti(t,e))return;s.uniform2iv(this.addr,e),Ai(t,e)}}関数Y3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey||t[2]!==ez)&&(s.uniform3i(this.addr,ex,ey,ez),t[0]=ex,t[1]=ey,t[2]=ez);else{if(Ti(t,e))return;s.uniform3iv(this.addr,e),Ai(t,e)}}関数q3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey||t[2]!==ez||t[3]!==ew)&&(s.uniform4i(this.addr,ex,ey,ez,ew),t[0]=ex,t[1]=ey,t[2]=ez,t[3]=ew);else{if(Ti(t,e))return;s.uniform4iv(this.addr,e),Ai(t,e)}}関数 j3(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}関数 Z3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey)&&(s.uniform2ui(this.addr,ex,ey),t[0]=ex,t[1]=ey);else{if(Ti(t,e))return;s.uniform2uiv(this.addr,e),Ai(t,e)}}関数J3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey||t[2]!==ez)&&(s.uniform3ui(this.addr,ex,ey,ez),t[0]=ex,t[1]=ey,t[2]=ez);else{if(Ti(t,e))return;s.uniform3uiv(this.addr,e),Ai(t,e)}}関数K3(s,e){const t=this.cache;if(ex!==void 0)(t[0]!==ex||t[1]!==ey||t[2]!==ez||t[3]!==ew)&&(s.uniform4ui(this.addr,ex,ey,ez,ew),t[0]=ex,t[1]=ey,t[2]=ez,t[3]=ew);else{if(Ti(t,e))return;s.uniform4uiv(this.addr,e),Ai(t,e)}}function Q3(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i);let r;this.type===s.SAMPLER_2D_SHADOW?(Z1.compareFunction=ex,r=Z1):r=nT,t.setTexture2D(e||r,i)}関数$3(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||rT,i)}関数eL(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||sT,i)}関数tL(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||iT,i)}function nL(s){switch(s){case 5126:return F3;case 35664:return k3;case 35665:return z3;case 35666:return B3;case 35674:return V3;case 35675:return H3;case 35676:return G3;case 5124:case 35670:return W3;case 35667:case 35671:return X3;case 35668:case 35672:return Y3;case 35669:case 35673:return q3;case 5125:return j3;case 36294:return Z3;case 36295:戻り値 J3;ケース 36296:戻り値 K3;ケース 35678:ケース 36198:ケース 36298:ケース 36306:ケース 35682:戻り値 Q3;ケース 35679:ケース 36299:ケース 36307:戻り値 $3;ケース 35680:ケース 36300:ケース 36308:ケース 36293:戻り値 eL;ケース 36289:ケース 36303:ケース 36311:ケース 36292:戻り値 tL}}関数 iL(s,e){s.uniform1fv(this.addr,e)}関数 rL(s,e){const t=Ih(e,this.size,2);s.uniform2fv(this.addr,t)}関数sL(s,e){const t=Ih(e,this.size,3);s.uniform3fv(this.addr,t)}関数 oL(s,e){const t=Ih(e,this.size,4);s.uniform4fv(this.addr,t)}関数 aL(s,e){const t=Ih(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}関数 lL(s,e){const t=Ih(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}関数 uL(s,e){const t=Ih(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}関数cL(s,e){s.uniform1iv(this.addr,e)}関数 fL(s,e){s.uniform2iv(this.addr,e)}関数 hL(s,e){s.uniform3iv(this.addr,e)}関数 dL(s,e){s.uniform4iv(this.addr,e)}関数 pL(s,e){s.uniform1uiv(this.addr,e)}関数 mL(s,e){s.uniform2uiv(this.addr,e)}関数 gL(s,e){s.uniform3uiv(this.addr,e)}関数 _L(s,e){s.uniform4uiv(this.addr,e)}関数 vL(s,e,t){const n=this.cache, i=e.length, r=d_(t,i);Ti(n,r)||(s.uniform1iv(this.addr,r),Ai(n,r));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||nT,r[a])}関数 yL(s,e,t){const n=this.cache, i=e.length, r=d_(t,i);Ti(n,r)||(s.uniform1iv(this.addr,r),Ai(n,r));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||rT,r[a])}関数 xL(s,e,t){const n=this.cache, i=e.length, r=d_(t,i);Ti(n,r)||(s.uniform1iv(this.addr,r), Ai(n,r));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||sT,r[a])}function SL(s,e,t){const n=this.cache, i=e.length, r=d_(t,i);Ti(n,r)||(s.uniform1iv(this.addr,r), Ai(n,r));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||iT,r[a])}function ML(s){switch(s){case 5126:return iL;case 35664:return rL;case 35665:return sL;ケース 35666:戻り値 oL;ケース 35674:戻り値 aL;ケース 35675:戻り値 lL;ケース 35676:戻り値 uL;ケース 5124:ケース 35670:戻り値 cL;ケース 35667:ケース 35671:戻り値 fL;ケース 35668:ケース 35672:戻り値 hL;ケース 35669:ケース 35673:戻り値 dL;ケース 5125:戻り値 pL;ケース 36294:戻り値 mL;ケース 36295:戻り値 gL;ケース 36296:戻り値 _L;ケース 35678:ケース 36198:ケース 36298:ケース 36306:ケース 35682:戻り値 vL;ケース35679:case 36299:case 36307:return yL;case 35680:case 36300:case 36308:case 36293:return xL;case 36289:case 36303:case 36311:case 36292:return SL}}クラス wL{コンストラクタ(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=nL(t.type)}}クラス EL{コンストラクタ(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ML(t.type)}}クラスTL{コンストラクタ(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const u=i[r];u.setValue(e,t[u.id],n)}}}const Fv=/(\w+)(\])?(\[|\.)?/g;function tM(s,e){s.seq.push(e),s.map[e.id]=e}function AL(s,e,t){const n=s.name,i=n.length;for(Fv.lastIndex=0;;){const r=Fv.exec(n),a=Fv.lastIndex;let u=r[1];const h=r[2]==="]",d=r[3];if(h&&(u=u|0),d===void 0||d==="["&&a+2===i){tM(t,d===void 0?new wL(u,s,e):new EL(u,s,e));break}else{let g=t.map[u];g===void 0&&(g=new TL(u),tM(t,g)),t=g}}}クラスNg{コンストラクタ(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const r=e.getActiveUniform(t,i),a=e.getUniformLocation(t,r.name);AL(r,a,this)}}setValue(e,t,n,i){const r=this.map[t];r!==void 0&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const u=t[r],h=n[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function nM(s,e,t){const n=s.createShader(e);return s.shaderSource(n,t),s.compileShader(n),n}const CL=37297;let RL=0;function bL(s,e){const t=s.split(`
`),n=[],i=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=i;a<r;a++){const u=a+1;n.push(`${u===e?">":" "} ${u}: ${t[a]}`)}return n.join(`
`)}const iM=new Wt;function PL(s){fn._getMatrix(iM,fn.workingColorSpace,s);const e=`mat3( ${iM.elements.map(t=>t.toFixed(4))} )`;switch(fn.getTransfer(s)){case fp:return[e,"LinearTransferOETF"];case Sn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: サポートされていないカラースペース: ",s),[e,"LinearTransferOETF"]}}function rM(s,e,t){const n=s.getShaderParameter(e,s.COMPILE_STATUS),i=s.getShaderInfoLog(e).trim();if(n&&i==="")return"";const r=/ERROR: 0:(\d+)/.exec(i);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+i+`

`+bL(s.getShaderSource(e),a)}else return i}function IL(s,e){const t=PL(e);return[`vec4 ${s}( vec4 value ) {`,` return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function LL(s,e){let t;switch(e){case Iw:t="Linear";break;case Lw:t="Reinhard";break;case Dw:t="Cineon";break;case Hy:t="ACESFilmic";break;case Uw:t="AgX";break;case Ow:t="Neutral";break;case Nw:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Rg=new q;function DL(){fn.getLuminanceCoefficients(Rg);const s=Rg.x.toFixed(4),e=Rg.y.toFixed(4),t=Rg.z.toFixed(4);return["floatluminance(const in vec3 rgb) {",` const vec3 weights = vec3(${s}, ${e}, ${t});`," return dot(weights, rgb);","}"].join(`
`)}function NL(s){return[s.extensionClipCullDistance?"#拡張機能 GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#拡張機能 GL_ANGLE_multi_draw : require":""].filter(Gd).join(`
`)}関数 UL(s){const e=[];for(const t in s){const n=s[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}関数OL(s,e){const t={},n=s.getProgramParameter(e,s.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const r=s.getActiveAttrib(e,i),a=r.name;let u=1;r.type===s.FLOAT_MAT2&&(u=2),r.type===s.FLOAT_MAT3&&(u=3),r.type===s.FLOAT_MAT4&&(u=4),t[a]={type:r.type,location:s.getAttribLocation(e,a),locationSize:u}}return t}関数Gd(s){return s!==""}関数sM(s,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps; s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM _HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}関数oM(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const FL=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ey(s){return s.replace(FL,zL)}const kL=new Map;function zL(s,e){let t=Jt[e];if(t===void 0){const n=kL.get(e);if(n!==void 0)t=Jt[n],console.warn('THREE.WebGLRenderer: シェーダーチャンク "%s" は非推奨になりました。代わりに "%s" を使用してください。',e,n);else throw newエラー("#include <"+e+"> を解決できません")}return Ey(t)}const BL=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function aM(s){return s.replace(BL,VL)}function VL(s,e,t,n){let i="";for(let r=parseInt(e);r<parseInt(t);r++)i+=n.replace(/\[\s*i\s*\]/g,""[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return i}function lM(s){let e=`precision ${s.precision} float;
	精度 ${s.precision} int;
	精度 ${s.precision} sampler2D;
	精度 ${s.precision} サンプラーキューブ;
	精度 ${s.precision} サンプラー3D;
	精度 ${s.precision} sampler2DArray;
	精度 ${s.precision} sampler2DShadow;
	精度 ${s.precision} サンプラーCubeShadow;
	精度 ${s.precision} sampler2DArrayShadow;
	精度 ${s.precision} isampler2D;
	精度 ${s.precision} isampler3D;
	精度 ${s.precision} isamplerCube;
	精度 ${s.precision} isampler2DArray;
	精度 ${s.precision} usampler2D;
	精度 ${s.precision} usampler3D;
	精度 ${s.precision} usamplerCube;
	精度 ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?e+=`
# HIGH_PRECISION を定義します`:s.precision==="mediump"?e+=`
#MEDIUM_PRECISION` を定義します:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HL(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===U0?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===Yd?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===fo&&(e="SHADOWMAP_TYPE_VSM"),e}function GL(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case Ha:case Bl:e="ENVMAP_TYPE_CUBE";break;case Ah:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WL(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case Bl:e="ENVMAP_MODE_REFRACTION";break}return e}function XL(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case Pp:e="ENVMAP_BLENDING_MULTIPLY";break;case bw:e="ENVMAP_BLENDING_MIX";break;case Pw:e="ENVMAP_BLENDING_ADD";break}return e}function YL(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function qL(s,e,t,n){const i=s.getContext(),r=t.defines;let a=t.vertexShader,u=t.fragmentShader;const h=HL(t),d=GL(t),m=WL(t),g=XL(t),_=YL(t),x=NL(t),M=UL(r),T=i.createProgram();let E,S,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Gd).join(`
`),E.長さ>0&&(E+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Gd).join(`
`),S.長さ>0&&(S+=`
`)):(E=[lM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR"," attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH"," uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1"," 属性 vec2 uv1;","#endif","#ifdef USE_UV2"," 属性 vec2 uv2;","#endif","#ifdef USE_UV3"," 属性 vec2 uv3;","#endif","#ifdef USE_TANGENT"," 属性 vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )"," 属性 vec4 color;","#elif defined( USE_COLOR )"," 属性 vec3 color;","#endif","#ifdef USE_SKINNING"," 属性 vec4 skinIndex;"," 属性 vec4 skinWeight;","#endif",`
`].filter(Gd).join(`
`),S=[lM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zo?"#define TONE_MAPPING":"",t.toneMapping!==zo?Jt.tonemapping_pars_fragment:"",t.toneMapping!==zo?LL("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Jt.colorspace_pars_fragment,IL("linearToOutputTexel",t.outputColorSpace),DL(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`"uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zo?"#define TONE_MAPPING":"",t.toneMapping!==zo?Jt.tonemapping_pars_fragment:"",t.toneMapping!==zo?LL("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Jt.colorspace_pars_fragment,IL("linearToOutputTexel",t.outputColorSpace),DL(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`"uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zo?"#define TONE_MAPPING":"",t.toneMapping!==zo?Jt.tonemapping_pars_fragment:"",t.toneMapping!==zo?LL("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Jt.colorspace_pars_fragment,IL("linearToOutputTexel",t.outputColorSpace),DL(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Gd).join(`
`)),a=Ey(a),a=sM(a,t),a=oM(a,t),u=Ey(u),u=sM(u,t),u=oM(u,t),a=aM(a),u=aM(u),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,E=[x,"#属性を定義","#出力を可変に定義","#texture2Dテクスチャを定義"].join(`
`)+`
`+E,S=["#define varying in",t.glslVersion===my?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===my?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const P=R+E+a,I=R+S+u,O=nM(i,i.VERTEX_SHADER,P),U=nM(i,i.FRAGMENT_SHADER,I);i.attachShader(T,O),i.attachShader(T,U),t.index0AttributeName!==void 0?i.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(T,0,"position"),i.linkProgram(T);function F(G){if(s.debug.checkShaderErrors){const $=i.getProgramInfoLog(T).trim(),Q=i.getShaderInfoLog(O).trim(),ce=i.getShaderInfoLog(U).trim();let me=!0,ue=!0;if(i.getProgramParameter(T,i.LINK_STATUS)===!1)if(me=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(i,T,O,U);else{const de=rM(i,O,"vertex"),B=rM(i,U,"fragment");console.error("THREE.WebGLProgram: シェーダーエラー "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(T,i.VALIDATE_STATUS)+`

マテリアル名: `+G.name+`
マテリアルタイプ: `+G.type+`

プログラム情報ログ: `+$+`
「+de+」
`+B)}else $!==""?console.warn("THREE.WebGLProgram: プログラム情報ログ:",$):(Q===""||ce==="")&&(ue=!1);ue&&(G.diagnostics={runnable:me,programLog:$,vertexShader:{log:Q,prefix:E},fragmentShader:{log:ce,prefix:S}})}i.deleteShader(O),i.deleteShader(U),z=new Ng(i,T),D=OL(i,T)}let z;this.getUniforms=function(){return z===void 0&&F(this),z};let D;this.getAttributes=function(){return D===void 0&&F(this),D};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=i.getProgramParameter(T,CL)),N},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=RL++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=O,this.fragmentShader=U,this}let jL=0;class ZL{constructor(){this.shaderCache=新しいマップ,this.materialCache=新しいマップ}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e); return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e); return n===void 0&&(n=new JL(e),t.set(e,n)),n}}class JL{constructor(e){this.id=jL++,this.code=e,this.usedTimes=0}}function KL(s,e,t,n,i,r,a){const u=new uc,h=new ZL,d=new Set,m=[],g=i.logarithmicDepthBuffer,_=i.vertexTextures;let x=i.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(D){return d.add(D),D===0?"uv":`uv${D}`}function E(D,N,G,$,Q){const ce=$.fog、me=Q.geometry、ue=D.isMeshStandardMaterial?$.environment:null、de=(D.isMeshStandardMaterial?t:e).get(D.envMap||ue)、B=de&&de.mapping===Ah?de.image.height:null、K=M[D.type];D.precision!==null&&(x=i.getMaxPrecision(D.precision)、x!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"サポートされていません。代わりに",x,"を使用してください。");const J=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,W=J!==void 0?J.length:0;let te=0;me.morphAttributes.position!==void 0&&(te=1),me.morphAttributes.normal!==void 0&&(te=2),me.morphAttributes.color!==void 0&&(te=3);let Pe,se,xe,be;if(K){const on=ho[K];Pe=on.vertexShader,se=on.fragmentShader}else Pe=D.vertexShader,se=D.fragmentShader,h.update(D),xe=h.getVertexShaderID(D),be=h.getFragmentShaderID(D);const Te=s.getRenderTarget(),Xe=s.state.buffers. Depth.getReversed(),gt=Q.isInstancedMesh===!0,et=Q.isBatchedM esh===!0,Lt=!!D.map,Ne=!!D.matcap,Ce=!!de,Y=!!D.aoMap,_t=!!D.lightMap,Fe=!!D.bumpMap,rt=!!D.normalMap,We =!!D.displacementMap,Tt=!!D.emissiveMap,qe=!!D.metalnessMap,X=!!D.roughnessMap,V=D.anisotropy>0,pe=D.clイヤーコート>0、Ee=D.分散>0、Le=D.虹色>0、Ae=D.光沢>0、dt=D.透過>0、je=V&&!!D.異方性マップ、 st=pe&&!!D.clearcoatMap、Bt=pe&&!!D.clearcoatNormalMap、ke=pe&&!!D.clearcoatRoughnessMap、ct=Le&&!!D.iridescenceMap、At=Le&&!!D.iridescenceThicknessMap、It=Ae&&!!D.sheenColorMap、ft=Ae&&!!D.sheenRoughnessMap、Qt=!!D.specularMap、Nt=!!D.specularColorMap、gn=!!D.specularIntensityMap、re=dt&&!!D.transmissionMap、Je=dt&&!!D.thicknessMap、Me=!!D.gradientMap、Re=!!D.alphaMap、tt=D.alphaTest>0、Ke=!!D.alphaHash、Ut=!!D.extensions;let An=zo;D.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(An=s.toneMapping);const Yn={shaderID:K,shaderType:D.type,shaderName:D.name,vertexShader:Pe,fragmentShader:se,defines:D.defines,customVertexShaderID:xe,customFragmentShaderID:be,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:x,batching:et,batchingColor:et&&Q._colorsTexture!==null,instancing:gt,instancingColor:gt&&Q.instanceカラー!==null、インスタンス化モーフ:gt&&Q.morphTexture!==null、頂点テクスチャをサポート:_、出力カラースペース:Te===null?s.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:vc、アルファ to カバレッジ:!!D.アルファ to カバレッジ、マップ:Lt、マットキャップ:Ne、環境マップ:Ce、環境マップモード:Ce&&de.mapping、環境マップキューブ UV 高さ:B、aoMap:Y、ライトマップ:_t、バンプマップ:Fe、法線マップ:rt、表示cementMap:_&&We、emissiveMap:Tt、normalMapObjectSpace:rt&&D.normalMapType===Gw、normalMapTangentSpace:rt&&D.normalMapType===Wl、metalnessMap:qe、roughnessMap:X、anisotropy:V、anisotropyMap:je、clearcoat:pe、clearcoatMap:st、clearcoatNormalMap:Bt、clearcoatRoughnessMap:ke、dispersion:Ee、iridescence:Le、iridescenceMap:ct、iridescenceThicknessMap:At、s heen:Ae、sheenColorMap:It、sheenRoughnessMap:ft、specularMap:Qt、specularColorMap:Nt、specularIntensityMap:gn、transmission:dt、transmissionMap:re、thicknessMap:Je、gradientMap:Me、opaque:D.transparent===!1&&D.blending===oc&&D.alphaToCoverage===!1、alphaMap:Re、alphaTest:tt、alphaHash:Ke、combine:D.combine、mapUv:Lt&&T(D.map.channel)、aoMapUv:Y&&T(D.aoMap.channel),lightMapUv:_t&&T(D.lightMap.channel),bumpMapUv:Fe&&T(D.bumpMap.channel),normalMapUv:rt&&T(D.normalMap.channel),displacementMapUv:We&&T(D.displacementMap.channel),emissiveMapUv:Tt&&T(D.emissiveMap.channel),metalnessMapUv:qe&&T(D.metalnessMap.channel),roughnessMapUv:X&&T(D.roughnessMap.channel),anisotropyMapUv:je&&T(D.anisotropyMap.channel),clearcoatMapUv:st& &T(D.clearcoatMap.channel),clearcoatNormalMapUv:Bt&&T(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&T(D.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&T(D.iridescenceMap.channel),iridescenceThicknessMapUv:At&&T(D.iridescenceThicknessMap.channel),sheenColorMapUv:It&&T(D.sheenColorMap.channel),sheenRoughnessMapUv:ft&&T(D.sheenRoughnessMap.channel),specularMa pUv:Qt&&T(D.specularMap.channel),specularColorMapUv:Nt&&T(D.specularColorMap.channel),specularIntensityMapUv:gn&&T(D.specularIntensityMap.channel),transmissionMapUv:re&&T(D.transmissionMap.channel),thicknessMapUv:Je&&T(D.thicknessMap.channel),alphaMapUv:Re&&T(D.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(rt||V),vertexColors:D.vertexColors,vertexAlphas:D.vert exColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4、pointsUvs:Q.isPoints===!0&&!!me.attributes.uv&&(Lt||Re)、fog:!!ce、useFog:D.fog===!0、fogExp2:!!ce&&ce.isFogExp2、flatShading:D.flatShading===!0、sizeAttenuation:D.sizeAttenuation===!0、logarithmicDepthBuffer:g、reverseDepthBuffer:Xe、skinning:Q.isSkinnedMesh===!0、morphTargets:me.morphAttributes.position!==void 0、morphNormals:me.morphAttributes.normal!==void 0、morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:te,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:D.dithering, shadowMapEnabled:s.shadowMap.enabled&&G.length>0、shadowMapType:s.shadowMap.type、toneMapping:An、decodeVideoTexture:Lt&&D.map.isVideoTexture===!0&&fn.getTransfer(D.map.colorSpace)===Sn、decodeVideoTextureEmissive:Tt&&D.emissiveMap.isVideoTexture===!0&&fn.getTransfer(D.emissiveMap. colorSpace)===Sn、premultipliedAlpha:D.premultipliedAlpha、doubleSided:D.side===Uo、flipSided:D.side===Ar、useDepthPacking:D.depthPacking>=0、depthPacking:D.depthPacking||0、index0AttributeName:D.index0AttributeName、extensionClipCullDistance:Ut&&D.extensions.clipCullDistance===!0&&n。has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ut&&D.extensions.multiDraw===!0||et)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return Yn.vertexUv1s=d.has(1),Yn.vertexUv2s=d.has(2),Yn.vertexUv3s=d.has(3),d.clear(),Yn}function S(D){const N=[];if(D.shaderID?N.push(D.shaderID):(N.push(D.customVertexShaderID),N.push(D.customFragmentShaderID)),D.defines!==void 0)for(const G in D.defines)N.push(G),N.push(D.defines[G]);return D.isRawShaderMaterial===!1&&(R(N,D),P(N,D),N.push(s.outputColorSpace)),N.push(D.customProgramCacheKey),N.join()}関数R(D,N){D.push(N.precision),D.push(N.outputColorSpace),D.push(N.envMapMode),D.push(N.envMapCubeUVHeight),D.push(N.mapUv),D.push(N.alphaMapUv),D.push(N.lightMapUv),D.push(N.aoMapUv),D.push(N.bumpMapUv),D.push(N.normalMapUv),D.push(N.displacementMapUv),D.push(N.emissiveMapUv),D.push(N.metalnessMapUv),D.push(N.roughn essMapUv),D.push(N.anisotropyMapUv),D.push(N.clearcoatMapUv),D.push(N.clearcoatNormalMapUv),D.push(N.clearcoatRoughnessMapUv),D.push(N.iridescenceMapUv),D.push(N.iridescenceThicknessMapUv),D.push(N.sheenColorMapUv),D.push(N.sheenRoughnessMapUv),D.push(N.specularMapUv),D.push(N.specularColorMapUv),D.push(N.specula rIntensityMapUv),D.push(N.transmissionMapUv),D.push(N.thicknessMapUv),D.push(N.combine),D.push(N.fogExp2),D.push(N.sizeAttenuation),D.push(N.morphTargetsCount),D.push(N.morphAttributeCount),D.push(N.numDirLights),D.push(N.numPointLights),D.push(N.numSpotLights),D.push(N.numSpotLightMaps),D.push(N.numHemiLights),D .push(N.numRectAreaLights),D.push(N.numDirLightShadows),D.push(N.numPointLightShadows),D.push(N.numSpotLightShadows),D.push(N.numSpotLightShadowsWithMaps),D.push(N.numLightProbes),D.push(N.shadowMapType),D.push(N.toneMapping),D.push(N.numClippingPlanes),D.push(N.numClipIntersection),D.push(N.depthPacking)}関数P(D,N){u.disableAll(),N.supportsVertexTextures&&u.enable(0),N.instancing&&u.enable(1),N.instancingColor&&u.enable(2),N.instancingMorph&&u.enable(3),N.matcap&&u.enable(4),N.envMap&&u.enable(5),N.normalMapObjectSpace&&u.enable(6),N.normalMapTangentSpace&&u.enable(7),N.clearcoat&&u.enable(8),N.iridescence&&u.enable(9),N.alphaTest&&u.enable(10),N.vertexColors&&u.enable(11),N.vertexAlphas&&u.enable(12),N.v ertexUv1s&&u.enable(13),N.vertexUv2s&&u.enable(14),N.vertexUv3s&&u.enable(15),N.vertexTangents&&u.enable(16),N.anisotropy&&u.enable(17),N.alphaHash&&u.enable(18),N.batching&&u.enable(19),N.dispersion&&u.enable(20),N.batchingColor&&u.enable(21),D.push(u.mask),u.disableAll(),N.fog&&u.enable(0),N.useFog&&u.enable(1),N.flatShading&&u.enable(2),N.logarithmicDepthBuffer&&u.enable(3),N.reverseDepthBuffer&&u.有効(4),N.スキニング&&u.有効(5),N.モーフターゲット&&u.有効(6),N.モーフノーマル&&u.有効(7),N.モーフカラー&&u.有効(8),N.プレマルチプライアルファ&&u.有効(9),N.シャドウマップ有効&&u.有効(10),N.ダブルサイド&&u.有効(11),N.フリップサイド&&u.有効(12),N.デプスパッキング&&u.有効e(13),N.ディザリング&&u.enable(14),N.透過&&u.enable(15),N.光沢&&u.enable(16),N.不透明&&u.enable(17),N.ポイント紫外線&&u.enable(18),N.デコードビデオテクスチャ&&u.enable(19),N.デコードビデオテクスチャエミッシブ&&u.enable(20),N.アルファカバレッジ&&u.enable(21),D.プッシュ(u.マスク)}関数I(D){const N=M[D.type];let G;if(N){const $=ho[N];G=nE.clone($.uniforms)}else G=D.uniforms;return G}関数 O(D,N){let G;for(let $=0,Q=m.length;$<Q;$++){const ce=m[$];if(ce.cacheKey===N){G=ce,++G.usedTimes;break}}return G===void 0&&(G=new qL(s,N,D,r),m.push(G)),G}関数 U(D){if(--D.usedTimes===0){const N=m.indexOf(D);m[N]=m[m.length-1],m.pop(),D.destroy()}}関数 F(D){h.remove(D)}関数z(){h.dispose()}return{getParameters:E,getProgramCacheKey:S,getUniforms:I,acquireProgram:O,releaseProgram:U,releaseShaderCache:F,programs:m,dispose:z}}function QL(){let s=new WeakMap;function e(a){return s.has(a)}function t(a){let u=s.get(a);return u===void 0&&(u={},s.set(a,u)),u}function n(a){s.delete(a)}function i(a,u,h){s.get(a)[u]=h}function r(){s=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:r}}function $L(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:sz!==ez?sz-ez:s.id-e.id}function uM(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:sz!==ez?ez-sz:s.id-e.id}function cM(){const s=[];let e=0;const t=[],n=[],i=[];function r(){e=0,t.length=0,n.length=0,i.length=0}function a(g,_,x,M,T,E){let S=s[e];return S===void 0?(S={id:g.id,object:g,geometry:_,material:x,groupOrder:M,renderOrder:g.renderOrder,z:T,group:E},s[e]=S):(S.id=g.id,S.object=g,S.geometry=_,S.material=x,S.groupOrder=M,S.renderOrder=g.renderOrder,Sz=T,S.group=E),e++,S}function u(g,_,x,M,T,E){const S=a(g,_,x,M,T,E);x.transmission>0?n.pusマスク)}関数I(D){const N=M[D.type];let G;if(N){const $=ho[N];G=nE.clone($.uniforms)}else G=D.uniforms;return G}関数O(D,N){let G;for(let $=0,Q=m.length;$<Q;$++){const ce=m[$];if(ce.cacheKey===N){G=ce,++G.usedTimes;break}}return G===void 0&&(G=new qL(s,N,D,r),m.push(G)),G}関数U(D){if(--D.usedTimes===0){const N=m.indexOf(D);m[N]=m[m.length-1],m.pop(),D.destroy()}}関数F(D){h.remove(D)}function z(​​){h.dispose()}return{getParameters:E,getProgramCacheKey:S,getUniforms:I,acquireProgram:O,releaseProgram:U,releaseShaderCache:F,programs:m,dispose:z}}function QL(){let s=new WeakMap;function e(a){return s.has(a)}function t(a){let u=s.get(a);return u===void 0&&(u={},s.set(a,u)),u}function n(a){s.delete(a)}function i(a,u,h){s.get(a)[u]=h}function r(){s=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:r}}function $L(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:sz!==ez?sz-ez:s.id-e.id}function uM(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:sz!==ez?ez-sz:s.id-e.id}function cM(){const s=[];let e=0;const t=[],n=[],i=[];function r(){e=0,t.length=0,n.length=0,i.length=0}function a(g,_,x,M,T,E){let S=s[e];return S===void 0?(S={id:g.id,object:g,geometry:_,material:x,groupOrder:M,renderOrder:g.renderOrder,z:T,group:E},s[e]=S):(S.id=g.id,S.object=g,S.geometry=_,S.material=x,S.groupOrder=M,S.renderOrder=g.renderOrder,Sz=T,S.group=E),e++,S}function u(g,_,x,M,T,E){const S=a(g,_,x,M,T,E);x.transmission>0?n.pusマスク)}関数I(D){const N=M[D.type];let G;if(N){const $=ho[N];G=nE.clone($.uniforms)}else G=D.uniforms;return G}関数O(D,N){let G;for(let $=0,Q=m.length;$<Q;$++){const ce=m[$];if(ce.cacheKey===N){G=ce,++G.usedTimes;break}}return G===void 0&&(G=new qL(s,N,D,r),m.push(G)),G}関数U(D){if(--D.usedTimes===0){const N=m.indexOf(D);m[N]=m[m.length-1],m.pop(),D.destroy()}}関数F(D){h.remove(D)}function z(​​){h.dispose()}return{getParameters:E,getProgramCacheKey:S,getUniforms:I,acquireProgram:O,releaseProgram:U,releaseShaderCache:F,programs:m,dispose:z}}function QL(){let s=new WeakMap;function e(a){return s.has(a)}function t(a){let u=s.get(a);return u===void 0&&(u={},s.set(a,u)),u}function n(a){s.delete(a)}function i(a,u,h){s.get(a)[u]=h}function r(){s=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:r}}function $L(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:sz!==ez?sz-ez:s.id-e.id}function uM(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:sz!==ez?ez-sz:s.id-e.id}function cM(){const s=[];let e=0;const t=[],n=[],i=[];function r(){e=0,t.length=0,n.length=0,i.length=0}function a(g,_,x,M,T,E){let S=s[e];return S===void 0?(S={id:g.id,object:g,geometry:_,material:x,groupOrder:M,renderOrder:g.renderOrder,z:T,group:E},s[e]=S):(S.id=g.id,S.object=g,S.geometry=_,S.material=x,S.groupOrder=M,S.renderOrder=g.renderOrder,Sz=T,S.group=E),e++,S}function u(g,_,x,M,T,E){const S=a(g,_,x,M,T,E);x.transmission>0?n.pusT,E){let S=s[e];return S===void 0?(S={id:g.id,object:g,geometry:_,material:x,groupOrder:M,renderOrder:g.renderOrder,z:T,group:E},s[e]=S):(S.id=g.id,S.object=g,S.geometry=_,S.material=x,S.groupOrder=M,S.renderOrder=g.renderOrder,Sz=T,S.group=E),e++,S}function u(g,_,x,M,T,E){const S=a(g,_,x,M,T,E);x.transmission>0?n.pusT,E){let S=s[e];return S===void 0?(S={id:g.id,object:g,geometry:_,material:x,groupOrder:M,renderOrder:g.renderOrder,z:T,group:E},s[e]=S):(S.id=g.id,S.object=g,S.geometry=_,S.material=x,S.groupOrder=M,S.renderOrder=g.renderOrder,Sz=T,S.group=E),e++,S}function u(g,_,x,M,T,E){const S=a(g,_,x,M,T,E);x.transmission>0?n.push(S):x.transparent===!0?i.push(S):t.push(S)}関数 h(g,_,x,M,T,E){const S=a(g,_,x,M,T,E);x.transmission>0?n.unshift(S):x.transparent===!0?i.unshift(S):t.unshift(S)}関数 d(g,_){t.length>1&&t.sort(g||$L),n.length>1&&n.sort(_||uM),i.length>1&&i.sort(_||uM)}関数 m(){for(let g=e,_=s.length;g<_;g++){const x=s[g];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:n,transparent:i,init:r,push:u,unshift:h,finish:m,sort:d}}function eD(){let s=new WeakMap;function e(n,i){const r=s.get(n);let a;return r===void 0?(a=new cM,s.set(n,[a])):i>=r.length?(a=new cM,r.push(a)):a=r[i],a}function t(){s=new WeakMap}return{get:e,dispose:t}}function tD(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new lt};break;case"SpotLight":t={position:new q,direction:new q,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":t={color:new lt,position:new q,halfWidth:new q,halfHeight:new q};break}return s[e.id]=t,t}}}function nD(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=t,t}}}let iD=0;function rD(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function sD(s){const e=new tD,t=nD(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShad owMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(新しいq);const i=新しいq、r=新しいDt、a=新しいDt;関数u(d){let m=0、g=0、_=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let x=0、M=0、T=0、E=0、S=0、R=0、P=0、I=0、O=0、U=0、F=0;d.sort(rD);for(let D=0、N=d.length;D<N;D++){const G=d[D]、$=G.color、Q=G.intensity、ce=G.distance、me=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)m+=$.r*Q、g+=$.g*Q、_+=$.b*Q;else if(G.isLightProbe){for(let ue=0;ue<9;ue++)n.probe[ue].addScaledVector(G.sh.coefficients[ue],Q);F++}else if(G.isDirectionalLight){const ue=e.get(G);if(ue.color.copy(G.color).multiplyScalar(G.intensity),G.castShadow){const de=G.shadow、B=t.get(G);B.shadowIntensity=de.intensity、B.shadowBias=de.bias、B.shadowNormalBias=de.normalBias、B.shadowRadius=de.radius、B.shadowMapSize=de.mapSize、n.directionalShadow[x]=B、n.directionalShadowMap[x]=me、n.directionalShadowMatrix[x]=G.shadow.matrix、R++}n.directional[x]=ue、x++}else if(G.isSpotLight){const ue=e.get(G);ue.position.setFromMatrixPosition(G.matrixWorld),ue.color.copy($).multiplyScalar(Q),ue.distance=ce,ue.coneCos=Math.cos(G.angle),ue.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),ue.decay=G.decay,n.spot[T]=ue;const de=G.shadow;if(G.map&&(n.spotLightMap[O]=G.map,O++,de.updateMatrices(G),G.castShadow&&U++),n.spotLightMatrix[T]=de.matrix,G.castShadow){const B=t.get(G);B.shadowIntensity=de.intensity,B.shadowBias=de.bias,B.shadowNormalBias=de.normalBias,B.shadowRadius=de.radius,B.shadowMapSize=de.mapSize,n.spotShadow[T]=B,n.spotShadowMap[T]=me,I++}T++}else if(G.isRectAreaLight){const ue=e.get(G);ue.color.copy($).multiplyScalar(Q),ue.halfWidth.set(G.width*.5,0,0),ue.halfHeight.set(0,G.height*.5,0),n.rectArea[E]=ue,E++}else if(G.isPointLight){const ue=e.get(G);if(ue.color.copy(G.color).multiplyScalar(G.intensity),ue.distance=G.distance,ue.decay=G.decay,G.castShadow){const de=G.shadow,B=t.get(G);B.shadowIntensity=de.intensity,B.shadowBias=de.bias,B.shadowNormalBias=de.normalBias,B.shadowRadius=de.radius,B.shadowMapSize=de.mapSize,B.shadowCameraNear=de.camera.near,B.shadowCameraFar=de.camera.far,n.pointShadow[M]=B,n.pointShadowMap[M]=me,n.pointShadowMatrix[M]=G.shadow.matrix,P++}n.point[M]=ue,M++}else if(G.isHemisphereLight){const ue=e.get(G);ue.skyColor.copy(G.color).multiplyScalar(Q),ue.groundColor.copy(G.groundColor).multiplyScalar(Q),n.hemi[S]=ue,S++}}E>0&&(s.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=$e.LTC_FLOAT_1,n.rectAreaLTC2=$e.LTC_FLOAT_2):(n.rectAreaLTC1=$e.LTC_HALF_1,n.rectAreaLTC2=$e.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=_;const z=n.hash;(z.directionalLength!==x||z.pointLength!==M||z.spotLength!==T||z.rectAreaLength!==E||z.hemiLength!==S||z.numDirectionalShadows!==R||z.numPointShadows!==P||z.numSpotShadows!==I||z.numSpotMaps!==O||z.numLightProbes!==F)&&(n.directional.length=x,n.spot.length=T,n.rectArea.length=E,n.point.length=M,n.hemi.length=S,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=P,n.p ointShadowMap.length=P、n.spotShadow.length=I、n.spotShadowMap.length=I、n.directionalShadowMatrix.length=R、n.pointShadowMatrix.length=P、n.spotLightMatrix.length=I+OU、n.spotLightMap.length=O、n.numSpotLightShadowsWithMaps=U、n.numLightProbes=F、z.directionalLength=x、z.pointLength=M、z.spotLength=T、z.rectAreaLength=E、z.hemiLength=S、z.numDirectionalShadows=R、z.numPointShadows=P、z.numSpotShadows=I、z.numSpotMaps=O、z.numLightProbes=F,n.version=iD++)}function h(d,m){let g=0,_=0,x=0,M=0,T=0;const E=m.matrixWorldInverse;for(let S=0,R=d.length;S<R;S++){const P=d[S];if(P.isDirectionalLight){const I=n.directional[g];I.direction.setFromMatrixPosition(P.matrixWorld),i.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(E),g++}else if(P.isSpotLight){const I=n.spot[x];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(E),I.direction.setFromMatrixPosition(P.matrixWorld),i.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(E),x++}else if(P.isRectAreaLight){const I=n.rectArea[M];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(E),a.identity(),r.copy(P.matrixWorld),r.premultiply(E),a.extractRotation(r),I.halfWidth.set(P.width*.5,0,0),I.halfHeight.set(0,P.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),M++}else if(P.isPointLight){const I=n.point[_];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(E),_++}else if(P.isHemisphereLight){const I=n.hemi[T];I.direction.setFromMatrixPosition(P.matrixWorld),I.direction.transformDirection(E),T++}}}return{setup:u,setupView:h,state:n}}function fM(s){const e=new sD(s),t=[],n=[];function i(m){d.camera=m,t.length=0,n.length=0}function r(m){t.push(m)}function a(m){n.push(m)}function u(){e.setup(t)}function h(m){e.setupView(t,m)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:d,setupLights:u,setupLightsView:h,pushLight:r,pushShadow:a}}function oD(s){let e=new WeakMap;function t(i,r=0){const a=e.get(i);let u;return a===void 0?(u=new fM(s),e.set(i,[u])):r>=a.length?(u=new fM(s),a.push(u)):u=a[r],u}function n(){e=new WeakMap}return{get:t,dispose:n}}const aD=`void main() {direction.transformDirection(E),T++}}}return{setup:u,setupView:h,state:n}}function fM(s){const e=new sD(s),t=[],n=[];function i(m){d.camera=m,t.length=0,n.length=0}function r(m){t.push(m)}function a(m){n.push(m)}function u(){e.setup(t)}function h(m){e.setupView(t,m)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:d,setupLights:u,setupLightsView:h,pushLight:r,pushShadow:a}}function oD(s){let e=new WeakMap;function t(i,r=0){const a=e.get(i);let u;return a===void 0?(u=new fM(s),e.set(i,[u])):r>=a.length?(u=new fM(s),a.push(u)):u=a[r],u}function n(){e=new WeakMap}return{get:t,dispose:n}}const aD=`void main() {direction.transformDirection(E),T++}}}return{setup:u,setupView:h,state:n}}function fM(s){const e=new sD(s),t=[],n=[];function i(m){d.camera=m,t.length=0,n.length=0}function r(m){t.push(m)}function a(m){n.push(m)}function u(){e.setup(t)}function h(m){e.setupView(t,m)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:d,setupLights:u,setupLightsView:h,pushLight:r,pushShadow:a}}function oD(s){let e=new WeakMap;function t(i,r=0){const a=e.get(i);let u;return a===void 0?(u=new fM(s),e.set(i,[u])):r>=a.length?(u=new fM(s),a.push(u)):u=a[r],u}function n(){e=new WeakMap}return{get:t,dispose:n}}const aD=`void main() {
	gl_Position = vec4( 位置, 1.0 );
}`,lD=`uniform sampler2D shadow_pass;
均一な vec2 解像度。
均一なフロート半径;
#include <パッキング>
void main() {
	定数フロートサンプル = float( VSM_SAMPLES );
	浮動小数点平均 = 0.0;
	浮動小数点数の二乗平均 = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = サンプル <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < サンプル; i ++ ) {
		フロート uvOffset = uvStart + i * uvStride;
		#ifdef 水平パス
			vec2 分布 = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * 半径 ) / 解像度 ) );
			平均 += 分布.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		＃それ以外
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			平均 += 深さ;
			二乗平均 += 深さ * 深さ;
		#endif
	}
	平均 = 平均 / サンプル数;
	squared_mean = squared_mean / サンプル;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( 平均、 std_dev ) );
}`;function uD(s,e,t){let n=new Up;const i=new Ie,r=new Ie,a=new pn,u=new gx({depthPacking:Hw}),h=new _x,d={},m=t.maxTextureSize,g={[Va]:Ar,[Ar]:Va,[Uo]:Uo},_=new go({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:aD,fragmentShader:lD}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const M=new Kt;M.setAttribute("position",new Tn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new pi(M,_),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=U0;let S=this.type;this.render=function(U,F,z){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||U.length===0)return;const D=s.getRenderTarget(),N=s.getActiveCubeFace(),G=s.getActiveMipmapLevel(),$=s.state;$.setBlending(za),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const Q=S!==fo&&this.type===fo,ce=S===fo&&this.type!==fo;for(let me=0,ue=U.length;me<ue;me++){const de=U[me],B=de.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",de,"には影。");続ける}if(B.autoUpdate===!1&&B.needsUpdate===!1)続ける;i.copy(B.mapSize);const K=B.getFrameExtents();if(i.multiply(K),r.copy(B.mapSize),(ix>m||iy>m)&&(ix>m&&(rx=Math.floor(m/Kx),ix=rx*Kx,B.mapSize.x=rx),iy>m&&(ry=Math.floor(m/Ky),iy=ry*Ky,B.mapSize.y=ry)),B.map===null||Q===!0||ce===!0){const W = this.type! = = fo?{minFilter:qi、magFilter:qi}:{};B.map! = = null&&B.map.dispose()、B.map = new Wo(ix、iy、W)、B.map.texture.name = de.name + ".shadowMap",B.camera.updateProjectionMatrix()}s.setRenderTarget(B.map)、s.clear();const J = B.getViewportCount();for(let W = 0;W < J;W++){const te=B.getViewport(W);a.set(rx*te.x,ry*te.y,rx*te.z,ry*te.w),$.viewport(a),B.updateMatrices(de,W),n=B.getFrustum(),I(F,z,B.camera,de,this.type)}B.isPointLightShadow!==!0&&this.type===fo&&R(B,z),B.needsUpdate=!1}S=this.type,E.needsUpdate=!1,s.setRenderTarget(D,N,G)};function R(U,F){const z=e.update(T);_.defines.VSM_SAMPLES!==U.blurSamples&&(_.defines.VSM_SAMPLES=U.blurSamples,x.defines.VSM_SAMPLES=U.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Wo(ix,iy)),_.uniforms.shadow_pass.value=U.map.texture,_.uniforms.resolution.value=U.mapSize,_.uniforms.radius.value=U.radius,s.setRenderTarget(U.mapPass),s.clear(),s.renderBufferDirect(F,null,z,_,T,null),x.uniforms.shadow_pass.value=U.mapPass.texture,x.uniforms.resolution.value=U.mapSize,x.uniforms.radius.value=U.radius,s.setRenderTarget(U.map),s.clear(),s.renderBufferDirect(F,null,z,x,T,null)}関数P(U,F,z,D){let N=null;const G=z.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(G!==void 0)N=G;else if(N=z.isPointLight===!0?h:u,s.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){const $=N.uuid,Q=F.uuid;let ce=d[$];ce===void 0&&(ce={},d[$]=ce);let me=ce[Q];me===void 0&&(me=N.clone(),ce[Q]=me,F.addEventListener("dispose",O)),N=me}if(N.visible=F.visible,N.wireframe=F.wireframe,D===fo?N.side=F.shadowSide!==null?F.shadowSide:F.side:N.side=F.shadowSide!==null?F.shadowSide:g[F.side],N.alphaMap=F.alphaMap,N.alphaTest=F.alphaTest,N.map=F.map,N.clipShadows=F.clipShadows,N.cl ippingPlanes=F.clippingPlanes、N.clipIntersection=F.clipIntersection、N.displacementMap=F.displacementMap、N.displacementScale=F.displacementScale、N.displacementBias=F.displacementBias、N.wireframeLinewidth=F.wireframeLinewidth、N.linewidth=F.linewidth、z.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const $=s.properties.get(N);$.light=z}return N}function I(U,F,z,D,N){if(U.visible===!1)return;if(U.layers.test(F.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&N===fo)&&(!U.frustumCulled||n.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,U.matrixWorld);const Q=e.update(U),ce=U.material;if(Array.isArray(ce)){const me=Q.groups;for(let ue=0,de=me.length;ue<de;ue++){const B=me[ue],K=ce[B.materialIndex];if(K&&K.visible){const J=P(U,K,D,N);U.onBeforeShadow(s,U,F,z,Q,J,B),s.renderBufferDirect(z,null,Q,J,U,B),U.onAfterShadow(s,U,F,z,Q,J,B)}}}else if(ce.visible){const me=P(U,ce,D,N);U.onBeforeShadow(s,U,F,z,Q,me,null),s.renderBufferDirect(z,null,Q,me,U,null),U.onAfterShadow(s,U,F,z,Q,me,null)}}const $=U.children;for(let Q=0,ce=$.length;Q<ce;Q++)I($[Q],F,z,D,N)}関数 O(U){U.target.removeEventListener("dispose",O);for(const z in d){const D=d[z],N=U.target.uuid;N in D&&(D[N].dispose(),delete D[N])}}}const cD={[Vg]:Hg,[Gg]:Yg,[Wg]:qg,[mc]:Xg,[Hg]:Vg,[Yg]:Gg,[qg]:Wg,[Xg]:mc};関数 fD(s,e){関数 t(){let re=!1;const Je=new pn;let Me=null;const Re=new pn(0,0,0,0);return{setMask:function(tt){Me!==tt&&!re&&(s.colorMask(tt,tt,tt,tt),Me=tt)},setLocked:function(tt){re=tt},setClear:function(tt,Ke,Ut,An,Yn){Yn===!0&&(tt*=An,Ke*=An,Ut*=An),Je.set(tt,Ke,Ut,An),Re.equals(Je)===!1&&(s.clearColor(tt,Ke,Ut,An),Re.copy(Je))},reset:function(){re=!1,Me=null,Re.set(-1,0,0,0)}}}function n(){let re=!1,Je=!1,Me=null,Re=null,tt=null;return{setReversed:function(Ke){if(Je!==Ke){const Ut=e.get("EXT_clip_control");Je?Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.ZERO_TO_ONE_EXT):Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.NEGATIVE_ONE_TO_ONE_EXT);const An=tt;tt=null,this.setClear(An)}Je=Ke},getReversed:function(){return Je},setTest:function(Ke){Ke?Te(s.DEPTH_TEST):Xe(s.DEPTH_TEST)},setMask:function(Ke){Me!==Ke&&!re&&(s.depthMask(Ke),Me=Ke)},setFunc:function(Ke){if(Je&&(Ke=cD[Ke]),Re!==Ke){switch(Ke){case Vg:s.depthFunc(s.NEVER);break;case Hg:s.depthFunc(s.ALWAYS);break;case Gg:s.depthFunc(s.LESS);break;case mc:s.depthFunc(s.LEQUAL);break;case Wg:s.depthFunc(s.EQUAL);break;case Xg:s.depthFunc(s.GEQUAL);break;case Yg:s.depthFunc(s.GREATER);break;case qg:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}Re=Ke}},setLocked:function(Ke){re=Ke},setClear:function(Ke){tt!==Ke&&(Je&&(Ke=1-Ke),s.clearDepth(Ke),tt=Ke)},reset:function(){re=!1,Me=null,Re=null,tt=null,Je=!1}}}function i(){let re=!1,Je=null,Me=null,Re=null,tt=null,Ke=null,Ut=null,An=null,Yn=null;return{setTest:function(on){re||(on?Te(s.STENCIL_TEST):Xe(s.STENCIL_TEST))},setMask:function(on){Je!==on&&!re&&(s.stencilMask(on),Je=on)},setFunc:function(on,Oi,Fi){(Me!==on||Re!==Oi||tt!==Fi)&&(s.stencilFunc(on,Oi,Fi),Me=on ,Re=Oi,tt=Fi)},setOp:function(on,Oi,Fi){(Ke!==on||Ut!==Oi||An!==Fi)&&(s.stencilOp(on,Oi,Fi),Ke=on,Ut=Oi,An=Fi)},setLocked:function(on){re=on},setClear:function(on){Yn!==on&&(s.clearStencil(on),Yn=on)},reset:function(){re=!1,Je=null,Me=null,Re=null,tt=null,Ke=null,Ut=null,An=null,Yn=null}}}const r=新しいt、a=新しいn、u=新しいi、h=新しいWeakMap、d=新しいWeakMap;m={}、g={}、_=新しいWeakMap、x=[]、M=null、T=!1、E=null、S=null、R=null、P=null、I=null、O=null、U=null、F=新しいlt(0,0,0)、z=0、D=!1、N=null、G=null、$=null、Q=null、ce=null;定数me=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);ue=!1、de=0;定数B=s.getParameter(s.VERSION);B.indexOf("WebGL")!==-1?(de=parseFloat(/^WebGL (\d)/.exec(B)[1]),ue=de>=1):B.indexOf("OpenGL ES")!==-1&&(de=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),ue=de>=2);let K=null,J={};const W=s.getParameter(s.SCISSOR_BOX),te=s.getParameter(s.VIEWPORT),Pe=new pn().fromArray(W),se=new pn().fromArray(te);function xe(re,Je,Me,Re){const tt=new Uint8Array(4),Ke=s.createTexture();s.bindTexture(re,Ke),s.texParameteri(re,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(re,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let Ut=0;Ut<Me;Ut++)re===s.TEXTURE_3D||re===s.TEXTURE_2D_ARRAY?s.texImage3D(Je,0,s.RGBA,1,1,Re,0,s.RGBA,s.UNSIGNED_BYTE,tt):s.texImage2D(Je+Ut,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,tt);return Ke}const be={};be[s.TEXTURE_2D]=xe(s.TEXTURE_2D,s.TEXTURE_2D,1),be[s.TEXTURE_CUBE_MAP]=xe(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[s.TEXTURE_2D_ARRAY]=xe(s.TEXTURE_2D_ARRAY,s.TEXTURE_ 2D_ARRAY,1,1),be[s.TEXTURE_3D]=xe(s.TEXTURE_3D,s.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),u.setClear(0),Te(s.DEPTH_TEST),a.setFunc(mc),Fe(!1),rt(uy),Te(s.CULL_FACE),Y(za);関数Te(re){m[re]!==!0&&(s.enable(re),m[re]=!0)}関数 Xe(re){m[re]!==!1&&(s.disable(re),m[re]=!1)}関数 gt(re,Je){return g[re]!==Je?(s.bindFramebuffer(re,Je),g[re]=Je,re===s.DRAW_FRAMEBUFFER&&(g[s.FRAMEBUFFER]=Je),re===s.FRAMEBUFFER&&(g[s.DRAW_FRAMEBUFFER]=Je),!0):!1}関数 et(re,Je){let Me=x,Re=!1;if(re){Me=_.get(Je),Me===void 0&&(Me=[],_.set(Je,Me));const tt=re.textures;if(Me.length!==tt.length||Me[0]!==s.COLOR_ATTACHMENT0){for(let Ke=0,Ut=tt.length;Ke<Ut;Ke++)Me[Ke]=s.COLOR_ATTACHMENT0+Ke;Me.length=tt.length,Re=!0}}else Me[0]!==s.BACK&&(Me[0]=s.BACK,Re=!0);Re&&s.drawBuffers(Me)}function Lt(re){return M!==re?(s.useProgram(re),M=re,!0):!1}const Ne={[Nl]:s.FUNC_ADD,[hw]:s.FUNC_SUBTRACT,[dw]:s.FUNC_REVERSE_SUBTRACT};Ne[pw]=s.MIN,Ne[mw]=s.MAX;const Ce={[gw]:s.ZERO,[_w]:s.ONE,[vw]:s.SRC_COLOR,[zg]:s.SRC_ALPHA,[Ew]:s.SRC_ALPHA_SATURATE,[Mw]:s.DST_COLOR,[xw]:s.DST_ALPHA,[yw]:s.ONE_MINUS_SRC_COLOR,[Bg]:s.ONE_MINUS_SRC_ALPHA,[ww]:s.ONE_MINUS_DST_COLOR,[Sw]:s.ONE_MINUS_DST_ALPHA,[Tw]:s.CONSTANT_COLOR,[Aw]:s.ONE_MINUS_CONSTANT_COLOR,[Cw]:s.CONSTANT_ALPHA,[Rw]:s.ONE_MINUS_CONSTANT_ALPHA};関数Y(re,Je,Me,Re,tt,Ke,Ut,An,Yn,on){if(re===za){T===!0&&(Xe(s.BLEND),T=!1);return}if(T===!1&&(Te(s.BLEND),T=!0),re!==fw){if(re!==E||on!==D){if((S!==Nl||I!==Nl)&&(s.blendEquation(s.FUNC_ADD),S=Nl,I=Nl),on)switch(re){case oc:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case cy:s.blendFunc(s.ONE,s.ONE);break;case fy:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case hy:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: 無効なブレンディング: ",re);break}else switch(re){case oc:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case cy:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case fy:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case hy:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: 無効なブレンディング: ",re);break}R=null,P=null,O=null,U=null,F.set(0,0,0),z=0,E=re,D=on}return}tt=tt||Je,Ke=Ke||Me,Ut=Ut||Re,(Je!==S||tt!==I)&&(s.blendEquationSeparate(Ne[Je],Ne[tt]),S=Je,I=tt),(Me!==R||Re!== P||Ke!==O||Ut!==U)&&(s.blendFuncSeparate(Ce[Me],Ce[Re],Ce[Ke],Ce[Ut]),R=Me,P=Re,O=Ke,U=Ut),(An.equals(F)===!1||Yn!==z)&&(s.blendColor(An.r,An.g,An.b,Yn),F.copy(An),z=Yn),E=re,D=!1}関数_t(re,Je){re.side===Uo?Xe(s.CULL_FACE):Te(s.CULL_FACE);とMe=re.side===Ar;Je&&(Me=!Me),Fe(Me),re.blending===oc&&re.transparent===!1?Y(za):Y(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.blendColor,re.blendAlpha,re.premultipliedAlpha),a.setFunc(re.depthFunc),a.setTest(re.depthTest),a.setMask(re.depthWrite),r.setMask(re.colorWrite);const Re=re.stencilWrite;u.setTest(Re),Re&&(u.setMask(re.stencilWriteMask),u.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),u.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Tt(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?Te(s.SAMPLE_ALPHA_TO_COVERAGE):Xe(s.SAMPLE_ALPHA_TO_COVERAGE)}関数 Fe(re){N!==re&&(re?s.frontFace(s.CW):s.frontFace(s.CCW),N=re)}関数rt(re){re!==lw?(Te(s.CULL_FACE),re!==G&&(re===uy?s.cullFace(s.BACK):re===uw?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):Xe(s.CULL_FACE),G=re}関数 We(re){re!==$&&(ue&&s.lineWidth(re),$=re)}関数 Tt(re,Je,Me){re?(Te(s.POLYGON_OFFSET_FILL),(Q!==Je||ce!==Me)&&(s.polygonOffset(Je,Me),Q=Je,ce=Me)):Xe(s.POLYGON_OFFSET_FILL)}関数 qe(re){re?Te(s.SCISSOR_TEST):Xe(s.SCISSOR_TEST)}関数 X(re){re===void 0&&(re=s.TEXTURE0+me-1),K!==re&&(s.activeTexture(re),K=re)}関数 V(re,Je,Me){Me===void 0&&(K===null?Me=s.TEXTURE0+me-1:Me=K);let Re=J[Me];Re===void 0&&(Re={type:void 0,texture:void 0},J[Me]=Re),(Re.type!==re||Re.texture!==Je)&&(K!==Me&&(s.activeTexture(Me),K=Me),s.bindTexture(re,Je||be[re]),Re.type=re,Re.texture=Je)}関数pe(){const re=J[K];re!==void 0&&re.type!==void 0&&(s.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}関数Ee(){try{s.compressedTexImage2D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数Le(){try{s.compressedTexImage3D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 Ae(){try{s.texSubImage2D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 dt(){try{s.texSubImage3D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 je(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数st(){try{s.compressedTexSubImage3D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 Bt(){try{s.texStorage2D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 ke(){try{s.texStorage3D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 ct(){try{s.texImage2D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数 At(){try{s.texImage3D.apply(s,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}関数It(re){Pe.equals(re)===!1&&(s.scissor(re.x,re.y,re.z,re.w),Pe.copy(re))}関数 ft(re){se.equals(re)===!1&&(s.viewport(re.x,re.y,re.z,re.w),se.copy(re))}関数 Qt(re,Je){let Me=d.get(Je);Me===void 0&&(Me=new WeakMap,d.set(Je,Me));let Re=Me.get(re);Re===void 0&&(Re=s.getUniformBlockIndex(Je,re.name),Me.set(re,Re))}関数 Nt(re,Je){const Re=d.get(Je).get(re);h.get(Je)!==Re&&(s.uniformBlockBinding(Je,Re,re.__bindingPointIndex),h.set(Je,Re))}関数 gn(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ON E、s.ZERO)、s.blendColor(0、0、0、0)、s.colorMask(!0、!0、!0、!0)、s.clearColor(0、0、0、0)、s.depthMask(!0)、s.depthFunc(s.LESS)、a.setReversed(!1)、s.clearDepth(1)、s.stencilMask(4294967295)、s.stencilFunc(s.ALWAYS、0、4294967295)、s.stencilOp(s.KEEP、s.KEEP、s.KEEP)、s.clearStencil(0)、s.cullFace(s.BACK)、s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),m={},K=null,J={},g={},_=new WeakMap、x=[]、M=null、T=!1、E=null、S=null、R=null、P=null、I=null、O=null、U=null、F=新規lt(0,0,0),z=0,D=!1,N=null,G=null,$=null,Q=null,ce=null,Pe.set(0,0,s.canvas.width,s.canvas.height),se.set(0,0,s.canvas.width,s.canvas.height),r.reset(),a.reset(),u.reset()}return{buffers:{color:r,depth:a,stencil:u},enable:Te,disable:Xe,bindFramebuffer:gt,drawBuffers:et,useProgram:Lt,setBlending:Y,setMaterial:_t,setFlipSided:Fe,setCullFace:rt,setLineWidth:We,set PolygonOffset:Tt,setScissorTest:qe,activeTexture:X,bindTexture:V,unbindTexture:pe,compressedTexImage2D:Ee,compressedTexImage3D:Le,texImage2D:ct,texImage3D:At,updateUBOMapping:Qt,uniformBlockBinding:Nt,texStorage2D:Bt,texStorage3D:ke,texSubImage2D:Ae,texSubImage3D:dt,compressedTexSubImage2D:je,compressedTexSubImage3D:st,scissor:It,viewport:ft,reset:gn}}関数hD(s,e,t,n,i,r,a){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Ie,m=new WeakMap;let g;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(X,V){return x?new OffscreenCanvas(X,V):pp("canvas")}function T(X,V,pe){let Ee=1;const Le=qe(X);if((Le.width>pe||Le.height>pe)&&(Ee=pe/Math.max(Le.width,Le.height)),Ee<1)if(HTMLImageElement<"u"&&X インスタンスオブ HTMLImageElement||HTMLCanvasElement<"u"&&X インスタンスオブ HTMLCanvasElement||ImageBitmap タイプ<"u"&&X インスタンスオブImageBitmap||typeofVideoFrame<"u"&&XinstanceofVideoFrame){const Ae=Math.floor(Ee*Le.width),dt=Math.floor(Ee*Le.height);g===void 0&&(g=M(Ae,dt));const je=V?M(Ae,dt):g;return je.width=Ae,je.height=dt,je.getContext("2d").drawImage(X,0,0,Ae,dt),console.warn("THREE.WebGLRenderer: テクスチャは ("+Le.width+"x"+Le.height+") から ("+Ae+"x"+dt+") にサイズ変更されました。",je}else return"data"in X&&console.warn("THREE.WebGLRenderer: DataTexture 内のイメージが大きすぎます ("+Le.width+"x"+Le.height+")。",X;return X}function E(X){return X.generateMipmaps}function S(X){s.generateMipmap(X)}function R(X){return X.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?s.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?s.TEXTURE_2D_ARRAY:s.TEXTURE_2D}function P(X,V,pe,Ee,Le=!1){if(X!==null){if(s[X]!==void 0)return s[X];console.warn("THREE.WebGLRenderer:存在しないWebGL内部形式 '"+X+"'")}let を使用しようとしましたAe=V;if(V===s.RED&&(pe===s.FLOAT&&(Ae=s.R32F),pe===s.HALF_FLOAT&&(Ae=s.R16F),pe===s.UNSIGNED_BYTE&&(Ae=s.R8)),V===s.RED_INTEGER&&(pe===s.UNSIGNED_BYTE&&(Ae=s.R8UI),pe===s.UNSIGNED_SHORT&&(Ae=s.R16UI),pe===s.UNSIGNED_INT&&(Ae=s.R32UI),pe===s.BYTE&&(Ae=s.R8I),pe===s.SHORT&&(Ae=s.R1 6I),pe===s.INT&&(Ae=s.R32I)),V===s.RG&&(pe===s.FLOAT&&(Ae=s.RG32F),pe= ==s.HALF_FLOAT&&(Ae=s.RG16F),pe===s.UNSIGNED_BYTE&&(Ae=s.RG8)),V===s.R G_INTEGER&&(pe===s.UNSIGNED_BYTE&&(Ae=s.RG8UI),pe===s.UNSIGNED_SHORT&&(Ae=s.RG16UI),pe===s.UNSIGNED_INT&&(Ae=s.RG32UI),pe===s.BYTE&&(Ae=s.RG8) I)、pe===s.SHORT&&(Ae=s.RG16I)、pe===s.INT&&(Ae=s.RG32I))、V===s.RGB_INTEGER&&(pe===s.UNSIGNED_BYTE&&(Ae=s.RGB8UI)、pe===s.UNSIGNED_SHORT&&(Ae=s.RGB16UI)、pe===s.UNSIGNED_INT&&(Ae=s.RGB32UI)、pe===s.BYTE&&(Ae=s.RGB8I)、pe===s.SHORT&&(Ae=s.RGB16I)、pe===s.INT&&(Ae=s.RGB32I))、V===s.RGBA_IN TEGER&&(pe===s.UNSIGNED_BYTE&&(Ae=s.RGBA8UI),pe===s.UNSIGNED_SHORT&&(Ae=s.RGBA16UI),pe===s.UNSIGNED_INT&&(Ae=s.RGBA32UI),pe===s.BYTE&&(Ae=s. RGBA8I),pe===s.SHORT&&(Ae=s.RGBA16I),pe===s.INT&&(Ae=s.RGBA32I)),V===s.RGB&&pe===s.UNSIGNED_INT_5_9_9_9_REV&&(Ae=s.RGB9_E5),V===s.RGBA){const dt=Le?fp:fn.getTransfer(Ee);pe===s.FLOAT&&(Ae=s.RGBA32F),pe===s.HALF_FLOAT&&(Ae=s.RGBA16F),pe===s.UNSIGNED_BYTE&&(Ae=dt===Sn?s.SRGB8_ALPHA8:s.RGBA8),pe===s.UNSIGNED_SHORT_4_4_4_4&&(Ae=s.RG BA4),pe===s.UNSIGNED_SHORT_5_5_5_1&&(Ae=s.RGB5_A1)}return(Ae===s.R16F||Ae===s.R32F||Ae===s.RG16F||Ae===s.RG32F||Ae===s.RGBA16F||Ae===s.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}関数I(X,V){let pe;return X?V===null||V===Ga||V===gc?pe=s.DEPTH24_STENCIL8:V===Xr?pe=s.DEPTH32F_STENCIL8:V===ph&&(pe=s.DEPTH24_STENCIL8,console.warn("DepthTexture: 16ビット深度アタッチメントはステンシルではサポートされていません。24ビットアタッチメントを使用しています。")):V===null||V===Ga||V===gc?pe=s.DEPTH_COMPONENT24:V===Xr?pe=s.DEPTH_COMPONENT32F:V===ph&&(pe=s.DEPTH_COMPONENT16),pe}function O(X,V){return E(X)===!0||X.isFramebufferTexture&&X.minFilter!==qi&&X.minFilter!==Ei?Math.log2(Math.max(V.width,V.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?V.mipmaps.length:1}関数 U(X){const V=X.target;V.removeEventListener("dispose",U),z(V),V.isVideoTexture&&m.delete(V)}関数 F(X){const V=X.target;V.removeEventListener("dispose",F),N(V)}関数 z(X){const V=n.get(X);if(V.__webglInit===void 0)return;const pe=X.source,Ee=_.get(pe);if(Ee){const Le=Ee[V.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&D(X),Object.keys(Ee).length===0&&_.delete(pe)}n.remove(X)}function D(X){const V=n.get(X);s.deleteTexture(V.__webglTexture);const pe=X.source,Ee=_.get(pe);delete Ee[V.__cacheKey],a.memory.textures--}function N(X){const V=n.get(X);if(X. DepthTexture&&(X. DepthTexture.dispose(),n.remove(X. DepthTexture)),X.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(V.__webglFramebuffer[Ee]))for(let Le=0;Le<V.__webglFramebuffer[Ee].length;Le++)s.deleteFramebuffer(V.__webglFramebuffer[Ee][Le]);else s.deleteFramebuffer(V.__webglFramebuffer[Ee]);V.__webglDepthbuffer&&s.deleteRenderbuffer(V.__webglDepthbuffer[Ee])}else{if(Array.isArray(V.__webglFramebuffer))for(let Ee=0;Ee<V.__webglFramebuffer.length;Ee++)s.deleteFramebuffer(V.__webglFramebuffer[Ee]);else s.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&s.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&s.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Ee=0;Ee<V.__webglColorRenderbuffer.length;Ee++)V.__webglColorRenderbuffer[Ee]&&s.deleteRenderbuffer(V.__webglColorRenderbuffer[Ee]);V.__webglDepthRenderbuffer&&s.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const pe=X.textures;for(let Ee=0,Le=pe.length;Ee<Le;Ee++){const Ae=n.get(pe[Ee]);Ae.__webglTexture&&(s.deleteTexture(Ae.__webglTexture),a.memory.textures--),n.remove(pe[Ee])}n.remove(X)}let G=0;function $(){G=0}function Q(){const X=G;return X>=i.maxTextures&&console.warn("THREE.WebGLTextures: このGPUは"+i.maxTextures"のみをサポートしていますが、"+X+"テクスチャユニットを使用しようとしています),G+=1,X}function ce(X){const V=[];return V.push(X.wrapS),V.push(X.wrapT),V.push(X.wrapR||0),V.push(X.magFilter),V.push(X.minFilter),V.push(X.anisotropy),V.push(X.internalFormat),V.push(X.format),V.push(X.type),V.push(X.generateMipmaps),V.push(X.premultiplyAlpha),V.push(X.flipY),V.push(X.unpackAlignment),V.push(X.colorSpace),V.join()}function me(X,V){const pe=n.get(X);if(X.isVideoTexture&&We(X),X.isRenderTargetTexture===!1&&X.version>0&&pe.__version!==X.version){const Ee=X.image;if(Ee===null)console.warn("THREE.WebGLRenderer: テクスチャは更新対象としてマークされていますが、画像データが見つかりません。");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: テクスチャは更新対象としてマークされていますが、画像が不完全です。");else{se(pe,X,V);return}}t.bindTexture(s.TEXTURE_2D,pe.__webglTexture,s.TEXTURE0+V)}function ue(X,V){const pe=n.get(X);if(X.version>0&&pe.__version!==X.version){se(pe,X,V);return}t.bindTexture(s.TEXTURE_2D_ARRAY,pe.__webglTexture,s.TEXTURE0+V)}function de(X,V){const pe=n.get(X);if(X.version>0&&pe.__version!==X.version){se(pe,X,V);return}t.bindTexture(s.TEXTURE_3D、pe.__webglTexture、s.TEXTURE0+V)}function B(X,V){const pe=n.get(X);if(X.version>0&&pe.__version!==X.version){xe(pe,X,V);return}t.bindTexture(s.TEXTURE_CUBE_MAP、pe.__webglTexture、s.TEXTURE0+V)}const K={[ap]:s.REPEAT,[Os]:s.CLAMP_TO_EDGE,[lp]:s.MIRRORED_REPEAT},J={[qi]:s.NEAREST,[Gy]:s.NEAREST_MIPMAP_NEAREST,[nh]:s.NEAREST_MIPMAP_LINEAR,[Ei]:s.LINEAR,[qd]:s.LINEAR_MIPMAP_NEAREST,[Fo]:s.LINEAR_MIPMAP_LINEAR},W={[Ww]:s.NEVER,[Jw]:s.ALWAYS,[Xw]:s.LESS,[ex]:s.LEQUAL,[Yw]:s.EQUAL,[Zw]:s.GEQUAL,[qw]:s.GREATER,[jw]:s.NOTEQUAL};関数te(X,V){if(V.type===Xr&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Ei||V.magFilter===qd||V.magFilter===nh||V.magFilter===Fo||V.minFilter===Ei||V.minFilter===qd||V.minFilter===nh||V.minFilter===Fo)&&console.warn("THREE.WebGLRenderer: 浮動小数点テクスチャでは線形フィルタリングを使用できません。OES_texture_float_linearはこのデバイス."),s.texParameteri(X,s.TEXTURE_WRAP_S,K[V.wrapS]),s.texParameteri(X,s.TEXTURE_WRAP_T,K[V.wrapT]),(X===s.TEXTURE_3D||X===s.TEXTURE_2D_ARRAY)&&s.texParameteri(X,s.TEXTURE_WRAP_R,K[V.wrapR]),s.texParameteri(X,s.TEXTURE_MAG_FILTER,J[V.magFilter]),s.texParameteri(X,s.TEXTURE_MIN_FILTER,J[V.minFilter]),V.compareFunction&&(s.texParame teri(X,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(X,s.TEXTURE_COMPARE_FUNC,W[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===qi||V.minFilter!==nh&&V.minFilter!==Fo||V.type===Xr&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");s.texParameterf(X,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function Pe(X,V){let pe=!1;X.__webglInit===void 0&&(X.__webglInit=!0,V.addEventListener("dispose",U));const Ee=V.source;let Le=_.get(Ee);Le===void 0&&(Le={},_.set(Ee,Le));const Ae=ce(V);if(Ae!==X.__cacheKey){Le[Ae]===void 0&&(Le[Ae]={texture:s.createTexture(),usedTimes:0},a.memory.textures++,pe=!0),Le[Ae].usedTimes++;const dt=Le[X.__cacheKey];dt!==void 0&&(Le[X.__cacheKey].usedTimes--,dt.usedTimes===0&&D(V)),X.__cacheKey=Ae,X.__webglTexture=Le[Ae].texture}return pe}function se(X,V,pe){let Ee=s.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(Ee=s.TEXTURE_2D_ARRAY),V.isData3DTexture&&(Ee=s.TEXTURE_3D);const Le=Pe(X,V),Ae=V.source;t.bindTexture(Ee,X.__webglTexture,s.TEXTURE0+pe);const dt=n.get(Ae);if(Ae.version!==dt.__version||Le===!0){t.activeTexture(s.TEXTURE0+pe);const je=fn.getPrimaries(fn.workingColorSpace),st=V.colorSpace===Oa?null:fn.getPrimaries(V.colorSpace),Bt=V.colorSpace===Oa||je===st?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,V.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,V.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);let ke=T(V.image,!1,i.maxTextureSize);ke=Tt(V,ke);const ct=r.convert(V.format,V.colorSpace),At=r.convert(V.type);let It=P(V.internalFormat,ct,At,V.colorSpace,V.isVideoTexture);te(Ee,V);let ft;const Qt=V.mipmaps,Nt=V.isVideoTexture!==!0,gn=dt.__version===void 0||Le===!0,re=Ae.dataReady,Je=O(V,ke);if(V.isDepthTexture)It=I(V.format===_c,V.type),gn&&(Nt?t.texStorage2D(s.TEXTURE_2D,1,It,ke.width,ke.height):t.texImage2D(s.TEXTURE_2D,0,It,ke.width,ke.height,0,ct,At,null));else if(V.isDataTexture)if(Qt.length>0){Nt&&gn&&t.texStorage2D(s.TEXTURE_2D,Je,It,Qt[0].width,Qt[0].height);for(let Me=0,Re=Qt.length;Me<Re;Me++)ft=Qt[Me],Nt?re&&t.texSubImage2D(s.TEXTURE_2D,Me,0,0,ft.width,ft.height,ct,At,ft.data):t.texImage2D(s.TEXTURE_2D,Me,It,ft.width,ft.height,0,ct,At,ft.data);V.generateMipmaps=!1}else Nt?(gn&&t.texStorage2D(s.TEXTURE_2D,Je,It,ke.width,ke.height),re&&t.texSubImage2D(s.TEXTURE_2D,0,0,0,ke.width,ke.height,ct,At,ke.data)):t.texImage2D(s.TEXTURE_2D,0,It,ke.width,ke.height,0,ct,At,ke.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Nt&&gn&&t.texStorage3D(s.TEXTURE_2D_ARRAY,Je,It,Qt[0].width,Qt[0].height,ke.depth);for(let Me=0,Re=Qt.length;Me<Re;Me++)if(ft=Qt[Me],V.format!==ar)if(ct!==null)if(Nt){if(re)if(V.layerUpdates.size>0){const tt=My(ft.width,ft.height,V.format,V.type);for(const Ke of V.layerUpdates){const Ut=ft.data.subarray(Ke*tt/ft.data.BYTES_PER_ELEMENT,(Ke+1)*tt/ft.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Me,0,0,Ke,ft.width,ft.height,1,ct,Ut)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Me,0,0,0,ft.width,ft.height,ke.depth,ct,ft.data)}else t.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Me,It,ft.width,ft.height,ke.depth,0,ft.data,0,0);else console.warn("THREE.WebGLRenderer: .uploadTexture() でサポートされていない圧縮テクスチャ形式を読み込もうとしました");else Nt?re&&t.texSubImage3D(s.TEXTURE_2D_ARRAY,Me,0,0,0,ft.width,ft.height,ke.depth,ct,At,ft.data):t.texImage3D(s.TEXTURE_2D_ARRAY,Me,It,ft.width,ft.height,ke.depth,0,ct,At,ft.data)}else{Nt&&gn&&t.texStorage2D(s.TEXTURE_2D,Je,It,Qt[0].width,Qt[0].height);for(let Me=0,Re=Qt.length;Me<Re;Me++)ft=Qt[Me],V.format!==ar?ct!==null?Nt?re&&t.compressedTexSubImage2D(s.TEXTURE_2D,Me,0,0,ft.width,ft.height,ct,ft.data):t.compressedTexImage2D(s.TEXTURE_2D,Me,It,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: サポートされていない圧縮テクスチャフォーマットを読み込もうとしました.uploadTexture()"):Nt?re&&t.texSubImage2D(s.TEXTURE_2D,Me,0,0,ft.width,ft.height,ct,At,ft.data):t.texImage2D(s.TEXTURE_2D,Me,It,ft.width,ft.height,0,ct,At,ft.data)}else if(V.isDataArrayTexture)if(Nt){if(gn&&t.texStorage3D(s.TEXTURE_2D_ARRAY,Je,It,ke.width,ke.height,ke.depth),re)if(V.layerUpdates.size>0){const Me=My(ke.width,ke.height,V.format,V.type);for(const Re of V.layerUpdates){const tt=ke.data.subarray(Re*Me/ke.data.BYTES_PER_ELEMENT,(Re+1)*Me/ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,Re,ke.width,ke.height,1,ct,At,tt)}V.clearLayerUpdates()}else t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,ct,At,ke.data)}else t.texImage3D(s.TEXTURE_2D_ARRAY,0,It,ke.width,ke.height,ke.depth,0,ct,At,ke.data);else if(V.isData3DTexture)Nt?(gn&&t.texStorage3D(s.TEXTURE_3D,Je,It,ke.width,ke.height,ke.depth),re&&t.texSubImage3D(s.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,ct,At,ke.data)):t.texImage3D(s.TEXTURE_3D,0,It,ke.width,ke.height,ke.depth,0,ct,At,ke.data);else if(V.isFramebufferTexture){if(gn)if(Nt)t.texStorage2D(s.TEXTURE_2D,Je,It,ke.width,ke.height);else{let Me=ke.width,Re=ke.height;for(let tt=0;tt<Je;tt++)t.texImage2D(s.TEXTURE_2D,tt,It,Me,Re,0,ct,At,null),Me>>=1,Re>>=1}}else if(Qt.length>0){if(Nt&&gn){const Me=qe(Qt[0]);t.texStorage2D(s.TEXTURE_2D,Je,It,Me.width,Me.height)}for(let Me=0,Re=Qt.length;Me<Re;Me++)ft=Qt[Me],Nt?re&&t.texSubImage2D(s.TEXTURE_2D,Me,0,0,ct,At,ft):t.texImage2D(s.TEXTURE_2D,Me,It,ct,At,ft);V.generateMipmaps=!1}else if(Nt){if(gn){const Me=qe(ke);t.texStorage2D(s.TEXTURE_2D,Je,It,Me.width,Me.height)}re&&t.texSubImage2D(s.TEXTURE_2D,0,0,0,ct,At,ke)}else t.texImage2D(s.TEXTURE_2D,0,It,ct,At,ke);E(V)&&S(Ee),dt.__version=Ae.version,V.onUpdate&&V.onUpdate(V)}X.__version=V.version}function xe(X,V,pe){if(V.image.length!==6)return;const Ee=Pe(X,V),Le=V.source;t.bindTexture(s.TEXTURE_CUBE_MAP,X.__webglTexture,s.TEXTURE0+pe);const Ae=n.get(Le);if(Le.version!==Ae.__version||Ee===!0){t.activeTexture(s.TEXTURE0+pe);const dt=fn.getPrimaries(fn.workingColorSpace),je=V.colorSpace===Oa?null:fn.getPrimaries(V.colorSpace),st=V.colorSpace===Oa||dt===je?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,V.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,V.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);const Bt=V.isCompressedTexture||V.image[0].isCompressedTexture,ke=V.image[0]&&V.image[0].isDataTexture,ct=[];for(let Re=0;Re<6;Re++)!Bt&&!ke?ct[Re]=T(V.image[Re],!0,i.maxCubemapSize):ct[Re]=ke?V.image[Re].image:V.image[Re],ct[Re]=Tt(V,ct[Re]);const At=ct[0],It=r.convert(V.format,V.colorSpace),ft=r.convert(V.type),Qt=P(V.internalFormat,It,ft,V.colorSpace),Nt=V.isVideoTexture!==!0,gn=Ae.__version===void 0||Ee===!0,re=Le.dataReady;let Je=O(V,At);te(s.TEXTURE_CUBE_MAP,V);let Me;if(Bt){Nt&&gn&&t.texStorage2D(s.TEXTURE_CUBE_MAP,Je,Qt,At.width,At.height);for(let Re=0;Re<6;Re++){Me=ct[Re].mipmaps;for(let tt=0;tt<Me.length;tt++){const Ke=Me[tt];V.format!==ar?It!==null?Nt?re&&t.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt,0,0,Ke.width,Ke.height,It,Ke.data):t.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt,Qt,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: .setTextureCube() でサポートされていない圧縮テクスチャ形式を読み込もうとしました"):Nt?re&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt,0,0,Ke.width,Ke.height,It,ft,Ke.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt,Qt,Ke.width,Ke.height,0,It,ft,Ke.data)}}}else{if(Me=V.mipmaps,Nt&&gn){Me.length>0&&Je++;const Re=qe(ct[0]);t.texStorage2D(s.TEXTURE_CUBE_MAP,Je,Qt,Re.width,Re.height)}for(let Re=0;Re<6;Re++)if(ke){Nt?re&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,0,0,ct[Re].width,ct[Re].height,It,ft,ct[Re].data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,Qt,ct[Re].width,ct[Re].height,0,It,ft,ct[Re].data);for(let tt=0;tt<Me.length;tt++){const Ut=Me[tt].image[Re].image;Nt?re&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt+1,0,0,Ut.width,Ut.height,It,ft,Ut.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt+1,Qt,Ut.width,Ut.height,0,It,ft,Ut.data)}}else{Nt?re&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,0,0,It,ft,ct[Re]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,Qt,It,ft,ct[Re]);for(let tt=0;tt<Me.length;tt++){const Ke=Me[tt];Nt?re&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt+1,0,0,It,ft,Ke.image[Re]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Re,tt+1,Qt,It,ft,Ke.image[Re])}}}E(V)&&S(s.TEXTURE_CUBE_MAP),Ae.__version=Le.version,V.onUpdate&&V.onUpdate(V)}X.__version=V.version}関数 be(X,V,pe,Ee,Le,Ae){const dt=r.convert(pe.format,pe.colorSpace),je=r.convert(pe.type),st=P(pe.internalFormat,dt,je,pe.colorSpace),Bt=n.get(V),ke=n.get(pe);if(ke.__renderTarget=V,!Bt.__hasExternalTextures){const ct=Math.max(1,V.width>>Ae),At=Math.max(1,V.height>>Ae);Le===s.TEXTURE_3D||Le===s.TEXTURE_2D_ARRAY?t.texImage3D(Le,Ae,st,ct,At,V.depth,0,dt,je,null):t.texImage2D(Le,Ae,st,ct,At,0,dt,je,null)}t.bindFramebuffer(s.FRAMEBUFFER,X),rt(V)?u.framebufferTexture2DMulti sampleEXT(s.FRAMEBUFFER,Ee,Le,ke.__webglTexture,0,Fe(V)):(Le===s.TEXTURE_2D||Le>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,Ee,Le,ke.__webglTexture,Ae),t.bindFramebuffer(s.FRAMEBUFFER,null)}function Te(X,V,pe){if(s.bindRenderbuffer(s.RENDERBUFFER,X),V.depthBuffer){const Ee=V.depthTexture、Le=Ee&&Ee.isDepthTexture?Ee.type:null、Ae=I(V.stencilBuffer、Le)、dt=V.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT、je=Fe(V);rt(V)?u.renderbufferStorageMultisampleEXT(s.RENDERBUFFER、je、Ae、V.width、V.height):pe?s.renderbufferStorageMultisample(s.RENDERBUFFER、je、Ae、V.width、V.height):s.renderbufferStorage(s.RENDERBUFFER、Ae、V.width、V.height)、s.framebufferRenderbuffer(s.FRAMEBUFFER、dt、s.RENDERBUFFER、X)}else{const Ee=V.textures;for(let Le=0;Le<Ee.length;Le++){const Ae=Ee[Le],dt=r.convert(Ae.format,Ae.colorSpace),je=r.convert(Ae.type),st=P(Ae.internalFormat,dt,je,Ae.colorSpace),Bt=Fe(V);pe&&rt(V)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,Bt,st,V.width,V.height):rt(V)?u.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Bt,st,V.width,V.height):s.renderbufferStorage(s.RENDERBUFFER,st,V.width,V.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Xe(X,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("キューブレンダーターゲットの深度テクスチャはサポートされていません");if(t.bindFramebuffer(s.FRAMEBUFFER,X),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTextureはTHREE.DepthTextureのインスタンスである必要があります");const Ee=n.get(V.depthTexture);Ee.__renderTarget=V,(!Ee.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),me(V.depthTexture,0);const Le=Ee.__webglTexture、Ae=Fe(V);if(V.depthTexture.format===ac)rt(V)?u.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER、s.DEPTH_ATTACHMENT、s.TEXTURE_2D、Le、0、Ae):s.framebufferTexture2D(s.FRAMEBUFFER、s.DEPTH_ATTACHMENT、s.TEXTURE_2D、Le、0);else if(V.depthTexture.format===_c)rt(V)?u.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Le,0,Ae):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Le,0);else throw new Error("Unknown depthTexture format")}function gt(X){const V=n.get(X),pe=X.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==X.depthTexture){const Ee=X.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),Ee){const Le=()=>{delete V.__boundDepthTexture、delete V.__depthDisposeCallback、Ee.removeEventListener("dispose",Le)};Ee.addEventListener("dispose",Le)、V.__depthDisposeCallback=Le}V.__boundDepthTexture=Ee}if(X.depthTexture&&!V.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture はキューブ レンダー ターゲットではサポートされていません");Xe(V.__webglFramebuffer、X)}else if(pe){V.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(t.bindFramebuffer(s.FRAMEBUFFER、V.__webglFramebuffer[Ee])、V.__webglDepthbuffer[Ee]===void 0)V.__webglDepthbuffer[Ee]=s.createRenderbuffer(),Te(V.__webglDepthbuffer[Ee],X,!1);else{const Le=X.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ae=V.__webglDepthbuffer[Ee];s.bindRenderbuffer(s.RENDERBUFFER,Ae),s.framebufferRenderbuffer(s.FRAMEBUFFER,Le,s.RENDERBUFFER,Ae)}}else if(t.bindFramebuffer(s.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=s.createRenderbuffer(),Te(V.__webglDepthbuffer,X,!1);else{const Ee=X.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Le=V.__webglDepthbuffer;s.bindRenderbuffer(s.RENDERBUFFER,Le),s.framebufferRenderbuffer(s.FRAMEBUFFER,Ee,s.RENDERBUFFER,Le)}t.bindFramebuffer(s.FRAMEBUFFER,null)}function et(X,V,pe){const Ee=n.get(X);V!==void 0&&be(Ee.__webglFramebuffer,X,X.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),pe!==void 0&>(X)}function Lt(X){const V=X.texture,pe=n.get(X),Ee=n.get(V);X.addEventListener("dispose",F);const Le=X.textures,Ae=X.isWebGLCubeRenderTarget===!0,dt=Le.length>1;if(dt||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=s.createTexture()),Ee.__version=V.version,a.memory.textures++),Ae){pe.__webglFramebuffer=[];for(let je=0;je<6;je++)if(V.mipmaps&&V.mipmaps.length>0){pe.__webglFramebuffer[je]=[];for(let st=0;st<V.mipmaps.length;st++)pe.__webglFramebuffer[je][st]=s.createFramebuffer()}else pe.__webglFramebuffer[je]=s.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){pe.__webglFramebuffer=[];for(let je=0;je<V.mipmaps.length;je++)pe.__webglFramebuffer[je]=s.createFramebuffer()}else pe.__webglFramebuffer=s.createFramebuffer();if(dt)for(let je=0,st=Le.length;je<st;je++){const Bt=n.get(Le[je]);Bt.__webglTexture===void 0&&(Bt.__webglTexture=s.createTexture(),a.memory.textures++)}if(X.samples>0&&rt(X)===!1){pe.__webglMultisampledFramebuffer=s.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(s.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let je=0;je<Le.length;je++){const st=Le[je];pe.__webglColorRenderbuffer[je]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,pe.__webglColorRenderbuffer[je]);const Bt=r.convert(st.format,st.colorSpace),ke=r.convert(st.type),ct=P(st.internalFormat,Bt,ke,st.colorSpace,X.isXRRenderTarget===!0),At=Fe(X);s.renderbufferStorageMultisample(s.RENDERBUFFER,At,ct,X.width,X.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+je,s.RENDERBUFFER,pe.__webgl ColorRenderbuffer[je])}s.bindRenderbuffer(s.RENDERBUFFER,null),X.depthBuffer&&(pe.__webglDepthRenderbuffer=s.createRenderbuffer(),Te(pe.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(s.TEXTURE_CUBE_MAP,Ee.__webglTexture),te(s.TEXTURE_CUBE_MAP,V);for(let je=0;je<6;je++)if(V.mipmaps&&V.mipmaps.length>0)for(let st=0;st<V.mipmaps.length;st++)be(pe.__webglFramebuffer[je][st],X,V,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+je,st);else be(pe.__webglFramebuffer[je],X,V,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+je,0);E(V)&&S(s.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(dt){for(let je=0,st=Le.length;je<st;je++){const Bt=Le[je],ke=n.get(Bt);t.bindTexture(s.TEXTURE_2D,ke.__webglTexture),te(s.TEXTURE_2D,Bt),be(pe.__webglFramebuffer,X,Bt,s.COLOR_ATTACHMENT0+je,s.TEXTURE_2D,0),E(Bt)&&S(s.TEXTURE_2D)}t.unbindTexture()}else{let je=s.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(je=X.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),t.bindTexture(je,Ee.__webglTexture),te(je,V),V.mipmaps&&V.mipmaps.length>0)for(let st=0;st<V.mipmaps.length;st++)be(pe.__webglFramebuffer[st],X,V,s.COLOR_ATTACHMENT0,je,st);else be(pe.__webglFramebuffer,X,V,s.COLOR_ATTACHMENT0,je,0);E(V)&&S(je),t.unbindTexture()}X.depthBuffer&>(X)}関数Ne(X){const V=X.textures;for(let pe=0,Ee=V.length;pe<Ee;pe++){const Le=V[pe];if(E(Le)){const Ae=R(X),dt=n.get(Le).__webglTexture;t。bindTexture(Ae,dt),S(Ae),t.unbindTexture()}}}const Ce=[],Y=[];function _t(X){if(X.samples>0){if(rt(X)===!1){const V=X.textures,pe=X.width,Ee=X.height;let Le=s.COLOR_BUFFER_BIT;const Ae=X.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,dt=n.get(X),je=V.length>1;if(je)for(let st=0;st<V.length;st++)t.bindFramebuffer(s.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+st,s.RENDERBUFFER,null),t.bindFramebuffer(s.FRAMEBUFFER,dt.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+st,s.TEXTURE_2D,null,0);t.bindFramebuffer(s.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let st=0;st<V.length;st++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Le|=s.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Le|=s.STENCIL_BUFFER_BIT)),je){s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,dt.__webglColorRenderbuffer[st]);const Bt=n.get(V[st]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,Bt,0)}s.blitFramebuffer(0,0,pe,Ee,0,0,pe,Ee,Le,s.NEAREST),h===!0&&(Ce.length=0,Y.length=0,Ce.push(s.COLOR_ATTACHMENT0+st),X.depthBuffer&&X .resolveDepthBuffer===!1&&(Ce.push(Ae),Y.push(Ae),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,Y)),s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Ce))}if(t.bindFramebuffer(s.READ_FRAMEBUFFER,null),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),je)for(let st=0;st<V.length;st++){t.bindFramebuffer(s.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+st,s.RENDERBUFFER,dt.__webglColorRenderbuffer[st]);const Bt=n.get(V[st]).__webglTexture;t.bindFramebuffer(s.FRAMEBUFFER,dt.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+st,s.TEXTURE_2D,Bt,0)}t.bindFramebuffer(s.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&h){const V=X.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[V])}}}function Fe(X){return Math.min(i.maxSamples,X.samples)}function rt(X){const V=n.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function We(X){const V=a.render.frame;m.get(X)!==V&&(m.set(X,V),X.update())}function Tt(X,V){const pe=X.colorSpace,Ee=X.format,Le=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||pe!==vc&&pe!==Oa&&(fn.getTransfer(pe)===Sn?(Ee!==ar||Le!==mo)&&console.warn("THREE.WebGLTextures: sRGB でエンコードされたテクスチャは RGBAFormat と UnsignedByteType を使用する必要があります。"):console.error("THREE.WebGLTextures: サポートされていないテクスチャ カラー スペース:",pe)),V}function qe(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(d.width=X.naturalWidth||X.width,d.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceofビデオフレーム?(d.width=X.displayWidth,d.height=X.displayHeight):(d.width=X.width,d.height=X.height),d}this.allocateTextureUnit=Q,this.resetTextureUnits=$,this.setTexture2D=me,this.setTexture2DArray=ue,this.setTexture3D=de,this.setTextureCube=B,this.rebindTextures=et,this.setupRenderTarget=Lt,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=_t,this.setupDepthRenderbuffer=gt,this.setupFrameBufferTexture=be,this.useMultisampledRTT=rt}function oT(s,e){function t(n,i=Oa){let r;const a=fn.getTransfer(i);if(n===mo)return s.UNSIGNED_BYTE;if(n===k0)return s.UNSIGNED_SHORT_4_4_4_4;if(n===z0)return s.UNSIGNED_SHORT_5_5_5_1;if(n===Yy)return s.UNSIGNED_INT_5_9_9_9_REV;if(n===Wy)return s.BYTE;if(n===Xy)return s.SHORT;if(n===ph)return s.UNSIGNED_SHORT;if(n===F0)return s.INT;if(n===Ga)return s.UNSIGNED_INT;if(n===Xr)return s.FLOAT;if(n===Ch)return s.HALF_FLOAT;if(n===qy)return s.ALPHA;if(n===jy)return s.RGB;if(n===ar)return s.RGBA;if(n===Zy)return s.LUMINANCE;if(n===Jy)return s.LUMINANCE_ALPHA;if(n===ac)return s.DEPTH_COMPONENT;if(n===_c)return s.DEPTH_STENCIL;if(n===B0)return s.RED;if(n===Ip)return s.RED_INTEGER;if(n===Ky)return s.RG;if(n===V0)return s.RG_INTEGER;if(n===H0)return s.RGBA_INTEGER;if(n===jd||n===Zd||n===Jd||n===Kd)if(a===Sn)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===jd)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Zd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Jd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Kd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else null を返す;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===jd)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Zd)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Jd)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Kd)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===jg||n===Zg||n===Jg||n===Kg)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===jg)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Zg)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Jg)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Kg)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Qg||n===$g||n===e0)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===Qg||n===$g)return a===Sn?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===e0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===t0||n===n0||n===i0||n===r0||n===s0||n===o0||n===a0||n===l0||n===u0||n===c0||n===f0||n===h0||n===d0||n===p0)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===t0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===n0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===i0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===r0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===s0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===o0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===a0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===l0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===u0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===c0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===f0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===h0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===d0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===p0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Qd||n===m0||n===g0)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Qd)return a===Sn?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===m0)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===g0)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Qy||n===_0||n===v0||n===y0)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Qd)return r.COMPRESSED_RED_RGTC1_EXT;if(n===_0)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===v0)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===y0)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===gc?s.UNSIGNED_INT_24_8:s[n]!==void 0?s[n]:null}return{convert:t}}const dD=`COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===p0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Qd||n===m0||n===g0)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Qd)return a===Sn?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===m0)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===g0)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Qy||n===_0||n===v0||n===y0)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Qd)return r.COMPRESSED_RED_RGTC1_EXT;if(n===_0)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===v0)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===y0)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}そうでない場合は null を返します;n===gc?s.UNSIGNED_INT_24_8:s[n]!==void 0?s[n]:null}return{convert:t}}const dD=`COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===p0)return a===Sn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Qd||n===m0||n===g0)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Qd)return a===Sn?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===m0)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===g0)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Qy||n===_0||n===v0||n===y0)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Qd)return r.COMPRESSED_RED_RGTC1_EXT;if(n===_0)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===v0)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===y0)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}そうでない場合は null を返します;n===gc?s.UNSIGNED_INT_24_8:s[n]!==void 0?s[n]:null}return{convert:t}}const dD=`
void main() {

	gl_Position = vec4( 位置, 1.0 );

}`,pD=`
均一なサンプラー2DArrayの深さカラー;
均一なフロートの depthWidth;
均一なフロートの depthHeight;

void main() {

	vec2 座標 = vec2( gl_FragCoord.x / 深さ幅、 gl_FragCoord.y / 深さ高さ );

	（座標x >= 1.0）の場合{

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} それ以外 {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class mD{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new zn,r=e.properties.get(i);r.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new go({vertexShader:dD,fragmentShader:pD,uniforms:{depthColor:{value:this.texture},depthWidth:{value:tz},depthHeight:{value:tw}}});this.mesh=new pi(new Ph(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gD extends Yo{constructor(e,t){super();const n=this;let i=null,r=1,a=null,u="local-floor",h=1,d=null,m=null,g=null,_=null,x=null,M=null;const T=new mD,E=t.getContextAttributes();let S=null,R=null;const P=[],I=[],O=new Ie;let U=null;const F=new Ni;F.viewport=new pn;const z=new Ni;z.viewport=new pn;const D=[F,z],N=new ZE;let G=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let xe=P[se];return xe===void 0&&(xe=new Dg,P[se]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(se){let xe=P[se];return xe===void 0&&(xe=new Dg,P[se]=xe),xe.getGripSpace()},this.getHand=function(se){let xe=P[se];return xe===void 0&&(xe=new Dg,P[se]=xe),xe.getHandSpace()};function Q(se){const xe=I.indexOf(se.inputSource);if(xe===-1)return;const be=P[xe];be!==void 0&&(be.update(se.inputSource,se.frame,d||a),be.dispatchEvent({type:se.type,data:se.inputSource}))}function ce(){i.removeEventListener("select",Q),i.removeEventListener("selectstart",Q),i.removeEventListener("selectend",Q),i.removeEventListener("squeeze",Q),i.removeEventListener("squeezestart",Q),i.removeEventListener("squeezeend",Q),i.removeEventListener("end",ce),i.removeEventListener("inputsourceschange",me);for(let se=0;se<P.length;se++){const xe=I[se];xe!==null&&(I[se]=null,P[se].disconnect(xe))}G=null,$=null,T.reset(),e.setRenderTarget(S),x=null,_=null,g=null,i=null,R=null,Pe.stop(),n.isPresenting=!1,e.setPixelRatio(U),e.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){r=se,n.isPresenting===!0&&console.warn("THREE.WebXRManager: フレームバッファのスケールを変更できませんプレゼンテーション中です。")},this.setReferenceSpaceType=function(se){u=se,n.isPresenting===!0&&console.warn("THREE.WebXRManager: プレゼンテーション中は参照空間タイプを変更できません。")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(se){d=se},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return g},this.getFrame=function(){return M},this.getSession=function(){return i},this.setSession=async function(se){if(i=se,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",Q),i.addEventListener("selectstart",Q),i.addEventListener("selectend",Q),i.addEventListener("squeeze",Q),i.addEventListener("squeezestart",Q),i.addEventListener("squeezeend",Q),i.addEventListener("end",ce),i.addEventListener("inputsourceschange",me),E.xrCompatible!==!0&&await t.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(O),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let be=null,Te=null,Xe=null;E.depth&&(Xe=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,be=E.stencil?_c:ac,Te=E.stencil?gc:Ga);const gt={colorFormat:t.RGBA8,depthFormat:Xe,scaleFactor:r};g=new XRWebGLBinding(i,t),_=g.createProjectionLayer(gt),i.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),R=new Wo(_.textureWidth,_.textureHeight,{format:ar,type:mo,depthTexture:new lx(_.textureWidth,_.textureHeight,Te,void 0,void 0,void 0,void 0,void 0,void 0,be),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1})}else{const be={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:r};x=new XRWebGLLayer(i,t,be),i.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),R=new Wo(x.framebufferWidth,x.framebufferHeight,{format:ar,type:mo,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil})}R.isXRRenderTarget=!0,this.setFoveation(h),d=null,a=await i.requestReferenceSpace(u),Pe.setContext(i),Pe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function me(se){for(let xe=0;xe<se.removed.length;xe++){const be=se.removed[xe],Te=I.indexOf(be);Te>=0&&(I[Te]=null,P[Te].disconnect(be))}for(let xe=0;xe<se.added.length;xe++){const be=se.added[xe];let Te=I.indexOf(be);if(Te===-1){for(let gt=0;gt<P.length;gt++)if(gt>=I.length){I.push(be),Te=gt;break}else if(I[gt]===null){I[gt]=be,Te=gt;break}if(Te===-1)break}const Xe=P[Te];Xe&&Xe.connect(be)}}const ue=new q,de=new q;function B(se,xe,be){ue.setFromMatrixPosition(xe.matrixWorld),de.setFromMatrixPosition(be.matrixWorld);const Te=ue. distanceTo(de),Xe=xe.projectionMatrix.elements,gt=be.projectionMatrix.elements,et=Xe[14]/(Xe[10]-1),Lt=Xe[14]/(Xe[10]+1),N e=(Xe[9]+1)/Xe[5],Ce=(Xe[9]-1)/Xe[5],Y=(Xe[8]-1)/Xe[0],_t=(gt[8] +1)/gt[0],Fe=et*Y,rt=et*_t,We=Te/(-Y+_t),Tt=We*-Y;if(xe.matrixWor ld.decompose(se.position,se.quaternion,se.scale),se.translateX(Tt),se.translateZ(We),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert(),Xe[10]===-1)se.projectionMatrix.copy(xe.projectionMatrix),se.projectionMatrixInverse.copy(xe.projectionMatrixInverse);else{const qe=et+We,X=Lt+We,V=Fe-Tt,pe=rt+(Te-Tt),Ee=Ne*Lt/X*qe,Le=Ce*Lt/X*qe;se.projectionMatrix.makePerspective(V,pe,Ee,Le,qe,X),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}}function K(se,xe){xe===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(xe.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(i===null)return;let xe=se.near,be=se.far;T.texture!==null&&(T.depthNear>0&&(xe=T.depthNear),T.depthFar>0&&(be=T.depthFar)),N.near=z.near=F.near=xe,N.far=z.far=F.far=be,(G!==N.near||$!==N.far)&&(i.updateRenderState({depthNear:N.near,depthFar:N.far}),G=N.near,$=N.far),F.layers.mask=se.layers.mask|2,z.layers.mask=se.layers.mask|4,N.layers.mask=F.layers.mask|z.layers.mask;const Te=se.parent,Xe=N.cameras;K(N,Te);for(let gt=0;gt<Xe.length;gt++)K(Xe[gt],Te);Xe.length===2?B(N,F,z):N.projectionMatrix.copy(F.projectionMatrix),J(se,N,Te)};関数J(se,xe,be){be===null?se.matrix.copy(xe.matrixWorld):(se.matrix.copy(be.matrixWorld),se.matrix.invert(),se.matrix.multiply(xe.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(xe.projectionMatrix),se.projectionMatrixInverse.copy(xe.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=mh*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(_===null&&x===null))return h},this.setFoveation=function(se){h=se,_!==null&&(_.fixedFoveation=se),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=se)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(N)};let W=null;function te(se,xe){if(m=xe.getViewerPose(d||a),M=xe,m!==null){const be=m.views;x!==null&&(e.setRenderTargetFramebuffer(R,x.framebuffer),e.setRenderTarget(R));let Te=!1;be.length!==N.cameras.length&&(N.cameras.length=0,Te=!0);for(let et=0;et<be.length;et++){const Lt=be[et];let Ne=null;if(x!==null)Ne=x.getViewport(Lt);else{const Y=g.getViewSubImage(_,Lt);Ne=Y.viewport,et===0&&(e.setRenderTargetTextures(R,Y.colorTexture,_.ignoreDepthValues?void 0:Y.depthStencilTexture),e.setRenderTarget(R))}let Ce=D[et];Ce===void 0&&(Ce=new Ni,Ce.layers.enable(et),Ce.viewport=new pn,D[et]=Ce),Ce.matrix.fromArray(Lt.transform.matrix),Ce.matrix.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.projectionMatrix.fromArray(Lt.projectionMatrix),Ce.projectionMatrixInverse.copy(C e.projectionMatrix).invert(),Ce.viewport.set(Ne.x,Ne.y,Ne.width,Ne.height),et===0&&(N.matrix.copy(Ce.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),Te===!0&&N.cameras.push(Ce)}const Xe=i.enabled features;if(Xe&&Xe.includes("深度センシング")&&i.depthUsage=="gpu-optimized"&&g){const et=g.getDepthInformation(be[0]);et&&et.isValid&&et.texture&&T.init(e,et,i.renderState)}}for(let be=0;be<P.length;be++){const Te=I[be],Xe=P[be];Te!==null&&Xe!==void 0&&Xe.update(Te,xe,d||a)}W&&W(se,xe),xe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:xe}),M=null}const Pe=new tT;Pe.setAnimationLoop(te),this.setAnimationLoop=function(se){W=se},this.dispose=function(){}}}const Yu=new vs,_D=新しいDt;関数vD(s,e){関数t(E,S){E.matrixAutoUpdate===!0&&E.updateMatrix(),S.value.copy(E.matrix)}関数n(E,S){S.color.getRGB(E.fogColor.value,tE(s)),S.isFog?(E.fogNear.value=S.near,E.fogFar.value=S.far):S.isFogExp2&&(E.fogDensity.value=S.density)}関数i(E,S,R,P,I){S.isMeshBasicMaterial||S.isMeshLambertMaterial?r(E,S):S.isMeshToonMaterial?(r(E,S),g(E,S)):S.isMeshPhongMaterial?(r(E,S),m(E,S)):S.isMeshStandardMaterial?(r(E,S),_(E,S),S.isMeshPhysicalMaterial&&x(E,S,I)):S.isMeshMatcapMaterial?(r(E,S) ,M(E,S)):S.isMeshDepthMaterial?r(E,S):S.isMeshDistanceMaterial?(r(E,S),T(E,S)):S.isMeshNormalMaterial?r(E,S):S.isLineBasicMaterial?(a(E,S),S.isLineDashedMaterial&&u(E,S)):S.isPointsMaterial?h(E,S,R,P):S.isSpriteMaterial?d(E,S):S.isShadowMaterial?(Ecolor.value.copy(S.color),E.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function r(E,S){E.opacity.value=S.opacity,S.color&&E.diffuse.value.copy(S.color),S.emissive&&E.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(E.map.value=S.map,t(S.map,E.mapTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,t(S.alph aMap、E.alphaMapTransform)）、S.bumpMap&&(E.bumpMap.value=S.bumpMap、t(S.bumpMap、E.bumpMapTransform)、E.bumpScale.value=S.bumpScale、S.side===Ar&&(E.bumpScale.value*=-1)）、S.normalMap&&(E.normalMap.value=S.normalMap、t(S.normalMap、E.normalMapTransform)、E.normalS cale.value.copy(S.normalScale),S.side===Ar&&E.normalScale.value.negate()),S.displacementMap&&(E.displacementMap.value=S.displacementMap,t(S.displacementMap,E.displacementMapTransform),E.displacementScale.value=S.displacementScale,E.displacementBias.value=S.displacementBias),S.emissiveMap&&(E.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,E.emissiveMapTransform)),S.specularMap&&(E.specularMap.value=S.specularMap,t(S.specularMap,E.specularMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest);const R=e.get(S),P=R.envMap,I=R.envMapRotation;P&&(E.envMap.value=P,Yu.copy(I),Yu.x*=-1,Yu.y*=-1,Yu.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Yu.y*=-1,Yu.z*=-1),E.envMapRotation.value.setFromMatrix4(_D.makeRotationFromEuler(Yu)),E.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,E.reflectiv ity.value=S.reflectivity,E.ior.value=S.ior,E.refractionRatio.value=S.refractionRatio),S.lightMap&&(E.lightMap.value=S.lightMap,E.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,E.lightMapTransform)),S.aoMap&&(E.aoMap.value=S.aoMap,E.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,E.aoMapTransform))}関数a(E,S){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,S.map&&(E.map.value=S.map,t(S.map,E.mapTransform))}関数 u(E,S){E.dashSize.value=S.dashSize,E.totalSize.value=S.dashSize+S.gapSize,E.scale.value=S.scale}関数h(E,S,R,P){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,E.size.value=S.size*R,E.scale.value=P*.5,S.map&&(E.map.value=S.map,t(S.map,E.uvTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,t(S.alphaMap,E.alphaMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest)}関数d(E,S){E.diffuse.value.copy(S.color),E.opacity.value=S.opacity,E.rotation.value=S.rotation,S.map&&(E.map.value=S.map,t(S.map,E.mapTransform)),S.alphaMap&&(E.alphaMap.value=S.alphaMap,t(S.alphaMap,E.alphaMapTransform)),S.alphaTest>0&&(E.alphaTest.value=S.alphaTest)}関数 m(E,S){E.specular.value.copy(S.specular),E.shininess.value=Math.max(S.shininess,1e-4)}関数 g(E,S){S.gradientMap&&(E.gradientMap.value=S.gradientMap)}関数 _(E,S){E.metalness.value=S.metalness,S.metalnessMap&&(E.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,E.metalnessMapTransform)),E.roughness.value=S.roughness,S.roughnessMap&&(E.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,E.roughnessMapTransform)),S.envMap&&(E.envMapIntensity.value=S.envMapIntensity)}関数x(E,S,R){E.ior.value=S.ior,S.sheen>0&&(E.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),E.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(E.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,E.sheenColorMapTransform)),S.sheenRoughnessMap&&(E.sheenRoughnessMap.value=S.sheenRoughnessMap,t( S.sheenRoughnessMap、E.sheenRoughnessMapTransform)))、S.clearcoat>0&&(E.clearcoat.value=S.clearcoat、E.clearcoatRoughness.value=S.clearcoatRoughness、S.clearcoatMap&&(E.clearcoatMap.value=S.clearcoatMap、t(S.clearcoatMap、E.clearcoatMapTransform))、S.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=S.clearcoatRoug hnessMap、t(S.clearcoatRoughnessMap、E.clearcoatRoughnessMapTransform))、S.clearcoatNormalMap&&(E.clearcoatNormalMap.value=S.clearcoatNormalMap、t(S.clearcoatNormalMap、E.clearcoatNormalMapTransform)、E.clearcoatNormalScale.value.copy(S.clearcoatNormalScale)、S.side===Ar&&E.clearcoatNormalScale.value.negate()))、S.disp ersion>0&&(E.dispersion.value=S.dispersion),S.iridescence>0&&(E.iridescence.value=S.iridescence,E.iridescenceIOR.value=S.iridescenceIOR,E.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(E.iridescenceMap.value=S .iridescenceMap,t(S.iridescenceMap,E.iridescenceMapTransform)),S.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),S.transmission>0&&(E.transmission.value=S.transmission,E.transmissionSamplerMap.value=R.texture,E .transmissionSamplerSize.value.set(R.width,R.height),S.transmissionMap&&(E.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,E.transmissionMapTransform)),E.thickness.value=S.thickness,S.thicknessMap&&(E.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.v値=S.attenuationDistance、E.attenuationColor.value.copy(S.attenuationColor))、S.anisotropy>0&&(E.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation)、S.anisotropy*Math.sin(S.anisotropyRotation))、S.anisotropyMap&&(E.anisotropyMap.value=S.anisotropyMap、t(S.anisotropyMap、E.anisotropyMapTransform) )),E.specularIntensity.value=S.specularIntensity、E.specularColor.value.copy(S.specularColor)、S.specularColorMap&&(E.specularColorMap.value=S.specularColorMap、t(S.specularColorMap、E.specularColorMapTransform)),S.specularIntensityMap&&(E.specularIntensityMap.value=S.specularIntensityMap、t(S.specularIntensityMap、E.specularIntensityMapTransform))}関数M(E,S){S.matcap&&(E.matcap.value=S.matcap)}関数T(E,S){const R=e.get(S).light;E.referencePosition.value.setFromMatrixPosition(R.matrixWorld),E.nearDistance.value=R.shadow.camera.near,E.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}関数yD(s,e,t,n){let i={},r={},a=[];const u=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);関数h(R,P){const I=P.program;n.uniformBlockBinding(R,I)}関数d(R,P){let I=i[R.id];I===void 0&&(M(R),I=m(R),i[R.id]=I,R.addEventListener("dispose",E));const O=P.program;n.updateUBOMapping(R,O);const U=e.render.frame;r[R.id]!==U&&(_(R),r[R.id]=U)}function m(R){const P=g();R.__bindingPointIndex=P;const I=s.createBuffer(),O=R.__size,U=R.usage;return s.bindBuffer(s.UNIFORM_BUFFER,I),s.bufferData(s.UNIFORM_BUFFER,O,U),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,P,I),I}function g(){for(let R=0;R<u;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: 同時に使用できるユニフォームグループの最大数に達しました。",0}function _(R){const P=i[R.id],I=R.uniforms,O=R.__cache;s.bindBuffer(s.UNIFORM_BUFFER,P);for(let U=0,F=I.length;U<F;U++){const z=Array.isArray(I[U])?I[U]:[I[U]];for(let D=0,N=z.length;D<N;D++){const G=z[D];if(x(G,U,D,O)===!0){const $=G.__offset,Q=Array.isArray(G.value)?G.value:[G.value];let ce=0;for(let me=0;me<Q.length;me++){const ue=Q[me],de=T(ue);typeof ue=="number"||typeof ue=="boolean"?(G.__data[0]=ue,s.bufferSubData(s.UNIFORM_BUFFER,$+ce,G.__data)):ue.isMatrix3?(G.__data[0]=ue.elements[0],G.__data[1]=ue.elements[1],G.__data[2]=ue.elements[2],G.__data[3]=0,G.__data[4]=ue.elements[3],G.__data[5]=ue.elements[4],G.__data[6]=ue.elements[5],G._ _data[7]=0,G.__data[8]=ue.elements[6],G.__data[9]=ue.elements[7],G.__data[10]=ue.elements[8],G.__data[11]=0):(ue.toArray(G.__data,ce),ce+=de.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,$,G.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}関数x(R,P,I,O){const U=R.value,F=P+"_"+I;if(O[F]===void 0)return typeof U=="number"||typeof U=="boolean"?O[F]=U:O[F]=U.clone(),!0;{const z=O[F];if(typeof U=="number"||typeof U=="boolean"){if(z!==U)return O[F]=U,!0}else if(z.equals(U)===!1)return z.copy(U),!0}return!1}function M(R){const P=R.uniforms;let I=0;const O=16;for(let F=0,z=P.length;F<z;F++){const D=Array.isArray(P[F])?P[F]:[P[F]];for(let N=0,G=D.length;N<G;N++){const $=D[N],Q=Array.isArray($.value)?$.value:[$.value];for(let ce=0,me=Q.length;ce<me;ce++){const ue=Q[ce],de=T(ue),B=I%O,K=B%de.boundary,J=B+K;I+=K,J!==0&&O-J<de.storage&&(I+=OJ),$.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=I,I+=de.storage}}}const U=I%O;return U>0&&(I+=OU),R.__size=I,R.__cache={},this}function T(R){const P={境界:0,ストレージ:0};return typeof R=="number"||typeof R=="boolean"?(P.boundary=4,P.storage=4):R.isVector2?(P.boundary=8,P.storage=8):R.isVector3||R.isColor?(P.boundary=16,P.storage=12):R.isVector4?(P.boundary=16,P.storage=16):R.isMatrix3?(P.boundary=48,P.storage=48):R.isMatrix4?(P.boundary=64,P.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: テクスチャサンプラーはユニフォームグループの一部にすることはできません。"):console.warn("THREE.WebGLRenderer: サポートされていないユニフォーム値タイプです。",R),P}function E(R){const P=R.target;P.removeEventListener("dispose",E);const I=a.indexOf(P.__bindingPointIndex);a.splice(I,1),s.deleteBuffer(i[P.id]),delete i[P.id],delete r[P.id]}function S(){for(const R in i)s.deleteBuffer(i[R]);a=[],i={},r={}}return{bind:h,update:d,dispose:S}}クラスaT{constructor(e={}){const{canvas:t=Qw(),context:n=null,depth:i=!0,stencil:r=!1,alpha:a=!1,antialias:u=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:_=!1}=e;this.isWebGLRenderer=!0;let x;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1はr163以降サポートされていません。");x=n.getContextAttributes().alpha}else x=a;const M=new Uint32Array(4),T=new Int32Array(4);let E=null,S=null;const R=[],P=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Gr,this.toneMapping=zo,this.toneMappingExposure=1;const I=this;let O=!1,U=0,F=0,z=null,D=-1,N=null;const G=新しいpn,$=新しいpn;let Q=null;const ce=新しいlt(0);let me=0,ue=t.width,de=t.height,B=1,K=null,J=null;const W=new pn(0,0,ue,de),te=new pn(0,0,ue,de);let Pe=!1;const se=new Up;let xe=!1,be=!1;this.transmissionResolutionScale=1;const Te=new Dt,Xe=new Dt,gt=new q,et=new pn,Lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ne=!1;function Ce(){return z===null?B:1}let Y=n;function _t(H,oe){return t.getContext(H,oe)}try{const H={alpha:!0,depth:i,stencil:r,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${N0}`),t.addEventListener("webglcontextlost",Re,!1),t.addEventListener("webglcontextrestored",tt,!1),t.addEventListener("webglcontextcreationerror",Ke,!1),Y===null){const oe="webgl2";if(Y=_t(oe,H),Y===null)throw _t(oe)?new Error("選択した属性でWebGLコンテキストを作成中にエラーが発生しました。":new Error("WebGLコンテキスト。")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let Fe,rt,We,Tt,qe,X,V,pe,Ee,Le,Ae,dt,je,st,Bt,ke,ct,At,It,ft,Qt,Nt,gn,関数 Je(){Fe=新しい I3(Y),Fe.init(),Nt=新しい oT(Y,Fe),rt=新しい T3(Y,Fe,e,Nt),We=新しい fD(Y,Fe),rt.reverseDepthBuffer&&_&&We.buffers.depth.setReversed(!0),Tt=新しい N3(Y),qe=新しい QL,X=新しい hD(Y,Fe,We,qe,rt,Nt,Tt),V=新しい C3(I),pe=新しい P3(I),Ee=新しい V2(Y),gn=新しい w3(Y,Ee),Le=新しい L3(Y,Ee,Tt,gn),Ae=新しい O3(Y,Le,Ee,Tt),It=新しい U3(Y,rt,X),ke=新しい A3(qe),dt=新しい KL(I,V,pe,Fe,rt,gn,ke),je=新しいvD(I,qe),st=新しい eD,Bt=新しい oD(Fe),At=新しい M3(I,V,pe,We,Ae,x,h),ct=新しい uD(I,Ae,rt),re=新しい yD(Y,Tt,rt,We),ft=新しい E3(Y,Fe,Tt),Qt=新しい D3(Y,Fe,Tt),Tt.programs=dt.programs,I.capabilities=rt,I.extensions=Fe,I.properties=qe,I.renderLists=st,I.shadowMap=ct,I.state=We,I.info=Tt}Je();const Me=新しい gD(I,Y);this.xr=Me,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const H=Fe.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=Fe.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(H){H!==void 0&&(B=H,this.setSize(ue,de,!1))},this.getSize=function(H){return H.set(ue,de)},this.setSize=function(H,oe,ve=!0){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: VRデバイスがプレゼンテーション。");return}ue=H,de=oe,t.width=Math.floor(H*B),t.height=Math.floor(oe*B),ve===!0&&(t.style.width=H+"px",t.style.height=oe+"px"),this.setViewport(0,0,H,oe)},this.getDrawingBufferSize=function(H){return H.set(ue*B,de*B).floor()},this.setDrawingBufferSize=function(H,oe,ve){ue=H,de=oe,B=ve,t.width=Math.floor(H*ve),t.height=Math.floor(oe*ve),this.setViewport(0,0,H,oe)},this.getCurrentViewport=function(H){return H.copy(G)},this.getViewport=function(H){return H.copy(W)},this.setViewport=function(H,oe,ve,fe){H.isVector4?W.set(Hx,Hy,Hz,Hw):W.set(H,oe,ve,fe),We.viewport(G.copy(W).multiplyScalar(B).round())},this.getScissor=function(H){return H.copy(te)},this.setScissor=function(H,oe,ve,fe){H.isVector4?te.set(Hx,Hy,Hz,Hw):te.set(H,oe,ve,fe),We.scissor($.copy(te).multiplyScalar(B).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(H){We.setScissorTest(Pe=H)},this.setOpaqueSort=function(H){K=H},this.setTransparentSort=function(H){J=H},this.getClearColor=function(H){return H.copy(At.getClearColor())},this.setClearColor=function(){At.setClearColor.apply(At,arguments)},this.getClearAlpha=function(){return At.getClearAlpha()},this.setClearAlpha=function(){At.setClearAlpha.apply(At,arguments)},this.clear=function(H=!0,oe=!0,ve=!0){let fe=0;if(H){let le=!1;if(z!==null){const Oe=z.texture.format;le=Oe===H0||Oe===V0||Oe===Ip}if(le){const Oe=z.texture.type,Ze=Oe===mo||Oe===Ga||Oe===ph||Oe===gc||Oe===k0||Oe===z0,it=At.getClearColor(),at=At.getClearAlpha(),Et=it.r,wt=it.g,He=it.b;Ze?(M[0]=Et,M[1]=wt,M[2]=He,M[3]=at,Y.clearBufferuiv(Y.COLOR,0,M)):(T[0]=Et,T[1]=wt,T[2]=He,T[3]=at,Y.clearBufferiv(Y.COLOR,0,T))}else fe|=Y.COLOR_BUFFER_BIT}oe&&(fe|=Y.DEPTH_BUFFER_BIT),ve&&(fe|=Y.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Y.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",R e,!1),t.removeEventListener("webglcontextrestored",tt,!1),t.removeEventListener("webglcontextcreationerror",Ke,!1),At.dispose(),st.dispose(),Bt.dispose(),qe.dispose(),V.dispose(),pe.dispose(),Ae.dispose(),gn.dispose(),re.dispose(),dt.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",qa),Me.removeEventListener("sessionend",yo),Ss.stop()};関数Re(H){H.preventDefault(),console.log("THREE.WebGLRenderer: コンテキストが失われました。"),O=!0}function tt(){console.log("THREE.WebGLRenderer: コンテキストが復元されました。"),O=!1;const H=Tt.autoReset,oe=ct.enabled,ve=ct.autoUpdate,fe=ct.needsUpdate,le=ct.type;Je(),Tt.autoReset=H,ct.enabled=oe,ct.autoUpdate=ve,ct.needsUpdate=fe,ct.type=le}function Ke(H){console.error("THREE.WebGLRenderer: WebGLコンテキストを作成できませんでした。理由: ",H.statusMessage)}function Ut(H){const oe=H.target;oe.removeEventListener("dispose",Ut),An(oe)}function An(H){Yn(H),qe.remove(H)}function Yn(H){const oe=qe.get(H).programs;oe!==void 0&&(oe.forEach(function(ve){dt.releaseProgram(ve)}),H.isShaderMaterial&&dt.releaseShaderCache(H))}this.renderBufferDirect=function(H,oe,ve,fe,le,Oe){oe===null&&(oe=Lt);const Ze=le.isMesh&&le.matrixWorld.determinant()<0,it=Rc(H,oe,ve,fe,le);We.setMaterial(fe,Ze);let at=ve.index,Et=1;if(fe.wireframe===!0){if(at=Le.getWireframeAttribute(ve),at===void 0)return;Et=2}const wt=ve.drawRange,He=ve.attributes.position;let vt=wt.start*Et,Pt=(wt.start+wt.count)*Et;Oe!==null&&(vt=Math.max(vt,Oe.start*Et),Pt=Math.min(Pt,(Oe.start+Oe.count)*Et)),at!==null?(vt=Math.max(vt,0),Pt=Math.min(Pt,at.count)):He!=null&&(vt=Math.max(vt,0),Pt=Math.min(Pt,He.count));const $t=Pt-vt;if($t<0||$t===1/0)return;gn.setup(le,fe,it,ve,at);let en,Xt=ft;if(at!==null&&(en=Ee.get(at),Xt=Qt,Xt.setIndex(en)),le.isMesh)fe.wireframe===!0?(We.setLineWidth(fe.wireframeLinewidth*Ce()),Xt.setMode(Y.LINES)):Xt.setMode(Y.TRIANGLES);else if(le.isLine){let mt=fe.linewidth;mt===void 0&&(mt=1),We.setLineWidth(mt*Ce()),le.isLineSegments?Xt.setMode(Y.LINES):le.isLineLoop?Xt.setMode(Y.LINE_LOOP):Xt.setMode(Y.LINE_STRIP)}else le.isPoints?Xt.setMode(Y.POINTS):le.isSprite&&Xt.setMode(Y.TRIANGLES);if(le.isBatchedMesh)if(le._multiDrawInstances!==null)Xt.renderMultiDrawInstances(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount,le._multiDrawInstances);else if(Fe.get("WEBGL_multi_draw"))Xt.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else{const mt=le._multiDrawStarts、sn=le._multiDrawCounts、jt=le._multiDrawCount、mi=at?Ee.get(at).bytesPerElement:1、ks=qe.get(fe).currentProgram.getUniforms();for(let ii=0;ii<jt;ii++)ks.setValue(Y,"_gl_DrawID",ii),Xt.render(mt[ii]/mi,sn[ii])}else if(le.isInstancedMesh)Xt.renderInstances(vt,$t,le.count);else if(ve.isInstancedBufferGeometry){const mt=ve._maxInstanceCount!==void 0?ve._maxInstanceCount:1/0、sn=Math.min(ve.instanceCount,mt);Xt.renderInstances(vt,$t,sn)}else Xt.render(vt,$t)};function on(H,oe,ve){H.transparent===!0&&H.side===Uo&&H.forceSinglePass===!1?(H.side=Ar,H.needsUpdate=!0,ja(H,oe,ve),H.side=Va,H.needsUpdate=!0,ja(H,oe,ve),H.side=Uo):ja(H,oe,ve)}this.compile=function(H,oe,ve=null){ve===null&&(ve=H),S=Bt.get(ve),S.init(oe),P.push(S),ve.trave rseVisible(function(le){le.isLight&&le.layers.test(oe.layers)&&(S.pushLight(le),le.castShadow&&S.pushShadow(le))}),H!==ve&&H.traverse Visible(function(le){le.isLight&&le.layers.test(oe.layers)&&(S.pushLight(le),le.castShadow&&S.pushShadow(le))}),S.setupLights();const fe=new Set;return H.traverse(function(le){if(!(le.isMesh||le.isPoints||le.isLine||le.isSprite))return;const Oe=le.material;if(Oe)if(Array.isArray(Oe))for(let Ze=0;Ze<Oe.length;Ze++){const it=Oe[Ze];on(it,ve,le),fe.add(it)}else on(Oe,ve,le),fe.add(Oe)}),P.pop(),S=null,fe},this.compileAsync=function(H,oe,ve=null){const fe=this.compile(H,oe,ve);return new Promise(le=>{function Oe(){if(fe.forEach(function(Ze){qe.get(Ze).currentProgram.isReady()&&fe.delete(Ze)}),fe.size===0){le(H);return}setTimeout(Oe,10)}Fe.get("KHR_parallel_shader_compile")!==null?Oe():setTimeout(Oe,10)})};let Oi=null;function Fi(H){Oi&&Oi(H)}function qa(){Ss.stop()}function yo(){Ss.start()}const Ss=new tT;Ss.setAnimationLoop(Fi),typeof self<"u"&&Ss.setContext(self),this.setAnimationLoop=function(H){Oi=H,Me.setAnimationLoop(H),H===null?Ss.stop():Ss.start()},Me.addEventListener("sessionstart",qa),Me.addEventListener("sessionend",yo),this.render=function(H,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: カメラはTHREE.Camera.");return}if(O===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera(oe),oe=Me.getCamera()),H.isScene===!0&&H.onBeforeR ender(I,H,oe,z),S=Bt.get(H,P.length),S.init(oe),P.push(S),Xe.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),se.setFromProjectionMatrix(Xe),be=this.localClippingEnabled,xe=ke.init(this.clippingPlanes,be),E=st.get(H,R.length),E.init(),R.push(E),Me.enabled===!0&&Me.isPresenting===!0){const Oe=I.xr.getDepthSensingMesh();Oe!==null&&$r(Oe,oe,-1/0,I.sortObjects)}$r(H,oe,0,I.sortObjects),E.finish(),I.sortObjects===!0&&E.sort(K,J),Ne=Me.enabled===!1||Me.isPresenting===!1||Me.hasDepthSensing()===!1,Ne&&At.addToRenderList(E,H),this.info.render.frame++,xe===!0&&ke.beginShadows();const ve=S.state.shadowsArray;ct.render(ve,H,oe),xe===!0&&ke.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=E.opaque,le=E.transmissive;if(S.setupLights(),oe.isArrayCamera){const Oe=oe.cameras;if(le.length>0)for(let Ze=0,it=Oe.length;Ze<it;Ze++){const at=Oe[Ze];es(fe,le,H,at)}Ne&&At.render(H);for(let Ze=0,it=Oe.length;Ze<it;Ze++){const at=Oe[Ze];jo(E,H,at,at.viewport)}}else le.length>0&&es(fe,le,H,oe),Ne&&At.render(H),jo(E,H,oe);z!==null&&F===0&&(X.updateMultisampleRenderTarget(z),X.updateRenderTargetMipmap(z)),H.isScene===!0&&H.onAfterRender(I,H,oe),gn.resetDefaultState(),D=-1,N=null,P.pop(),P.length>0?(S=P[P.length-1],xe===!0&&ke.setGlobalState(I.clippingPlanes,S.state.camera)):S=null,R.pop(),R.length>0?E=R[R.length-1]:E=null};関数$r(H,oe,ve,fe){if(H.visible===!1)return;if(H.layers.test(oe.layers)){if(H.isGroup)ve=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(oe);else if(H.isLight)S.pushLight(H),H.castShadow&&S.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||se.intersectsSprite(H)){fe&&et.setFromMatrixPosition(H.matrixWorld).applyMatrix4(Xe);const Ze=Ae.update(H),it=H.material;it.visible&&E.push(H,Ze,it,ve,et.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||se.intersectsObject(H))){const Ze=Ae.update(H),it=H.material;if(fe&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),et.copy(H.boundingSphere.center)):(Ze.boundingSphere===null&&Ze.computeBoundingSphere(),et.copy(Ze.boundingSphere.center)),et.applyMatrix4(H.matrixWorld).applyMatrix4(Xe)),Array.isArray(it)){const at=Ze.groups;for(let Et=0,wt=at.length;Et<wt;Et++){const He=at[Et],vt=it[He.materialIndex];vt&&vt.visible&&E.push(H,Ze,vt,ve,et.z,He)}}else it.visible&&E.push(H,Ze,it,ve,et.z,null)}}const Oe=H.children;for(let Ze=0,it=Oe.length;Ze<it;Ze++)$r(Oe[Ze],oe,ve,fe)}function jo(H,oe,ve,fe){const le=H.opaque,Oe=H.transmissive,Ze=H.transparent;S.setupLightsView(ve),xe===!0&&ke.setGlobalState(I.clippingPlanes,ve),fe&&We.viewport(G.copy(fe)),le.length>0&&xo(le,oe,ve),Oe.length>0&&xo(Oe,oe,ve),Ze.length>0&&xo(Ze,oe,ve),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}関数es(H,oe,ve,fe){if((ve.isScene===!0?ve.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[fe.id]===void 0&&(S.state.transmissionRenderTarget[fe.id]=new Wo(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")||Fe.has("EXT_color_buffer_float")?Ch:mo,minFilter:Fo,サンプル:4、ステンシルバッファ:r、resolveDepthBuffer:!1、resolveStencilBuffer:!1、colorSpace:fn.workingColorSpace}));const Oe=S.state.transmissionRenderTarget[fe.id]、Ze=fe.viewport||G;Oe.setSize(Ze.z*I.transmissionResolutionScale、Ze.w*I.transmissionResolutionScale);const it=I.getRenderTarget();I.setRenderTarget(Oe),I.getClearColor(ce),me=I.getClearAlpha(),me<1&&I.setClearColor(16777215,.5),I.clear(),Ne&&At.render(ve);const at=I.toneMapping;I.toneMapping=zo;const Et=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),S.setupLightsView(fe),xe===!0&&ke.setGlobalState(I.clippingPlanes,fe),xo(H,ve,fe),X.updateMultisampleRenderTarget(Oe),X.updateRenderTargetMipmap(Oe),Fe.has("WEBGL_multisampled_render_to_texture")===!1){let wt=!1;for(let He=0,vt=oe.length;He<vt;He++){const Pt=oe[He],$t=Pt.object,en=Pt.geometry,Xt=Pt.material,mt=Pt.group;if(Xt.side===Uo&&$t.layers.test(fe.layers)){const sn=Xt.side;Xt.side=Ar,Xt.needsUpdate=!0,Ac($t,ve,fe,en,Xt,mt),Xt.side=sn,Xt.needsUpdate=!0,wt=!0}}wt===!0&&(X.updateMultisampleRenderTarget(Oe),X.updateRenderTargetMipmap(Oe))}I.setRenderTarget(it),I.setClearColor(ce,me),Et!==void 0&&(fe.viewport=Et),I.toneMapping=at}function xo(H,oe,ve){const fe=oe.isScene===!0?oe.overrideMaterial:null;for(let le=0,Oe=H.length;le<Oe;le++){const Ze=H[le]、it=Ze.object、at=Ze.geometry、Et=fe===null?Ze.material:fe、wt=Ze.group;it.layers.test(ve.layers)&&Ac(it,oe,ve,at,Et,wt)}}function Ac(H,oe,ve,fe,le,Oe){H.onBeforeRender(I,oe,ve,fe,le,Oe),H.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse、H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),le.onBeforeRender(I,oe,ve,fe,H,Oe),le.transparent===!0&&le.side===Uo&&le. forceSinglePass===!1?(le.side=Ar,le.needsUpdate=!0,I.renderBufferDirect(ve,oe,fe,le,H,Oe),le.side=Va,le.needsUpdate=!0,I.rend erBufferDirect(ve,oe,fe,le,H,Oe),le.side=Uo):I.renderBufferDirect(ve,oe,fe,le,H,Oe),H.onAfterRender(I,oe,ve,fe,le,Oe)}関数ja(H,oe,ve){oe.isScene!==!0&&(oe=Lt);const fe=qe.get(H),le=S.state.lights,Oe=S.state.shadowsArray,Ze=le.state.version,it=dt.getParameters(H,le.state,Oe,oe,ve),at=dt.getProgramCacheKey(it);let Et=fe.programs;fe.environment=H.isMeshStandardMaterial?oe.environment:null,fe.fog=oe.fog,fe.envMap=(H.isMeshStandardMaterial?pe:V).get(H.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&H.envMap===null?oe.environmentRotation:H.envMapRotation,Et===void 0&&(H.addEventListener("dispose",Ut),Et=new Map,fe.programs=Et);let wt=Et.get(at);if(wt!==void 0){if(fe.currentProgram===wt&&fe.lightsStateVersion===Ze)return Ms(H,it),wt}else it.uniforms=dt.getUniforms(H),H.onBeforeCompile(it,I),wt=dt.acquireProgram(it,at),Et.set(at,wt),fe.uniforms=it.uniforms;const He=fe.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(He.clippingPlanes=ke.uniform),Ms(H,it),fe.needsLights=Pc(H),fe.lightsStateVersion=Ze,fe.needsLights&&(He.ambientLightColor.value=le.state.ambient、He.lightProbe.value=le.state.probe、He.directionalLights.value=le.state.directional、He.directionalLightShadows.value=le.state.directionalShadow、He.spotLights.value=le.state.spot、He.spotLightShadows.value=le.state.spotShadow、He.rectAreaLights.value=le.state.rectArea、He.ltc_1.value=le.state.rectAreaLTC1、He.ltc_2.value=le.state.rectAreaLTC2、He.pointLights.value=le.state.point、He.pointLightShadows.value=le.state.p ointShadow、He.hemisphereLights.value=le.state.hemi、He.directionalShadowMap.value=le.state.directionalShadowMap、He.directionalShadowMatrix.value=le.state.directionalShadowMatrix、He.spotShadowMap.value=le.state.spotShadowMap、He.spotLightMatrix.value=le.state.spotLightMatrix、He.spotLightMap.value=le.state.spotLightMap、He.pointShadowMap.value=le.state.pointShadowMap、He.pointShadowMatrix.value=le.state.pointShadowMatrix)、fe.currentProgram=wt、fe.uniformsList=null、wt}関数Cc(H){if(H.uniformsList===null){const oe=H.currentProgram.getUniforms();H.uniformsList=Ng.seqWithValue(oe.seq,H.uniforms)}return H.uniformsList}関数Ms(H,oe){const ve=qe.get(H);ve.outputColorSpace=oe.outputColorSpace,ve.batching=oe.batching,ve.batchingColor=oe.batchingColor,ve.instancing=oe.instancing,ve.instancingColor=oe.instancingColor,ve.instancingMorph=oe.instancingMorph,ve.skinning=oe.skinning,ve.morphTargets=oe.morphTargets,ve.morphNormals=oe.morphNormals,ve.morphColors=oe.morphColors,ve.morphTargetsCount=oe.morphTargetsCount,ve.numClippingPlanes=oe.numClippingPlanes,ve.numIntersection=oe.numClipIntersection,ve.vertexAlphas=oe.vertexAlphas,ve.vertexTangents=oe.vertexTangents,ve.toneMapping=oe.toneMapping}関数Rc(H,oe,ve,fe,le){oe.isScene!==!0&&(oe=Lt),X.resetTextureUnits();const Oe=oe.fog、Ze=fe.isMeshStandardMaterial?oe.environment:null、it=z===null?I.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:vc、at=(fe.isMeshStandardMaterial?pe:V).get(fe.envMap||Ze)、Et=fe.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4、wt=!!ve.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0)、He=!!ve.morphAttributes.position、vt=!!ve.morphAttributes.normal、Pt=!!ve.morphAttributes.color;let $t=zo;fe.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&($t=I.toneMapping);const en=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,Xt=en!==void 0?en.length:0,mt=qe.get(fe),sn=S.state.lights;if(xe===!0&&(be===!0||H!==N)){const gi=H===N&&fe.id===D;ke.setState(fe,H,gi)}let jt=!1;fe.version===mt.__version?(mt.needsLights&&mt.lightsStateVersion!==sn.state.version||mt.outputColorSpace!==it||le.isBatchedMesh&&mt.batching===!1||!le.isBatchedMesh&&mt.batching===!0||le.isBatchedMesh&&mt.batchingColor===!0&&le.colorTexture===null||le.isBatchedMesh&&mt.batchingColor===!1&&le.colorTexture!==null||le.isInstancedMesh&&mt.instancing===!1||!le.isInstancedMesh&&mt.instancing===!0||le.isSkinnedMesh&&mt.skinning===!1||!le.isSkinnedMesh&&mt.skinning===!0||le.isInstancedMesh&&mt.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&mt.instancingColor===!1&&le. instanceColor!==null||le.isInstancedMesh&&mt.instancingMorph===!0&&le.morphTexture===null||le.isInstancedMesh&&mt.instancingMorph===!1&&le.morphTexture!==null||mt.envMap!==at||fe.fog===!0&&mt.fog!==Oe||m​​t.numClippingPlanes!==void 0&&(mt.numClippingPlanes!==ke.numPlanes||mt.numIntersection!==ke.numIntersection)||mt.vertexAlphas!==Et||mt.vertexTangents!==wt||mt.morphTargets!==He||mt.morphNormals!==vt||mt.morphColors!==Pt||mt.toneMapping!==$t||mt.morphTargetsCount!==Xt)&&(jt=!0):(jt=!0,mt.__version=fe.version);let mi=mt.currentProgram;jt===!0&&(mi=ja(fe,oe,le));let ks=!1,ii=!1,ws=!1;const tn=mi.getUniforms(),Ci=mt.uniforms;if(We.useProgram(mi.program)&&(ks=!0,ii=!0,ws=!0),fe.id!==D&&(D=fe.id,ii=!0),ks||N!==H){We.buffers. Depth.getReversed()?(Te.copy(H.projec) tionMatrix),cR(Te),fR(Te),tn.setValue(Y,"projectionMatrix",Te)):tn.setValue(Y,"projectionMatrix",H.projectionMatrix),tn.setValue(Y,"viewMatrix",H.matrixWorldInverse);const Bn=tn.map.cameraPosition;Bn!==void 0&&Bn.setValue(Y,gt.setFromMatrixPosition(H.matrixWorld)),rt.logarithmicDepthBuffer&&tn.setValue(Y,"logDepthBufFC",2/(Ma th.log(H.far+1)/Math.LN2)),(fe.isMeshPhongマテリアル||fe.isMeshToonマテリアル||fe.isMeshLambertマテリアル||fe.isMeshBasicMater ial||fe.isMeshStandardmaterial||fe.isShadermaterial)&&tn.setValue(Y,"isOrthographic",H.isOrthographicCamera===!0),N!==H& &(N=H,ii=!0,ws=!0)}if(le.isSkinnedMesh){tn.setOptional(Y,le,"bindMatrix"),tn.setOptional(Y,le,"bindMatrixInverse");const gi=le.skeleton;gi&&(gi.boneTexture===null&&gi.computeBoneTexture(),tn.setValue(Y,"boneTexture",gi.boneTexture,X))}le.isBatchedMesh&&(tn.setOptional(Y,le,"batchingTexture"),tn.setValue(Y,"batchingTexture",le._matricesTexture,X),tn.setOptional(Y,le,"batchingIdTexture"),tn.setValue(Y,"batchingIdTexture",le._indirectTexture,X),tn.setOptional(Y,le,"batchingColorTexture"),le._colorsTexture!==null&&tn.setValue(Y,"batchingColorTexture",le._colorsTexture,X));const ri=ve.morphAttributes;if((ri.position!==void 0||ri.normal!==void 0||ri.color!==void 0)&&It.update(le,ve,mi),(ii||mt.receiveShadow!==le.receiveShadow)&&(mt.receiveShadow=le.receiveShadow,tn.setValue(Y,"receiveShadow",le.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(Ci.envMap.value=at,Ci.flipEnvMap.value=at.isCubeTexture&&at.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&oe.environment!==null&&(Ci.envMapIntensity.value=oe.environmentIntensity),ii&&(tn.setValue(Y,"toneMappingExposure",I.toneMappingExposure),mt.needsLights&&bc(Ci,ws),Oe&&fe.fog===!0&&je.refreshFogUniforms(Ci,Oe),je.refreshMaterialUniforms(Ci,fe,B,de,S.state.transmissionRenderTarget[H.id]),Ng.upload(Y,Cc(mt),Ci,X)),fe.isShaderMaterial&&fe.unifor msNeedUpdate===!0&&(Ng.upload(Y,Cc(mt),Ci,X),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&tn.setValue(Y,"center",le.center),tn.setValue(Y,"modelViewMatrix",le.modelViewMatrix),tn.setValue(Y,"normalMatrix",le.normalMatrix),tn.setValue(Y,"modelMatrix",le.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const gi=fe.uniformsGroups;for(let Bn=0,nn=gi.length;Bn<nn;Bn++){const Zi=gi[Bn];re.update(Zi,mi),re.bind(Zi,mi)}}return mi}function bc(H,oe){H.ambientLightColor.needsUpdate=oe,H.lightProbe.needsUpdate=oe,H.directionalLights.needsUpdate=oe,H.directionalLightShadows.needsUpdate=oe,H.pointLights.needsUpdate=oe,H.pointLightShadows.needsUpdate=oe,H.spotLights.needsUpdate=oe,H.spotLightShadows.needsUpdate=oe,H.rectAreaLights.needsUpdate=oe,H.hemisphereLights.needsUpdate=oe}function Pc(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(H,oe,ve){qe.get(H.texture).__webglTexture=oe,qe.get(H.depthTexture).__webglTexture=ve;const fe=qe.get(H);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=ve===void 0,fe.__autoAllocateDepthBuffer||Fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: 外部テクスチャが提供されたため、Render-to-texture拡張機能は無効になりました"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,oe){const ve=qe.get(H);ve.__webglFramebuffer=oe,ve.__useDefaultFramebuffer=oe===void 0};const Ic=Y.createFramebuffer();this.setRenderTarget=function(H,oe=0,ve=0){z=H,U=oe,F=ve;let fe=!0,le=null,Oe=!1,Ze=!1;if(H){const at=qe.get(H);if(at.__useDefaultFramebuffer!==void 0)We.bindFramebuffer(Y.FRAMEBUFFER,null),fe=!1;else if(at.__webglFramebuffer===void 0)X.setupRenderTarget(H);else if(at.__hasExternalTextures)X.rebindTextures(H,qe.get(H.texture).__webglTexture,qe.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const He=H.depthTexture;if(at.__boundDepthTexture!==He){if(He!==null&&qe.has(He)&&(H.width!==He.image.width||H.height!==He.image.height))throw new Error("WebGLRenderTarget:アタッチされた DepthTexture が間違ったサイズに初期化されています。");X.setupDepthRenderbuffer(H)}}const Et=H.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(Ze=!0);const wt=qe.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(wt[oe])?le=wt[oe][ve]:le=wt[oe],Oe=!0):H.samples>0&&X.useMultisampledRTT(H)===!1?le=qe.get(H).__webglMultisampledFramebuffer:Array.isArray(wt)?le=wt[ve]:le=wt,G.copy(H.viewport),$.copy(H.scissor),Q=H.scissorTest}else G.copy(W).multiplyScalar(B).floor(),$.copy(te).multiplyScalar(B).floor(),Q=Pe;if(ve!==0&&(le=Ic),We.bindFramebuffer(Y.FRAMEBUFFER,le)&&fe&&We.drawBuffers(H,le),We.viewport(G),We.scissor($),We.setScissorTest(Q),Oe){const at=qe.get(H.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+oe,at.__webglTexture,ve)}else if(Ze){const at=qe.get(H.texture),Et=oe;Y.framebufferTextureLayer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,at.__webglTexture,ve,Et)}else if(H!==null&&ve!==0){const at=qe.get(H.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,at.__webglTexture,ve)}D=-1},this.readRenderTargetPixels=function(H,oe,ve,fe,le,Oe,Ze){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget が THREE.WebGLRenderTarget ではありません。");return}let it=qe.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Ze!==void 0&&(it=it[Ze]),it){We.bindFramebuffer(Y.FRAMEBUFFER,it);try{const at=H.texture,Et=at.format,wt=at.type;if(!rt.textureFormatReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTargetがRGBAまたは実装定義の形式ではありません。");return}if(!rt.textureTypeReadable(wt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTargetがUnsignedByteTypeまたは実装定義の形式ではありません。タイプします。");return}oe>=0&&oe<=H.width-fe&&ve>=0&&ve<=H.height-le&&Y.readPixels(oe,ve,fe,le,Nt.convert(Et),Nt.convert(wt),Oe)}finally{const at=z!==null?qe.get(z).__webglFramebuffer:null;We.bindFramebuffer(Y.FRAMEBUFFER,at)}}},this.readRenderTargetPixelsAsync=async function(H,oe,ve,fe,le,Oe,Ze){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget が THREE.WebGLRenderTarget ではありません。");let it=qe.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Ze!==void 0&&(it=it[Ze]),it){const at=H.texture,Et=at.format,wt=at.type;if(!rt.textureFormatReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget が RGBA または実装定義の形式ではありません。");if(!rt.textureTypeReadable(wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget が UnsignedByteType または実装定義の形式ではありません。タイプ。");if(oe>=0&&oe<=H.width-fe&&ve>=0&&ve<=H.height-le){We.bindFramebuffer(Y.FRAMEBUFFER,it);const He=Y.createBuffer();Y.bindBuffer(Y.PIXEL_PACK_BUFFER,He),Y.bufferData(Y.PIXEL_PACK_BUFFER,Oe.byteLength,Y.STREAM_READ),Y.readPixels(oe,ve,fe,le,Nt.convert(Et),Nt.convert(wt),0);const vt=z!==null?qe.get(z).__webglFramebuffer:null;We.bindFramebuffer(Y.FRAMEBUFFER,vt);const Pt=Y.fenceSync(Y.SYNC_GPU_COMMANDS_COMPLETE,0);return Y.flush(),await uR(Y,Pt,4),Y.bindBuffer(Y.PIXEL_PACK_BUFFER,He),Y.getBufferSubData(Y.PIXEL_PACK_BUFFER,0,Oe),Y.deleteBuffer(He),Y.deleteSync(Pt),Oe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: 要求された読み取り範囲が範囲です。")}},this.copyFramebufferToTexture=function(H,oe=null,ve=0){H.isTexture!==!0&&($f("WebGLRenderer: copyFramebufferToTexture関数のシグネチャが変更されました。"),oe=arguments[0]||null,H=arguments[1]);const fe=Math.pow(2,-ve),le=Math.floor(H.image.width*fe),Oe=Math.floor(H.image.height*fe),Ze=oe!==null?oe.x:0,it=oe!==null?oe.y:0;X.setTexture2D(H,0),Y.copyTexSubImage2D(Y.TEXTURE_2D,ve,0,0,Ze,it,le,Oe),We.unbindTexture()};const Lc=Y.createFramebuffer(),Dc=Y.createFramebuffer();this.copyTextureToTexture=function(H,oe,ve=null,fe=null,le=0,Oe=null){H.isTexture!==!0&&($f("WebGLRenderer: copyTextureToTexture 関数のシグネチャが変更されました。"),fe=arguments[0]||null,H=arguments[1],oe=arguments[2],Oe=arguments[3]||0,ve=null),Oe===null&&(le!==0?($f("WebGLRenderer: copyTextureToTexture 関数のシグネチャが変更され、src および dst ミップマップ レベルがサポートされるようになりました。"),Oe=le,le=0):Oe=0);let Ze,it,at,Et,wt,He,vt,Pt,$t;const en=H.isCompressedTexture?H.mipmaps[Oe]:H.image;if(ve!==null)Ze=ve.max.x-ve.min.x,it=ve.max.y-ve.min.y,at=ve.isBox3?ve.max.z-ve.min.z:1,Et=ve.min.x,wt=ve.min.y,He=ve.isBox3?ve.min.z:0;else{const ri=Math.pow(2,-le);Ze=Math.floor(en.width*ri),it=Math.floor(en.height*ri),H.isDataArrayTexture?at=en.depth:H.isData3DTexture?at=Math.floor(en.depth*ri):at=1,Et=0,wt=0,He=0}fe!==null?(vt=fe.x,Pt=fe.y,$t=fe.z):(vt=0,Pt=0,$t=0);const Xt=Nt.convert(oe.format),mt=Nt.convert(oe.type);let sn;oe.isData3DTexture?(X.setTexture3D(oe,0),sn=Y.TEXTURE_3D):oe.isDataArrayTexture||oe.isCompressedArrayTexture?(X.setTexture2DArray(oe,0),sn=Y.TEXTURE_2D_ARRAY):(X.setTexture2D(oe,0),sn=Y.TEXTURE_2D),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,oe.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,oe.unpackAlignment);const jt=Y.getParameter(Y.UNPACK_ROW_LENGTH),mi=Y.getParameter(Y.UNPACK_IMAGE_HEIGHT),ks=Y.getParameter(Y.UNPACK_SKIP_PIXELS),ii=Y.getParameter(Y.UNPACK_SKIP_ROWS),ws=Y.getParameter(Y.UNPACK_SKIP_IMAGES);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,en.width),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,en.height),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,Et),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,wt),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,He);const tn=H.isDataArrayTexture||H.isData3DTexture,Ci=oe.isDataArrayTexture||oe.isData3DTexture;if(H.isDepthTexture){const ri=qe.get(H),gi=qe.get(oe),Bn=qe.get(ri.__renderTarget),nn=qe.get(gi.__renderTarget);We.bindFramebuffer(Y.READ_FRAMEBUFFER,Bn.__webglFramebuffer),We.bindFramebuffer(Y.DRAW_FRAMEBUFFER,nn.__webglFramebuffer);for(let Zi=0;Zi<at;Zi++)tn&&(Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,qe.get(H).__webglTexture,le,He+Zi),Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,qe.get(oe).__webglTexture,Oe,$t+Zi)),Y.blitFramebuffer(Et,wt,Ze,it,vt,Pt,Ze,it,Y.DEPTH_BUFFER_BIT,Y.NEAREST);We.bindFramebuffer(Y.READ_FRAMEBUFFER,null),We.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else if(le!==0||H.isRenderTargetTexture||qe.has(H)){const ri=qe.get(H),gi=qe.get(oe);We.bindFramebuffer(Y.READ_FRAMEBUFFER,Lc),We.bindFramebuffer(Y.DRAW_FRAMEBUFFER,Dc);for(let Bn=0;Bn<at;Bn++)tn?Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,ri.__webglTexture,le,He+Bn):Y.framebufferTexture2D(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,ri.__webglTexture,le),Ci?Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,gi.__webglTexture,Oe,$t+Bn):Y.framebufferTexture2D(Y.DRAW_F RAMEBUFFER、Y.COLOR_ATTACHMENT0、Y.TEXTURE_2D、gi.__webglTexture、Oe)、le!==0?Y.blitFramebuffer(Et、wt、Ze、it、vt、Pt、Ze、it、Y.COLOR_BUFFER_BIT、Y.NEAREST):Ci?Y.copyTexSubImage3D(sn、Oe、vt、Pt、$t+Bn、Et、wt、Ze、it):Y.copyTexSubImage2D(sn、Oe、vt、Pt、Et、wt、Ze、it);We.bindFramebuffer(Y.READ_FRAMEBUFFER、null)、We.bindFramebuffer(Y.DRAW_FRAMEBUFFER、null)}else Ci?H.isDataTexture||H.isData3DTexture?Y.texSubImage3D(sn,Oe,vt,Pt,$t,Ze,it,at,Xt,mt,en.data):oe.isCompressedArrayTexture?Y.compressedTexSubImage3D(sn,Oe,vt,Pt,$t,Ze,it,at,Xt,en.data):Y.texSubImage3D(sn,Oe,vt,Pt,$t,Ze,it,at,Xt,mt,en):H.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,Oe,vt,Pt,Ze,it,Xt,mt,en.data):H.isCompressedTexture?Y.compressedTexSubImage2D(Y.TEXTURE_2D,Oe,vt,Pt,en.width,en.height, Xt,en.data):Y.texSubImage2D(Y.TEXTURE_2D,Oe,vt,Pt,Ze,it,Xt,mt,en);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,jt),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,mi),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,ks),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,ii),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,ws),Oe===0&&oe.generateMipmaps&&Y.generateMipmap(sn),We.unbindTexture()},this.copyTextureToTexture3D=function(H,oe,ve=null,fe=null,le=0){return H.isTexture!==!0&&($f("WebGLRenderer: copyTextureToTexture3D関数のシグネチャが変更されました。"),ve=arguments[0]||null,fe=arguments[1]||null,H=arguments[2],oe=arguments[3],le=arguments[4]||0),$f('WebGLRenderer: copyTextureToTexture3D関数は非推奨になりました。代わりに"copyTextureToTexture"を使用してください。'),this.copyTextureToTexture(H,oe,ve,fe,le)},this.initRenderTarget=function(H){qe.get(H).__webglFramebuffer===void 0&&X.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?X.setTextureCube(H,0):H.isData3DTexture?X.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?X.setTexture2DArray(H,0):X.setTexture2D(H,0),We.unbindTexture()},this.resetState=function(){U=0,F=0,z=null,We.reset(),gn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return po}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=fn._getDrawingBufferColorSpace(e),t.unpackColorSpace=fn._getUnpackColorSpace()}}const xD=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Hy,AddEquation:Nl,AddOperation:Pw,AdditiveAnimationBlendMode:$y,AdditiveBlending:cy,AgXToneMapping:Uw,AlphaFormat:qy,AlwaysCompare:Jw,AlwaysDepth:Hg,AlwaysStencilFunc:py,AmbientLight:GE,AnimationAction:QE,AnimationClip:Sp,AnimationLoader:Ub,AnimationMixer:u2,A nimationObjectGroup:a2、AnimationUtils:Ib、ArcCurve:pE、ArrayCamera:ZE、ArrowHelper:L2、AttachedBindMode:dy、Audio:JE、AudioAnalyser:Kb、AudioContext:wx、AudioListener:jb、AudioLoader:Xb、AxesHelper:D2、BackSide:Ar、BasicDepthPacking:Vw、BasicShadowMap:cw、BatchedMesh:cE、Bone:ox、BooleanKeyframeTrack:wc、Box2:v2、Box3:Cr、Box3Helper:P2、BoxGeometry:Mc、BoxH elper:b2、BufferAttribute:Tn、BufferGeometry:Kt、BufferGeometryLoader:jE、ByteType:Wy、Cache:ka、Camera:Dp、CameraHelper:R2、CanvasTexture:tb、CapsuleGeometry:Q0、CatmullRomCurve3:mE、CineonToneMapping:Dw、CircleGeometry:$0、ClampToEdgeWrapping:Os、Clock:Ex、Color:lt、ColorKeyframeTrack:xx、ColorManagement:fn、CompressedArrayTexture:$R、CompressedCubeText ure:eb、CompressedTexture:J0、CompressedTextureLoader:Ob、ConeGeometry:e_、ConstantAlphaFactor:Cw、ConstantColorFactor:Tw、コントロール:U2、CubeCamera:iE、CubeReflectionMapping:Ha、C ubeRefractionMapping:Bl、CubeTexture:Np、CubeTextureLoader:Fb、CubeUVReflectionMapping:Ah、CubicBezierCurve:cx、CubicBezierCurve3:gE、CubicInterpolant:UE、CullFaceBack:uy、CullF aceFront:uw、CullFaceFrontBack:cC、CullFaceNone:lw、Curve:_o、CurvePath:vE、CustomBlending:fw、CustomToneMapping:Nw、CylinderGeometry:bh、Cylindrical:_2、Data3DTexture:X0、DataArrayTexture:Lp、DataTexture:Bo、DataTextureLoader:kb、DataUtils:AR、DecrementStencilOp:EC、DecrementWrapStencilOp:AC、DefaultLoadingManager:kE、DepthFormat:ac、DepthStencilFormat :_c、DepthTexture:lx、DetachedBindMode:Fw、DirectionalLight:HE、DirectionalLightHelper:C2、DiscreteInterpolant:OE、DodecahedronGeometry:t_、DoubleSide:Uo、DstAlphaFactor:xw、DstColorFactor:Mw、DynamicCopyUsage:VC、DynamicDrawUsage:UC、DynamicReadUsage:kC、EdgesGeometry:yE、EllipseCurve:K0、EqualCompare:Yw、EqualDepth:Wg、EqualStencilFunc:PC、Equirectangu larReflectionMapping:sp、EquirectangularRefractionMapping:op、Euler:vs、EventDispatcher:Yo、ExtrudeGeometry:i_、FileLoader:Wa、Float16BufferAttribute:DR、Float32BufferAttribute:St、FloatType:Xr、Fog:q0、FogExp2:Y0、FramebufferTexture:QR、FrontSide:Va、Frustum:Up、GLBufferAttribute:m2、GLSL1:GC、GLSL3:my、GreaterCompare:qw、GreaterDepth:Yg、GreaterEqualCom pare:Zw、GreaterEqualDepth:Xg、GreaterEqualStencilFunc:NC、GreaterStencilFunc:LC、GridHelper:T2、Group:rh、HalfFloatType:Ch、HemisphereLight:zE、HemisphereLightHelper:E2、IcosahedronGeometry:r_、ImageBitmapLoader:Wb、ImageLoader:Mp、ImageUtils:$w、IncrementStencilOp:wC、IncrementWrapStencilOp:TC、InstancedBufferAttribute:_h、InstancedBufferGeometry:qE、InstancedInterleavedBuffer:p2、InstancedMesh:uE、Int16BufferAttribute:IR、Int32BufferAttribute:LR、Int8BufferAttribute:RR、IntType:F0、InterleavedBuffer:j0、InterleavedBufferAttribute:yc、Interpolant:zp、InterpolateDiscrete:up、InterpolateLinear:x0、InterpolateSmooth:Lg、InvertStencilOp:CC、KeepStencilOp:Ju、KeyframeTrack:vo、LOD:aE、LatheGeometry:Op、Layers:uc、LessCompare:Xw、LessDepth: Gg、LessEqualCompare:ex、LessEqualDepth:mc、LessEqualStencilFunc:IC、LessStencilFunc:bC、Light:ql、LightProbe:YE、Line:Vl、Line3:y2、LineBasicMaterial:Rr、LineCurve:fx、LineCurve3:_E、LineDashedMaterial:LE、LineLoop:fE、LineSegments:qo、LinearFilter:Ei、LinearInterpolant:yx、LinearMipMapLinearFilter:pC、LinearMipMapNearestFilter:dC、LinearMipmapLinearFilter:Fo、LinearMipmapNearestFilter:qd、 LinearSRGBColorSpace:vc、LinearToneMapping:Iw、LinearTransfer:fp、Loader:Qr、LoaderUtils:xy、LoadingManager:Sx、LoopOnce:kw、LoopPingPong:Bw、LoopRepeat:zw、LuminanceAlphaFormat:Jy、LuminanceFormat:Zy、MOUSE:lC、Material:fr、MaterialLoader:h_、MathUtils:aR、Matrix2:Rx、Matrix3:Wt、Matrix4:Dt、MaxEquation:mw、Mesh:pi、MeshBasicMaterial:Xl、MeshDepthMaterial:gx、MeshDistanceMaterial:_x、MeshLamb ertMaterial:PE、MeshMatcapMaterial:IE、MeshNormalMaterial:bE、MeshPhongMaterial:CE、MeshPhysicalMaterial:AE、MeshStandardMaterial:mx、MeshToonMaterial:RE、MinEquation:pw、MirroredRepeatWrapping:lp、MixOperation:bw、MultiplyBlending:hy、MultiplyOperation:Pp、NearestFilter:qi、NearestMipMapLinearFilter:hC、NearestMipMapNearestFilter:fC、NearestMipmapLinearFilter:nh、NearestMipmapNearestFiフィルター:Gy、ニュートラルトーンマッピング:Ow、NeverCompare:Ww、NeverDepth:Vg、NeverStencilFunc:RC、NoBlending:za、NoColorSpace:Oa、NoToneMapping:zo、通常のアニメーションブレンドモード:G0、通常のブレンディング:oc、NotEqualCompare:jw、NotEqualDepth:qg、NotEqualStencilFunc:DC、数値キーフレームトラック:yp、オブジェクト3D:mn、オブジェクトローダー:Hb、オブジェクトスペースノーマルマップ:Gw、オクタヘドロンジオメトリ:Fp、OneFactor:_w、OneMinusConstantAlphaFactor:Rw 、OneMinusConstantColorFactor:Aw、OneMinusDstAlphaFactor:Sw、OneMinusDstColorFactor:ww、OneMinusSrcAlphaFactor:Bg、OneMinusSrcColorFactor:yw、OrthographicCamera:Vp、PCFShadowMap:U0、PCFSoftShadowMap:Yd、PMREMGenerator:wy、Path:mp、PerspectiveCamera:Ni、Plane:Dl、PlaneGeometry:Ph、PlaneHelper:I2、PointLight:VE、PointLightHelper:M2、Points:hE、PointsMaterial:ax、PolarGridHelper:A2、多面体ジオメトリ:Yl、ポジショナルオーディオ:Jb、プロパティバインディング:dn、プロパティミキサー:KE、二次ベジエカーブ:hx、二次ベジエカーブ3:dx、クォータニオン:Yr、クォータニオンキーフレームトラック:Bp、クォータニオンリニア補間:FE、RED_GREEN_RGTC2_フォーマット:v0、RED_RGTC1_フォーマット:Qy、リビジョン:N0、RGBAデプスパッキング:Hw、RGBAフォーマット:ar、RGBAIntegerフォーマット:H0、RGBA_ASTC_10x10_フォーマット:h0、RGBA_ASTC_10x5_フォーマット:u0、RGBA_ASTC_10x6_フォーマット:c0,RGBA_ASTC_10x8_フォーマット:f0,RGBA_ASTC_12x10_フォーマット:d0,RGBA_ASTC_12x12_フォーマット:p0,RGBA_ASTC_4x4_フォーマット:t0,RGBA_ASTC_5x4_フォーマット:n0,RGBA_ASTC_5x5_フォーマット:i0,RGBA_ASTC_6x5_フォーマット:r0,RGBA_ASTC _6x6_フォーマット:s0、RGBA_ASTC_8x5_フォーマット:o0、RGBA_ASTC_8x6_フォーマット:a0、RGBA_ASTC_8x8_フォーマット:l0、RGBA_BPTC_フォーマット:Qd、RGBA_ETC2_EAC_フォーマット:e0、RGBA_PVRTC_2BPPV1_フォーマット:Kg、RGBA_PVRTC_4BPPV1_フォーマット:Jg、RGBA_S3TC_DXT1_フォーマット:Zd、RGBA_S3TC_DXT3_フォーマット:Jd、RGBA_S3TC_DXT5_フォーマット:Kd、RGBDepthPacking:yC、RGBフォーマット:jy、RGBIntegerフォーマット:mC、RGB_BPTC_SIGNED_フォーマット:m0、RGB_BPTC_UNSIGNED_フォーマット:g0、RGB_ETC1_フォーマット:Qg、RGB_ETC2_フォーマット:$g、RGB_PVRTC_2BPPV1_フォーマット:Zg、RGB_PVRTC_4BPPV1_フォーマット:jg、RGB_S3TC_DXT1_フォーマット:jd、RGDepthPacking:xC、RGFormat:Ky、RGIntegerFormat:V0、RawShaderMaterial:TE、Ray:Rh、Raycaster:$E、RectAreaLight:WE、RedFormat:B0、RedIntegerFormat:Ip、ReinhardToneMapping:Lw、RenderTarget:W0、RenderTarget3D:c2、RenderTargetArray:f2、RepeatWrapping:ap、ReplaceStencilOp:MC、ReverseSubtractEquation:dw、RingGeoメトリ:s_、SIGNED_RED_GREEN_RGTC2_Format:y0、SIGNED_RED_RGTC1_Format:_0、SRGBColorSpace:Gr、SRGBTransfer:Sn、シーン:rx、シェーダーチャンク:Jt、シェーダーライブラリ:ho、シェーダーマテリアル:go、シャドウマテリアル:EE、シェイプ:cc、シェイプジオメトリ:o_、シェイプパス:N2、シェイプユーティリティ:Vo、ショートタイプ:Xy、スケルトン:Z0、スケルトンヘルパー:S2、スキンメッシュ:lE、ソース: nc、球:ur、球ジオメトリ:kp、球状:g2、球状ハーモニックス3:XE、スプライン カーブ:px、スポット ライト:BE、スポット ライト ヘルパー:x2、スプライト:oE、スプライト マテリアル:sx、ソース アルファ ファクター:zg、ソース アルファ サチュレート ファクター:Ew、ソース カラー ファクター:vw、静的コピー使用法:BC、静的描画使用法:hp、静的読み取り使用法:FC、ステレオ カメラ:Yb、ストリーム コピー使用法:H C、StreamDrawUsage:OC、StreamReadUsage:zC、StringKeyframeTrack:Ec、SubtractEquation:hw、SubtractiveBlending:fy、TOUCH:uC、TangentSpaceNormalMap:Wl、TetrahedronGeometry:a_、Texture:zn、TextureLoader:f_、TextureUtils:B2、TimestampQuery:WC、TorusGeometry:l_、TorusKnotGeometry:u_、Triangle:Wr、TriangleFanDrawMode :vC、TriangleStripDrawMode:_C、TrianglesDrawMode:gC、TubeGeometry:c_、UVMapping:O0、Uint16BufferAttribute:nx、Uint32BufferAttribute:ix、Uint8BufferAttribute:bR、Uint8ClampedBufferAttribute:PR、Uniform:Cx、UniformsGroup:d2、UniformsLib:$e、UniformsUtils:nE、UnsignedByteType:mo、UnsignedInt248Type:gc、Unsigned Int5999Type:Yy、UnsignedIntType:Ga、UnsignedShort4444Type:k0、UnsignedShort5551Type:z0、UnsignedShortType:ph、VSMShadowMap:fo、Vector2:Ie、Vector3:q、Vector4:pn、VectorKeyframeTrack:xp、VideoFrameTexture:KR、VideoTexture:dE、WebGL3DRenderTarget:gR、WebGLArrayRenderTarget:mR、WebGLCoordinateSystem:po、WebGLCu beRenderTarget:rE、WebGLRenderTarget:Wo、WebGLRenderer:aT、WebGLUtils:oT、WebGPUCoordinateSystem:dp、WebXRController:Dg、WireframeGeometry:wE、WrapAroundEnding:cp、ZeroCurvatureEnding:ec、ZeroFactor:gw、ZeroSlopeEnding:tc、ZeroStencilOp:SC、createCanvasElement:Qw}、Symbol.toStringTag、{value:"Module"}));var kv={exports:{}};/*!SIGNED_RED_RGTC1_Format:_0、SRGBColorSpace:Gr、SRGBTransfer:Sn、Scene:rx、ShaderChunk:Jt、ShaderLib:ho、ShaderMaterial:go、ShadowMaterial:EE、Shape:cc、ShapeGeometry:o_、ShapePath:N2、ShapeUtils:Vo、ShortType:Xy、Skeleton:Z0、SkeletonHelper:S2、SkinnedMesh:lE、Source:nc、Sphere:ur、SphereGeometry:kp、Spherical:g2、SphericalHarmonics3:XE、SplineCurve:px、SpotLight:BE、SpotLightHelper:x2、Sprite:oE、SpriteMaterial:sx、SrcAlphaFactor:zg、SrcAlphaSaturateFa ctor:Ew、SrcColorFactor:vw、StaticCopyUsage:BC、StaticDrawUsage:hp、StaticReadUsage:FC、StereoCamera:Yb、StreamCopyUsage:HC、StreamDrawUsage:OC、StreamReadUsage:zC、StringKeyframeTrack:Ec、SubtractEquation:hw、SubtractiveBlending:fy、TOUCH:uC、TangentSpaceNormalMap:Wl、TetrahedronGeometry:a_、Texture:zn、TextureLoader:f_、TextureUtils:B2、TimestampQuery:WC、TorusGeometry:l_、TorusKnotGeometry:u_、Triangle:Wr、TriangleFanDrawMode:vC、TriangleStripDrawモード:_C、TrianglesDrawMode:gC、TubeGeometry:c_、UVMapping:O0、Uint16BufferAttribute:nx、Uint32BufferAttribute:ix、Uint8BufferAttribute:bR、Uint8ClampedBufferAttribute:PR、Uniform:Cx、UniformsGroup:d2、UniformsLib:$e、UniformsUtils:nE、UnsignedByteType:mo、UnsignedInt248Type:gc、UnsignedInt5999Type:Yy、UnsignedIntType:Ga、UnsignedShort4444Type:k0、UnsignedShort5551Type:z0、UnsignedShortType:ph、VSMShadowMap:fo、Vector2:Ie、Vector3:q、Vector4:pn、VectまたはKeyframeTrack:xp、VideoFrameTexture:KR、VideoTexture:dE、WebGL3DRenderTarget:gR、WebGLArrayRenderTarget:mR、WebGLCoordinateSystem:po、WebGLCubeRenderTarget:rE、WebGLRenderTarget:Wo、WebGLRenderer:aT、WebGLUtils:oT、WebGPUCoordinateSystem:dp、WebXRController:Dg、WireframeGeometry:wE、WrapAroundEnding:cp、ZeroCurvatureEnding:ec、ZeroFactor:gw、ZeroSlopeEnding:tc、ZeroStencilOp:SC、createCanvasElement:Qw}、Symbol.toStringTag、{value:"Module"}));var kv={exports:{}};/*!SIGNED_RED_RGTC1_Format:_0、SRGBColorSpace:Gr、SRGBTransfer:Sn、Scene:rx、ShaderChunk:Jt、ShaderLib:ho、ShaderMaterial:go、ShadowMaterial:EE、Shape:cc、ShapeGeometry:o_、ShapePath:N2、ShapeUtils:Vo、ShortType:Xy、Skeleton:Z0、SkeletonHelper:S2、SkinnedMesh:lE、Source:nc、Sphere:ur、SphereGeometry:kp、Spherical:g2、SphericalHarmonics3:XE、SplineCurve:px、SpotLight:BE、SpotLightHelper:x2、Sprite:oE、SpriteMaterial:sx、SrcAlphaFactor:zg、SrcAlphaSaturateFa ctor:Ew、SrcColorFactor:vw、StaticCopyUsage:BC、StaticDrawUsage:hp、StaticReadUsage:FC、StereoCamera:Yb、StreamCopyUsage:HC、StreamDrawUsage:OC、StreamReadUsage:zC、StringKeyframeTrack:Ec、SubtractEquation:hw、SubtractiveBlending:fy、TOUCH:uC、TangentSpaceNormalMap:Wl、TetrahedronGeometry:a_、Texture:zn、TextureLoader:f_、TextureUtils:B2、TimestampQuery:WC、TorusGeometry:l_、TorusKnotGeometry:u_、Triangle:Wr、TriangleFanDrawMode:vC、TriangleStripDrawモード:_C、TrianglesDrawMode:gC、TubeGeometry:c_、UVMapping:O0、Uint16BufferAttribute:nx、Uint32BufferAttribute:ix、Uint8BufferAttribute:bR、Uint8ClampedBufferAttribute:PR、Uniform:Cx、UniformsGroup:d2、UniformsLib:$e、UniformsUtils:nE、UnsignedByteType:mo、UnsignedInt248Type:gc、UnsignedInt5999Type:Yy、UnsignedIntType:Ga、UnsignedShort4444Type:k0、UnsignedShort5551Type:z0、UnsignedShortType:ph、VSMShadowMap:fo、Vector2:Ie、Vector3:q、Vector4:pn、VectまたはKeyframeTrack:xp、VideoFrameTexture:KR、VideoTexture:dE、WebGL3DRenderTarget:gR、WebGLArrayRenderTarget:mR、WebGLCoordinateSystem:po、WebGLCubeRenderTarget:rE、WebGLRenderTarget:Wo、WebGLRenderer:aT、WebGLUtils:oT、WebGPUCoordinateSystem:dp、WebXRController:Dg、WireframeGeometry:wE、WrapAroundEnding:cp、ZeroCurvatureEnding:ec、ZeroFactor:gw、ZeroSlopeEnding:tc、ZeroStencilOp:SC、createCanvasElement:Qw}、Symbol.toStringTag、{value:"Module"}));var kv={exports:{}};/*!Vector2:Ie、Vector3:q、Vector4:pn、VectorKeyframeTrack:xp、VideoFrameTexture:KR、VideoTexture:dE、WebGL3DRenderTarget:gR、WebGLArrayRenderTarget:mR、WebGLCoordinateSystem:po、WebGLCubeRenderTarget:rE、WebGLRenderTarget:Wo、WebGLRenderer:aT、WebGLUtils:oT、WebGPUCoordinateSystem:dp、WebXRController:Dg、WireframeGeometry:wE、WrapAroundEnding:cp、ZeroCurvatureEnding:ec、ZeroFactor:gw、ZeroSlopeEnding:tc、ZeroStencilOp:SC、createCanvasElement:Qw}、Symbol.toStringTag、{value:"Module"}));var kv={exports:{}};/*!Vector2:Ie、Vector3:q、Vector4:pn、VectorKeyframeTrack:xp、VideoFrameTexture:KR、VideoTexture:dE、WebGL3DRenderTarget:gR、WebGLArrayRenderTarget:mR、WebGLCoordinateSystem:po、WebGLCubeRenderTarget:rE、WebGLRenderTarget:Wo、WebGLRenderer:aT、WebGLUtils:oT、WebGPUCoordinateSystem:dp、WebXRController:Dg、WireframeGeometry:wE、WrapAroundEnding:cp、ZeroCurvatureEnding:ec、ZeroFactor:gw、ZeroSlopeEnding:tc、ZeroStencilOp:SC、createCanvasElement:Qw}、Symbol.toStringTag、{value:"Module"}));var kv={exports:{}};/*!
	著作権 (c) 2018 ジェド・ワトソン。
	MITライセンス（MIT）に基づいてライセンスされています。
	http://jedwatson.github.io/クラス名
*/var hM;function SD(){return hM||(hM=1,function(s){(function(){var e={}.hasOwnProperty;function t(){for(var r="",a=0;a<arguments.length;a++){var u=arguments[a];u&&(r=i(r,n(u)))}return r}function n(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[ネイティブコード]"))return r.toString();var a="";for(var u in r)e.call(r,u)&&r[u]&&(a=i(a,u));return a}function i(r,a){return a?r?r+" "+a:r+a:r}s.exports?(t.default=t,s.exports=t):window.classNames=t})()}(kv)),kv.exports}var MD=SD();const dM=aw(MD);var zv={exports:{}},Ll={};/**
 * @license リアクト
 * react-reconciler-constants.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var pM;function wD(){return pM||(pM=1,Ll.ConcurrentRoot=1,Ll.ContinuousEventPriority=4,Ll.DefaultEventPriority=16,Ll.DiscreteEventPriority=1,Ll.IdleEventPriority=536870912,Ll.LegacyRoot=0),Ll}var mM;function ED(){return mM||(mM=1,zv.exports=wD()),zv.exports}var ah=ED();function TD(s){let e;const t=new Set,n=(d,m)=>{const g=typeof d=="function"?d(e):d;if(g!==e){const _=e;e=m?g:Object.assign({},e,g),t.forEach(x=>x(e,_))}},i=()=>e,r=(d,m=i,g=Object.is)=>{console.warn("[非推奨] `subscribeWithSelector` ミドルウェアを使用してください");let _=m(e);function x(){const M=m(e);if(!g(_,M)){const T=_;d(_=M,T)}}return t.add(x),()=>t.delete(x)},h={setState:n,getState:i,subscribe:(d,m,g)=>m||g?r(d,m,g):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=s(n,i,h),h}const AD=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gM=AD?Be.useEffect:Be.useLayoutEffect;function CD(s){const e=typeof s=="function"?TD(s):s,t=(n=e.getState,i=Object.is)=>{const[,r]=Be.useReducer(E=>E+1,0),a=e.getState(),u=Be.useRef(a),h=Be.useRef(n),d=Be.useRef(i),m=Be.useRef(!1),g=Be.useRef();g.current===void 0&&(g.current=n(a));let _,x=!1;(u.current!==a||h.current!==n||d.current!==i||m.current)&&(_=n(a),x=!i(g.current,_)),gM(()=>{x&&(g.current=_),u.current=a,h.current=n,d.current=i,m.current=!1});const M=Be.useRef(a);gM(()=>{const E=()=>{try{const R=e.getState(),P=h.current(R);d.current(g.current,P)||(u.current=R,g.current=P,r())}catch{m.current=!0,r()}},S=e.subscribe(E);return e.getState()!==M.current&&E(),S},[]);const T=x?_:g.current;return Be.useDebugValue(T),T};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() は非推奨であり、v4 で削除されます");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const RD=s=>typeof s=="object"&&typeof s.then=="function",rc=[];function lT(s,e,t=(n,i)=>n===i){if(s===e)return!0;if(!s||!e)return!1;const n=s.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(s[i],e[i]))return!1;return!0}function uT(s,e=null,t=!1,n={}){e===null&&(e=[s]);for(const r of rc)if(lT(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const i={keys:e,equal:n.equal,remove:()=>{const r=rc.indexOf(i);r!==-1&&rc.splice(r,1)},promise:(RD(s)?s:s(...e)).then(r=>{i.response=r,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(r=>i.error=r)};if(rc.push(i),!t)throw i.promise}const bD=(s,e,t)=>uT(s,e,!1,t),PD=(s,e,t)=>void uT(s,e,!0,t),ID=s=>{if(s===void 0||s.length===0)rc.splice(0,rc.length);else{const e=rc.find(t=>lT(s,t.keys,t.equal));e&&e.remove()}};var Bv={exports:{}},Vv={exports:{}},Hv={};/**
 * @license リアクト
 * スケジューラ.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var _M;function LD(){return _M||(_M=1,function(s){function e(B,K){var J=B.length;B.push(K);e:for(;0<J;){var W=J-1>>>1,te=B[W];if(0<i(te,K))B[W]=K,B[J]=te,J=W;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var K=B[0],J=B.pop();if(J!==K){B[0]=J;e:for(var W=0,te=B.length,Pe=te>>>1;W<Pe;){var se=2*(W+1)-1,xe=B[se],be=se+1,Te=B[be];if(0>i(xe,J))be<te&&0>i(Te,xe)?(B[W]=Te,B[be]=J,W=be):(B[W]=xe,B[se]=J,W=se);else if(be<te&&0>i(Te,J))B[W]=Te,B[be]=J,W=be;else break e}}return K}function i(B,K){var J=B.sortIndex-K.sortIndex;return J!==0?J:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=日付、u=a.now();s.unstable_now=function(){return a.now()-u}}var h=[],d=[],m=1,g=null,_=3,x=!1,M=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(B){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=B)n(d),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(d)}}関数I(B){if(T=!1,P(B),!M)if(t(h)!==null)M=!0,ue(O);else{var K=t(d);K!==null&&de(I,K.startTime-B)}}関数O(B,K){M=!1,T&&(T=!1,S(z),z=-1),x=!0;var J=_;try{for(P(K),g=t(h);g!==null&&(!(g.expirationTime>K)||B&&!G());){var W=g.callback;if(typeof W=="function"){g.callback=null,_=g.priorityLevel;var te=W(g.expirationTime<=K);K=s.unstable_now(),typeof te=="function"?g.callback=te:g===t(h)&&n(h),P(K)}else n(h);g=t(h)}if(g!==null)var Pe=!0;else{var se=t(d);se!==null&&de(I,se.startTime-K),Pe=!1}return Pe}finally{g=null,_=J,x=!1}}var U=!1,F=null,z=-1,D=5,N=-1;function G(){return!(s.unstable_now()-N<D)}function $(){if(F!==null){var B=s.unstable_now();N=B;var K=!0;try{K=F(!0,B)}finally{K?Q():(U=!1,F=null)}}else U=!1}var Q;if(typeof R=="function")Q=function(){R($)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,me=ce.port2;ce.port1.onmessage=$,Q=function(){me.postMessage(null)}}else Q=function(){E($,0)};function ue(B){F=B,U||(U=!0,Q())}function de(B,K){z=E(function(){B(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_continueExecution=function(){M||x||(M=!0,ue(O))},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRateは0から125までの正の整数を取ります。125 fps を超えるフレーム レートの強制はサポートされていません"):D=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(B){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var J=_;_=K;try{return B()}finally{_=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=_;_=B;try{return K()}finally{_=J}},s.unstable_scheduleCallback=function(B,K,J){var W=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=J+te,B={id:m++,callback:K,priorityLevel:B,startTime:J,expirationTime:te,sortIndex:-1},J>W?(B.sortIndex=J,e(d,B),t(h)===null&&B===t(d)&&(T?(S(z),z=-1):T=!0,de(I,JW))):(B.sortIndex=te,e(h,B),M||x||(M=!0,ue(O))),B},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(B){var K=_;return function(){var J=_;_=K;try{return B.apply(this,arguments)}finally{_=J}}}}(Hv)),Hv}var vM;function DD(){return vM||(vM=1,Vv.exports=LD()),Vv.exports}/**
 * @license リアクト
 * react-reconciler.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var Gv,yM;function ND(){return yM||(yM=1,Gv=function(e){var t={},n=D0(),i=DD(),r=Object.assign;function a(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"縮小されたReactエラー#"+c+"; 完全なメッセージについては「+f+」を参照するか、完全なエラーと追加の役立つ警告については縮小されていない開発環境を使用してください。"}var u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED、h=Symbol.for("react.element")、d=Symbol.for("react.portal")、m=Symbol.for("react.fragment")、g=Symbol.for("react.strict_mode")、_=Symbol.for("react.profiler")、x=Symbol.for("react.provider")、M=Symbol.for("react.context")、T=Symbol.for("react.forward_ref")、E=Symbol.for("react.suspense")、S=Symbol.for("react.suspense_list")、R=Symbol.for("react.memo")、P=Symbol.for("react.lazy")、I=Symbol.for("react.offscreen")、O=Symbol.iterator;関数U(c){return c===null||typeof c!="object"?null:(c=O&&c[O]||c["@@iterator"],typeof c=="function"?c:null)}function F(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case m:return"Fragment";case d:return"Portal";case _:return"Profiler";case g:return"StrictMode";case E:return"Suspense";case S:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case M:return(c.displayName||"Context")+".Consumer";case x:return(c._context.displayName||"Context")+".Provider";case T:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case R:return f=c.displayName||null,f!==null?f:F(c.type)||"Memo";case P:f=c._payload,c=c._init;try{return F(c(f))}catch{}}return null}function z(​​c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(f);case 8:return f===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:ケース 0:ケース 17:ケース 2:ケース 14:ケース 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}関数 D(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}関数 N(c){if(D(c)!==c)throw Error(a(188))}関数 G(c){var f=c.alternate;if(!f){if(f=D(c),f===null)throw Error(a(188));return f!==c?null:c}for(var v=c,w=f;;){var C=v.return;if(C===null)break;var L=C.alternate;if(L===null){if(w=C.return,w!==null){v=w;continue}break}if(C.child===L.child){for(L=C.child;L;){if(L===v)return N(C),c;if(L===w)return N(C),f;L=L.sibling}throw Error(a(188))}if(v.return!==w.return)v=C,w=L;else{for(var j=!1,ie=C.child;ie;){if(ie===v){j=!0,v=C,w=L;break}if(ie===w){j=!0,w=C,v=L;break}ie=ie.sibling}if(!j){for(ie=L.child;ie;){if(ie===v){j=!0,v=L,w=C;break}if(ie===w){j=!0,w=L,v=C;break}ie=ie.sibling}if(!j)throwError(a(189))}}if(v.alternate!==w)throwError(a(190))}if(v.tag!==3)throwError(a(188));return v.stateNode.current===v?c:f}function $(c){return c=G(c),c!==null?Q(c):null}関数 Q(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=Q(c);if(f!==null)return f;c=c.sibling}return null}関数 ce(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=ce(c);if(f!==null)return f}c=c.sibling}return null}var me=Array.isArray,ue=e.getPublicInstance,de=e.getRootHostContext,B=e.getChildHostContext,K=e.prepareForCommit,J=e.resetAfterCommit,W=e.createInstance,te=e.appendInitialChild,Pe=e.finalizeInitialChi ldren,se=e.prepareUpdate,xe=e.ShouldSetTextContent,be=e.createTextInstance,Te=e.scheduleTimeout,Xe=e.cancelTimeout,gt=e.noTimeout,et=e.isPrimaryRenderer,Lt=e.supportsMutation,Ne=e.supportsPersiste nce,Ce=e.supportsHydration,Y=e.getInstanceFromNode,_t=e.preparePortalMount,Fe=e.getCurrentEventPriority,rt=e.detachDeletedInstance,We=e.supportsMicrotasks,Tt=e.scheduleMicrotask,qe=e.supportsTestS electors,X=e.fiberRoot,V=e.getBoundingRect,pe=e.getTextContent,Ee=e.isHiddenSubtree,Le=e.matchAccessibilityRole,Ae=e.setFocusIfFocusable,dt=e.setupIntersectionObserver,je=e.appendChild,st=e.app endChildToContainer,Bt=e.commitTextUpdate,ke=e.commitMount,ct=e.commitUpdate,At=e.insertBefore,It=e.insertInContainerBefore,ft=e.removeChild,Qt=e.removeChildFromContainer,Nt=e.resetTextContent,gn= e.hideInstance,re=e.hideTextInstance,Je=e.unhideInstance,Me=e.unhideTextInstance,Re=e.clearContainer,tt=e.cloneInstance,Ke=e.createContainerChildSet,Ut=e.appendChildToContainerChildSet,An=e.finaliz eContainerChildren、Yn=e.replaceContainerChildren、on=e.cloneHiddenInstance、Oi=e.cloneHiddenTextInstance、Fi=e.canHydrateInstance、qa=e.canHydrateTextInstance、yo=e.canHydrateSuspenseInstance、Ss=e.isSuspenseInstancePending、$r=e.isSuspenseInstanceFallback、jo=e.registerSuspenseInstanceRetry、es=e.getNextHydratableSibling、xo=e.getFirstHydratableChild、Ac=e.getFirstHydratableChildWithinContainer、ja=e.getFirstHydratableChildWithinSuspenseInstance,Cc=e.hydrateInstance,Ms=e.hydrateTextInstance,Rc=e.hydrateSuspenseInstance,bc=e.getNextHydratableInstanceAfterSuspenseInstance,Pc=e.commitHydratedContainer,Ic=e.commitHydratedSuspenseInstance,Lc=e.clearSuspenseBoundary,Dc=e.clearSuspenseBoundaryFromContainer,H=e.shouldDeleteUnhydratedTailInstances,oe=e.didNotMatchHydratedContainerTextInstance,ve=e.didNotMatchHydratedTextInstance,fe;function le(c){if(fe===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);fe=f&&f[1]||""}return`
`+fe+c}var Oe=!1;function Ze(c,f){if(!c||Oe)return"";Oe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ve){var w=Ve}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ve){w=Ve}c.call(f.prototype)}else{try{throwエラー()}catch(Ve){w=Ve}c()}}catch(Ve){if(Ve&&w&&typeof Ve.stack=="string"){for(var C=Ve.stack.split(`
`),L=w.stack.split(`
`),j=C.length-1,ie=L.length-1;1<=j&&0<=ie&&C[j]!==L[ie];)ie--;for(;1<=j&&0<=ie;j--,ie--)if(C[j]!==L[ie]){if(j!==1||ie!==1)do if(j--,ie--,0>ie||C[j]!==L[ie]){var we=`
`+C[j].replace(" at new "," at ");return c.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",c.displayName)),we}while(1<=j&&0<=ie);break}}}finally{Oe=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?le(c):""}var it=Object.prototype.hasOwnProperty,at=[],Et=-1;function wt(c){return{current:c}}function He(c){0>Et||(c.current=at[Et],at[Et]=null,Et--)}function vt(c,f){Et++,at[Et]=c.current,c.current=f}var Pt={},$t=wt(Pt),en=wt(!1),Xt=Pt;function mt(c,f){var v=c.type.contextTypes;if(!v)return Pt;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===f)return w.__reactInternalMemoizedMaskedChildContext;var C={},L;for(L in v)C[L]=f[L];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=C),C}function sn(c){return c=c.childContextTypes,c!=null}function jt(){He(en),He($t)}function mi(c,f,v){if($t.current!==Pt)throw Error(a(168));vt($t,f),vt(en,v)}function ks(c,f,v){var w=c.stateNode;if(f=f.childContextTypes,typeof w.getChildContext!="function")return v;w=w.getChildContext();for(var C in w)if(!(C in f))throw Error(a(108,z(c)||"Unknown",C));return r({},v,w)}関数 ii(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Pt,Xt=$t.current,vt($t,c),vt(en,en.current),!0}関数 ws(c,f,v){var w=c.stateNode;if(!w)throw Error(a(169));v?(c=ks(c,f,Xt),w.__reactInternalMemoizedMergedChildContext=c,He(en),He($t),vt($t,c)):He(en),vt(en,v)}var tn=Math.clz32?Math.clz32:gi,Ci=Math.log,ri=Math.LN2;関数 gi(c){return c>>>=0,c===0?32:31-(Ci(c)/ri|0)|0}var Bn=64,nn=4194304;function Zi(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Zl(c,f){var v=c.pendingLanes;if(v===0)return 0;var w=0,C=c.suspendedLanes,L=c.pingedLanes,j=v&268435455;if(j!==0){var ie=j&~C;ie!==0?w=Zi(ie):(L&=j,L!==0&&(w=Zi(L)))}else j=v&~C,j!==0?w=Zi(j):L!==0&&(w=Zi(L));if(w===0)return 0;if(f!==0&&f!==w&&!(f&C)&&(C=w&-w,L=f&-f,C>=L||C===16&&(L&4194240)!==0))return f;if(w&4&&(w|=v&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=w;0<f;)v=31-tn(f),C=1<<v,w|=c[v],f&=~C;return w}function Lh(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xp(c,f){for(var v=c.suspendedLanes,w=c.pingedLanes,C=c.expirationTimes,L=c.pendingLanes;0<L;){var j=31-tn(L),ie=1<<j,we=C[j];we===-1?(!(ie&v)||ie&w)&&(C[j]=Lh(ie,f)):we<=f&&(c.expiredLanes|=ie),L&=~ie}}function Nc(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Uc(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function Zo(c,f,v){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-tn(f),c[f]=v}関数Oc(c,f){var v=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<v;){var C=31-tn(v),L=1<<C;f[C]=0,w[C]=-1,c[C]=-1,v&=~L}}関数Es(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var w=31-tn(v),C=1<<w;C&f|c[w]&f&&(c[w]|=f),v&=~C}}var Zt=0;関数zs(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Jo=i.unstable_scheduleCallback、Za=i.unstable_cancelCallback、So=i.unstable_shouldYield、__=i.unstable_requestPaint、Qn=i.unstable_now、Ko=i.unstable_ImmediatePriority、v_=i.unstable_UserBlockingPriority、Fc=i.unstable_NormalPriority、kc=i.unstable_IdlePriority、Jl=null、Ts=null;function Kl(c){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Jl,c,void 0,(c.current.flags&128)===128)}catch{}}function Ql(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f​​!==f}var ki=typeof Object.is=="function"?Object.is:Ql,br=null,zc=!1,Dh=!1;function Bc(c){br===null?br=[c]:br.push(c)}function Vc(c){zc=!0,Bc(c)}function Pr(){if(!Dh&&br!==null){Dh=!0;var c=0,f=Zt;try{var v=br;for(Zt=1;c<v.length;c++){var w=v[c];do w=w(!0);while(w!==null)}br=null,zc=!1}catch(C){throw br!==null&&(br=br.slice(c+1)),Jo(Ko,Pr),C}最後に{Zt=f,Dh=!1}}nullを返す}var Yp=u.ReactCurrentBatchConfig;function ts(c,f){if(ki(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),w=Object.keys(f);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var C=v[w];if(!it.call(f,C)||!ki(c[C],f[C]))return!1}return!0}function Nh(c){switch(c.tag){case 5:return le(c.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return c=Ze(c.type,!1),c;case 11:return c=Ze(c.type.render,!1),c;case 1:return c=Ze(c.type,!0),c;default:return""}}function Ji(c,f){if(c&&c.defaultProps){f=r({},f),c=c.defaultProps;for(var v in c)f[v]===void 0&&(f[v]=c[v]);return f}return f}var $l=wt(null),Qo=null,Bs=null,Hc=null;function zi(){Hc=Bs=Qo=null}関数 $o(c,f,v){et?(vt($l,f._currentValue),f._currentValue=v):(vt($l,f._currentValue2),f._currentValue2=v)}関数 eu(c){var f=$l.current;He($l),et?c._currentValue=f:c._currentValue2=f}関数 ea(c,f,v){for(;c!==null;){var w=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),c===v)break;c=c.return}}function Ja(c,f){Qo=c,Hc=Bs=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(li=!0),c.firstContext=null)}function Ki(c){var f=et?c._currentValue:c._currentValue2;if(Hc!==c)if(c={context:c,memoizedValue:f,next:null},Bs===null){if(Qo===null)throw Error(a(308));Bs=c,Qo.dependencies={lanes:0,firstContext:c}}else Bs=Bs.next=c;return f}var Ir=null,Lr=!1;function Ka(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uh(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Vs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}関数 Mo(c,f){var v=c.updateQueue;v!==null&&(v=v.shared,Hn!==null&&c.mode&1&&!(Gt&2)?(c=v.interleaved,c===null?(f.next=f,Ir===null?Ir=[v]:Ir.push(v)):(f.next=c.next,c.next=f),v.interleaved=f):(c=v.pending,c===null?f.next=f:(f.next=c.next,c.next=f),v.pending=f))}関数Gc(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var w=f.lanes;w&=c.pendingLanes,v|=w,f.lanes=v,Es(c,v)}}function Wc(c,f){var v=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var C=null,L=null;if(v=v.firstBaseUpdate,v!==null){do{var j={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};L===null?C=L=j:L=L.next=j,v=v.next}while(v!==null);L===null?C=L=f:L=L.next=f}else C=L=f;v={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:L,shared:w.shared,effects:w.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}関数 Xc(c,f,v,w){var C=c.updateQueue;Lr=!1;var L=C.firstBaseUpdate、j=C.lastBaseUpdate、ie=C.shared.pending;if(ie!==null){C.shared.pending=null;var we=ie、Ve=we.next;we.next=null、j===null?L=Ve:j.next=Ve、j=we;var ut=c.alternate;ut!==null&&(ut=ut.updateQueue、ie=ut.lastBaseUpdate、ie!==j&&(ie===null?ut.firstBaseUpdate=Ve:ie.next=Ve、ut.lastBaseUpdate=we))}if(L!==null){var Ft=C.baseState;j=0、ut=Ve=we=null、ie=L;do{var Ct=ie.lane,Yt=ie.eventTime;if((w&Ct)===Ct){ut!==null&&(ut=ut.next={eventTime:Yt,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var nt=c,Mi=ie;switch(Ct=f,Yt=v,Mi.tag){case 1:if(nt=Mi.payload,typeof nt=="function"){Ft=nt.call(Yt,Ft,Ct);break e}Ft=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=Mi.payload,Ct=typeof nt=="function"?nt.call(Yt,Ft,Ct):nt,Ct==null)break e;Ft=r({},Ft,Ct);break e;case 2:Lr=!0}}ie.callback!==null&&ie.lane!==0&&(c.flags|=64,Ct=C.effects,Ct===null?C.effects=[ie]:Ct.push(ie))}else Yt={eventTime:Yt,lane:Ct,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},ut===null?(Ve=ut=Yt,we=Ft):ut=ut.next=Yt,j|=Ct;if(ie=ie.next,ie===null){if(ie=C.shared.pending,ie===null)break;Ct=ie,ie=Ct.next,Ct.next=null,C.lastBaseUpdate=Ct,C.shared.pending=null}}while(!0);if(ut===null&&(we=Ft),C.baseState=we,C.firstBaseUpdate=Ve,C.lastBaseUpdate=ut,f=C.shared.interleaved,f!==null){C=f;do j|=C.lane、C=C.next;while(C!==f)}else L===null&&(C.shared.lanes=0);bs|=j、c.lanes=j、c.memoizedState=Ft}}function qp(c、f、v){if(c=f.effects、f.effects=null、c!==null)for(f=0;f<c.length;f++){var w=c[f]、C=w.callback;if(C!==null){if(w.callback=null、w=v、typeof C!="function")throw Error(a(191,C));C.call(w)}}}var jp=new n.Component().refs;function Oh(c,f,v,w){f=c.memoizedState,v=v(w,f),v=v==null?f:r({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Yc={isMounted:function(c){return(c=c._reactInternals)?D(c)===c:!1},enqueueSetState:function(c,f,v){c=c._reactInternals;var w=cn(),C=ls(c),L=Vs(w,C);L.payload=f,v!=null&&(L.callback=v),Mo(c,L),f=Pi(c,C,w),f!==null&&Gc(f,c,C)},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var w=cn(),C=ls(c),L=Vs(w,C);L.tag=1,L.payload=f,v!=null&&(L.callback=v),Mo(c,L),f=Pi(c,C,w),f!==null&&Gc(f,c,C)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=cn(),w=ls(c),C=Vs(v,w);C.tag=2,f!=null&&(C.callback=f),Mo(c,C),f=Pi(c,w,v),f!==null&&Gc(f,c,w)}};function Fh(c,f,v,w,C,L,j){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,L,j):f.prototype&&f.prototype.isPureReactComponent?!ts(v,w)||!ts(C,L):!0}function Zp(c,f,v){var w=!1,C=Pt,L=f.contextType;return typeof L=="object"&&L!==null?L=Ki(L):(C=sn(f)?Xt:$t.current,w=f.contextTypes,L=(w=w!=null)?mt(c,C):Pt),f=new f(v,L),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Yc,c.stateNode=f,f._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=C,c.__reactInternalMemoizedMaskedChildContext=L),f}function Jp(c,f,v,w){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,w),f.state!==c&&Yc.enqueueReplaceState(f,f.state,null)}function kh(c,f,v,w){var C=c.stateNode;C.props=v,C.state=c.memoizedState,C.refs=jp,Ka(c);var L=f.contextType;typeof L=="object"&&L!==null?C.context=Ki(L):(L=sn(f)?Xt:$t.current,C.context=mt(c,L)),C.state=c.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(Oh(c,f,L,v),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(f=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),f!==C.state&&Yc.enqueueReplaceState(C,C.state,null),Xc(c,v,C,w),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308)}var Qa=[],wo=0,qc=null,jc=0,Dr=[],hr=0,ta=null,Hs=1,Gs="";function na(c,f){Qa[wo++]=jc,Qa[wo++]=qc,qc=c,jc=f}関数 Kp(c,f,v){Dr[hr++]=Hs,Dr[hr++]=Gs,Dr[hr++]=ta,ta=c;var w=Hs;c=Gs;var C=32-tn(w)-1;w&=~(1<<C),v+=1;var L=32-tn(f)+C;if(30<L){var j=CC%5;L=(w&(1<<j)-1).toString(32),w>>=j,C-=j,Hs=1<<32-tn(f)+C|v<<C|w,Gs=L+c}else Hs=1<<L|v<<C|w,Gs=c}関数zh(c){c.return!==null&&(na(c,1),Kp(c,1,0))}関数Bh(c){for(;c===qc;)qc=Qa[--wo],Qa[wo]=null,jc=Qa[--wo],Qa[wo]=null;for(;c===t a;)ta=Dr[--hr],Dr[hr]=null,Gs=Dr[--hr],Dr[hr]=null,Hs=Dr[--hr],Dr[hr]=null}var Bi=null,_i=null,Pn=!1,$a=!1,Nr=null;関数 Vh(c,f){var v=yr(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=c,f=c.deletions,f===null?(c.deletions=[v],c.flags|=16):f.push(v)}function Hh(c,f){switch(c.tag){case 5:return f=Fi(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,Bi=c,_i=xo(f),!0):!1;case 6:return f=qa(f,c.pendingProps),f!==null?(c.stateNode=f,Bi=c,_i=null,!0):!1;case 13:if(f=yo(f),f!==null){var v=ta!==null?{id:Hs,overflow:Gs}:null;return c.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=yr(18,null,null,0),v.stateNode=f,v.return=c,c.child=v,Bi=c,_i=null,!0}return!1;default:return!1}}function Zc(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Eo(c){if(Pn){var f=_i;if(f){var v=f;if(!Hh(c,f)){if(Zc(c))throw Error(a(418));f=es(v);var w=Bi;f&&Hh(c,f)?Vh(w,v):(c.flags=c.flags&-4097|2,Pn=!1,Bi=c)}}else{if(Zc(c))throw Error(a(418));c.flags=c.flags&-4097|2,Pn=!1,Bi=c}}}function Qp(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Bi=c}function tu(c){if(!Ce||c!==Bi)return!1;if(!Pn)return Qp(c),Pn=!0,!1;if(c.tag!==3&&(c.tag!==5||H(c.type)&&!xe(c.type,c.memoizedProps))){var f=_i;if(f){if(Zc(c)){for(c=_i;c;)c=es(c);throw Error(a(418))}for(;f;)Vh(c,f),f=es(f)}}if(Qp(c),c.tag===13){if(!Ce)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));_i=bc(c)}else _i=Bi?es(c.stateNode):null;return!0}関数el(){Ce&&(_i=Bi=null,$a=Pn=!1)}function Jc(c){Nr===null?Nr=[c]:Nr.push(c)}function tl(c,f,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(a(309));var w=v.stateNode}if(!w)throw Error(a(147,c));var C=w,L=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(j){var ie=C.refs;ie===jp&&(ie=C.refs={}),j===null?delete ie[L]:ie[L]=j},f._stringRef=L,f)}if(typeof c!="string")throw Error(a(284));if(!v._owner)throw Error(a(290,c))}return c}function To(c,f){throw c=Object.prototype.toString.call(f),Error(a(31,c==="[object Object]"?"キー{"+Object.keys(f).join(", ")+"}":c))}function nl(c){var f=c._init;return f(c._payload)}function $p(c){function f(_e,ae){if(c){var Se=_e.deletions;Se===null?(_e.deletions=[ae],_e.flags|=16):Se.push(ae)}}function v(_e,ae){if(!c)return null;for(;ae!==null;)f(_e,ae),ae=ae.sibling;return null}function w(_e,ae){for(_e=新しい地図;ae!==null;)ae.key!==null?_e.set(ae.key,ae):_e.set(ae.index,ae),ae=ae.sibling;return _e}function C(_e,ae){return _e=io(_e,ae),_e.index=0,_e.sibling=null,_e}function L(_e,ae,Se){戻る_e.index=Se,c?(Se=_e.alternate,Se!==null?(Se=Se.index,Se<ae?(_e.flags|=2,ae):Se):(_e.flags|=2,ae)):(_e.flags|=1048576,ae)}function j(_e){return c&&_e.alternate===null&&(_e.flags|=2),_e}function ie(_e,ae,Se,Qe){return ae===null||ae.tag!==6?(ae=Ef(Se,_e.mode,Qe),ae.return=_e,ae):(ae=C(ae,Se),ae.return=_e,ae)}関数we(_e,ae,Se,Qe){var xt=Se.type;return xt===m?ut(_e,ae,Se.props.children,Qe,Se.key):ae!==null&&(ae.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===P&&nl(xt)===ae.type)?(Qe=C(ae,Se.props),Qe.ref=tl(_e,ae,Se),Qe.re turn=_e,Qe):(Qe=wf(Se.type,Se.key,Se.props,null,_e.mode,Qe),Qe.ref=tl(_e,ae,Se),Qe.return=_e,Qe)}関数Ve(_e,ae,Se,Qe){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==Se.containerInfo||ae.stateNode.implementation!==Se.implementation?(ae=Tf(Se,_e.mode,Qe),ae.return=_e,ae):(ae=C(ae,Se.children||[]),ae.return=_e,ae)}関数ut(_e,ae,Se,Qe,xt){return ae===null||ae.tag!==7?(ae=Ea(Se,_e.mode,Qe,xt),ae.return=_e,ae):(ae=C(ae,Se),ae.return=_e,ae)}function Ft(_e,ae,Se){if(typeof ae=="string"&&ae!==""||typeof ae=="数値")return ae=Ef(""+ae,_e.mode,Se),ae.return=_e,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case h:return Se=wf(ae.type,ae.key,ae.props,null,_e.mode,Se),Se.ref=tl(_e,null,ae),Se.return=_e,Se;case d:return ae=Tf(ae,_e.mode,Se),ae.return=_e,ae;case P:var Qe=ae._init;return Ft(_e,Qe(ae._payload),Se)}if(me(ae)||U(ae))return ae=Ea(ae,_e.mode,Se,null),ae.return=_e,ae;To(_e,ae)}return null}関数Ct(_e,ae,Se,Qe){var xt=ae!==null?ae.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return xt!==null?null:ie(_e,ae,""+Se,Qe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case h:return Se.key===xt?we(_e,ae,Se,Qe):null;case d:return Se.key===xt?Ve(_e,ae,Se,Qe):null;case P:return xt=Se._init,Ct(_e,ae,xt(Se._payload),Qe)}if(me(Se)||U(Se))return xt!==null?null:ut(_e,ae,Se,Qe,null);To(_e,Se)}return null}function Yt(_e,ae,Se,Qe,xt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return _e=_e.get(Se)||null,ie(ae,_e,""+Qe,xt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case h:return _e=_e.get(Qe.key===null?Se:Qe.key)||null,we(ae,_e,Qe,xt);case d:return _e=_e.get(Qe.key===null?Se:Qe.key)||null,Ve(ae,_e,Qe,xt);case P:var Vt=Qe._init;return Yt(_e,ae,Se,Vt(Qe._payload),xt)}if(me(Qe)||U(Qe))return _e=_e.get(Se)||null,ut(ae,_e,Qe,xt,null);To(ae,Qe)}return null}function nt(_e,ae,Se,Qe){for(var xt=null,Vt=null,kt=ae,ln=ae=0,jn=null;kt!==null&&ln<Se.length;ln++){kt.index>ln?(jn=kt,kt=null):jn=kt.sibling;var an=Ct(_e,kt,Se[ln],Qe);if(an===null){kt===null&&(kt=jn);break}c&&kt&&an.alternate===null&&f(_e,kt),ae=L(an,ae,ln),Vt===null?x​​t=an:Vt.sibling=an,Vt=an,kt=jn}if(ln===Se.length)return v(_e,kt),Pn&&na(_e,ln),xt;if(kt===null){for(;ln<Se.length;ln++)kt=Ft(_e,Se[l n],Qe),kt!==null&&(ae=L(kt,ae,ln),Vt===null?x​​t=kt:Vt.sibling=kt,Vt=kt);return Pn&&na(_e,ln),xt}for(kt=w(_e,kt);ln<Se.length;ln++)jn=Yt(kt,_e,ln,Se[ln],Qe),jn!==null&&(c&&jn.alternat e!==null&&kt.delete(jn.key===null?ln:jn.key),ae=L(jn,ae,ln),Vt===null?x​​t=jn:Vt.sibling=jn,Vt=jn);return c&&kt.forEach(function(ro){return f(_e,ro)}),Pn&&na(_e,ln),xt}function Mi(_e,ae,Se,Qe){var xt=U(Se);if(typeof xt!="function")throw Error(a(150));if(Se=xt.call(Se),Se==null)throw Error(a(151));for(var Vt=xt=null,kt=ae,ln=ae=0,jn=null,an=Se.next();kt!==null&&!an.done;ln++,an=Se.next()){kt.index>ln?(jn=kt,kt=null):jn=kt.sibling;var ro=Ct(_e,kt,an.value,Qe);if(ro===null){kt===null&&(kt=jn);break}c&&kt&&ro.alternate===n ull&&f(_e,kt),ae=L(ro,ae,ln),Vt===null?x​​t=ro:Vt.sibling=ro,Vt=ro,kt=jn}if(an.done)return v(_e,kt),Pn&&na(_e,ln),xt;if(kt===null){for(;!an.done;ln++,an=Se.next())an=Ft(_e,a n.value,Qe),an!==null&&(ae=L(an,ae,ln),Vt===null?x​​t=an:Vt.sibling=an,Vt=an);return Pn&&na(_e,ln),xt}for(kt=w(_e,kt);!an.done;ln++,an=Se.next())an=Yt(kt,_e,ln,an.value,Qe),an!==null&&(c&an.alternate!==null&&kt.delete(an.key===null?ln:an.key),ae=L(an,ae,ln),Vt===null?x​​t=an:Vt.sibling=an,Vt=an);return c&&kt.forEach(function(yd){return f(_e,yd)}),Pn&&na(_e,ln),xt}function xr(_e,ae,Se,Qe){if(typeof Se=="object"&&Se!==null&&Se.type===m&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case h:e:{for(var xt=Se.key,Vt=ae;Vt!==null;){if(Vt.key===xt){if(xt=Se.type,xt===m){if(Vt.tag===7){v(_e,Vt.sibling),ae=C(Vt,Se.props.children),ae.return=_e,_e=ae;break e}}else if(Vt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===P&&nl(xt)===Vt.type){v(_e,Vt.sibling),ae=C(Vt,Se.props),ae.ref=tl(_e,Vt,Se),ae.return=_e,_e=ae;break e}v(_e,Vt);break}else f(_e,Vt);Vt=Vt.sibling}Se.type===m?(ae=Ea(Se.props.children,_e.mode,Qe,Se.key),ae.return=_e,_e=a e):(Qe=wf(Se.type,Se.key,Se.props,null,_e.mode,Qe),Qe.ref=tl(_e,ae,Se),Qe.return=_e,_e=Qe)}return j(_e);ケースd:e:{for(Vt=Se.key;ae!==null;){if(ae.key===Vt)if(ae.tag===4&&ae.stateNode.containerInfo===Se.containerInfo&&ae. stateNode.implementation===Se.implementation){v(_e,ae.sibling),ae=C(ae,Se.children||[]),ae.return=_e,_e=ae;break e}else{v(_e,ae);break}else f(_e,ae);ae=ae.sibling}ae=Tf(Se,_e.mode,Qe),ae.return=_e,_e=ae}return j(_e);case P:return Vt=Se._init,xr(_e,ae,Vt(Se._payload),Qe)}if(me(Se))return nt(_e,ae,Se,Qe);if(U(Se))return Mi(_e,ae,Se,Qe);To(_e,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,ae!==null&&ae.tag===6?(v(_e,ae.sibling),ae=C(ae,Se),ae.return=_e,_e=ae):(v(_e,ae),ae=Ef(Se,_e.mode,Qe),ae.return=_e,_e=ae),j(_e)):v(_e,ae)}return xr}var Ws=$p(!0),em=$p(!1),il={},Qi=wt(il),ia=wt(il),ra=wt(il);関数 ns(c){if(c===il)throw Error(a(174)); return c}function Kc(c,f){vt(ra,f),vt(ia,c),vt(Qi,il),c=de(f),He(Qi),vt(Qi,c)}function rl(){He(Qi),He(ia),He(ra)}function tm(c){var f=ns(ra.current),v=ns(Qi.current);f=B(v,c.type,f),v!==f&&(vt(ia,c),vt(Qi,f))}function Gh(c){ia.current===c&&(He(Qi),He(ia))}var Dn=wt(0);function Qc(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Ss(v)||$r(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var dr=[];function sa(){for(var c=0;c<dr.length;c++){var f=dr[c];et?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}dr.length=0}var nu=u.ReactCurrentDispatcher,pr=u.ReactCurrentBatchConfig,oa=0,Nn=null,si=null,oi=null,$c=!1,As=!1,aa=0,iu=0;function ai(){throw Error(a(321))}function ef(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!ki(c[v],f[v]))return!1;return!0}function sl(c,f,v,w,C,L){if(oa=L,Nn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,nu.current=c===null||c.memoizedState===null?Zh:Jh,c=v(w,C),As){L=0;do{if(As=!1,aa=0,25<=L)throw Error(a(301));L+=1,oi=si=null,f.updateQueue=null,nu.current=Kh,c=v(w,C)}while(As)}if(nu.current=ul,f=si!==null&&si.next!==null,oa=0,oi=si=Nn=null,$c=!1,f)throw Error(a(300));return c}function Ao(){var c=aa!==0;return aa=0,c}function is(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Nn.memoizedState=oi=c:oi=oi.next=c,oi}function rs(){if(si===null){var c=Nn.alternate;c=c!==null?c.memoizedState:null}else c=si.next;var f=oi===null?Nn.memoizedState:oi.next;if(f!==null)oi=f、si=c;else{if(c===null)throw Error(a(310));si=c、c={memoizedState:si.memoizedState、baseState:si.baseState、baseQueue:si.baseQueue、queue:si.queue、next:null}、oi===null?Nn.memoizedState=oi=c:oi=oi.next=c}return oi}function Cs(c、f){return typeof f=="function"?f(c):f}function ru(c){var f=rs()、v=f.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=c;var w=si、C=w.baseQueue、L=v.pending;if(L!==null){if(C!==null){var j=C.next;C.next=L.next,L.next=j}w.baseQueue=C=L,v.pending=null}if(C!==null){L=C.next,w=w.baseState;var ie=j=null,we=null,Ve=L;do{var ut=Ve.lane;if((oa&ut)===ut)we!==null&&(we=we.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),w=Ve.hasEagerState?Ve.eagerState:c(w,Ve.action);else{var Ft={lane:ut,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};we===null?(ie=we=Ft,j=w):we=we.next=Ft,Nn.lanes|=ut,bs|=ut}Ve=Ve.next}while(Ve!==null&&Ve!==L);we===null?j=w:we.next=ie,ki(w,f.memoizedState)||(li=!0),f.memoizedState=w,f.baseState=j,f.baseQueue=we,v.lastRenderedState=w}if(c=v.interleaved,c!==null){C=c;do L=C.lane,Nn.lanes|=L,bs|=L,C=C.next;while(C!==c)}else C===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function su(c){var f=rs(),v=f.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=c;var w=v.dispatch,C=v.pending,L=f.memoizedState;if(C!==null){v.pending=null;var j=C=C.next;do L=c(L,j.action),j=j.next;while(j!==C);ki(L,f.memoizedState)||(li=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),v.lastRenderedState=L}return[L,w]}関数Wh(){}関数Xh(c,f){var v=Nn、w=rs()、C=f()、L=!ki(w.memoizedState、C);if(L&&(w.memoizedState=C、li=!0),w=w.queue、ol(Xs.bind(null、v、w、c),[c]),w.getSnapshot!==f||L||oi!==null&&oi.memoizedState.tag&1){if(v.flags|=2048、au(9、qh.bind(null、v、w、C、f),void 0,null),Hn===null)throw Error(a(349));oa&30||Yh(v、f、C)}return C}関数Yh(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=Nn.updateQueue,f===null?(f={lastEffect:null,stores:null},Nn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}関数 qh(c,f,v,w){f.value=v,f.getSnapshot=w,tf(f)&&Pi(c,1,-1)}関数 Xs(c,f,v){return v(function(){tf(f)&&Pi(c,1,-1)})}関数 tf(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!ki(c,v)}catch{return!0}}function ou(c){var f=is();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:c},f.queue=c,c=c.dispatch=y_.bind(null,Nn,c),[f.memoizedState,c]}function au(c,f,v,w){return c={tag:c,create:f,destroy:v,deps:w,next:null},f=Nn.updateQueue,f===null?(f={lastEffect:null,stores:null},Nn.updateQueue=f,f.lastEffect=c.next=c):(v=f.lastEffect,v===null?f.lastEffect=c.next=c:(w=v.next,v.next=c,c.next=w,f.lastEffect=c)),c}function nm(){return rs().memoizedState}function Co(c,f,v,w){var C=is();Nn.flags|=c,C.memoizedState=au(1|f,v,void 0,w===void 0?null:w)}function nf(c,f,v,w){var C=rs();w=w===void 0?null:w;var L=void 0;if(si!==null){var j=si.memoizedState;if(L=j.destroy,w!==null&&ef(w,j.deps)){C.memoizedState=au(f,v,L,w);return}}Nn.flags|=c,C.memoizedState=au(1|f,v,L,w)}function rf(c,f){return Co(8390656,8,c,f)}function ol(c,f){return nf(2048,8,c,f)}function Mn(c,f){return nf(4,2,c,f)}function sf(c,f){return nf(4,4,c,f)}function lu(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function al(c,f,v){return v=v!=null?v.concat([c]):null,nf(4,4,lu.bind(null,f,c),v)}function of(){}function af(c,f){var v=rs();f=f===void 0?null:f;var w=v.memoizedState;return w!==null&&f!==null&&ef(f,w[1])?w[0]:(v.memoizedState=[c,f],c)}関数 ll(c,f){var v=rs();f=f===void 0?null:f;var w=v.memoizedState;return w!==null&&f!==null&&ef(f,w[1])?w[0]:(c=c(),v.memoizedState=[c,f],c)}関数 lf(c,f){var v=Zt;Zt=v!==0&&4>v?v:4,c(!0);var w=pr.transition;pr.transition={};try{c(!1),f()}finally{Zt=v,pr.transition=w}}関数 la(){return rs().memoizedState}関数im(c,f,v){var w=ls(c);v={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null},rm(c)?jh(f,v):(uu(c,f,v),v=cn(),c=Pi(c,w,v),c!==null&&cu(c,f,w))}function y_(c,f,v){var w=ls(c),C={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null};if(rm(c))jh(f,C);else{uu(c,f,C);var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var j=f.lastRenderedState,ie=L(j,v);if(C.hasEagerState=!0,C.eagerState=ie,ki(ie,j))return}catch{}finally{}v=cn(),c=Pi(c,w,v),c!==null&&cu(c,f,w)}}function rm(c){var f=c.alternate;return c===Nn||f!==null&&f===Nn}function jh(c,f){As=$c=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}関数 uu(c,f,v){Hn!==null&&c.mode&1&&!(Gt&2)?(c=f.interleaved,c===null?(v.next=v,Ir===null?Ir=[f]:Ir.push(f)):(v.next=c.next,c.next=v),f.interleaved=v):(c=f.pending,c===null?v.next=v:(v.next=c.next,c.next=v),f.pending=v)}関数 cu(c,f,v){if(v&4194240){var w=f.lanes;w&=c.pendingLanes,v|=w,f.lanes=v,Es(c,v)}}var ul={readContext:Ki,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},Zh={readContext:Ki,useCallback:function(c,f){return is().memoizedState=[c,f===void 0?null:f],c},useContext:Ki,useEffect:rf,useImperativeHandle:function(c,f,v){return v=v!=null?v.concat([c]):null,Co(4194308,4,lu.bind(null,f,c),v)},useLayoutEffect:function(c,f){return Co(4194308,4,c,f)},useInsertionEffect:function(c,f){return Co(4,2,c,f)},useMemo:function(c,f){var v=is();return f=f===void 0?null:f,c=c(),v.memoizedState=[c,f],c},useReducer:function(c,f,v){var w=is();return f=v!==void 0?v(f):f,w.memoizedState=w.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},w.queue=c,c=c.dispatch=im.bind(null,Nn,c),[w.memoizedState,c]},useRef:function(c){var f=is();return c={current:c},f.memoizedState=c},useState:ou,useDebugValue:of,useDeferredValue:function(c){var f=ou(c),v=f[0],w=f[1];return rf(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=ou(!1),f=c[0];return c=lf.bind(null,c[1]),is().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,v){var w=Nn,C=is();if(Pn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=f(),Hn===null)throw Error(a(349));oa&30||Yh(w,f,v)}C.memoizedState=v;var L={value:v,getSnapshot:f};return C.queue=L,rf(Xs.bind(null,w,L,c),[c]),w.flags|=2048,au(9,qh.bind(null,w,L,v,f),void 0,null),v},useId:function(){var c=is(),f=Hn.identifierPrefix;if(Pn){var v=Gs,w=Hs;v=(w&~(1<<32-tn(w)-1)).toString(32)+v,f=":"+f+"R"+v,v=aa++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=iu++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},Jh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:ru,useRef:nm,useState:function(){return ru(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=ru(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=ru(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1},Kh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:su,useRef:nm,useState:function(){return su(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=su(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=su(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1};function Qh(c,f){try{var v="",w=f;do v+=Nh(w),w=w.return;while(w);var C=v}catch(L){C=`function(){var c=ou(!1),f=c[0];return c=lf.bind(null,c[1]),is().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,v){var w=Nn,C=is();if(Pn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=f(),Hn===null)throw Error(a(349));oa&30||Yh(w,f,v)}C.memoizedState=v;var L={value:v,getSnapshot:f};return C.queue=L,rf(Xs.bind(null,w,L,c),[c]),w.flags|=2048,au(9,qh.bind(null,w,L,v,f),void 0,null),v},useId:function(){var c=is(),f=Hn.identifierPrefix;if(Pn){var v=Gs,w=Hs;v=(w&~(1<<32-tn(w)-1)).toString(32)+v,f=":"+f+"R"+v,v=aa++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=iu++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},Jh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:ru,useRef:nm,useState:function(){return ru(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=ru(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=ru(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1},Kh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:su,useRef:nm,useState:function(){return su(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=su(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=su(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1};function Qh(c,f){try{var v="",w=f;do v+=Nh(w),w=w.return;while(w);var C=v}catch(L){C=`function(){var c=ou(!1),f=c[0];return c=lf.bind(null,c[1]),is().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,v){var w=Nn,C=is();if(Pn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=f(),Hn===null)throw Error(a(349));oa&30||Yh(w,f,v)}C.memoizedState=v;var L={value:v,getSnapshot:f};return C.queue=L,rf(Xs.bind(null,w,L,c),[c]),w.flags|=2048,au(9,qh.bind(null,w,L,v,f),void 0,null),v},useId:function(){var c=is(),f=Hn.identifierPrefix;if(Pn){var v=Gs,w=Hs;v=(w&~(1<<32-tn(w)-1)).toString(32)+v,f=":"+f+"R"+v,v=aa++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=iu++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},Jh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:ru,useRef:nm,useState:function(){return ru(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=ru(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=ru(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1},Kh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:su,useRef:nm,useState:function(){return su(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=su(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=su(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1};function Qh(c,f){try{var v="",w=f;do v+=Nh(w),w=w.return;while(w);var C=v}catch(L){C=`w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=ru(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1},Kh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:su,useRef:nm,useState:function(){return su(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=su(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=su(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1};function Qh(c,f){try{var v="",w=f;do v+=Nh(w),w=w.return;while(w);var C=v}catch(L){C=`w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=ru(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1},Kh={readContext:Ki,useCallback:af,useContext:Ki,useEffect:ol,useImperativeHandle:al,useInsertionEffect:Mn,useLayoutEffect:sf,useMemo:ll,useReducer:su,useRef:nm,useState:function(){return su(Cs)},useDebugValue:of,useDeferredValue:function(c){var f=su(Cs),v=f[0],w=f[1];return ol(function(){var C=pr.transition;pr.transition={};try{w(c)}finally{pr.transition=C}},[c]),v},useTransition:function(){var c=su(Cs)[0],f=rs().memoizedState;return[c,f]},useMutableSource:Wh,useSyncExternalStore:Xh,useId:la,unstable_isNewReconciler:!1};function Qh(c,f){try{var v="",w=f;do v+=Nh(w),w=w.return;while(w);var C=v}catch(L){C=`
スタック生成エラー: `+L.message+`
`+L.stack}return{value:c,source:f,stack:C}}function uf(c,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var x_=typeof WeakMap=="function"?WeakMap:Map;function sm(c,f,v){v=Vs(-1,v),v.tag=3,v.payload={element:null};var w=f.value;return v.callback=function(){ml||(ml=!0,Rn=w),uf(c,f)},v}function cf(c,f,v){v=Vs(-1,v),v.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var C=f.value;v.payload=function(){return w(C)},v.callback=function(){uf(c,f)}}var L=c.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(v.callback=function(){uf(c,f),typeof w!="function"&&(as===null?as=new Set([this]):as.add(this));var j=f.stack;this.componentDidCatch(f.value,{componentStack:j!==null?j:""})}),v}function Ys(c,f,v){var w=c.pingCache;if(w===null){w=c.pingCache=new x_;var C=new Set;w.set(f,C)}else C=w.get(f),C===void 0&&(C=new設定します、w.set(f,C));C.has(v)||(C.add(v),c=gd.bind(null,c,f,v),f.then(c,c))}関数$h(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}関数ua(c,f,v,w,C){return c.mode&1?(c.flags|=65536,c.lanes=C,c):(c===f?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=Vs(-1,1),f.tag=2,Mo(v,f))),v.lanes|=1),c)}関数 $n(c){c.flags|=4}関数cl(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var mr,ca,ff,hf;if(Lt)mr=function(c,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)te(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},ca=function(){},ff=function(c,f,v,w,C){if(c=c.memoizedProps,c!==w){var L=f.stateNode,j=ns(Qi.current);v=se(L,v,c,w,C,j),(f.updateQueue=v)&&$n(f)}},hf=function(c,f,v,w){v!==w&&$n(f)};else if(Ne){mr=function(c,f,v,w){for(var C=f.child;C!==null;){if(C.tag===5){var L=C.stateNode;v&&w&&(L=on(L,C.type,C.memoizedProps,C)),te(c,L)}else if(C.tag===6)L=C.stateNode,v&&w&&(L=Oi(L,C.memoizedProps,C)),te(c,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),mr(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var Ro=function(c,f,v,w){for(var C=f.child;C!==null;){if(C.tag===5){var L=C.stateNode;v&&w&&(L=on(L,C.type,C.memoizedProps,C)),Ut(c,L)}else if(C.tag===6)L=C.stateNode,v&&w&&(L=Oi(L,C.memoizedProps,C)),Ut(c,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),Ro(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};ca=function(c,f){var v=f.stateNode;if(!cl(c,f)){c=v.containerInfo;var w=Ke(c);Ro(w,f,!1,!1),v.pendingChildren=w,$n(f),An(c,w)}},ff=function(c,f,v,w,C){var L=c.stateNode,j=c.memoizedProps;if((c=cl(c,f))&&j===w)f.stateNode=L;else{var ie=f.stateNode,we=ns(Qi.current),Ve=null;j!==w&&(Ve=se(ie,v,j,w,C,we)),c&&Ve===null?f.stateNode=L:(L=tt(L,Ve,v,j,w,f,c,ie),Pe(L,v,w,C,we)&&$n(f),f.stateNode=L,c?$n(f):mr(L,f,!1,!1))}},hf=function(c,f,v,w){v!==w?(c=ns(ra.current),v=ns(Qi.current),f.stateNode=be(w,c,v,f),$n(f)):f.stateNode=c.stateNode}}else ca=function(){},ff=function(){},hf=function(){};関数qs(c,f){if(!Pn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}関数 Vn(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,w=0;if(f)for(var C=c.child;C!==null;)v|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)v|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=w,c.childLanes=v,f}function df(c,f,v){var w=f.pendingProps;switch(Bh(f),f.tag){case 2:ケース 16:ケース 15:ケース 0:ケース 11:ケース 7:ケース 8:ケース 12:ケース 9:ケース 14:Vn(f),null を返します;ケース 1:sn(f.type)&&jt(),Vn(f),null を返します;ケース 3:戻り値w=f.stateNode,rl(),He(en),He($t),sa(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(tu(f)?$n(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Nr!==null&&(wu(Nr),Nr=null))),ca(c,f),Vn(f),null;ケース5:Gh(f),v=ns(ra.current);var C=f.type;if(c!==null&&f.stateNode!=null)ff(c,f,C,w,v),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!w){if(f.stateNode===null)throw Error(a(166));return Vn(f),null}if(c=ns(Qi.current),tu(f)){if(!Ce)throw Error(a(175));c=Cc(f.stateNode,f.type,f.memoizedProps,v,c,f,!$a),f.updateQueue=c,c!==null&&$n(f)}else{var L=W(C,w,v,c,f);mr(L,f,!1,!1),f.stateNode=L,Pe(L,C,w,v,c)&&$n(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Vn(f),null;case 6:if(c&&f.stateNode!=null)hf(c,f,c.memoizedProps,w);else{if(typeof w!="string"&&f.stateNode===null)throw Error(a(166));if(c=ns(ra.current),v=ns(Qi.current),tu(f)){if(!Ce)throwエラー(a(176));if(c=f.stateNode,w=f.memoizedProps,(v=Ms(c,w,f,!$a))&&(C=Bi,C!==null))switch(L=(C.mode&1)!==0,C.tag){case 3:oe(C.stateNode.containerInfo,c,w,L);break;case 5:ve(C.type,C.memoizedProps,C.stateNode,c,w,L)}v&&$n(f)}else f.stateNode=be(w,c,v,f)}return Vn(f),null;case 13:if(He(Dn),w=f.memoizedState,Pn&&_i!==null&&f.mode&1&&!(f.flags&128)){for(c=_i;c;)c=es(c);return el(),f.flags|=98560,f}if(w!==null&&w.dehydrated!==null){if(w=tu(f),c===null){if(!w)throw Error(a(318));if(!Ce)throw Error(a(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Rc(c,f)}else el(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Vn(f),null}return Nr!==null&&(wu(Nr),Nr=null),f.flags&128?(f.lanes=v,f):(w=w!==null,v=!1,c===null?tu(f):v=c.memoizedState!==null,w&&!v&&(f.child.flags|=8192,f.mode&1&&(c===null||Dn.current&1?On===0&&(On=3):xf())),f.updateQueue!==null&&(f.flags|=4),Vn(f),null);ケース4:return rl(),ca(c,f),c===null&&_t(f.stateNode.containerInfo),Vn(f),null;ケース10:return eu(f.type._context),Vn(f),null;ケース17:return sn(f.type)&&jt(),Vn(f),null;case 19:if(He(Dn),C=f.memoizedState,C===null)return Vn(f),null;if(w=(f.flags&128)!==0,L=C.rendering,L===null)if(w)qs(C,!1);else{if(On!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(L=Qc(c),L!==null){for(f.flags|=128,qs(C,!1),c=L.updateQueue, c!==null&&(f.updateQueue=c、f.flags|=4)、f.subtreeFlags=0、c=v、w=f.child;w!==null;)v=w、C=c、v.flags&=14680066、L=v.alternate、L===null?(v.childLanes=0、v.lanes=C、v.child=null、v.subtreeFlags=0、v.memoizedPr ops=null、v.memoizedState=null、v.updateQueue=null、v.dependencies=null、v.stateNode=null):(v.childLanes=L.childLanes、v.lanes=L.lanes、v.child=L.child、v.subtreeFlags=0、v.deletions=null、v.memoizedProps=L.memoizedProps、v.memoizedState=L.memoizedState、v.updateQueue=L.updateQueue、v.type=L.type、C=L.dependencies、v.dependencies=C===null?null:{lanes:C.lanes、firstContext:C.firstContext})、w=w.sibling;return vt(Dn,Dn.current&1|2),f.child}c=c.sibling}C.tail!==null&&Qn()>Io&&(f.flags|=128,w=!0,qs(C,!1),f.lanes=4194304)}else{if(!w)if(c=Qc(L),c!==null){if(f.flags|=128,w=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),qs(C,!0),C.tail===null&&C.tailMode==="hidden"&&!L.alternate&&!Pn)return Vn(f),null}else 2*Qn()-C.renderingStartTime>Io&&v!==1073741824&&(f.flags|=128,w=!0,qs(C,!1),f.lanes=4194304);C.isBackwards?(L.sibling=f.child,f.child=L):(c=C.last,c!==null?c.sibling=L:f.child=L,C.last=L)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=Qn(),f.sibling=null,c=Dn.current,vt(Dn,w?c&1|2:c&1),f):(Vn(f),null);ケース22:ケース23:return Eu(),w=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(f.flags|=8192),w&&f.mode&1?bi&1073741824&&(Vn(f),Lt&&f.subtreeFlags&6&&(f.flags|=8192)):Vn(f),null;ケース24:nullを返します。ケース25：nullを返します。エラーをスローします(a(156,f.tag))。var ed=u.ReactCurrentOwner、li=!1;関数Un(c,f,v,w){f.child=c===null?em(f,null,v,w):Ws(f,c.child,v,w)}関数wn(c,f,v,w,C){v=v.render;var L=f.ref;戻り値Ja(f,C),w=sl(c,f,v,w,L,C),v=Ao(),c!==null&&!li?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~C,$i(c,f,C)):(Pn&&v&&zh(f),f.flags|=1,Un(c,f,w,C),f.child)}function xn(c,f,v,w,C){if(c===null){var L=v.type;return typeof L=="function"&&!Mf(L)&&L.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=L,js(c,f,L,w,C)):(c=wf(v.type,null,w,f,f.mode,C),c.ref=f.ref,c.return=f,f.child=c)}if(L=c.child,!(c.lanes&C)){var j=L.memoizedProps;if(v=v.compare,v=v!==null?v:ts,v(j,w)&&c.ref===f.ref)return $i(c,f,C)}return f.flags|=1,c=io(L,w),c.ref=f.ref,c.return=f,f.child=c}関数js(c,f,v,w,C){if(c!==null&&ts(c.memoizedProps,w)&&c.ref===f.ref)if(li=!1,(c.lanes&C)!==0)c.flags&131072&&(li=!0);else return f.lanes=c.lanes,$i(c,f,C);return Zs(c,f,v,w,C)}function vi(c,f,v){var w=f.pendingProps,C=w.children,L=c!==null?c.memoizedState:null;if(w.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},vt(ya,bi),bi|=v;else if(v&1073741824)f.memoizedState={baseLanes:0,cachePool:null},w=L!==null?L.baseLanes:v,vt(ya,bi),bi|=w;else return c=L!==null?L.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,vt(ya,bi),bi|=c,null;else L!==null?(w=L.baseLanes|v,f.memoizedState=null):w=v,vt(ya,bi),bi|=w;return Un(c,f,C,v),f.child}function Vi(c,f){var v=f.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(f.flags|=512,f.flags|=2097152)}関数 Zs(c,f,v,w,C){var L=sn(v)?Xt:$t.current;return L=mt(f,L),Ja(f,C),v=sl(c,f,v,w,L,C),w=Ao(),c!==null&&!li?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~C,$i(c,f,C)):(Pn&&w&&zh(f),f.flags|=1,Un(c,f,v,C),f.child)}関数fa(c,f,v,w,C){if(sn(v)){var L=!0;ii(f)}else L=!1;if(Ja(f,C),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Zp(f,v,w),kh(f,v,w,C),w=!0;else if(c===null){var j=f.stateNode,ie=f.memoizedProps;j.props=ie;var we=j.context,Ve=v.contextType;typeof Ve=="object"&&Ve!==null?Ve=Ki(Ve):(Ve=sn(v)?Xt:$t.current,Ve=mt(f,Ve));var ut=v.getDerivedStateFromProps、Ft=typeof ut=="function"||typeof j.getSnapshotBeforeUpdate=="function";Ft||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ie!==w||we!==Ve)&&Jp(f,j,w,Ve)、Lr=!1;var Ct=f.memoizedState;j.state=Ct、Xc(f,w,j,C)、we=f.memoizedState、ie!==w||Ct!==we||en.current||Lr?(typeof ut=="function"&&(Oh(f,v,ut,w)、we=f.memoizedState)、(ie=Lr||Fh(f,v,ie,w,Ct,we,Ve))?(Ft||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(f.flags|=4194308)):(typeof j.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=we),j.props=w,j.state=we,j.context=Ve,w=ie):(typeof j.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{j=f.stateNode,Uh(c,f),ie=f.memoizedProps,Ve=f.type===f.elementType?ie:Ji(f.type,ie),j.props=Ve,Ft=f.pendingProps,Ct=j.context,we=v.contextType,typeof we=="object"&&we!==null?we=Ki(we):(we=sn(v)?Xt:$t.current,we=mt(f,we));var Yt=v.getDerivedStateFromProps;(ut=typeof Yt=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ie!==Ft||Ct!==we)&&Jp(f,j,w,we),Lr=!1,Ct=f.memoizedState,j.state=Ct,Xc(f,w,j,C);var nt=f.memoizedState;ie!==Ft||Ct!==nt||en.current||Lr?(typeof Yt=="function"&&(Oh(f,v,Yt,w),nt=f.memoizedState),(Ve=Lr||Fh(f,v,Ve,w,Ct,nt,we)||!1)?(ut||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(w,nt,we),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(w,nt,we)),typeof j.componentDidUpdate=="function"&&(f.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof j.componentDidUpdate!="function"||ie===c.memoizedProps&&Ct===c.memoizedState||(f.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&Ct===c.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=nt),j.props=w,j.state=nt,j.context=we,w=Ve):(typeof j.componentDidUpdate!="function"||ie===c.memoizedProps&&Ct===c.memoizedState||(f.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&Ct===c.memoizedState||(f.flags|=1024),w=!1)}return Ri(c,f,v,w,L,C)}function Ri(c,f,v,w,C,L){Vi(c,f);var j=(f.flags&128)!==0;if(!w&&!j)return C&&ws(f,v,!1),$i(c,f,L);w=f.stateNode,ed.current=f;var ie=j&&typeof v.getDerivedStateFromError!="function"?null:w.render();return f.flags|=1,c!==null&&j?(f.child=Ws(f,c.child,null,L),f.child=Ws(f,null,ie,L)):Un(c,f,ie,L),f.memoizedState=w.state,C&&ws(f,v,!0),f.child}関数fu(c){var f=c.stateNode;f.pendingContext?mi(c,f.pendingContext,f.pendingContext!==f.context):f.context&&mi(c,f.context,!1),Kc(c,f.containerInfo)}関数td(c,f,v,w,C){return el(),Jc(C),f.flags|=256,Un(c,f,v,w),f.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function ha(c){return{baseLanes:c,cachePool:null}}function nd(c,f,v){var w=f.pendingProps,C=Dn.current,L=!1,j=(f.flags&128)!==0,ie;if((ie=j)||(ie=c!==null&&c.memoizedState===null?!1:(C&2)!==0),ie?(L=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(C|=1),vt(Dn,C&1),c===null)return Eo(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?$r(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(C=w.children,c=w.fallback,L?(w=f.mode,L=f.child,C={mode:"hidden",children:C},!(w&1)&&L!==null?(L.childLanes =0、L.pendingProps=C):L=Cu(C,w,0,null),c=Ea(c,w,v,null),L.return=f,c.return=f,L.sibling=c,f.child=L,f.child.memoizedState=ha(v),f.memoizedState=hu,c):ss(f,C));if(C=c.memoizedState,C!==null){if(ie=C.dehydrated,ie!==null){if(j)return f.flags&256?(f.flags&=-257,pu(c,f,v,Error(a(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(L=w.fallback,C=f.mode,w=Cu({mode:"visible",children:w.children},C,0,null),L=Ea(L,C,v,null),L.flags|=2,w.return=f,L.return=f,w.sibling=L,f.child=w,f.mode&1&&Ws(f,c.child,null,v),f.child.memoizedState=ha(v),f.memoizedState=hu,L);if(!(f.mode&1))f=pu(c,f,v,null);else if($r(ie))f=pu(c,f,v,Error(a(419)));else if(w=(v&c.childLanes)!==0,li||w){if(w=Hn,w!==null){switch(v&-v){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}w=L&(w.suspendedLanes|v)?0:L,w!==0&&w!==C.retryLane&&(C.retryLane=w,Pi(c,w,-1))}xf(),f=pu(c,f,v,Error(a(421)))}else Ss(ie)?(f.flags|=128,f.child=c.child,f=cm.bind(null,c),jo(ie,f),f=null):(v=C.treeContext,Ce&&(_i=ja(ie),Bi=f,Pn=!0,Nr=null,$a=!1,v!==null&&(Dr[hr++]=Hs,Dr[hr++]=Gs,Dr[hr++]=ta,Hs=v.id,Gs=v.overflow,ta=f)),f=ss(f,f.pendingProps.children),f.flags|=4096); return f}return L?(w=pf(c,f,w.children,w.fallback,v),L=f.child,C=c.child.memoizedState,L.memoizedState=C===null?ha(v):{baseLanes:C.baseLanes|v,cachePool:null},L.childLanes=c.childLanes&~v,f.memoizedState=hu,w):(v=du(c,f,w.children,v),f.memoizedState=null,v)}return L?(w=pf(c,f,w.children,w.fallback,v),L=f.child,C=c.child.memoizedState,L.memoizedState=C===null?ha(v):{baseLanes:C.baseLanes|v,cachePool:null},L.childLanes=c.childLanes&~v,f.memoizedState=hu,w):(v=du(c,f,w.children,v),f.memoizedState=null,v)}function ss(c,f){return f=Cu({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function du(c,f,v,w){var C=c.child;return c=C.sibling、v=io(C、{mode:"visible",children:v}),!(f.mode&1)&&(v.lanes=w),v.return=f、v.sibling=null、c!==null&&(w=f.deletions、w===null?(f.削除=[c],f.flags|=16):w.push(c)),f.child=v}関数 pf(c,f,v,w,C){var L=f.mode;c=c.child;var j=c.sibling,ie={mode:"hidden",children:v};return!(L&1)&&f.child!==c?(v=f.child,v.childLanes=0,v.pendingProps=ie,f.deletions=null):(v=io(c,ie),v.subtreeFlags=c.subtreeFlags&14680064),j!==null?w=io(j,w):(w=Ea(w,L,C,null),w.flags|=2),w.return=f,v.return=f,v.sibling=w,f.child=v,w}関数pu(c,f,v,w){return w!==null&&Jc(w),Ws(f,c.child,null,v),c=ss(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}関数 om(c,f,v){c.lanes|=f;var w=c.alternate;w!==null&&(w.lanes|=f),ea(c.return,f,v)}関数 Rs(c,f,v,w,C){var L=c.memoizedState;L===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:C}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=w,L.tail=v,L.tailMode=C)}関数 da(c,f,v){var w=f.pendingProps、C=w.revealOrder、L=w.tail;if(Un(c,f,w.children,v),w=Dn.current,w&2)w=w&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&om(c,v,f);else if(c.tag===19)om(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(vt(Dn,w),!(f.mode&1))f.memoizedState=null;else switch(C){case"forwards":for(v=f.child,C=null;v!==null;)c=v.alternate,c!==null&&Qc(c)===null&&(C=v),v=v.sibling;v=C,v===null?(C=f.child,f.child=null):(C=v.sibling,v.sibling=null),Rs(f,!1,C,v,L);break;case"後方":for(v=null,C=f.child,f.child=null;C!==null;){if(c=C.alternate,c!==null&&Qc(c)===null){f.child=C;break}c=C.sibling,C.sibling=v,v=C,C=c}Rs(f,!0,v,null,L);break;case"together":Rs(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function $i(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),bs|=f.lanes,!(v&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(a(153));if(f.child!==null){for(c=f.child,v=io(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=io(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function mf(c,f,v){switch(f.tag){case 3:fu(f),el();break;case 5:tm(f);break;case 1:sn(f.type)&&ii(f);break;case 4:Kc(f,f.stateNode.containerInfo);break;case 10:$o(f,f.type._context,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(vt(Dn,Dn.current&1),f.flags|=128,null):v&f.child.childLanes?nd(c,f,v):(vt(Dn,Dn.current&1),c=$i(c,f,v),c!==null?c.sibling:null);vt(Dn,Dn.current&1);break;case 19:if(w=(v&f.childLanes)!==0,c.flags&128){if(w)return da(c,f,v);f.flags|=128}var C=f.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),vt(Dn,Dn.current),w)break;return null;case 22:case 23:return f.レーン=0,vi(c,f,v)}return $i(c,f,v)}関数gf(c,f){switch(Bh(f),f.tag){ケース1:return sn(f.type)&&jt(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;ケース3:return rl(),He(en),He($t),sa(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;ケース5:return Gh(f),null;ケース13:if(He(Dn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(a(340));el()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return He(Dn),null;case 4:return rl(),null;case 10:return eu(f.type._context),null;case 22:case 23:return Eu(),null;case 24:return null;default:return null}}var Hi=!1,ui=!1,pa=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Ur(c,f){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(w){Wi(c,f,w)}else v.current=null}function Js(c,f,v){try{v()}catch(w){Wi(c,f,w)}}var id=!1;function rd(c,f){for(K(c.containerInfo),Ye=f;Ye!==null;)if(c=Ye,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Ye=f;else for(;Ye!==null;){c=Ye;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,L=c.stateNode,j=L.getSnapshotBeforeUpdate(c.elementType===c.type?w:Ji(c.type,w),C);L.__reactInternalSnapshotBeforeUpdate=j}break;case 3:Lt&&Re(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ie){Wi(c,c.return,ie)}if(f=c.sibling,f!==null){f.return=c.return,Ye=f;break}Ye=c.return}return v=id,id=!1,v}function Ks(c,f,v){var w=f.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&c)===c){var L=C.destroy;C.destroy=void 0,L!==void 0&&Js(f,v,L)}C=C.next}while(C!==w)}}function yi(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&c)===c){var w=v.create;v.destroy=w()}v=v.next}while(v!==f)}}function Gi(c){var f=c.ref;if(f!==null){var v=c.stateNode;switch(c.tag){case 5:c=ue(v);break;default:c=v}typeof f=="function"?f(c):f.current=c}}function Cn(c,f,v){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Jl,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var w=c=c.next;do{var C=w,L=C.destroy;C=C.tag,L!==void 0&&(C&2||C&4)&&Js(f,v,L),w=w.next}while(w!==c)}break;case 1:if(Ur(f,v),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(j){Wi(f,v,j)}break;case 5:Ur(f,v);break;case 4:Lt?ad(c,f,v):Ne&&Ne&&(f=f.stateNode.containerInfo,v=Ke(f),Yn(f,v))}}function Or(c,f,v){for(var w=f;;)if(Cn(c,w,v),w.child===null||Lt&&w.tag===4){if(w===f)break;for(;w.sibling===null;){if(w.return===null||w.return===f)return;w=w.return}w.sibling.return=w.return,w=w.兄弟}else w.child.return=w,w=w.child}function sd(c){var f=c.alternate;f!==null&&(c.alternate=null,sd(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&rt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function od(c){return c.tag===5||c.tag===3||c.tag===4}function _f(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||od(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function vf(c){if(Lt){e:{for(var f=c.return;f!==null;){if(od(f))break e;f=f.return}throw Error(a(160))}var v=f;switch(v.tag){case 5:f=v.stateNode,v.flags&32&&(Nt(f),v.flags&=-33),v=_f(c),fl(c,v,f);break;case 3:case 4:f=v.stateNode.containerInfo,v=_f(c),yf(c,v,f);break;default:throw Error(a(161))}}}function yf(c,f,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?It(v,c,f):st(v,c);else if(w!==4&&(c=c.child,c!==null))for(yf(c,f,v),c=c.sibling;c!==null;)yf(c,f,v),c=c.sibling}function fl(c,f,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?At(v,c,f):je(v,c);else if(w!==4&&(c=c.child,c!==null))for(fl(c,f,v),c=c.sibling;c!==null;)fl(c,f,v),c=c.sibling}function ad(c,f,v){for(var w=f,C=!1,L,j;;){if(!C){C=w.return;e:for(;;){if(C===null)throw Error(a(160));switch(L=C.stateNode,C.tag){case 5:j=!1;break e;case 3:L=L.containerInfo,j=!0;break e;case 4:L=L.containerInfo,j=!0;break e}C=C.return}C=!0}if(w.tag===5||w.tag===6)Or(c,w,v),j?Qt(L,w.stateNode):ft(L,w.stateNode);else if(w.tag===18)j?Dc(L,w.stateNode):Lc(L,w.stateNode);else if(w.tag===4){if(w.child!==null){L=w.stateNode.containerInfo,j=!0,w.child.return=w,w=w.child;continue}}else if(Cn(c,w,v),w.child!==null){w.child.return=w,w=w.child;continue}if(w===f)break;for(;w.sibling===null;){if(w.return===null||w.return===f)return;w=w.return,w.tag===4&&(C=!1)}w.sibling.return=w.return,w=w.sibling}}function bo(c,f){if(Lt){switch(f.tag){case 0:case 11:case 14:case 15:Ks(3,f,f.return),yi(3,f),Ks(5,f,f.return);return;case 1:return;case 5:var v=f.stateNode;if(v!=null){var w=f.memoizedProps;c=c!==null?c.memoizedProps:w;var C=f.type,L=f.updateQueue;f.updateQueue=null,L!==null&&ct(v,L,C,c,w,f)}return;case 6:if(f.stateNode===null)throw Error(a(162));v=f.memoizedProps,Bt(f.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:Ce&&c!==null&&c.memoizedState.isDehydrated&&Pc(f.stateNode.containerInfo);return;case 12:return;case 13:hl(f);return;case 19:hl(f);return;case 17:return}throw Error(a(163))}switch(f.tag){case 0:case 11:case 14:case 15:Ks(3,f,f.return),yi(3,f),Ks(5,f,f.return);return;case 12:return;case 13:hl(f);return;case 19:hl(f);return;case 3:Ce&&c!==null&&c.memoizedState.isDehydrated&&Pc(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ne){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Yn(f.containerInfo,f.pendingChildren);break e}throw Error(a(163))}}function hl(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new pa),f.forEach(function(w){var C=fm.bind(null,c,w);v.has(w)||(v.add(w),w.then(C,C))})}}function S_(c,f){for(Ye=f;Ye!==null;){f=Ye;var v=f.deletions;if(v!==null)for(var w=0;w<v.length;w++){var C=v[w];try{var L=c;Lt?ad(L,C,f):Or(L,C,f);var j=C.alternate;j!==null&&(j.return=null),C.return=null}catch(xt){Wi(C,f,xt)}}if(v=f.child,f.subtreeFlags&12854&&v!==null)v.return=f,Ye=v;else for(;Ye!==null;){f=Ye;try{var ie=f.flags;if(ie&32&&Lt&&Nt(f.stateNode),ie&512){var we=f.alternate;if(we!==null){var Ve=we.ref;Ve!==null&&(typeof Ve=="function"?Ve(null):Ve.current=null)}}if(ie&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var ut=f.alternate;(ut===null||ut.memoizedState===null)&&(Su=Qn())}break;case 22:var Ft=f.memoizedState!==null、Ct=f.alternate、Yt=Ct!==null&&Ct.memoizedState!==null;if(v=f、Lt){e:if(w=v、C=Ft、L=null、Lt)for(var nt=w;;){if(nt.tag===5){if(L===null){L=nt;var Mi=nt.stateNode;C?gn(Mi):Je(nt.stateNode、nt.memoizedProps)}}else if(nt.tag===6){if(L===null){var xr=nt.stateNode;C?re(xr):Me(xr、nt.memoizedProps)}}else if((nt.tag!==22&&nt.tag!==23||nt.memoizedState===null||nt===w)&&nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===w)break;for(;nt.sibling===null;){if(nt.return===null||nt.return===w)break e;L===nt&&(L=null),nt=nt.return}L===nt&&(L=null),nt.sibling.return=nt.return,nt=nt.sibling}}if(Ft&&!Yt&&v.mode&1){Ye=v;for(var _e=v.child;_e!==null;){for(v=Ye=_e;Ye!==null;){w=Ye;var ae=w.child;switch(w.tag){case 0:case 11:case 14:case 15:Ks(4,w,w.return);break;case 1:Ur(w,w.return);var Se=w.stateNode;if(typeof Se.componentWillUnmount=="function"){var Qe=w.return;try{Se.props=w.memoizedProps,Se.state=w.memoizedState,Se.componentWillUnmount()}catch(xt){Wi(w,Qe,xt)}}break;case 5:Ur(w,w.return);break;case 22:if(w.memoizedState!==null){ud(v);continue}}ae!==null?(ae.return=w,Ye=ae):ud(v)}_e=_e.sibling}}}switch(ie&4102){case 2:vf(f),f.flags&=-3;break;case 6:vf(f),f.flags&=-3,bo(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,bo(f.alternate,f);break;case 4:bo(f.alternate,f)}}catch(xt){Wi(f,f.return,xt)}if(v=f.sibling,v!==null){v.return=f.return,Ye=v;break}Ye=f.return}}}function mu(c,f,v){Ye=c,gu(c)}function gu(c,f,v){for(var w=(c.mode&1)!==0;Ye!==null;){var C=Ye、L=C.child;if(C.tag===22&&w){var j=C.memoizedState!==null||Hi;if(!j){var ie=C.alternate、we=ie!==null&&ie.memoizedState!==null||ui;ie=Hi;var Ve=ui;if(Hi=j、(ui=we)&&!Ve)for(Ye=C;Ye!==null;)j=Ye、we=j.child、j.tag===22&&j.memoizedState!==null?ma(C):we!==null?(we.return=j,Ye=we):ma(C);for(;L!==null;)Ye=L,gu(L),L=L.sibling;Ye=C,Hi=ie,ui=Ve}ld(c)}else C.subtreeFlags&8772&&L!==null?(L.return=C,Ye=L):ld(c)}}function ld(c){for(;Ye!==null;){var f=Ye;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:ui||yi(5,f);break;case 1:var w=f.stateNode;if(f.flags&4&&!ui)if(v===null)w.componentDidMount();else{var C=f.elementType===f.type?v.memoizedProps:Ji(f.type,v.memoizedProps);w.componentDidUpdate(C,v.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&qp(f,L,w);break;case 3:var j=f.updateQueue;if(j!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=ue(f.child.stateNode);break;case 1:v=f.child.stateNode}qp(f,j,v)}break;case 5:var ie=f.stateNode;v===null&&f.flags&4&&ke(ie,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Ce&&f.memoizedState===null){var we=f.alternate;if(we!==null){var Ve=we.memoizedState;if(Ve!==null){var ut=Ve.dehydrated;ut!==null&&Ic(ut)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throwエラー(a(163))}ui||f.flags&512&&Gi(f)}catch(Ft){Wi(f,f.return,Ft)}}if(f===c){Ye=null;break}if(v=f.sibling,v!==null){v.return=f.return,Ye=v;break}Ye=f.return}}関数ud(c){for(;Ye!==null;){var f=Ye;if(f===c){Ye=null;break}var v=f.sibling;if(v!==null){v.return=f.return,Ye=v;break}Ye=f.return}}関数ma(c){for(;Ye!==null;){var f=Ye;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{yi(4,f)}catch(we){Wi(f,v,we)}break;case 1:var w=f.stateNode;if(typeof w.componentDidMount=="function"){var C=f.return;try{w.componentDidMount()}catch(we){Wi(f,C,we)}}var L=f.return;try{Gi(f)}catch(we){Wi(f,L,we)}break;case 5:var j=f.return;try{Gi(f)}catch(we){Wi(f,j,we)}}}catch(we){Wi(f,f.return,we)}if(f===c){Ye=null;break}var ie=f.sibling;if(ie!==null){ie.return=f.return,Ye=ie;break}Ye=f.return}}var _u=0,ga=1,_a=2,Qs=3,dl=4;if(typeof Symbol=="function"&&Symbol.for){var va=Symbol.for;_u=va("selector.component"),ga=va("selector.has_pseudo_class"),_a=va("selector.role"),Qs=va("selector.test_id"),dl=va("selector.text")}function vu(c){var f=Y(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(c=X(c),c===null)throw Error(a(362));return c.stateNode.current}function yu(c,f){switch(f.$$typeof){case _u:if(c.type===f.value)return!0;break;case ga:e:{f=f.value,c=[c,0];for(var v=0;v<c.length;){var w=c[v++],C=c[v++],L=f[C];if(w.tag!==5||!Ee(w)){for(;L!=null&&yu(w,L);)C++,L=f[C];if(C===f.length){f=!0;break e}else for(w=w.child;w!==null;)c.push(w,C),w=w.sibling}}f=!1}return f;case _a:if(c.tag===5&&Le(c.stateNode,f.value))return!0;break;case dl:if((c.tag===5||c.tag===6)&&(c=pe(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Qs:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Po(c){switch(c.$$typeof){case _u:return"<"+(F(c.value)||"Unknown")+">";case ga:return":has("+(Po(c)||"")+")";case _a:return'[role="'+c.value+'"]';case dl:return'"'+c.value+'"';case Qs:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function gr(c,f){var v=[];c=[c,0];for(var w=0;w<c.length;){var C=c[w++],L=c[w++],j=f[L];if(C.tag!==5||!Ee(C)){for(;j!=null&&yu(C,j);)L++,j=f[L];if(L===f.length)v.push(C);else for(C=C.child;C!==null;)c.push(C,L),C=C.sibling}}return v}function $s(c,f){if(!qe)throw Error(a(363));c=vu(c),c=gr(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var w=c[v++];if(w.tag===5)Ee(w)||f.push(w.stateNode);else for(w=w.child;w!==null;)c.push(w),w=w.sibling}return f}var cd=Math.ceil,xu=u.ReactCurrentDispatcher,os=u.ReactCurrentOwner,vn=u.ReactCurrentBatchConfig,Gt=0,Hn=null,yn=null,In=0,bi=0,ya=wt(0),On=0,pl=null,bs=0,_r=0,xa=0,eo=null,qn=null,Su=0,Io=1/0;関数Sa(){Io=Qn()+500}var ml=!1,Rn=null,as=null,gl=!1,Ps=null,Ma=0,wa=0,to=null,En=-1,Fn=0;function cn(){return Gt&6?Qn():En!==-1?En:En=Qn()}function ls(c){return c.mode&1?Gt&2&In!==0?In&-In:Yp.transition!==null?(Fn===0&&(c=Bn,Bn<<=1,!(Bn&4194240)&&(Bn=64),Fn=c),Fn):(c=Zt,c!==0?c:Fe()):1}function Pi(c,f,v){if(50<wa)throw wa=0,to=null,Error(a(185));var w=Lo(c,f);return w===null?null:(Zo(w,f,v),(!(Gt&2)||w!==Hn)&&(w===Hn&&(!(Gt&2)&&(_r|=f),On===4&&Si(w,In)),er(w,v),f===1&&Gt===0&&!(c.mode&1)&&(Sa(),zc&&Pr())),w)}関数 Lo(c,f){c.lanes|=f;var v=c.alternate;for(v!==null&&(v.lanes|=f),v=c,c=c.return;c!==null;)c.childLanes|=f,v=c.alternate,v!==null&&(v.childLanes|=f),v=c,c=c.return;return v.tag===3?v.stateNode:null}function er(c,f){var v=c.callbackNode;Xp(c,f);var w=Zl(c,c===Hn?In:0);if(w===0)v!==null&&Za(v),c.callbackNode=null,c.callbackPriority=0;else if(f=w&-w,c.callbackPriority!==f){if(v!=null&&Za(v),f===1)c.tag===0?Vc(vr.bind(null,c)):Bc(vr.bind(null,c)),We?Tt(function(){Gt===0&&Pr()}):Jo(Ko,Pr),v=null;else{switch(zs(w)){case 1:v=Ko;break;case 4:v=v_;break;case 16:v=Fc;break;case 536870912:v=kc;break;default:v=Fc}v=Sf(v,xi.bind(null,c))}c.callbackPriority=f,c.callbackNode=v}}function xi(c,f){if(En=-1,Fn=0,Gt&6)throw Error(a(327));var v=c.callbackNode;if(Is()&&c.callbackNode!==v)return null;var w=Zl(c,c===Hn?In:0);if(w===0)return null;if(w&30||w&c.expiredLanes||f)f=Tu(c,w);else{f=w;var C=Gt;Gt|=2;var L=dd();(Hn!==c||In!==f)&&(Sa(),no(c,f));do try{lm();break}catch(ie){hd(c,ie)}while(!0);zi(),xu.current=L,Gt=C,yn!==null?f=0:(Hn=null,In=0,f=On)}if(f!==0){if(f===2&&(C=Nc(c),C!==0&&(w=C,f=Mu(c,C))),f===1)throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;if(f===6)Si(c,w);else{if(C=c.current.alternate,!(w&30)&&!fd(C)&&(f=Tu(c,w),f===2&&(L=Nc(c),L!==0&&(w=L,f=Mu(c,L))),f===1))throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;switch(c.finishedWork=C,c.finishedLanes=w,f){case 0:case 1:throw Error(a(345));case 2:us(c,qn);break;case 3:if(Si(c,w),(w&130023424)===w&&(f=Su+500-Qn(),10<f)){if(Zl(c,0)!==0)break;if(C=c.suspendedLanes,(C&w)!==w){cn(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null,c,qn),f);break}us(c,qn);break;case 4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}関数Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}function vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;case==0){if(f===2&&(C=Nc(c),C!==0&&(w=C,f=Mu(c,C))),f===1)throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;if(f===6)Si(c,w);else{if(C=c.current.alternate,!(w&30)&&!fd(C)&&(f=Tu(c,w),f===2&&(L=Nc(c),L!==0&&(w=L,f=Mu(c,L))),f===1))throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;switch(c.finishedWork=C,c.finishedLanes=w,f){case 0:case 1:throwエラー(a(345));ケース2:us(c,qn);break;ケース3:if(Si(c,w),(w&130023424)===w&&(f=Su+500-Qn(),10<f)){if(Zl(c,0)!==0)break;if(C=c.suspendedLanes,(C&w)!==w){cn(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null,c,qn),f);break}us(c,qn);break;ケース4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}関数vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;case==0){if(f===2&&(C=Nc(c),C!==0&&(w=C,f=Mu(c,C))),f===1)throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;if(f===6)Si(c,w);else{if(C=c.current.alternate,!(w&30)&&!fd(C)&&(f=Tu(c,w),f===2&&(L=Nc(c),L!==0&&(w=L,f=Mu(c,L))),f===1))throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;switch(c.finishedWork=C,c.finishedLanes=w,f){case 0:case 1:throwエラー(a(345));ケース2:us(c,qn);break;ケース3:if(Si(c,w),(w&130023424)===w&&(f=Su+500-Qn(),10<f)){if(Zl(c,0)!==0)break;if(C=c.suspendedLanes,(C&w)!==w){cn(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null,c,qn),f);break}us(c,qn);break;ケース4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}関数vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;casev;if(f===6)Si(c,w);else{if(C=c.current.alternate,!(w&30)&&!fd(C)&&(f=Tu(c,w),f===2&&(L=Nc(c),L!==0&&(w=L,f=Mu(c,L))),f===1))throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;switch(c.finishedWork=C,c.finishedLanes=w,f){case 0:case 1:throw Error(a(345));case 2:us(c,qn);break;case 3:if(Si(c,w),(w&130023424)===w&&(f=Su+500-Qn(),10<f)){if(Zl(c,0)!==0)break;if(C=c.suspendedLanes,(C&w)!==w){cn(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null,c,qn),f);break}us(c,qn);break;case 4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}関数vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;casev;if(f===6)Si(c,w);else{if(C=c.current.alternate,!(w&30)&&!fd(C)&&(f=Tu(c,w),f===2&&(L=Nc(c),L!==0&&(w=L,f=Mu(c,L))),f===1))throw v=pl,no(c,0),Si(c,w),er(c,Qn()),v;switch(c.finishedWork=C,c.finishedLanes=w,f){case 0:case 1:throw Error(a(345));case 2:us(c,qn);break;case 3:if(Si(c,w),(w&130023424)===w&&(f=Su+500-Qn(),10<f)){if(Zl(c,0)!==0)break;if(C=c.suspendedLanes,(C&w)!==w){cn(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null,c,qn),f);break}us(c,qn);break;case 4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}関数vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;case完了作業=C、c.finishedLanes=w、f){ケース0:ケース1:Error(a(345))をスローします。ケース2:us(c、qn);break;ケース3:if(Si(c、w)、(w&130023424)===w&&(f=Su+500-Qn()、10<f)){if(Zl(c、0)!==0)break;if(C=c.suspendedLanes、(C&w)!==w){cn()、c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null、c、qn)、f);break}us(c、qn);break;ケース4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}関数Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}function vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;case完了作業=C、c.finishedLanes=w、f){ケース0:ケース1:Error(a(345))をスローします。ケース2:us(c、qn);break;ケース3:if(Si(c、w)、(w&130023424)===w&&(f=Su+500-Qn()、10<f)){if(Zl(c、0)!==0)break;if(C=c.suspendedLanes、(C&w)!==w){cn()、c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Te(us.bind(null、c、qn)、f);break}us(c、qn);break;ケース4:if(Si(c,w),(w&4194240)===w)break;for(f=c.eventTimes,C=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}関数Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}function vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;caseC=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}関数vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;caseC=-1;0<w;){var j=31-tn(w);L=1<<j,j=f[j],j>C&&(C=j),w&=~L}if(w=C,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*cd(w/1960))-w,10<w){c.timeoutHandle=Te(us.bind(null,c,qn),w);break}us(c,qn);break;case 5:us(c,qn);break;default:throw Error(a(329))}}}return er(c,Qn()),c.callbackNode===v?xi.bind(null,c):null}function Mu(c,f){var v=eo;return c.current.memoizedState.isDehydrated&&(no(c,f).flags|=256),c=Tu(c,f),c!==2&&(f=qn,qn=v,f!==null&&wu(f)),c}function wu(c){qn===null?qn=c:qn.push.apply(qn,c)}function fd(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var C=v[w],L=C.getSnapshot;C=C.value;try{if(!ki(L(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}関数vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;caseサブツリーフラグ&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}function vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;caseサブツリーフラグ&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Si(c,f){for(f&=~xa,f&=~_r,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-tn(f),w=1<<v;c[v]=-1,f&=~w}}function vr(c){if(Gt&6)throw Error(a(327));Is();var f=Zl(c,0);if(!(f&1))return er(c,Qn()),null;var v=Tu(c,f);if(c.tag!==0&&v===2){var w=Nc(c);w!==0&&(f=w,v=Mu(c,w))}if(v===1)throw v=pl,no(c,0),Si(c,f),er(c,Qn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,us(c,qn),er(c,Qn()),null}function _l(c){Ps!==null&&Ps.tag===0&&!(Gt&6)&&Is();var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{if(vn.transition=null,Zt=1,c)return c()}finally{Zt=w,vn.transition=v,Gt=f,!(Gt&6)&&Pr()}}function Eu(){bi=ya.current,He(ya)}function no(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==gt&&(c.timeoutHandle=gt,Xe(v)),yn!==null)for(v=yn.return;v!==null;){var w=v;switch(Bh(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&jt();break;case 3:rl(),He(en),He($t),sa();break;case 5:Gh(w);break;case 4:rl();break;case 13:He(Dn);break;case 19:He(Dn);break;case10:eu(w.type._context);break;case 22:case 23:Eu()}v=v.return}if(Hn=c,yn=c=io(c.current,null),In=bi=f,On=0,pl=null,xa=_r=bs=0,qn=eo=null,Ir!==null){for(f=0;f<Ir.length;f++)if(v=Ir[f],w=v.interleaved,w!==null){v.interleaved=null;var C=w.next,L=v.pending;if(L!==null){var j=L.next;L.next=C,w.next=j}v.pending=w}Ir=null}return c}function hd(c,f){do{var v=yn;try{if(zi(),nu.current=ul,$c){for(var w=Nn.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}$c=!1}if(oa=0,oi=si=Nn=null,As=!1,aa=0,os.current=null,v===null||v.return===null){On=1,pl=f,yn=null;break}e:{var L=c,j=v.return,ie=v,we=f;if(f=In,ie.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Ve=we,ut=ie,Ft=ut.tag;if(!(ut.mode&1)&&(Ft===0||Ft===11||Ft===15)){var Ct=ut.alternate;Ct?(ut.updateQueue=Ct.updateQueue,ut.memoizedState=Ct.memoizedState,ut.lanes=Ct.lanes):(ut.updateQueue=null,ut.memoizedState=null)}var Yt=$h(j);if(Yt!==null){Yt.flags&=-257,ua(Yt,j,ie,L,f),Yt.mode&1&&Ys(L,Ve,f),f=Yt,we=Ve;var nt=f.updateQueue;if(nt===null){var Mi=new Set;Mi.add(we),f.updateQueue=Mi}else nt.add(we);break e}else{if(!(f&1)){Ys(L,Ve,f),xf();break e}we=Error(a(426))}}else if(Pn&&ie.mode&1){var xr=$h(j);if(xr!==null){!(xr.flags&65536)&&(xr.flags|=256),ua(xr,j,ie,L,f),Jc(we);break e}}L=we,On!==4&&(On=2),eo===null?eo=[L]:eo.push(L),we=Qh(we,ie),ie=j;do{switch(ie.tag){case 3:ie.flags|=65536,f&=-f,ie.lanes|=f;var _e=sm(ie,we,f);Wc(ie,_e);break e;case 1:L=we;var ae=ie.type,Se=ie.stateNode;if(!(ie.flags&128)&&(typeof ae.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(as===null||!as.has(Se)))){ie.flags|=65536,f&=-f,ie.lanes|=f;var Qe=cf(ie,L,f);Wc(ie,Qe);break e}}ie=ie.return}while(ie!==null)}md(v)}catch(xt){f=xt,yn===v&&v!==null&&(yn=v=v.return);continue}break}while(!0)}function dd(){var c=xu.current;return xu.current=ul,c===null?ul:c}function xf(){(On===0||On===3||On===2)&&(On=4),Hn===null||!(bs&268435455)&&!(_r&268435455)||Si(Hn,In)}function Tu(c,f){var v=Gt;Gt|=2;var w=dd();Hn===c&&In===f||no(c,f);do try{am();break}catch(C){hd(c,C)}while(!0);if(zi(),Gt=v,xu.current=w,yn!==null)throw Error(a(261));return Hn=null,In=0,On}関数am(){for(;yn!==null;)pd(yn)}関数lm(){for(;yn!==null&&!So();)pd(yn)}関数pd(c){var f=vd(c.alternate,c,bi);c.memoizedProps=c.pendingProps,f===null?md(c):yn=f,os.current=null}関数md(c){var f=c;do{var v=f.alternate;if(c=f.return,f.flags&32768){if(v=gf(v,f),v!==null){v.flags&=32767,yn=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{On=6,yn=null;return}}else if(v=df(v,f,bi),v!==null){yn=v;return}if(f=f.sibling,f!==null){yn=f;return}yn=f=c}while(f!==null);On===0&&(On=5)}function us(c,f){var v=Zt,w=vn.transition;try{vn.transition=null,Zt=1,um(c,f,v)}最後に{vn.transition=w,Zt=v}nullを返す}関数um(c,f,v){Is();while(Ps!==null);if(Gt&6)throw Error(a(327));var w=c.finishedWork,C=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0;var L=w.lanes|w.childLanes;if(Oc(c,L),c===Hn&&(yn=Hn=null,In=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||gl||(gl=!0,Sf(Fc,function(){return Is(),null})),L=(w.flags&15990)!==0,w.subtreeFlags&15990||L){L=vn.transition,vn.transition=null;var j=Zt;Zt=1;var ie=Gt;Gt|=4,os.current=null,rd(c,w),S_(c,w),J(c.containerInfo),c.current=w,mu(w),__(),Gt=ie,Zt=j,vn.transition=L}else c.current=w;if(gl&&(gl=!1,Ps=c,Ma=C),L=c.pendingLanes,L===0&&(as=null),Kl(w.stateNode),er(c,Qn()),f!==null)for(v=c.onRecoverableError,w=0;w<f.length;w++)v(f[w]);if(ml)throw ml=!1,c=Rn,Rn=null,c;return Ma&1&&c.tag!==0&&Is(),L=c.pendingLanes,L&1?c===to?wa++:(wa=0,to=c):wa=0,Pr(),null}function Is(){if(Ps!==null){var c=zs(Ma),f=vn.transition,v=Zt;try{if(vn.transition=null,Zt=16>c?16:c,Ps===null)var w=!1;else{if(c=Ps,Ps=null,Ma=0,Gt&6)throw Error(a(331));var C=Gt;for(Gt|=4,Ye=c.current;Ye!==null;){var L=Ye,j=L.child;if(Ye.flags&16){var ie=L.deletions;if(ie!==null){for(var we=0;we<ie.length;we++){var Ve=ie[we];for(Ye=Ve;Ye!==null;){var ut=Ye;switch(ut.tag){case 0:case 11:case 15:Ks(8,ut,L)}var Ft=ut.child;if(Ft!==null)Ft.return=ut,Ye=Ft;else for(;Ye!==null;){ut=Ye;var Ct=ut.sibling,Yt=ut.return;if(sd(ut),ut===Ve){Ye=null;break}if(Ct!==null){Ct.return=Yt,Ye=Ct;break}Ye=Yt}}}var nt=L.alternate;if(nt!==null){var Mi=nt.child;if(Mi!==null){nt.child=null;do{var xr=Mi.sibling;Mi.sibling=null,Mi=xr}while(Mi!==null)}}Ye=L}}if(L.subtreeFlags&2064&&j!==null)j.return=L,Ye=j;else e:for(;Ye!==null;){if(L=Ye,L.flags&2048)switch(L.tag){case 0:case 11:case 15:Ks(9,L,L.return)}var _e=L.sibling;if(_e!==null){_e.return=L.return,Ye=_e;break e}Ye=L.return}}var ae=c.current;for(Ye=ae;Ye!==null;){j=Ye;var Se=j.child;if(j.subtreeFlags&2064&&Se!==null)Se.return=j,Ye=Se;else e:for(j=ae;Ye!==null;){if(ie=Ye,ie.flags&2048)try{switch(ie.tag){case 0:case 11:case 15:yi(9,ie)}}catch(xt){Wi(ie,ie.return,xt)}if(ie===j){Ye=null;break e}var Qe=ie.sibling;if(Qe!==null){Qe.return=ie.return,Ye=Qe;break e}Ye=ie.return}}if(Gt=C,Pr(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Jl,c)}catch{}w=!0}return w}finally{Zt=v,vn.transition=f}}return!1}function Au(c,f,v){f=Qh(v,f),f=sm(c,f,1),Mo(c,f),f=cn(),c=Lo(c,1),c!==null&&(Zo(c,1,f),er(c,f))}function Wi(c,f,v){if(c.tag===3)Au(c,c,v);else for(;f!==null;){if(f.tag===3){Au(f,c,v);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(as===null||!as.has(w))){c=Qh(v,c),c=cf(f,c,1),Mo(f,c),c=cn(),f=Lo(f,1),f!==null&&(Zo(f,1,c),er(f,c));break}}f=f.return}}function gd(c,f,v){var w=c.pingCache;w!==null&&w.delete(f),f=cn(),c.pingedLanes|=c.suspendedLanes&v,Hn===c&&(In&v)===v&&(On===4||On===3&&(In&130023424)===In&&500>Qn()-Su?no(c,0):xa|=v),er(c,f)}function _d(c,f){f===0&&(c.mode&1?(f=nn,nn<<=1,!(nn&130023424)&&(nn=4194304)):f=1);var v=cn();c=Lo(c,f),c!==null&&(Zo(c,f,v),er(c,v))}function cm(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),_d(c,v)}function fm(c,f){var v=0;switch(c.tag){case 13:var w=c.stateNode,C=c.memoizedState;C!==null&&(v=C.retryLane);break;case 19:w=c.stateNode;break;default:throwエラー(a(314))}w!==null&&w.delete(f),_d(c,v)}var vd;vd=function(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps||en.current)li=!0;else{if(!(c.lanes&v)&&!(f.flags&128))return li=!1,mf(c,f,v);li=!!(c.flags&131072)}else li=!1,Pn&&f.flags&1048576&&Kp(f,jc,f.index);switch(f.lanes=0,f.tag){ケース2:var w=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var C=mt(f,$t.current);Ja(f,v),C=sl(null,f,w,c,C,v);var L=Ao();return f.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,sn(w)?(L=!0,ii(f)):L=!1,f.memoizedState=C.state!==null&&C.state!==void 0?C.state:null、Ka(f)、C.updater=Yc、f.stateNode=C、C._reactInternals=f、kh(f、w、c、v)、f=Ri(null、f、w、!0、L、v)):(f.tag=0、Pn&&L&&zh(f)、Un(null、f、C、v)、f=f.child)、f;case 16:w=f.elementType;e:{switch(c!==null&&(c.alternate=null、f.alternate=null、f.flags|=2)、c=f.pendingProps、C=w._init、w=C(w._payload)、f.type=w、C=f.tag=M_(w)、c=Ji(w、c)、C){case 0:f=Zs(null、f、w、c、v);break e;case 1:f=fa(null,f,w,c,v);break e;case 11:f=wn(null,f,w,c,v);break e;case 14:f=xn(null,f,w,Ji(w.type,c),v);break e}throw Error(a(306,w,""))}return f;case 0:return w=f.type,C=f.pendingProps,C=f.elementType===w?C:Ji(w,C),Zs(c,f,w,C,v);case 1:return w=f.type,C=f.pendingProps,C=f.elementType===w?C:Ji(w,C),fa(c,f,w,C,v);case 3:e:{if(fu(f),c===null)throwエラー(a(387));w=f.pendingProps,L=f.memoizedState,C=L.element,Uh(c,f),Xc(f,w,null,v);var j=f.memoizedState;if(w=j.element,Ce&&L.isDehydrated)if(L={element:w,isDehydrated:!1,cache:j.cache,transitions:j.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){C=エラー(a(423)),f=td(c,f,w,v,C);break e}else if(w!==C){C=エラー(a(424)),f=td(c,f,w,v,C);break e}else for(Ce&&(_i=Ac(f.stateNode.containerInfo),Bi=f,Pn=!0,Nr=null,$a=!1),v=em(f,null,w,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(el(),w===C){f=$i(c,f,v);break e}Un(c,f,w,v)}f=f.child}return f;case 5:return tm(f),c===null&&Eo(f),w=f.type,C=f.pendingProps,L=c!==null?c.memoizedProps:null,j=C.children,xe(w,C)?j=null:L!==null&&xe(w,L)&&(f.flags|=32),Vi(c,f),Un(c,f,j,v),f.child;ケース 6:return c===null&&Eo(f),null;ケース 13:return nd(c,f,v);ケース 4:return Kc(f,f.stateNode.containerInfo),w=f.pendingProps,c===null?f.child=Ws(f,null,w,v):Un(c,f,w,v),f.child;ケース 11:return w=f.type,C=f.pendingProps,C=f.elementType===w?C:Ji(w,C),wn(c,f,w,C,v);ケース 7:return Un(c,f,f.pendingProps,v),f.child;ケース 8:return Un(c,f,f.pendingProps.children,v),f.child;case 12:return Un(c,f,f.pendingProps.children,v),f.child;case 10:e:{if(w=f.type._context,C=f.pendingProps,L=f.memoizedProps,j=C.value,$o(f,w,j),L!==null)if(ki(L.value,j)){if(L.children===C.children&&!en.current){f=$i(c,f,v);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var ie=L.dependencies;if(ie!==null){j=L.child;for(var we=ie.firstContext;we!==null;){if(we.context===w){if(L.tag===1){we=Vs(-1,v&-v),we.tag=2;var Ve=L.updateQueue;if(Ve!==null){Ve=Ve.shared;var ut=Ve.pending;ut===null?we.next=we:(we.next=ut.next,ut.next=we),Ve.pending=we}}L.lanes|=v,we=L.alternate,we!==null&&(we.lanes|=v),ea(L.return,v,f),ie.lanes|=v;break}we=we.next}}else if(L.tag===10)j=L.type===f.type?null:L.child;else if(L.tag===18){if(j=L.return,j===null)throw Error(a(341));j.lanes|=v,ie=j.alternate,ie!==null&&(ie.lanes|=v),ea(j,v,f),j=L.sibling}else j=L.child;if(j!==null)j.return=L;else for(j=L;j!==null;){if(j===f){j=null;break}if(L=j.sibling,L!==null){L.return=j.return,j=L;break}j=j.return}L=j}Un(c,f,C.children,v),f=f.child}return f;case 9:return C=f.type,w=f.pendingProps.children,Ja(f,v),C=Ki(C),w=w(C),f.flags|=1,Un(c,f,w,v),f.child;ケース14:戻り値 w=f.type,C=Ji(w,f.pendingProps),C=Ji(w.type,C),xn(c,f,w,C,v);ケース15:戻り値 js(c,f,f.type,f.pendingProps,v);ケース17:戻り値w=f.type、C=f.pendingProps、C=f.elementType===w?C:Ji(w,C)、c!==null&&(c.alternate=null、f.alternate=null、f.flags|=2)、f.tag=1、sn(w)?(c=!0、ii(f)):c=!1、Ja(f,v)、Zp(f,w,C)、kh(f,w,C,v)、Ri(null,f,w,!0、c,v);case 19:return da(c,f,v);case 22:return vi(c,f,v)}throw Error(a(156,f.tag))};function Sf(c,f){return Jo(c,f)}function hm(c,f,v,w){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(c,f,v,w){return new hm(c,f,v,w)}function Mf(c){return c=c.prototype,!(!c||!c.isReactComponent)}function M_(c){if(typeof c=="function")return Mf(c)?1:0;if(c!=null){if(c=c.$$typeof,c===T)return 11;if(c===R)return 14}return 2}function io(c,f){var v=c.alternate;return v===null?(v=yr(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.レーン、v.child=c.child、v.memoizedProps=c.memoizedProps、v.memoizedState=c.memoizedState、v.updateQueue=c.updateQueue、f=c.dependencies、v.dependencies=f===null?null:{lanes:f.lanes、firstContext:f.firstContext}、v.sibling=c.sibling、v.index=c.index、v.ref=c.ref、v}function wf(c,f,v,w,C,L){var j=2;if(w=c,typeof c=="function")Mf(c)&&(j=1);else if(typeof c=="string")j=5;else e:switch(c){case m:return Ea(v.children,C,L,f);case g:j=8,C|=8;break;case _:return c=yr(12,v,f,C|2),c.elementType=_,c.lanes=L,c;case E:return c=yr(13,v,f,C),c.elementType=E,c.lanes=L,c;case S:return c=yr(19,v,f,C),c.elementType=S,c.lanes=L,c;case I:return Cu(v,C,L,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:j=10;break e;case M:j=9;break e;case T:j=11;break e;case R:j=14;break e;case P:j=16,w=null;break e}throw Error(a(130,c==null?c:typeof c,""))}return f=yr(j,v,f,C),f.elementType=c,f.type=w,f.lanes=L,f}function Ea(c,f,v,w){return c=yr(7,c,w,f),c.lanes=v,c}function Cu(c,f,v,w){return c=yr(22,c,w,f),c.elementType=I,c.lanes=v,c.stateNode={},c}function Ef(c,f,v){return c=yr(6,c,null,f),c.lanes=v,c}function Tf(c,f,v){return f=yr(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}関数Af(c,f,v,w,C){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=gt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=w,this.onRecoverableError=C,Ce&&(this.mutableSourceEagerHydrationData=null)}関数dm(c,f,v,w,C,L,j,ie,we){return c=new Af(c,f,v,ie,we),f===1?(f=1,L===!0&&(f|=8)):f=0,L=yr(3,null,null,f),c.current=L,L.stateNode=c,L.memoizedState={element:w,isDehydrated:v,cache:null,transitions:null},Ka(L),c}function pm(c){if(!c)return Pt;c=c._reactInternals;e:{if(D(c)!==c||c.tag!==1)throw Error(a(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(sn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(a(171))}if(c.tag===1){var v=c.type;if(sn(v))return ks(c,v,f)}return f}function mm(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=$(f),c===null?null:c.stateNode}function Fr(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function Ru(c,f){Fr(c,f),(c=c.alternate)&&Fr(c,f)}function Cf(c){return c=$(c),c===null?null:c.stateNode}function gm(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=cn();Pi(c,134217728,f),Ru(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=cn(),v=ls(c);Pi(c,v,f),Ru(c,v)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var v=Zi(f.pendingLanes);v!==0&&(Es(f,v|1),er(f,Qn()),!(Gt&6)&&(Sa(),Pr()))}break;case 13:var w=cn();_l(function(){return Pi(c,1,w)}),Ru(c,1)}},t.batchedUpdates=function(c,f){var v=Gt;Gt|=1;try{return c(f)}finally{Gt=v,Gt===0&&(Sa(),zc&&Pr())}},t.createComponentSelector=function(c){return{$$typeof:_u,value:c}},t.createContainer=function(c,f,v,w,C,L,j){return dm(c,f,!1,null,v,w,C,L,j)},t.createHasPseudoClassSelector=function(c){return{$$typeof:ga,value:c}},t.createHydrationContainer=function(c,f,v,w,C,L,j,ie,we){return c=dm(v,w,!0,c,C,L,j,ie,we),c.context=pm(null),v=c.current,w=cn(),C=ls(v),L=Vs(w,C),L.callback=f??null,Mo(v,L),c.current.lanes=C,Zo(c,C,w),er(c,w),c},t.createPortal=function(c,f,v){var w=3<arguments.length&&arguments[3]!==void 0?引数[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:c,containerInfo:f,implementation:v}},t.createRoleSelector=function(c){return{$$typeof:_a,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Qs,value:c}},t.createTextSelector=function(c){return{$$typeof:dl,value:c}},t.deferredUpdates=function(c){var f=Zt,v=vn.transition;try{return vn.transition=null,Zt=16,c()}finally{Zt=f,vn.transition=v}},t.discreteUpdates=function(c,f,v,w,C){var L=Zt,j=vn.transition;try{return vn.transition=null,Zt=1,c(f,v,w,C)}finally{Zt=L,vn.transition=j,Gt===0&&Sa()}},t.findAllNodes=$s,t.findBoundingRects=function(c,f){if(!qe)throw Error(a(363));f=$s(c,f),c=[];for(var v=0;v<f.length;v++)c.push(V(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var w=vx,C=w+v.width,L=vy,j=L+v.height,ie=f-1;0<=ie;ie--)if(f!==ie){var we=c[ie],Ve=we.x,ut=Ve+we.width,Ft=we.y,Ct=Ft+we.height;if(w>=Ve&&L>=Ft&&C<=ut&&j<=Ct){c.splice(f,1);break}else if(w!==Ve||v.width!==we.width||Ct<L||Ft>j){if(!(L!==Ft||v.height!==we.height||ut<w||Ve>C)){Ve>w&&(we.width+=Ve-w,we.x=w),ut<C&&(we.width=C-Ve),c.splice(f,1);break}}else{Ft>L&&(we.height+=Ft-L,we.y=L),Ct<j&&(we.height=j-Ft),c.splice(f,1);break}}}return c},t.findHostInstance=mm,t.findHostInstanceWithNoPortals=function(c){return c=G(c),c=c!==null?ce(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return mm(c)},t.flushControlled=function(c){var f=Gt;Gt|=1;var v=vn.transition,w=Zt;try{vn.transition=null,Zt=1,c()}finally{Zt=w,vn.transition=v,Gt=f,Gt===0&&(Sa(),Pr())}},t.flushPassiveEffects=Is,t.flushSync=_l,t.focusWithin=function(c,f){if(!qe)throwエラー(a(363));for(c=vu(c),f=gr(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++];if(!Ee(v)){if(v.tag===5&&Ae(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.兄弟}}return!1},t.getCurrentUpdatePriority=function(){return Zt},t.getFindAllNodesFailureDescription=function(c,f){if(!qe)throw Error(a(363));var v=0,w=[];c=[vu(c),0];for(var C=0;C<c.length;){var L=c[C++],j=c[C++],ie=f[j];if((L.tag!==5||!Ee(L))&&(yu(L,ie)&&(w.push(Po(ie)),j++,j>v&&(v=j)),j<f.length))for(L=L.child;L!==null;)c.push(L,j),L=L.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(Po(f[v]));return`findAllNodes はセレクターの一部と一致できました:
  `+(w.join(" > ")+`

一致するコンポーネントが見つかりませんでした:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ue(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHa ndler:null、setSuspenseHandler:null、scheduleUpdate:null、currentDispatcherRef:u.ReactCurrentDispatcher、findHostInstanceByFiber:Cf、findFiberByHostInstance:c.findFiberByHostInstance||gm、findHostInstancesForRefresh:null、scheduleRefresh:null、scheduleRoot:null、setRefreshHandler:null、getCurrentFiber:null、reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Jl=f.inject(c),Ts=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,v,w){if(!qe)throw Error(a(363));c=$s(c,f);var C=dt(c,v,w).disconnect;return{disconnect:function(){C()}}},t.registerMutableSourceForHydration=function(c,f){var v=f._getVersion;v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v)},t.runWithPriority=function(c,f){var v=Zt;try{return Zt=c,f()}finally{Zt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,v,w){var C=f.current,L=cn(),j=ls(C);return v=pm(v),f.context===null?f.context=v:f.pendingContext=v,f=Vs(L,j),f.payload={element:c},w=w===void 0?null:w,w!==null&&(f.callback=w),Mo(C,f),c=Pi(C,j,L),c!==null&&Gc(c,C,j),j},t}),Gv}var xM;function UD(){return xM||(xM=1,Bv.exports=ND()),Bv.exports}var OD=UD();const FD=aw(OD);var Wv={exports:{}},Xv={};/**
 * @license リアクト
 * スケジューラ.production.min.js
 *
 * 著作権 (c) Facebook, Inc. およびその関連会社。
 *
 * このソースコードはMITライセンスに基づいてライセンスされています。
 * このソース ツリーのルート ディレクトリにある LICENSE ファイル。
 */var SM;function kD(){return SM||(SM=1,function(s){function e(B,K){var J=B.length;B.push(K);e:for(;0<J;){var W=J-1>>>1,te=B[W];if(0<i(te,K))B[W]=K,B[J]=te,J=W;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var K=B[0],J=B.pop();if(J!==K){B[0]=J;e:for(var W=0,te=B.length,Pe=te>>>1;W<Pe;){var se=2*(W+1)-1,xe=B[se],be=se+1,Te=B[be];if(0>i(xe,J))be<te&&0>i(Te,xe)?(B[W]=Te,B[be]=J,W=be):(B[W]=xe,B[se]=J,W=se);else if(be<te&&0>i(Te,J))B[W]=Te,B[be]=J,W=be;else break e}}return K}function i(B,K){var J=B.sortIndex-K.sortIndex;return J!==0?J:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=日付、u=a.now();s.unstable_now=function(){return a.now()-u}}var h=[],d=[],m=1,g=null,_=3,x=!1,M=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(B){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=B)n(d),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(d)}}関数I(B){if(T=!1,P(B),!M)if(t(h)!==null)M=!0,ue(O);else{var K=t(d);K!==null&&de(I,K.startTime-B)}}関数O(B,K){M=!1,T&&(T=!1,S(z),z=-1),x=!0;var J=_;try{for(P(K),g=t(h);g!==null&&(!(g.expirationTime>K)||B&&!G());){var W=g.callback;if(typeof W=="function"){g.callback=null,_=g.priorityLevel;var te=W(g.expirationTime<=K);K=s.unstable_now(),typeof te=="function"?g.callback=te:g===t(h)&&n(h),P(K)}else n(h);g=t(h)}if(g!==null)var Pe=!0;else{var se=t(d);se!==null&&de(I,se.startTime-K),Pe=!1}return Pe}finally{g=null,_=J,x=!1}}var U=!1,F=null,z=-1,D=5,N=-1;function G(){return!(s.unstable_now()-N<D)}function $(){if(F!==null){var B=s.unstable_now();N=B;var K=!0;try{K=F(!0,B)}finally{K?Q():(U=!1,F=null)}}else U=!1}var Q;if(typeof R=="function")Q=function(){R($)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,me=ce.port2;ce.port1.onmessage=$,Q=function(){me.postMessage(null)}}else Q=function(){E($,0)};function ue(B){F=B,U||(U=!0,Q())}function de(B,K){z=E(function(){B(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_continueExecution=function(){M||x||(M=!0,ue(O))},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRateは0から125までの正の整数を取ります。125 fps を超えるフレーム レートの強制はサポートされていません"):D=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(B){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var J=_;_=K;try{return B()}finally{_=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=_;_=B;try{return K()}finally{_=J}},s.unstable_scheduleCallback=function(B,K,J){var W=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=J+te,B={id:m++,callback:K,priorityLevel:B,startTime:J,expirationTime:te,sortIndex:-1},J>W?(B.sortIndex=J,e(d,B),t(h)===null&&B===t(d)&&(T?(S(z),z=-1):T=!0,de(I,JW))):(B.sortIndex=te,e(h,B),M||x||(M=!0,ue(O))),B},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(B){var K=_;return function(){var J=_;_=K;try{return B.apply(this,arguments)}finally{_=J}}}}(Xv)),Xv}var MM;function zD(){return MM||(MM=1,Wv.exports=kD()),Wv.exports}var wM=zD();const Px={},BD=s=>void Object.assign(Px,s);function VD(s,e){function t(m,{args:g=[],attach:_,...x},M){let T=`${m[0].toUpperCase()}${m.slice(1)}`,E;if(m==="primitive"){if(x.object===void 0)throw new Error("R3F: 'object'のないプリミティブは無効です!");const S=x.object;E=eh(S,{type:m,root:M,attach:_,primitive:!0})}else{const S=Px[T];if(!S)throw new Error(`R3F: ${T}はTHREE 名前空間！拡張するのを忘れていませんか？ 参照: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: args プロパティは配列である必要があります!");E=eh(new S(...g),{type:m,root:M,attach:_,memoizedProps:{args:g}})}return E.__r3f.attach===void 0&&(E.isBufferGeometry?E.__r3f.attach="geometry":E.isMaterial&&(E.__r3f.attach="material")),T!=="inject"&&jv(E,x),E}function n(m,g){let _=!1;if(g){var x,M;(x=g.__r3f)!=null&&x.attach?qv(m,g,g.__r3f.attach):g.isObject3D&&m.isObject3D&&(m.add(g),_=!0),_||(M=m.__r3f)==null||M.objects.push(g),g.__r3f||eh(g,{}),g.__r3f.parent=m,Ay(g),th(g)}}関数 i(m,g,_){let x=!1;if(g){var M,T;if((M=g.__r3f)!=null&&M.attach)qv(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){g.parent=m,g.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:g});const E=m.children.filter(R=>R!==g),S=E.indexOf(_);m.children=[...E.slice(0,S),g,...E.slice(S)],x=!0}x||(T=m.__r3f)==null||T.objects.push(g),g.__r3f||eh(g,{}),g.__r3f.parent=m,Ay(g),th(g)}}function r(m,g,_=!1){m&&[...m].forEach(x=>a(g,x,_))}関数 a(m,g,_){if(g){var x,M,T;if(g.__r3f&&(g.__r3f.parent=null),(x=m.__r3f)!=null&&x.objects&&(m.__r3f.objects=m.__r3f.objects.filter(I=>I!==g)),(M=g.__r3f)!=null&&M.attach)RM(m,g,g.__r3f.attach);else if(g.isObject3D&&m.isObject3D){var E;m.remove(g),(E=g.__r3f)!=null&&E.root&&ZD(Ug(g),g)}const R=(T=g.__r3f)==null?void 0:T.primitive、P=!R&&(_===void 0?g.dispose!==null:_);if(!R){var S;r((S=g.__r3f)==null?void 0:S.objects、g、P)、r(g.children、g、P)}if(delete g.__r3f、P&&g.dispose&&g.type!=="Scene"){const I=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?wM.unstable_scheduleCallback(wM.unstable_IdlePriority、I):I()}th(m)}}function u(m,g,_,x){var M;const T=(M=m.__r3f)==null?void 0:M.parent;if(!T)return;const E=t(g,_,m.__r3f.root);if(m.children){for(const S of m.children)S.__r3f&&n(E,S);m.children=m.children.filter(S=>!S.__r3f)}m.__r3f.objects.forEach(S=>n(E,S)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||a(T,m),E.parent&&(E.__r3f.autoRemovedBeforeAppend=!0),n(T,E),E.raycast&&E.__r3f.eventCount&&Ug(E).getState().internal.interaction.push(E),[x,x.alternate].forEach(S=>{S!==null&&(S.stateNode=E,S.ref&&(typeof S.ref=="function"?S.ref(E):S.ref.current=E))})}const h=()=>{};return{reconciler:FD({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,g)=>{if(!g)return;const _=m.getState().scene;_.__r3f&&(_.__r3f.root=m,n(_,g))},removeChildFromContainer:(m,g)=>{g&&a(m.getState().scene,g)},insertInContainerBefore:(m,g,_)=>{if(!g||!_)return;const x=m.getState().scene;x.__r3f&&i(x,g,_)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var g;return!!((g=m==null?void 0:m.__r3f)!=null?g:{}).handlers},prepareUpdate(m,g,_,x){var M;if(((M=m==null?void 0:m.__r3f)!=null?M:{}).primitive&&x.object&&x.object!==m)return[!0];{const{args:E=[],children:S,...R}=x,{args:P=[],children:I,...O}=_;if(!Array.isArray(E))throw new Error("R3F: args プロパティは配列である必要があります!");if(E.some((F,z)=>F!==P[z]))return[!0];const U=gT(m,R,O,!0);return U.changes.length?[!1,U]:null}},commitUpdate(m,[g,_],x,M,T,E){g?u(m,x,T,E):jv(m,_)},commitMount(m,g,_,x){var M;const T=(M=m.__r3f)!=null?M:{};m.raycast&&T.handlers&&T.eventCount&&Ug(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>eh(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var g;const{attach:_,parent:x}=(g=m.__r3f)!=null?g:{};_&&x&&RM(x,m,_),m.isObject3D&&(m.visible=!1),th(m)},unhideInstance(m,g){var _;const{attach:x,parent:M}=(_=m.__r3f)!=null?_:{};x&&M&&qv(M,m,x),(m.isObject3D&&g.visible==null||g.visible)&&(m.visible=!0),th(m)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():ah.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeofパフォーマンス<"u"&&Ln.fun(performance.now)?performance.now:Ln.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ln.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ln.fun(clearTimeout)?clearTimeout:void 0}),applyProps:jv}}var EM,TM;const Yv=s=>"colorSpace"in s||"outputColorSpace"in s,cT=()=>{var s;return(s=Px.ColorManagement)!=null?s:null},fT=s=>s&&s.isOrthographicCamera,HD=s=>s&&s.hasOwnProperty("current"),Hp=typeof window<"u"&&((EM=window.document)!=null&&EM.createElement||((TM=window.navigator)==null?void 0:TM.product)==="ReactNative")?Be.useLayoutEffect:Be.useEffect;function hT(s){const e=Be.useRef(s);return Hp(()=>void(e.current=s),[s]),e}function GD({set:s}){return Hp(()=>(s(new Promise(()=>null)),()=>s(!1)),[s]),null}class dT extends Be.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}dT.getDerivedStateFromError=()=>({error:!0});const pT="__default",AM=new Map,WD=s=>s&&!!s.memoized&&!!s.changes;function mT(s){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(s)?Math.min(Math.max(s[0],t),s[1]):s}const zd=s=>{var e;return(e=s.__r3f)==null?void 0:e.root.getState()};function Ug(s){let e=s.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ln={obj:s=>s===Object(s)&&!Ln.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",boo:s=>typeof s=="boolean",und:s=>s===void 0,arr:s=>Array.isArray(s),equ(s,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof s!=typeof e||!!s!=!!e)return!1;if(Ln.str(s)||Ln.num(s)||Ln.boo(s))return s===e;const r=Ln​​.obj(s);if(r&&n==="reference")return s===e;const a=Ln.arr(s);if(a&&t==="reference")return s===e;if((a||r)&&s===e)return!0;let u;for(u in s)if(!(u in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(u in i?e:s)if(!Ln.equ(s[u],e[u],{strict:i,objects:"reference"}))return!1}else for(u inつまり、s[u]!==e[u]の場合、1を返します。if(Ln.und(u)){a&&s.length===0&&e.length===0||r&&Object.keys(s).length===0&&Object.keys(e).length===0の場合、0を返します。if(s!==e)の場合、1を返します。}0}};function XD(s){const e={nodes:{},materials:{}};return s&&s.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function YD(s){s.dispose&&s.type!=="Scene"&&s.dispose();for(const e in s)e.dispose==null||e.dispose(),delete s[e]}function eh(s,e){const t=s;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},s}function Ty(s,e){let t=s;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((r,a)=>r[a],s),{target:t,key:i}}else return{target:t,key:e}}const CM=/-\d+$/;function qv(s,e,t){if(Ln.str(t)){if(CM.test(t)){const r=t.replace(CM,""),{target:a,key:u}=Ty(s,r);Array.isArray(a[u])||(a[u]=[])}const{target:n,key:i}=Ty(s,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(s,e)}function RM(s,e,t){var n,i;if(Ln.str(t)){const{target:r,key:a}=Ty(s,t),u=e.__r3f.previousAttach;u===void 0?削除r[a]:r[a]=u}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(s,e);(i=e.__r3f)==null||i.previousAttachを削除}function gT(s,{children:e,key:t,ref:n,...i},{children:r,key:a,ref:u,...h}={},d=!1){const m=s.__r3f,g=Object.entries(i),_=[];if(d){const M=Object.keys(h);for(let T=0;T<M.length;T++)i.hasOwnProperty(M[T])||g.unshift([M[T],pT+"remove"])}g.forEach(([M,T])=>{var E;if((E=s.__r3f)!=null&&E.primitive&&M==="object"||Ln.equ(T,h[M]))return;if(/^on(ポインター|クリック|ダブルクリック|コンテキストメニュー|ホイール)/.test(M))return _.push([M,T,!0,[]]);let S=[];M.includes("-")&&(S=M.split("-")),_.push([M,T,!1,S]);for(const R in i){const P=i[R];R.startsWith(`${M}-`)&&_.push([R,P,!1,R.split("-")])}});const x={...i};return m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.args&&(x.args=m.memoizedProps.args),m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.attach&&(x.attach=m.memoizedProps.attach),{memoized:x,changes:_}}関数 jv(s,e){var t;const n=s.__r3f,i=n==null?void 0:n.root,r=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:u}=WD(e)?e:gT(s,e),h=n==null?void 0:n.eventCount;s.__r3f&&(s.__r3f.memoizedProps=a);for(let _=0;_<u.length;_++){let[x,M,T,E]=u[_];if(Yv(s)){const I="srgb",O="srgb-linear";x==="encoding"?(x="colorSpace",M=M===3001?I:O):x==="outputEncoding"&&(x="outputColorSpace",M=M===3001?I:O)}let S=s、R=S[x];if(E.length&&(R=E.reduce((P、I)=>P[I]、s),!(R&&R.set))){const[P、...I]=E.reverse();S=I.reverse().reduce((O、U)=>O[U]、s),x=P}if(M===pT+"remove")if(S.constructor){let P=AM.get(S.constructor);P||(P=new S.constructor、AM.set(S.constructor、P)),M=P[x]}else M=0;if(T&&n)M?n.handlers[x]=M:delete n.handlers[x]、n.eventCount=Object.keys(n.handlers).length;else if(R&&R.set&&(R.copy||R instanceof uc)){if(Array.isArray(M))R.fromArray?R.fromArray(M):R.set(...M);else if(R.copy&&M&&M.constructor&&R.constructor===M.constructor)R.copy(M);else if(M!==void 0){var d;const P=(d=R)==null?void 0:d.isColor;!P&&R.setScalar?R.setScalar(M):R instanceof uc&&M instanceof uc?R.mask=M.mask:R.set(M),!cT()&&r&&!r.linear&&P&&R.convertSRGBToLinear()}}else{var m;if(S[x]=M,(m=S[x])!=null&&m.isTexture&&S[x].format===ar&&S[x].type===mo&&r){const P=S[x];Yv(P)&&Yv(r.gl)?P.colorSpace=r.gl.outputColorSpace:P.encoding=r.gl.outputEncoding}}th(s)}if(n&&n.parent&&s.raycast&&h!==n.eventCount){const _=Ug(s).getState().internal,x=_.interaction.indexOf(s);x>-1&&_.interaction.splice(x,1),n.eventCount&&_.interaction.push(s)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(t=s.__r3f)!=null&&t.parent&&Ay(s),s}function th(s){var e,t;const n=(e=s.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function Ay(s){s.onUpdate==null||s.onUpdate(s)}function qD(s,e){s.manual||(fT(s)?(s.left=e.width/-2,s.right=e.width/2,s.top=e.height/2,s.bottom=e.height/-2):s.aspect=e.width/e.height,s.updateProjectionMatrix(),s.updateMatrixWorld())}function bg(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function jD(){var s;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ah.DefaultEventPriority;switch((s=e.event)==null?void 0:s.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ah.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ah.ContinuousEventPriority;default:return ah.DefaultEventPriority}}function _T(s,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(s.delete(n),i.target.releasePointerCapture(n)))}function ZD(s,e){const{internal:t}=s.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{_T(t.capturedMap,e,n,i)})}関数 JD(s){function e(h){const{internal:d}=s.getState(),m=h.offsetX-d.initialClick[0],g=h.offsetY-d.initialClick[1];戻り値Math.round(Math.sqrt(m*m+g*g))}function t(h){return h.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=d.__r3f)==null?void 0:g.ハンドラー["onPointer"+m]}))}関数n(h,d){const m=s.getState(),g=new Set,_=[],x=d?d(m.internal.interaction):m.internal.interaction;for(let S=0;S<x.length;S++){const R=zd(x[S]);R&&(R.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(h,m);関数M(S){const R=zd(S);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var P;R.events.compute==null||R.events.compute(h,R,(P=R.previousRoot)==null?void 0:P.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(S,!0):[]}let T=x.flatMap(M).sort((S,R)=>{const P=zd(S.object),I=zd(R.object);return!P||!I?S.distance-R.distance:I.events.priority-P.events.priority||S.distance-R.distance}).filter(S=>{const R=bg(S);return g.has(R)?!1:(g.add(R),!0)});m.events.filter&&(T=m.events.filter(T,m));for(const S of T){let R=S.object;for(;R;){var E;(E=R.__r3f)!=null&&E.eventCount&&_.push({...S,eventObject:R}),R=R.parent}}if("pointerId"in h&&m.internal.capturedMap.has(h.pointerId))for(let S of m.internal.capturedMap.get(h.pointerId).values())g.has(bg(S.intersection))||_.push(S.intersection);return _}function i(h,d,m,g){const _=s.getState();if(h.length){const x={停止:!1};for(const M of h){const T=zd(M.object)||_,{raycaster:E,pointer:S,camera:R,internal:P}=T,I=new q(Sx,Sy,0).unproject(R),O=N=>{var G,$;return(G=($=P.capturedMap.get(N))==null?void 0:$.has(M.eventObject))!=null?G:!1},U=N=>{const G={intersection:M,target:d.target};P.capturedMap.has(N)?P.capturedMap.get(N).set(M.eventObject,G):P.capturedMap.set(N,new Map([[M.eventObject,G]])),d.target.setPointerCapture(N)},F=N=>{const G=P.capturedMap.get(N);G&&_T(P.capturedMap,M.eventObject,G,N)};let z={};for(let N in d){let G=d[N];typeof G!="function"&&(z[N]=G)}let D={...M,...z,pointer:S,intersections:h,stopped:x.stopped,delta:m,unprojectedPoint:I,ray:E.ray,camera:R,stopPropagation(){const N="pointerId"in d&&P.capturedMap.get(d.pointerId);if((!N||N.has(M.eventObject))&&(D.stopped=x.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(G=>G.eventObject===M.eventObject))){const G=h.slice(0,h.indexOf(M));r([...G,M])}},target:{hasPointerCapture:O,setPointerCapture:U,releasePointerCapture:F},currentTarget:{hasPointerCapture:O,setPointerCapture:U,releasePointerCapture:F},nativeEvent:d};if(g(D),x.stopped===!0)break}}return h}関数r(h){const{internal:d}=s.getState();for(const m of d.hovered.values())if(!h.length||!h.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const _=m.eventObject.__r3f,x=_==null?void 0:_.handlers;if(d.hovered.delete(bg(m)),_!=null&&_.eventCount){const M={...m,intersections:h};x.onPointerOut==null||x.onPointerOut(M),x.onPointerLeave==null||x.onPointerLeave(M)}}}function a(h,d){for(let m=0;m<d.length;m++){const g=d[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return d=>{const{internal:m}=s.getState();"pointerId"in d&&m.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:_}=s.getState();_.lastEvent.current=m;const x=h==="onPointerMove",M=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",E=n(m,x?t:void 0),S=M?e(m):0;h==="onPointerDown"&&(_.initialClick=[m.offsetX,m.offsetY],_.initialHits=E.map(P=>P.eventObject)),M&&!E.length&&S<=2&&(a(m,_.interaction),g&&g(m)),x&&r(E);function R(P){const I=P.eventObject,O=I.__r3f,U=O==null?void 0:O.handlers;if(O!=null&&O.eventCount)if(x){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const F=bg(P),z=_.hovered.get(F);z?z.stopped&&P.stopPropagation():(_.hovered.set(F,P),U.onPointerOver==null||U.onPointerOver(P),U.onPointerEnter==null||U.onPointerEnter(P))}U.onPointerMove==null||U.onPointerMove(P)}else{const F=U[h];F?(!M||_.initialHits.includes(I))&&(a(m,_.interaction.filter(z=>!_.initialHits.includes(z))),F(P)):M&&_.initialHits.includes(I)&&a(m,_.interaction.filter(z=>!_.initialHits.includes(z)))}}i(E,m,S,R)}}return{handlePointer:u}}const vT=s=>!!(s!=null&&s.render),yT=Be.createContext(null),KD=(s,e)=>{const t=CD((u,h)=>{const d=新しいq,m=新しいq,g=新しいq;関数_(S=h().カメラ、R=m、P=h().サイズ){const{幅:I、高さ:O、上面:U、左面:F}=P、z=I/O;R.isVector3?g.copy(R):g.set(...R);const D=S.getWorldPosition(d).distanceTo(g);if(fT(S))return{幅:I/S.ズーム、高さ:O/S.ズーム、上面:U、左面:F、係数:1、距離:D、アスペクト:z};{const N=S.fov*Math.PI/180、G=2*Math.tan(N/2)*D、$=G*(I/O);return{幅:$、高さ:G、上面:U、左面:F、係数:I/$、距離:D、アスペクト:z}}}let x;const M=S=>u(R=>({パフォーマンス:{...R.パフォーマンス、現在:S}})),T=new Ie;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>s(h(),S),advance:(S,R)=>e(S,R,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ex,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=h();x&&clearTimeout(x),S.performance.current!==S.performance.min&&M(S.performance.min),x=setTimeout(()=>M(h().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:S=>u(R=>({...R,events:{...R.events,...S}})),setSize:(S,R,P,I,O)=>{const U=h().camera,F={width:S,height:R,top:I||0,left:O||0,updateStyle:P};u(z=>({size:F,viewport:{...z.viewport,..._(U,m,F)}}))},setDpr:S=>u(R=>{const P=mT(S);return{viewport:{...R.viewport,dpr:P,initialDpr:R.viewport.initialDpr||P}}}),setFrameloop:(S="always")=>{const R=h().clock;R.stop(),R.elapsedTime=0,S!=="never"&&(R.start(),R.elapsedTime=0),u(()=>({frameloop:S}))},previousRoot:void 0、内部:{アクティブ:!1、優先度:0、フレーム:0、最終イベント:Be.createRef()、インタラクション:[]、ホバー:新しいマップ、サブスクライバー:[]、初期クリック:[0,0]、初期ヒット数:[]、キャプチャマップ:新しいマップ、サブスクライブ:(S、R、P)=>{const I=h().internal;return I.priority=I.priority+(R>0?1:0),I.subscribers.push({ref:S、優先度:R、ストア:P}),I.subscribers=I.subscribers.sort((O、U)=>O.priority-U.priority),()=>{const O=h().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(R>0?1:0),O.subscribers=O.subscribers.filter(U=>U.ref!==S))}}}}}),n=t.getState();let i=n.size,r=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:d,gl:m,set:g}=t.getState();if(h.width!==i.width||h.height!==i.height||d.dpr!==r){var _;i=h,r=d.dpr,qD(u,h),m.setPixelRatio(d.dpr);const x=(_=h.updateStyle)!=null?_:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(h.width,h.height,x)}u!==a&&(a=u,g(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>s(u)),t};let Pg,QD=new Set,$D=new Set,eN=new Set;function Zv(s,e){if(s.size)for(const{callback:t}of s.values())t(e)}function Bd(s,e){switch(s){case"before":return Zv(QD,e);case"after":return Zv($D,e);case"tail":return Zv(eN,e)}}let Jv,Kv;function Qv(s,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof s=="number"&&(n=se.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=s),Jv=e.internal.subscribers,Pg=0;Pg<Jv.length;Pg++)Kv=Jv[Pg],Kv.ref.current(Kv.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}関数tN(s){let e=!1,t=!1,n,i,r;function a(d){i=requestAnimationFrame(a),e=!0,n=0,Bd("before",d),t=!0;for(const g of s.values()){var m;r=g.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((m=r.gl.xr)!=null&&m.isPresenting)&&(n+=Qv(d,r))}if(t=!1,Bd("after",d),n===0)return Bd("tail",d),e=!1,cancelAnimationFrame(i)}function u(d,m=1){var g;if(!d)return s.forEach(_=>u(_.store.getState(),m));(g=d.gl.xr)!=null&&g.isPresenting||!d.internal.active||d.frameloop==="never"||(m>1?d.internal.frames=Math.min(60,d.internal.frames+m):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function h(d,m=!0,g,_){if(m&&Bd("before",d),g)Qv(d,g,_);else for(const x of s.values())Qv(d,x.store.getState());m&&Bd("after",d)}return{loop:a,invalidate:u,advance:h}}function xT(){const s=Be.useContext(yT);if(!s)throw new Error("R3F: フックはCanvasコンポーネント内でのみ使用できます!");return s}function ST(s=t=>t,e){return xT()(s,e)}function nN(s,e=0){const t=xT(),n=t.getState().internal.subscribe,i=hT(s);return Hp(()=>n(i,e,t),[e,n,t]),null}const bM=new WeakMap;function MT(s,e){return function(t,...n){let i=bM.get(t);return i||(i=new t,bM.set(t,i)),s&&s(i),Promise.all(n.map(r=>new Promise((a,u)=>i.load(r,h=>{h.scene&&Object.assign(h,XD(h.scene)),a(h)},e,h=>u(new Error(`${r}をロードできませんでした: ${h==null?void 0:h.message}`)))))}}function Gp(s,e,t,n){const i=Array.isArray(e)?e:[e],r=bD(MT(t,n),[s,...i],{equal:Ln.equ});return Array.isArray(e)?r:r[0]}Gp.preload=function(s,e,t){const n=Array.isArray(e)?e:[e];return PD(MT(t),[s,...n])};Gp.clear=function(s,e){const t=Array.isArray(e)?e:[e];return ID([s,...t])};const vh=new Map,{invalidate:PM,advance:IM}=tN(vh),{reconciler:E0,applyProps:Jf}=VD(vh,jD),Kf={objects:"shallow",strict:!1},iN=(s,e)=>{const t=typeof s=="function"?s(e):s;return vT(t)?t:new aT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...s})};function rN(s,e){const t=typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:r,left:a,updateStyle:u=t}=e;return{width:n,height:i,top:r,left:a,updateStyle:u}}else if(typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&s.parentElement){const{width:n,height:i,top:r,left:a}=s.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas)return{width:s.width,height:s.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function sN(s){const e=vh.get(s),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRootは1回だけ呼び出されるべきです！");const i=typeof reportError=="function"?reportError:console.error,r=n||KD(PM,IM),a=t||E0.createContainer(r,ah.ConcurrentRoot,null,!1,null,"",i,null);e||vh.set(s,{fiber:a,store:r});let u,h=!1,d;return{configure(m={}){let{gl:g,size:_,scene:x,events:M,onCreated:T,shadows:E=!1,linear:S=!1,flat:R=!1,legacy:P=!1,orthographic:I=!1,frameloop:O="always",dpr:U=[1,2],performance:F,raycaster:z,camera:D,onPointerMissed:N}=m,G=r.getState(),$=G.gl;G.gl||G.set({gl:$=iN(g,s)});let Q=G.raycaster;Q||G.set({raycaster:Q=new $E});const{params:ce,...me}=z||{};if(Ln.equ(me,Q,Kf)||Jf(Q,{...me}),Ln.equ(ce,Q.params,Kf)||Jf(Q,{params:{...Q.params,...ce}}),!G.camera||G.camera===d&&!Ln.equ(d,D,Kf)){d=D;const J=D instanceof Dp,W=J?D:I?new Vp(0,0,0,0,.1,1e3):new Ni(75,0,.1,1e3);J||(W.position.z=5,D&&(Jf(W,D),(Dの「アスペクト」||Dの「左」||Dの「右」||Dの「下」||Dの「上」)&&(W.manual=!0,W.updateProjectionMatrix())),!G.camera&&!(D!=null&&D.rotation)&&W.lookAt(0,0,0)),G.set({camera:W}),Q.camera=W}if(!G.scene){let J;x!=null&&x.isScene?J=x:(J=new rx,x&&Jf(J,x)),G.set({scene:eh(J)})}if(!G.xr){var ue;const J=(Pe,se)=>{const xe=r.getState();xe.frameloop!=="never"&&IM(Pe,!0,xe,se)},W=()=>{const Pe=r.getState();Pe.gl.xr.enabled=Pe.gl.xr.isPresenting,Pe.gl.xr.setAnimationLoop(Pe.gl.xr.isPresenting?J:null),Pe.gl.xr.isPresenting||PM(Pe)},te={connect(){const Pe=r.getState().gl;Pe.xr.addEventListener("セッション開始",W),Pe.xr.addEventListener("セッション終了",W)},disconnect(){const Pe=r.getState().gl;Pe.xr.removeEventListener("セッション開始",W),Pe.xr.removeEventListener("セッション終了",W)}};typeof((ue=$.xr)==null?void 0:ue.addEventListener)=="function"&&te.connect(),G.set({xr:te})}if($.shadowMap){const J=$.shadowMap.enabled,W=$.shadowMap.type;if($.shadowMap.enabled=!!E,Ln.boo(E))$.shadowMap.type=Yd;else if(Ln.str(E)){varデ;コンストte={basic:cw,percentage:U0,soft:Yd,variance:fo};$.shadowMap.type=(de=te[E])!=null?de:Yd}else Ln.obj(E)&&Object.assign($.shadowMap,E);(J!==$.shadowMap.enabled||W!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const B=cT();B&&("enabled"in B?B.enabled=!P:"legacyMode"in B&&(B.legacyMode=P)),h||Jf($,{outputEncoding:S?3e3:3001,toneMapping:R?zo:Hy}),G.legacy!==P&&G.set(()=>({legacy:P})),G.linear!==S&&G.set(()=>({linear:S})),G.flat!==R&&G.set(()=>({flat:R})),g&&!Ln.fun(g)&&!vT(g)&&!Ln.equ(g,$,Kf)&&Jf($,g),M&&!G.events.handlers&&G.set({events:M(r)});const K=rN(s,_);return Ln.equ(K,G.size,Kf)||G.setSize(K.width,K.height,K.updateStyle,K.top,K.left),U&&G.viewport.dpr!==mT(U)&&G.setDpr(U),G.frameloop!==O&&G.setFrameloop(O),G.onPointerMissed||G.set({onPointerMissed:N}),F&&!Ln.equ(F,G.performance,Kf)&&G.set(J=>({performance:{...J.performance,...F}})),u=T,h=!0,this},render(m){return h||this.configure(),E0.updateContainer(zt.jsx(oN,{store:r,children:m,onCreated:u,rootElement:s}),a,null,()=>{}),r},unmount(){wT(s)}}}function oN({store:s,children:e,onCreated:t,rootElement:n}){return Hp(()=>{const i=s.getState();i.set(r=>({internal:{...r.internal,active:!0}})),t&&t(i),s.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),zt.jsx(yT.Provider,{value:s,children:e})}function wT(s,e){const t=vh.get(s),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),E0.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var r,a,u,h;i.events.切断==null||i.events.disconnect(),(r=i.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(u=i.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=i.gl)!=null&&h.xr&&i.xr.disconnect(),YD(i),vh.delete(s)}catch{}},500)})}}E0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Be.version});const $v={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};関数aN(s){const{handlePointer:e}=JD(s);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys($v).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=s.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=s.getState();r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((n=r.handlers)!=null?n:[]).forEach(([a,u])=>{const[h,d]=$v[a];t.addEventListener(h,u,{passive:d})})},disconnect:()=>{const{set:t,events:n}=s.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([r,a])=>{if(n&&n.connected instanceof HTMLElement){const[u]=$v[r];n.connected.removeEventListener(u,a)}}),t(r=>({events:{...r.events,connected:void 0}}))}}}}function LM(s,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>s(...n),e)}}function lN({debounce:s,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("このブラウザはResizeObserverを標準ではサポートしていません。参照: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=Be.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=Be.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),h=s?typeof s=="number"?s:s.scroll:null,d=s?typeof s=="number"?s:s.resize:null,m=Be.useRef(!1);Be.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,_,x]=Be.useMemo(()=>{const S=()=>{if(!u.current.element)return;const{left:R,top:P,width:I,height:O,bottom:U,right:F,x:z,y:D}=u.current.element.getBoundingClientRect(),N={left:R,top:P,width:I,height:O,bottom:U,right:F,x:z,y:D};u.current.element instanceof HTMLElement&&n&&(N.height=u.current.element.offsetHeight,N.width=u.current.element.offsetWidth),Object.freeze(N),m.current&&!hN(u.current.lastBounds,N)&&a(u.current.lastBounds=N)};return[S,d?LM(S,d):S,h?LM(S,h):S]},[a,n,h,d]);function M(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",x,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function T(){u.current.element&&(u.current.resizeObserver=new i(x),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(S=>S.addEventListener("scroll",x,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const E=S=>{!S||S===u.current.element||(M(),u.current.element=S,u.current.scrollContainers=ET(S),T())};return cN(x,!!e),uN(_),Be.useEffect(()=>{M(),T()},[e,x,_]),Be.useEffect(()=>M,[]),[E,r,g]}function uN(s){Be.useEffect(()=>{const e=s;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[s])}function cN(s,e){Be.useEffect(()=>{if(e){const t=s;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[s,e])}function ET(s){const e=[];if(!s||s===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(s);return[t,n,i].some(r=>r==="auto"||r==="scroll")&&e.push(s),[...e,...ET(s.parentElement)]}const fN=["x","y","top","bottom","left","right","width","height"],hN=(s,e)=>fN.every(t=>s[t]===e[t]);var dN=Object.defineProperty,pN=Object.defineProperties,mN=Object.getOwnPropertyDescriptors,DM=Object.getOwnPropertySymbols,gN=Object.prototype.hasOwnProperty,_N=Object.prototype.propertyIsEnumerable,NM=(s,e,t)=>e in s?dN(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,UM=(s,e)=>{for(var t in e||(e={}))gN.call(e,t)&&NM(s,t,e[t]);if(DM)for(var t of DM(e))_N.call(e,t)&&NM(s,t,e[t]);return s},vN=(s,e)=>pN(s,mN(e)),OM,FM;typeof window<"u"&&((OM=window.document)!=null&&OM.createElement||((FM=window.navigator)==null?void 0:FM.product)==="ReactNative")?Be.useLayoutEffect:Be.useEffect;function TT(s,e,t){if(!s)return;if(t(s)===!0)return s;let n=s.child;for(;n;){const i=TT(n,e,t);if(i)return i;n=n.sibling}}function AT(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const kM=console.error;console.error=function(){const s=[...arguments].join("");if(s!=null&&s.startsWith("Warning:")&&s.includes("useContext")){console.error=kM;return}return kM.apply(this,arguments)};const Ix=AT(Be.createContext(null));class CT extends Be.Component{render(){return Be.createElement(Ix.Provider,{value:this._reactInternals},this.props.children)}}function yN(){const s=Be.useContext(Ix);if(s===null)throw new Error("問題ありません: useFiber は <FiberProvider /> 内で呼び出す必要があります!");const e=Be.useId();return Be.useMemo(()=>{for(const n of[s,s==null?void 0:s.alternate]){if(!n)continue;const i=TT(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[s,e])}function xN(){const s=yN(),[e]=Be.useState(()=>new Map);e.clear();let t=s;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==Ix&&!e.has(i)&&e.set(i,Be.useContext(AT(i)))}t=t.return}return e}function SN(){const s=xN();return Be.useMemo(()=>Array.from(s.keys()).reduce((e,t)=>n=>Be.createElement(e,null,Be.createElement(t.Provider,vN(UM({},n),{value:s.get(t)}))),e=>Be.createElement(CT,UM({},e))),[s])}const MN=Be.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:r,events:a=aN,eventSource:u,eventPrefix:h,shadows:d,linear:m,flat:g,legacy:_,orthographic:x,frameloop:M,dpr:T,performance:E,raycaster:S,camera:R,scene:P,onPointerMissed:I,onCreated:O,...U},F){Be.useMemo(()=>BD(xD),[]);const z=SN(),[D,N]=lN({scroll:!0,debounce:{scroll:50,resize:0},...n}),G=Be.useRef(null),$=Be.useRef(null);Be.useImperativeHandle(F,()=>G.current);const Q=hT(I),[ce,me]=Be.useState(!1),[ue,de]=Be.useState(!1);if(ce)throw ce;if(ue)throw ue;const B=Be.useRef(null);Hp(()=>{const J=G.current;N.width>0&&N.height>0&&J&&(B.current||(B.current=sN(J)),B.current.configure({gl:r,events:a,shadows:d,linear:m,flat:g,legacy:_,orthographic:x,frameloop:M,dpr:T,performance:E,raycaster:S,camera:R,scene:P,size:N,onPointerMissed:(...W)=>Q.current==null?void 0:Q.current(...W),onCreated:W=>{W.events.connect==null||W.events.connect(u?HD(u)?u.current:u:$.current),h&&W.setEvents({compute:(te,Pe)=>{const se=te[h+"X"],xe=te[h+"Y"];Pe.pointer.set(se/Pe.size.width*2-1,-(xe/Pe.size.height)*2+1),Pe.raycaster.setFromCamera(Pe.pointer,Pe.camera)}}),O==null||O(W)}}),B.current.render(zt.jsx(z,{children:zt.jsx(dT,{set:de,children:zt.jsx(Be.Suspense,{fallback:zt.jsx(GD,{set:me}),children:e})})})))}),Be.useEffect(()=>{const J=G.current;if(J)return()=>wT(J)},[]);const K=u?"none":"auto";return zt.jsx("div",{ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...i},...U,children:zt.jsx("div",{ref:D,style:{width:"100%",height:"100%"},children:zt.jsx("canvas",{ref:G,style:{display:"block"},children:t})})})}),wN=Be.forwardRef(function(e,t){return zt.jsx(CT,{children:zt.jsx(MN,{...e,ref:t})})});function Da(s){if(s===void 0)throw new ReferenceError("これは初期化されていません - super()が呼び出されていません");return s}function RT(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * https://gsap.com/standard-license の規約に従うか、
 * Club GSAP 会員の場合、その会員資格とともに発行される契約。
 * @著者: ジャック・ドイル、jack@greensock.com
*/var _s={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yh={duration:.5,overwrite:!1,delay:0},Lx,ji,kn,Ho=1e8,lr=1/Ho,Cy=Math.PI*2,EN=Cy/4,TN=0,bT=Math.sqrt,AN=Math.cos,CN=Math.sin,Ui=function(e){return typeof e=="string"},Kn=function(e){return typeof e=="function"},Xa=function(e){return typeof e=="number"},Dx=function(e){return typeof e>"u"},Xo=function(e){return typeof e=="object"},qr=function(e){return e!==!1},Nx=function(){return typeof window<"u"},Ig=function(e){return Kn(e)||Ui(e)},PT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},cr=Array.isArray,Ry=/(?:-?\.?\d|\.)+/gi,IT=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,lh=/[-+=.]*\d+[.e-]*\d*[az%]*/g,ey=/[-+=.]*\d+\.?\d*( ?:e-|e\+)?\d*/gi,LT=/[+-]=-?[.\d]+/,DT=/[^,'"\[\]\s]+/gi,RN=/^[+\-=e\s\d]*\d+[.\d]*([az]*|%)\s*$/i,Gn,No,by,Ux,ys={},T0={},NT,UT=function(e){return(T0=xh(e,ys))&&Kr},Ox=function(e,t){return console.warn("無効なプロパティ",e,"設定",t,"プラグインがありませんか? gsap.registerPlugin()")},wp=function(e,t){return!t&&console.warn(e)},OT=function(e,t){return e&&(ys[e]=t)&&T0&&(T0[e]=t)||ys},Ep=function(){return 0},bN={suppressEvents:!0,isStart:!0,kill:!1},Og={suppressEvents:!0,kill:!1},PN={suppressEvents:!0},Fx={},kl=[],Py={},FT,ds={},ty={},zM=30,Fg=[],kx="",zx=function(e){var t=e[0],n,i;if(Xo(t)||Kn(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=Fg.length;i--&&!Fg[i].targetTest(t););n=Fg[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new aA(e[i],n)))||e.splice(i,1);return e},fc=function(e){return e._gsap||zx(Fs(e))[0]._gsap},kT=function(e,t,n){return(n=e[t])&&Kn(n)?e[t]():Dx(n)&&e.getAttribute&&e.getAttribute(t)||n},jr=function(e,t){return(e=e.split(",")).forEach(t)||e},ni=function(e){return Math.round(e*1e5)/1e5||0},di=function(e){return Math.round(e*1e7)/1e7||0},fh=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?ei:n==="*"?e*i:e/i},IN=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},A0=function(){var e=kl.length,t=kl.slice(0),n,i;for(Py={},kl.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},zT=function(e,t,n,i){kl.length&&!ji&&A0(),e.render(t,n,ji&&t<0&&(e._initted||e._startAt)),kl.length&&!ji&&A0()},BT=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(DT).length<2?t:Ui(e)?e.trim():e},VT=function(e){return e},xs=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},LN=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},xh=function(e,t){for(var n in t)e[n]=t[n];return e},BM=関数 s(e,t){for(var n in t)n!=="__proto__"&&n!=="コンストラクタ"&&n!=="プロトタイプ"&&(e[n]=Xo(t[n])?s(e[n]||(e[n]={}),t[n]):t[n]);return e},C0=関数(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},np=関数(e){var t=e.parent||Gn,n=e.keyframes?LN(cr(e.keyframes)):xs;if(qr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},DN=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},HT=function(e,t,n,i,r){var a=e[i],u;if(r)for(u=t[r];a&&a[r]>u;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},p_=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var r=t._prev,a=t._next;r?r._next=a:e[n]===t&&(e[n]=a),a?a._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},Hl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},hc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},NN=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Iy=function(e,t,n,i){return e._startAt&&(ji?e._startAt.revert(Og):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},UN=function s(e){return!e||e._ts&&s(e.parent)},VM=function(e){return e._repeat?Sh(e._tTime,e=e.duration()+e._rDelay)*e:0},Sh=function(e,t){var n=Math.floor(e=di(e/t));return e&&n===e?n-1:n},R0=function(e,t){return(et._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},m_=function(e){return e._end=di(e._start+(e._tDur/Math.abs(e._ts||e._rts||lr)||0))},g_=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=di(n._time-(e._ts>0?t/e._ts:((e._dirty?e.t otalDuration():e._tDur)-t)/-e._ts)),m_(e),n._dirty||hc(n,e)),e},GT=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=R0(e.rawTime(),t),(!t._dur||Wp(0,t.totalDuration(),n)-t._tTime>lr)&&t.render(n,!0)),hc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Oo=function(e,t,n,i){return t.parent&&Hl(t),t._start=di((Xa(n)?n:n||e!==Gn?Us(e,n,t):e._time)+t._delay),t._end=di(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),HT(e,t,"_first","_last",e._sort?"_start":0),Ly( t)||(e._recent=t),i||GT(e,t),e._ts<0&&g_(e,e._tTime),e},WT=function(e,t){return(ys.ScrollTrigger||Ox("scrollTrigger",t))&&ys.ScrollTrigger.create(t,e)},XT=function(e,t,n,i,r){if(Vx(e,t,r),!e._initted)return 1;if(!n&&e._pt&&!ji&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&FT!==ps.frame)return kl.push(e),e._lazy=[r,i],1},ON=function s(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||s(t))},Ly=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},FN=function(e,t,n,i){var r=e.ratio、a=t<0||!t&&(!e._start&&ON(e)&&!(!e._initted&&Ly(e))||(e._ts<0||e._dp._ts<0)&&!Ly(e))?0:1、u=e._rDelay、h=0、d、m、g;if(u&&e._repeat&&(h=Wp(0,e._tDur,t),m=Sh(h,u),e._yoy o&&m&1&&(a=1-a),m!==Sh(e._tTime,u)&&(r=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==r||ji||i||e._zTime===lr||!t&&e._zTime){if(!e._initted&&XT(e,t,i,n,h))return; for(g=e._zTime,e._zTime=t||(n?lr:0),n||(n=t&&!g),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=h,d=e._pt;d;)dr(a,dd),d=d._next;t<0&&Iy(e,t,n,!0),e._onUpdate&&!n&&ms(e,"onUpd ate"),h&&e._repeat&&!n&&e.parent&&ms(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&& Hl(e,1),!n&&!ji&&(ms(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},kN=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Mh=function(e,t,n,i){var r=e._repeat,a=di(t)||0,u=e._tTime/e._tDur;return u&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=r?r<0?1e10:di(a*(r+1)+e._rDelay*r):a,u>0&& !i&&g_(e,e._tTime=e._tDur*u),e.parent&&m_(e),n||hc(e.parent,e),e},HM=function(e){return e インスタンス Tr?hc(e):Mh(e,e._dur)},zN={_start:0,endTime:Ep,totalDuration:Ep},Us=function s(e,t,n){var i=e.labels,r=e._recent||zN,a=e.duration()>=Ho?r.endTime(!1):e._dur,u,h,d;return Ui(t)&&(isNaN(t)||t in i)?(h=t.charAt(0),d=t.substr(-1)==="%",u=t.indexOf("="),h==="<"||h===">"?(u>=0&&(t=t.replace(/=/,"")),(h==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(d?(u<0?r:n).totalDuration()/100:1)):u<0?(t in i||(i[t]=a),i[t]):(h=parseFloat(t.charAt(u-1)+t.substr(u+1)),d&&n&&(h=h/100*(cr(n)?n[0]:n).totalDuration()),u>1?s(e,t.substr(0,u-1),n)+h:a+h)):t==null?a:+t},ip=function(e,t,n){var i=Xa(t[1]),r=(i?2:1)+(e<2?0:1),a=t[r],u,h;if(i&&(a.duration=t[1]),a.parent=n,e){for(u=a,h=n;h&&!("immediateRender"in u);)u=h.vars.defaults||{},h=qr(h.vars.inherit)&&h.parent;a.immediateRender=qr(u.immediateRender),e<2?a.runBackwards=1:a.startAt=t[r-1]}return new hi(t[0],a,t[r+1])},jl=function(e,t){return e||e===0?t(e):t},Wp=function(e,t,n){return n<e?e:n>t?t:n},or=function(e,t){return!Ui(e)||!(t=RN.exec(e))?"":t[1]},BN=function(e,t,n){return jl(n,function(i){return Wp(e,t,i)})},Dy=[].slice,YT=function(e,t){return e&&Xo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Xo(e[0]))&&!e.nodeType&&e!==No},VN=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var r;return Ui(i)&&!t||YT(i,1)?(r=n).push.apply(r,Fs(i)):n.push(i)})||n},Fs=function(e,t,n){return kn&&!t&&kn.selector?kn.selector(e):Ui(e)&&!n&&(by||!wh())?Dy.call((t||Ux).querySelectorAll(e),0):cr(e)?VN(e,n):YT(e)?Dy.call(e,0):e?[e]:[]},Ny=function(e){return e=Fs(e)[0]||wp("無効なスコープ")||{},function(t){var n=e.current||e.nativeElement||e;return Fs(t,n.querySelectorAll?n:n===e?wp("無効なスコープ")||Ux.createElement("div"):e)}},qT=function(e){return e.sort(function(){return .5-Math.random()})},jT=function(e){if(Kn(e))return e;var t=Xo(e)?e:{each:e},n=dc(t.ease),i=t.from||0,r=parseFloat(t.base)||0,a={},u=i>0&&i<1,h=isNaN(i)||u,d=t.axis,m=i,g=i;return Ui(i)?m=g={中心:.5,辺:.5,端:1}[i]||0:!u&&h&&(m=i[0],g=i[1]),function(_,x,M){var T=(M||t).length, E=a[T],S,R,P,I,O,U,F,z,D;if(!E){if(D=t.grid==="auto"?0:(t.grid||[1,Ho])[1],!D){for(F=-1e8;F<(F=M[D++].getBoundingClientRect().left)&&D<T;);D<T&&D--}for(E=a[T]=[],S=h?Math.min(D,T)*m-.5:i%D,R=D===Ho?0:h?T*g/D-.5:i/D|0,F=0,z=Ho,U=0;U<T;U++)P=U%DS,I=R-(U/D|0),E [U]=O=d?Math.abs(d==="y"?I:P):bT(P*P+I*I),O>F&&(F=O),O<z&&(z=O);i==="random"&&qT(E),E.max=Fz,E.min=z,Ev=T=(parseFloat(t.amount)||parseFloat(t.each)*(D>T?T-1:d?d==="y"?T/D:D:Math.max(D,T/D))||0)*(i==="edges"?-1:1),Eb=T<0?rT:r,Eu=or(t.amount||t.each)||0,n=n&&T<0?rA(n):n}return T=(E[_]-E.min)/E.max||0,di(E.b+(n?n(T):T)*Ev)+Eu}},Uy=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=di(Math.round(parseFloat(n)/e)*e*t);return(ii%1)/t+(Xa(n)?0:or(n))}},ZT=function(e,t){var n=cr(e),i,r;return!n&&Xo(e)&&(i=n=e.radius||Ho,e.values?(e=Fs(e.values),(r=!Xa(e[0]))&&(i*=i)):e=Uy(e.increment)),jl(t,n?Kn(e)?function(a){return r=e(a),Math.abs(ra)<=i?r:a}:function(a){for(var u=parseFloat(r?ax:a),h=parseFloat(r?ay:0),d=Ho,m=0,g=e.length,_,x;g--;)r?(_=e[g].xu,x=e[g].yh,_=_*_+x*x):_=Math.abs(e[g]-u),_<d&&(d=_,m=g);return m=!i||d<=i?e[m]:a,r||m===a||Xa(a)?m:m+or(a)}:Uy(e))},JT=function(e,t,n,i){return jl(cr(e)?!t:n===!0?!!(n=0):!i,function(){return cr(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((en/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},HN=function(){for(var e=arguments.length,t=新しい配列(e),n=0;n<e;n++)t[n]=引数[n];関数(i){関数t.reduce(function(r,a){関数a(r)},i)}},GN=関数(e,t){関数n){関数e(parseFloat(n))+(t||or(n))}},WN=関数(e,t,n){関数QT(e,t,0,1,n)},KT=関数(e,t,n){関数jl(n,function(i){関数e[~~t(i)]})},XN=関数s(e,t,n){var i=te;関数s(e,t,n){ cr(e)?KT(e,s(0,e.length),t):jl(n,function(r){return(i+(re)%i)%i+e})},YN=function s(e,t,n){var i=te,r=i*2;return cr(e)?KT(e,s(0,e.length-1),t):jl(n,function(a){return a=(r+(ae)%r)%r||0,e+(a>i?ra:a)})},Tp=function(e){for(var t=0,n="",i,r,a,u;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),u=e.charAt(i+7)==="[",r=e.substr(i+7,ai-7).match(u?DT:Ry),n+=e.substr(t,it)+JT(u?r:+r[0],u?0:+r[1],+r[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},QT=function(e,t,n,i,r){var a=te,u=in;return jl(r,function(h){return n+((he)/a*u||0)})},qN=function s(e,t,n,i){var r=isNaN(e+t)?0:function(x){return(1-x)*e+x*t};if(!r){var a=Ui(e),u={},h,d,m,g,_;if(n===!0&&(i=1)&&(n=null),a)e={p:e},t={p:t};else if(cr(e)&&!cr(t)){for(m=[],g=e.length,_=g-2,d=1;d<g;d++)m.push(s(e[d-1],e[d]));g--,r=function(M){M*=g;var T=Math.min(_,~~M);return m[T](MT)},n=t}else i||(e=xh(cr(e)?[]:{},e));if(!m){for(h in t)Bx.call(u,e,h,"get",t[h]);r=function(M){return Wx(M,u)||(a?ep:e)}}}return jl(n,r)},GM=function(e,t,n){var i=e.labels,r=Ho,a,u,h;for(a in i)u=i[a]-t,u<0==!!n&&u&r>(u=Math.abs(u))&&(h=a,r=u);return h},ms=function(e,t,n){var i=e.vars,r=i[t],a=kn,u=e._ctx,h,d,m;if(r)return h=i[t+"Params"],d=i.callbackScope||e,n&&kl.length&&A0(),u&&(kn=u),m=h?r.apply(d,h):r.call(d),kn=a,m},Wd=function(e){return Hl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ji),e.progress()<1&&ms(e,"onInterrupt"),e},uh,$T=[],eA=function(e){if(e)if(e=!e.name&&e.default||e,Nx()||e.headless){var t=e.name、n=Kn(e)、i=t&&!n&&e.init?function(){this._props=[]}:e、r={init:Ep、render:Wx、add:Bx、kill:uU、modifier:lU、rawVars:0}、a={targetTest:0、get:0、getSetter:Gx、aliases:{}、register:0};if(wh()、e!==i){if(ds[t])return; xs(i,xs(C0(e,r),a)),xh(i.prototype,xh(r,C0(e,a))),ds[i.prop=t]=i,e.targetTest&&(Fg.push(i),Fx[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"プラグイン"}OT(t,i),e.register&&e.register(Kr,i,Zr)}else $T.push(e)},bn=255,Xd={アクア:[0,bn,bn],ライム:[0,bn,0],シルバー:[192,192,192],ブラック:[0,0,0],マルーン:[128,0,0],ティール:[0,128,128],ブルー:[0,0,bn],ネイビー:[0,0,128],ホワイト:[bn,bn,bn],オリーブ:[128,128,0],黄色:[bn,bn,0],オレンジ色:[bn,165,0],灰色:[128,128,128],紫色:[128,0,128],緑:[0,128,0],赤:[bn,0,0],ピンク色:[bn,192,203],シアン:[0,bn,bn],透明:[bn,bn,bn,0]},ny=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(nt)*e*6:e<.5?n:e*3<2?t+(nt)*(2/3-e)*6:t)*bn+.5|0},tA=function(e,t,n){var i=e?Xa(e)?[e>>16,e>>8&bn,e&bn]:0:Xd.black,r,a,u,h,d,m,g,_,x,M;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Xd[e])i=Xd[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),a=e.charAt(2),u=e.charAt(3),e="#"+r+r+a+a+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&bn,i&bn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&bn,e&bn]}else if(e.substr(0,3)==="hsl"){if(i=M=e.match(Ry),!t)h=+i[0]%360/360,d=+i[1]/100,m=+i[2]/100,a=m<=.5?m*(d+1):m+dm*d,r=m*2-a,i.length>3&&(i[3]*=1),i[0]=ny(h+1/3,r,a),i[1]=ny(h,r,a),i[2]=ny(h-1/3,r,a);else if(~e.indexOf("="))return i=e.match(IT),n&&i.length<4&&(i[3]=1),i}else i=e.match(Ry)||Xd.transparent;i=i.map(Number)}return t&&!M&&(r=i[0]/bn,a=i[1]/bn,u=i[2]/bn,g=Math.max(r,a,u),_=Math.min(r,a,u),m=(g+_)/2,g===_?h=d=0:(x=g-_,d=m>.5?x/(2-g-_):x/(g+_),h=g===r?(au)/x+(a<u?6:0):g===a?(ur)/x+2:(ra)/x+4,h*=60),i[0]=~~(h+.5),i[1]=~~(d*100+.5),i[2]=~~(m*100+.5)),n&&i.length<4&&(i[3]=1),i},nA=function(e){var t=[],n=[],i=-1;return e.split(zl).forEach(function(r){var a=r.match(lh)||[];t.push.apply(t,a),n.push(i+=a.length+1)}),tc=n,t},WM=function(e,t,n){var i="",r=(e+i).match(zl),a=t?"hsla(":"rgba(",u=0,h,d,m,g;if(!r)return e;if(r=r.map(function(_){return(_=tA(_,t,1))&&a+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),n&&(m=nA(e),h=nc,h.join(i)!==mcjoin(i)))for(d=e.replace(zl,"1").spli t(lh),g=d.length-1;u<g;u++)i+=d[u]+(~h.indexOf(u)?r.shift()||a+"0,0,0,0)":(m.length?m:r.length?r:n).shift());if(!d)for(d=e.split(zl),g=d.length-1;u<g;u++)i+=d[u]+r[u];return i+d[g]},zl=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Xd)s+="|"+e+"\\b";return new RegExp(s+")","gi")}(),jN=/hsl[a]?\(/,iA=function(e){var t=e.join(" "),n;if(zl.lastIndex=0,zl.test(t))return n=jN.test(t),e[1]=WM(e[1],n),e[0]=WM(e[0],n,nA(e[1])),!0},Ap,ps=function(){var s=Date.now,e=500,t=33,n=s(),i=n,r=1e3/240,a=r,u=[],h,d,m,g,_,x,M=関数T(E){var S=s()-i,R=E===!0,P,I,O,U;if((S>e||S<0)&&(n+=St),i+=S,O=in,P=Oa,(P>0||R)&&(U=++g.frame,_=Og.time*1e3,g.time=O=O/1e3,a+=P+(P>=r?4:rP),I=1),R||(h=d(T)),I)for(x=0;x<u.length;x++)u[x](O,_,U,E)};戻り値g={time:0,frame:0,tick:function(){M(!0)},deltaRatio:function(E){return _/(1e3/(E||60))},wake:function(){NT&&(!by&&Nx()&&(No=by=window,Ux=No.document||{},ys.gsap=Kr,(No.gsapVersions||(No.gsapVersions=[])).push(Kr.version),UT(T0||No.GreenSockGlobals||!No.gsap&&No||{}),$T.forEach(eA)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&g.sleep(),d=m||function(E){return setTimeout(E,ag.time*1e3+1|0)},Ap=1,M(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(h),Ap=0,d=Ep},lagSmoothing:function(E,S){e=E||1/0,t=Math.min(S||33,e)},fps:function(E){r=1e3/(E||240),a=g.time*1e3+r},add:function(E,S,R){var P=S?function(I,O,U,F){E(I,O,U,F),g.remove(P)}:E;return g.remove(E),u[R?"unshift":"push"](P),wh(),P},remove:function(E,S){~(S=u.indexOf(E))&&u.splice(S,1)&&x>=S&&x--},_listeners:u},g}(),wh=function(){return!Ap&&ps.wake()},un={},ZN=/^[\d.\-M][\d.\-,\s]/,JN=/["']/g,KN=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],r=1,a=n.length,u,h,d;r<a;r++)h=n[r],u=r!==a-1?h.lastIndexOf(","):h.length,d=h.substr(0,u),t[i]=isNaN(d)?d.replace(JN,"").trim():+d,i=h.substr(u+1).trim();return t},QN=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},$N=function(e){var t=(e+"").split("("),n=un[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[KN(t[1])]:QN(e).split(",").map(BT)):un._CE&&ZN.test(e)?un._CE("",e):n},rA=function(e){return function(t){return 1-e(1-t)}},sA=function s(e,t){for(var n=e._first,i;n;)n instanceof Tr?s(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?s(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},dc=function(e,t){return e&&(Kn(e)?e:un[e]||$N(e))||t},Tc=function(e,t,n,i){n===void 0&&(n=function(h){return 1-t(1-h)}),i===void 0&&(i=function(h){return h<.5?t(h*2)/2:1-t((1-h)*2)/2});var r={easeIn:t,easeOut:n,easeInOut:i},a;return jr(e,function(u){un[u]=ys[u]=r,un[a=u.toLowerCase()]=n;for(var h in r)un[a+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=un[u+"."+h]=r[h]}),r},oA=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},iy=function s(e,t,n){var i=t>=1?t:1,r=(n||(e?.3:.45))/(t<1?t:1),a=r/Cy*(Math.asin(1/i)||0),u=function(m){return m===1?1:i*Math.pow(2,-10*m)*CN((ma)*r)+1},h=e==="out"?u:e==="in"?function(d){return 1-u(1-d)}:oA(u);return r=Cy/r,h.config=function(d,m){return s(e,d,m)},h},ry=function s(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1​​:0},i=e==="out"?n:e==="in"?function(r){return 1-n(1-r)}:oA(n);return i.config=function(r){return s(e,r)},i};jr("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var t=e<5?e+1:e;Tc(s+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});un.Linear.easeNone=un.none=un.Linear.easeIn;Tc("Elastic",iy("in"),iy("out"),iy());(function(s,e){var t=1/e,n=2*t,i=2.5*t,r=function(u){return u<t?s*u*u:u<n?s*Math.pow(u-1.5/e,2)+.75:u<i?s*(u-=2.25/e)*u+.9375:s*Math.pow(u-2.625/e,2)+.984375};Tc("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);Tc("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*s*(1-s)});Tc("Circ",function(s){return-(bT(1-s*s)-1)});Tc("Sine",function(s){return s===1?1:-AN(s*EN)+1});Tc("Back",ry("in"),ry("out"),ry());un.SteppedEase=un.steps=ys.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0,a=1-lr;return function(u){return((i*Wp(0,a,u)|0)+r)*n}}};yh.ease=un["quad.out"];jr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return kx+=s+","+s+"Params,"});var aA=function(e,t){this.id=TN++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:kT,this.set=t?t.getSetter:Gx},Cp=function(){function s(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Mh(this,+t.duration,1,1),this.data=t.data,kn&&(this._ctx=kn,kn.data.push(this)),Ap||ps.wake()}var e=s.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Mh(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(wh(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(g_(this,n),!r._dp||r.parent||GT(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<thi s._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Oo(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===lr||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),zT(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+VM(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+VM(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,i):this._repeat?Sh(this._tTime,r)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?R0(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-1e-8?0:this._rts,this.totalTime(Wp(-Math.abs(this._delay),this._tDur,r),i!==!1),m_(this),NN(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(wh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==lr&&(this._tTime-=lr)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Oo(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(qr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?R0(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=PN);var i=ji;return ji=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ji=i,this},e.globalTime=function(n){for(var i=this,r=arguments.length?n:i.rawTime();i;)r=i._start+r/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):r},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,HM(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,HM(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(Us(this,n),qr(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,qr(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=i&&r<this.endTime(!0)-lr)},e.eventCallback=function(n,i,r){var a=this.vars;return arguments.length>1?(i?(a[n]=i,r&&(a[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},e.then=function(n){var i=this;return new Promise(function(r){var a=Kn(n)?n:VT,u=function(){var d=i.then;i.then=null,Kn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=d),r(a),i.then=d};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?u():i._prom=u})},e.kill=function(){Wd(これ)},s}();xs(Cp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Tr=function(s){RT(e,s);function e(n,i){var r;return n===void 0&&(n={}),r=s.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=qr(n.sortChildren),Gn&&Oo(n.parent||Gn,Da(r),i),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&WT(Da(r),n.scrollTrigger),r}var t=e.prototype;return t.to=function(i,r,a){return ip(0,arguments,this),this},t.from=function(i,r,a){return ip(1,arguments,this),this},t.fromTo=function(i,r,a,u){return ip(2,arguments,this),this},t.set=function(i,r,a){return r.duration=0,r.parent=this,np(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new hi(i,r,Us(this,a),1),this},t.call=function(i,r,a){return Oo(this,hi.delayedCall(0,i,r),a)},t.staggerTo=function(i,r,a,u,h,d,m){return a.duration=r,a.stagger=a.stagger||u,a.onComplete=d,a.onCompleteParams=m,a.parent=this,new hi(i,a,Us(this,h)),this},t.staggerFrom=function(i,r,a,u,h,d,m){return a.runBackwards=1,np(a).immediateRender=qr(a.immediateRender),this.staggerTo(i,r,a,u,h,d,m)},t.staggerFromTo=function(i,r,a,u,h,d,m,g){return u.startAt=a,np(u).immediateRender=qr(u.immediateRender),this.staggerTo(i,r,u,h,d,m,g)},t.render=function(i,r,a){var u=this._time、h=this._dirty?this.totalDuration():this._tDur、d=this._dur、m=i<=0?0:di(i),g=this._zTime<0!=i<0&&(this._initted||!d),_,x,M,T,E,S,R,P,I,O,U,F;if(this!==Gn&&m>h&&i>=0&&(m=h),m!==this._tTime||a||g){if( u!==this._time&&d&&(m+=this._time-u,i+=this._time-u),_=m,I=this._start,P=this._ts,S=!P,g&&(d||(u=this._zTime),(i||!r)&&(this._zTime=i)),this._repeat){if(U=this._yoyo,E=d+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(E*100+i,r,a);if(_=di(m%E),m===h?(T=this._repeat,_=d):(O=di(m/E),T=~~O,T&&T===O&&(_=d,T--),_>d&&(_=d)),O=Sh(this._tTime,E),!u&&this._tTime&&O!==T&&this._tTime-O*E-this._dur<=0&&(O=T),U&&T&1&&(_=d-_,F=1),T!==O&&!this._lock){var z=U&&O&1、D=z===(U&&T&1);if(T<O&&(z=!z),u=z?0:m%d?d:m,this._lock=1,this.render(u||(F?0:di(T*E)),r,!d)._lock=0,this._tTime=m,!r&&this.parent&&ms(this,"onRepeat"),this.vars.repeatRefresh&&!F&&(this.invalidate()._lock=1),u&&u!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,h=this._tDur,D&&(this._lock=2,u=z?d:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!F&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;sA(this,F)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(R=kN(this,di(u),di(_)),R&&(m-=_-(_=R._start))),this._tTime=m,this._time=_,this._act=!P,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,u=0),!u&&_&&!r&&!T&&(ms(this,"onStart"),this._tTime!==m))return this;if(_>=u&&i>=0)for(x=this._first;x;){if(M=x._next,(x._act||_>=x._start)&&x._ts&&R!==x){if(x.parent!==this)return this.render(i,r,a);if(x.render(x._ts>0?(_-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(_-x._start)*x._ts,r,a),_!==this._time||!this._ts&&!S){R=0,M&&(m+=this._zTime=-1e-8);break}}x=M}else{x=this._last;for(var N=i<0?i:_;x;){if(M=x._prev,(x._act||N<=x._end)&&x._ts&&R!==x){if(x.parent!==this)return this.render(i,r,a);if(x.render(x._ts>0?(Nx._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(Nx._start)*x._ts,r,a||ji&&(x._initted||x._startAt)),_!==this._time||!this._ts&&!S){R=0,M&&(m+=this._zTime=N?-1e-8:lr);break}}x=M}}if(R&&!r&&(this.pause(),R.render(_>=u?0:-1e-8)._zTime=_>=u?1:-1,this._ts))return this._start=I,m_(this),this.render(i,r,a);this._onUpdate&&!r&&ms(this,"onUpdate",!0),(m===h&&this._tTime>=this.totalDuration()||!m&&u)&&(I===this._start||Math.abs(P)!==Math.abs(this._ts))&&(this._lock||(( i||!d)&&(m===h&&this._ts>0||!m&&this._ts<0)&&Hl(this,1),!r&&!(i<0&&!u)&&(m||u||!h)&&(ms(this,m===h&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<h&&this.timeScale()>0)&&this._prom())))}returnこれ},t.add=function(i,r){var a=this;if(Xa(r)||(r=Us(this,r,i)),!(i instanceof Cp)){if(cr(i))return i.forEach(function(u){return a.add(u,r)}),this;if(Ui(i))return this.addLabel(i,r);if(Kn(i))i=hi.delayedCall(0,i);else return this}return this!==i?Oo(this,i,r):this},t.getChildren=function(i,r,a,u){i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),u===void 0&&(u=-1e8);for(var h=[],d=this._first;d;)d._start>=u&&(d instanceof hi?r&&h.push(d):(a&&h.push(d),i&&h.push.apply(h,d.getChildren(!0,r,a)))),d=d._next;return h},t.getById=function(i){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===i)return r[a]},t.remove=function(i){return Ui(i)?this.removeLabel(i):Kn(i)?this.killTweensOf(i):(i.parent===this&&p_(this,i),i===this._recent&&(this._recent=this._last),hc(this))},t.totalTime=function(i,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=di(ps.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),s.prototype.totalTime.call(this,i,r),this._forcing=0,this):this._tTime},t.addLabel=function(i,r){return this.labels[i]=Us(this,r),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,r,a){var u=hi.delayedCall(0,r||Ep,a);return u.data="isPause",this._hasPause=1,Oo(this,u,Us(this,i))},t.removePause=function(i){var r=this._first;for(i=Us(this,i);r;)r._start===i&&r.data==="isPause"&&Hl(r),r=r._next},t.killTweensOf=function(i,r,a){for(var u=this.getTweensOf(i,a),h=u.length;h--;)Ul!==u[h]&&u[h].kill(i,r);return this},t.getTweensOf=function(i,r){for(var a=[],u=Fs(i),h=this._first,d=Xa(r),m;h;)h instanceof hi?IN(h._targets,u)&&(d?(!Ul||h._initted&&h._ts)&&h.globalTime(0)<=r&&h.globalTime(h.totalDuration())>r:!r||h.isActive())&&a.push(h):(m=h.getTweensOf(u,r)).length&&a.push.apply(a,m),h=h._next;return a},t.tweenTo=function(i,r){r=r||{};var a=this,u=Us(a,i),h=r,d=h.startAt,m=h.onStart,g=h.onStartParams,_=h.immediateRender,x,M=hi.to(a,xs({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:r.duration||Math.abs((u-(d&&"time"in d?d.time:a._time))/a.timeScale())||lr,onStart:function(){if(a.pause(),!x){var E=r.duration||Math.abs((u-(d&&"time"in d?d.time:a._time))/a.timeScale());M._dur!==E&&Mh(M,E,0,1).render(M._time,!0,!0),x=1}m&&m.apply(M,g||[])}},r));return _?M.render(0):M},t.tweenFromTo=function(i,r,a){return this.tweenTo(r,xs({startAt:{time:Us(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),GM(this,Us(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),GM(this,Us(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+lr)},t.shiftChildren=function(i,r,a){a===void 0&&(a=0);for(var u=this._first,h=this.labels,d;u;)u._start>=a&&(u._start+=i,u._end+=i),u=u._next;if(r)for(d in h)h[d]>=a&&(h[d]+=i);return hc(this)},t.invalidate=function(i){var r=this._first;for(this._lock=0;r;)r.invalidate(i),r=r._next;return s.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),hc(this)},t.totalDuration=function(i){var r=0,a=this,u=a._last,h=Ho,d,m,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(g=a.parent;u;)d=u._prev,u._dirty&&u.totalDuration(),m=u._start,m>h&&a._sort&&u._ts&&!a._lock?(a._lock=1,Oo(a,u,mu._delay,1)._lock= 0):h=m,m<0&&u._ts&&(r-=m,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=m/a._ts,a._time-=m,a._tTime-=m),a.shiftChildren(-m,!1,-1/0),h=0),u._end>r&&u._ts&&(r=u._end),u=d;Mh(a,a===Gn&&a._time>r?a._time:r,1,1),a._dirty=0}戻るa._tDur},e.updateRoot=function(i){if(Gn._ts&&(zT(Gn,R0(i,Gn)),FT=ps.frame),ps.frame>=zM){zM+=_s.autoSleep||120;var r=Gn._first;if((!r||!r._ts)&&_s.autoSleep&&ps._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||ps.sleep()}}},e}(Cp);xs(Tr.prototype,{_lock:0,_hasPause:0,_forcing:0});var eU=function(e,t,n,i,r,a,u){var h=new Zr(this._pt,e,t,0,1,dA,null,r),d=0,m=0,g,_,x,M,T,E,S,R;for(hb=n,he=i,n+="",i+="",(S=~i.indexOf("random("))&&(i=Tp(i)),a&&(R=[n,i],a(R,e,t),n=R[0],i=R[1]),_=n.match(ey)||[];g=ey.exec(i);)M=g[0],T=i.substring(d,g.ind例)、x?x=(x+1)%5:T.substr(-5)==="rgba("&&(x=1),M!==_[m++]&&(E=parseFloat(_[m-1])||0,h._pt={_next:h._pt,p:T||m===1?T:",",s:E,c:M.charAt(1)==="="?fh(E,M)-E:parseFloat(M)-E,m:x&&x<4?Math.round:0},d=ey.lastIndex);return hc=d<i.length?i.substring(d,i.length):"",h.fp=u,(LT.test(i)||S)&&(he=0),this._pt=h,h},Bx=function(e,t,n,i,r,a,u,h,d,m){Kn(i)&&(i=i(r||0,e,a));var g=e[t],_=n!=="get"?n:Kn(g)?d?e[t.indexOf("set")||!Kn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](d):e[t]():g,x=Kn(g)?d?sU:fA:Hx,M;if(Ui(i)&&(~i.indexOf("random(")&&(i=Tp(i)),i.charAt(1)==="="&&(M=fh(_,i)+(or(_)||0),(M||M===0)&&(i=M))),!m||_!==i||Oy)return!isNaN(_*i)&&i!==""?(M=new Zr(this._pt,e,t,+_||0,i-(_||0),typeof g=="boolean"?aU:hA,0,x),d&&(M.fp=d),u&&M.modifier(u,this,e),this._pt=M):(!g&&!(t in e)&&Ox(t,i),eU.call(this,e,t,_,i,x,h||_s.stringFilter,d))},tU=function(e,t,n,i,r){if(Kn(e)&&(e=rp(e,r,t,n,i)),!Xo(e)||e.style&&e.nodeType||cr(e)||PT(e))return Ui(e)?rp(e,r,t,n,i):e;var a={},u;for(u in e)a[u]=rp(e[u],r,t,n,i);return a},lA=function(e,t,n,i,r,a){var u,h,d,m;if(ds[e]&&(u=new ds[e]).init(r,u.rawVars?t[e]:tU(t[e],i,r,a,n),n,i,a)!==!1&&(n._pt=h=n​​ew Zr(n._pt,r,e,0,1,u.render,u,0,u.priority),n!==uh))for(d=n._ptLookup[n._targets.indexOf(r)],m=u._props.length;m--;)d[u._props[m]]=h;return u},Ul,Oy,Vx=function s(e,t,n){var i=e.vars,r=i.ease,a=i.startAt,u=i.immediateRender,h=i.​​lazy,d=i.onUpdate,m=i.runBackwards,g=i.yoyoEase,_=i.keyframes,x=i.autoRevert,M=e._dur,T=e._startAt,E=e._targets,S=e.parent,R=S&&S.data==="ネスト"?S.vars.targets:E,P=e._overwrite==="auto"&&!Lx,I=e.timeline,O,U,F,z,D,N,G,$,Q,ce,me,ue,de;if(I&&(!_||!r)&&(r="none"),e._ease=dc(r,yh.ease),e._yEase=g?rA(dc(g===!0?r:g,yh.ease)):0,g&&e._yoyo&&!e._re peat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!I&&!!i.runBackwards,!I||_&&!i.stagger){if($=E[0]?fc(E[0]).harness:0,ue=$&&i[$.prop],O=C0(i,Fx),T&&(T._zTime<0&&T.progress(1),t<0&&m&&u&!x?T.re nder(-1,!0):T.revert(m&&M?Og:bN),T._lazy=0),a){if(Hl(e._startAt=hi.set(E,xs({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!T&&qr(h),startAt:null,delay:0,onUpdate:d&&function(){return ms(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ji||!u&&!x)&&e._startAt.revert(Og),u&&M&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(m&&M&&!T){if(t&&(u=!1),F=xs({overwrite:!1,data:"isFromStart",lazy:u&&!T&&qr(h),immediateRender:u,stagger:0,parent:S},O),ue&&(F[$.prop]=ue),Hl(e._s TartAt=hi.set(E,F)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ji?e._startAt.revert(Og):e._startAt.render(-1,!0)),e._zTime=t,!u)s(e._startAt,lr,lr);else if(!t)return}for(e._pt=e._ptCache=0,h=M&&qr(h)||h&&!M,U=0;U<E.length;U++){if(D=E[U],G=D._gsap|| zx(E)[U]._gsap,e._ptLookup[U]=ce={},Py[G.id]&&kl.length&&A0(),me=R===E?U:R.indexOf(D),$&&(Q=new $).init(D,ue||O,e,me,R)!==!1&&(e._pt=z=new Zr(e._pt,D,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(B){ce[B]=z}),Q.priority&&(N=1)),!$||ue)for(F in O)ds[F]&&(Q=lA(F,O,e,me,D,R))?Q.priority&&(N=1):ce[F]=z=Bx.call(e,D,F,"get",O[F],me,R,0,i.stringFilter);e._op&&e._op[U]&&e.kill(D,e._op[U]),P&&e._pt&&(Ul=e,Gn.killTweensOf(D,ce,e.globalTim e(t)),de=!e.parent,Ul=0),e._pt&&h&&(Py[G.id]=1)}N&&pA(e),e._onInit&&e._onInit(e)}e._onUpdate=d ,e._initted=(!e._op||e._pt)&&!de,_&&t<=0&&I.render(Ho,!0,!0)},nU=function(e,t,n,i,r,a,u,h){var d=(e._pt&&e._ptCache||(e._ptCache={}))[t],m,g,_,x;if(!d)for(d=e._ptCache[t]=[],_=e._ptLookup,x=e._targets.length;x--;){if(m=_[x][t],m&&m.d&&m.d._pt)for(m=md_pt;m&&m.p!==t&&m.fp!==t;)m=m._next;if(!m)return Oy=1,e.vars[t]="+=0",Vx(e,u),Oy=0,h?wp(t+" は対象外リセット":1;d.push(m)}for(x=d.length;x--;)g=d[x],m=g._pt||g,ms=(i||i===0)&&!r?i:m.s+(i||0)+a*mc,mc=nm.s,g.e&&(ge=ni(n)+or(ge)),gb&&(gb=m.s+or(gb))},iU=function(e,t){var n=e[0]?fc(e[0]).harness:0,i=n&&n.aliases,r,a,u,h;if(!i)return t;r=xh({},t);for(a in i)if(a in r)for(h=i[a].split(","),u=h.length;u--;)r[h[u]]=r[a];return r},rU=function(e,t,n,i){var r=t.ease||i||"power1.inOut",a,u;if(cr(t))u=n[e]||(n[e]=[]),t.forEach(function(h,d){return u.push({t:d/(t.length-1)*100,v:h,e:r})});else for(a in t)u=n[a]||(n[a]=[]),a==="ease"||u.push({t:parseFloat(e),v:t[a],e:r})},rp=function(e,t,n,i,r){return Kn(e)?e.call(t,n,i,r):Ui(e)&&~e.indexOf("random(")?Tp(e):e},uA=kx+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cA={};jr(uA+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return cA[s]=1});var hi=function(s){RT(e,s);function e(n,i,r,a){var u;typeof i=="number"&&(r.duration=i,i=r,r=null),u=s.call(this,a?i:np(i))||this;var h=u.vars,d=h.duration,m=h.delay,g=h.immediateRender,_=h.stagger,x=h.overwrite,M=h.keyframes,T=h.defaults,E=h.scrollTrigger,S=h.yoyoEase,R=i.parent||Gn,P=(cr(n)||PT(n)?Xa(n[0]):"length"in i)?[n]:Fs(n),I,O,U,F,z,D,N,G;if(u._targets=P.length?zx(P):wp("GSAPターゲット"+n+"が見つかりません。https://gsap.com",!_s.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=x,M||_||Ig(d)||Ig(m)){if(i=u.vars,I=u.timeline=new Tr({data:"nested",defaults:T||{},targets:R&&R.data==="nested"?R.vars.targets:P}),I.kill(),I.parent=I._dp=Da(u),I._start=0,_||Ig(d)||Ig(m)){if(F=P.length,N=_&&jT(_),Xo(_))for(z in _)~uA.indexOf(z)&&(G||(G={}),G[z]=_[z]);for(O=0;O<F;O++)U=C0(i,cA),U.stagger=0,S&&(U.yoyoEase=S),G&&xh(U,G),D=P[O],U.duration=+rp(d,Da(u),O,D,P),U.delay=(+rp(m,Da(u),O,D,P)||0)-u._delay,!_&&F===1&&U.delay&&(u._delay=m=U.delay,u._start+=m,U.delay=0),I.to(D,U,N?N(O,D,P):0),I._ease=un.none;I.duration()?d=m=0:u.timeline=0}else if(M){np(xs(I.vars.defaults,{ease:"none"})),I._ease=dc(M.ease||i.ease||"none");var $=0,Q,ce,me;if(cr(M))M.forEach(function(ue){return I.to(P,ue,">")}),I.duration();else{U={};for(z in M)z==="ease"||z==="easeEach"||rU(z,M[z],U,M.easeEach);for(z in U)for(Q=U[z].sort(function(ue,de){return ue.t-de.t}),$=0,O=0;O<Q.length;O++)ce=Q[O],me={ease:ce.e,duration:(ce.t-(O?Q[O-1].t:0))/100*d},me[z]=ce.v,I.to(P,me,$),$+=me.duration;I.duration()<d&&I.to({},{duration:dI.duration()})}}d||u.duration(d=I.duration())}else u.timeline=0;return x===!0&&!Lx&&(Ul=Da(u),Gn.killTweensOf(P),Ul=0),Oo(R,Da(u),r),i.reversed&&u.reverse(),i.paused&&u.paused(!0),(g||!d&&!M&&u._start===di(R._time)&&qr(g)&&UN(Da(u))&&R.data!=="nested")&&(u._tTime=-1e-8,u.render(Math.max(0,-m)||0)),E&&WT(Da(u),E),u}var t=e.prototype;return t.render=function(i,r,a){var u=this._time,h=this._tDur,d=this._dur、m=i<0、g=i>h-lr&&!m?h:i<lr?0:i,_,x,M,T,E,S,R,P,I;if(!d)FN(this,i,r,a);else if(g!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(_=g、P=this.timeline、this._repeat){if(T=d+this._rDelay、this._repeat<-1&&m)return this.totalTime(T*100+i,r,a);if(_=di(g%T),g===h?(M=this._repeat,_=d):(E=di(g/T),M=~~E,M&&M===E?(_=d,M--):_>d&&(_=d)),S=this._yoyo&&M&1,S&&(I=this._yEase,_=d-_),E=Sh(this._tTime,T),_===u&&!a&&this._initted&&M===E)return this._tTime=g、this;M!==E&&(P&&this._yEase&&sA(P,S)、this.vars.repeatRefresh&&!S&&!this._lock&&_!==T&&this._initted&&(this._lock=a=1、this.render(di(T*M)、!0).invalidate()._lock=0))}if(!this._initted){if(XT(this,m?i:_、a、r、g))return this._tTime=0、this;if(u!==this._time&&!(a&&this.vars.repeatRefresh&&M!==E))return this;if(d!==this._dur)return this.render(i,r,a)}if(this._tTime=g,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=R=(I||this._ease)(_/d),this._from&&(this.ratio=R=1-R),_&&!u&&!r&&!M&&(ms(this,"onStart"),this._tTime!==g))return this;for(x=this._pt;x;)xr(R,xd),x=x._next;P&&P.render(i<0?i:P._dur*P._ease(_/this._dur),r,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!r&&(m&&Iy(this,i,r,a),ms(this,"onUpdate")),this._repeat&&M!==E&&this.vars.onRepeat&&!r&&this.parent&&ms(this,"onRepeat"),(g===this ._tDur||!g)&&this._tTime===g&&(m&&!this._onUpdate&&Iy(this,i,!0,!0),(i||!d)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Hl(this,1),!r&&!(m&&!u)&&(g||u||S)&&(ms(this,g===h?"onComplete":"onReverseComplete",!0),this._prom&&!(g<h&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),s.prototype.invalidate.call(this,i)},t.resetTo=function(i,r,a,u,h){Ap||ps.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||Vx(this,d),m=this._ease(d/this._dur),nU(this,i,r,a,u,m,d,h)?this.resetTo(i,r,a,u,1):(g_(this,0),this.parent||HT(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,r){if(r===void 0&&(r="all"),!i&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Wd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ji),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,r,Ul&&Ul.vars.overwrite!==!0)._first||Wd(this),this.parent&&a!==this.timeline.totalDuration()&&Mh(this,this._dur*this.timeline._tDur/a,0,1),this}var u=this._targets,h=i?Fs(i):u,d=this._ptLookup,m=this._pt,g,_,x,M,T,E,S;if((!r||r==="all")&&DN(u,h))return r==="すべて"&&(this._pt=0),Wd(this);for(g=this._op=this._op||[],r!=="すべて"&&(Ui(r)&&(T={},jr(r,function(R){return T[R]=1}),r=T),r=iU(u,r)),S=u.length;S--;)if(~h.indexOf(u[S])){_=d[S],r==="すべて"?(g[S]=r,M=_,x={}):(x=g[S]=g[S]||{},M=r);for(T in M)E=_&&_[T],E&&((!("kill" in Ed)||Edkill(T)===!0)&&p_(this,E,"_pt"),削除_[T]),x!=="all"&&(x[T]=1)}return this._initted&&!this._pt&&m&&Wd(this),this},e.to=function(i,r){return new e(i,r,arguments[2])},e.from=function(i,r){return ip(1,arguments)},e.delayedCall=function(i,r,a,u){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:u})},e.fromTo=function(i,r,a){return ip(2,arguments)},e.set=function(i,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(i,r)},e.killTweensOf=function(i,r,a){return Gn.killTweensOf(i,r,a)},e}(Cp);xs(hi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});jr("staggerTo,staggerFrom,staggerFromTo",function(s){hi[s]=function(){var e=new Tr,t=Dy.call(arguments,0);return t.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,t)}});var Hx=function(e,t,n){return e[t]=n},fA=function(e,t,n){return e[t](n)},sU=function(e,t,n,i){return e[t](i.fp,n)},oU=function(e,t,n){return e.setAttribute(t,n)},Gx=function(e,t){return Kn(e[t])?fA:Dx(e[t])&&e.setAttribute?oU:Hx},hA=function(e,t){return t.set(tt,tp,Math.round((t.s+tc*e)*1e6)/1e6,t)},aU=function(e,t){return t.set(tt,tp,!!(t.s+tc*e),t)},dA=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=tb;else if(e===1&&t.e)i=te;else{for(;n;)i=n.p+(nm?nm(n.s+nc*e):Math.round((n.s+nc*e)*1e4)/1e4)+i,n=n._next;i+=tc}t.set(tt,tp,i,t)},Wx=function(e,t){for(var n=t._pt;n;)nr(e,nd),n=n._next},lU=function(e,t,n,i){for(var r=this._pt,a;r;)a=r._next,rp===i&&r.modifier(e,t,n),r=a},uU=function(e){for(var t=this._pt,n,i;t;)i=t._next,tp===e&&!t.op||t.op===e?p_(this,t,"_pt"):t.dep||(n=1),t=i;return!n},cU=function(e,t,n,i){i.mSet(e,t,imcall(i.tween,n,i.mt),i)},pA=function(e){for(var t=e._pt,n,i,r,a;t;){for(n=t._next,i=r;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:r=t,(t._next=i)?i._prev=t:a=t,t=n}e._pt=r},Zr=function(){function s(t,n,i,r,a,u,h,d,m){this.t=n,this.s=r,this.c=a,this.p=i,this.r=u||hA,this.d=h||this,this.set=d||Hx,this.pr=m||0,this._next=t,t&&(t._prev=this)}var e=s.prototype;return e.modifier=function(n,i,r){this.mSet=this.mSet||this.set,this.set=cU,this.m=n,this.mt=r,this.tween=i},s}();jr(kx+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return Fx[s]=1});ys.TweenMax=ys.TweenLite=hi;ys.TimelineLite=ys.TimelineMax=Tr;Gn=new Tr({sortChildren:!1,defaults:yh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_s.stringFilter=iA;var pc=[],kg={},fU=[],XM=0,hU=0,sy=function(e){return(kg[e]||fU).map(function(t){return t()})},Fy=function(){var e=Date.now(),t=[];e-XM>2&&(sy("matchMediaInit"),pc.forEach(function(n){var i=n.queries,r=n.conditions,a,u,h,d;for(u in i)a=No.matchMedia(i[u]).matches,a&&(h=1),a!==r[u]&&(r[u]=a,d=1);d&&(n.revert(),h&&t.push(n))}),sy("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),XM=e,sy("matchMedia"))},mA=function(){function s(t,n){this.selector=n&&Ny(n),this.data=[],this._r=[],this.isReverted=!1,this.id=hU++,t&&this.add(t)}var e=s.prototype;return e.add=function(n,i,r){Kn(n)&&(r=i,i=n,n=Kn);var a=this,u=function(){var d=kn,m=a.selector,g;return d&&d!==a&&d.data.push(a),r&&(a.selector=Ny(r)),kn=a,g=i.apply(a,arguments),Kn(g)&&a._r.push(g),kn=d,a.selector=m,a.isReverted=!1,g};return a.last=u,n===Kn?u(a,function(h){return a.add(null,h)}):n?a[n]=u:u},e.ignore=function(n){var i=kn;kn=null,n(this),kn=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof s?n.push.apply(n,i.getTweens()):i instanceof hi&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var r=this;if(n?function(){for(var u=r.getTweens(),h=r.data.length,d;h--;)d=r.data[h],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(m){return u.splice(u.indexOf(m),1)}));for(u.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,g){return gg-mg||-1/0}).forEach(function(m){return mtrevert(n)}),h=r.data.length;h--;)d=r.data[h],d instanceof Tr?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof hi)&&d.revert&&d.revert(n);r._r.forEach(function(m){return m(n,r)}),r.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),i)for(var a=pc.length;a--;)pc[a].id===this.id&&pc.splice(a,1)},e.revert=function(n){this.kill(n||{})},s}(),dU=function(){function s(t){this.contexts=[],this.scope=t,kn&&kn.data.push(this)}var e=s.prototype;return e.add=function(n,i,r){Xo(n)||(n={matches:n});var a=new mA(0,r||this.scope),u=a.conditions={},h,d,m;kn&&!a.selector&&(a.selector=kn.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(d in n)d==="all"?m=1:(h=No.matchMedia(n[d]),h&&(pc.indexOf(a)<0&&pc.push(a),(u[d]=h.matches)&&(m=1),h.addListener?h.addListener(Fy):h.addEventListener("change",Fy)));return m&&i(a,function(g){return a.add(null,g)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},s}(),b0={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return eA(i)})},timeline:function(e){return new Tr(e)},getTweensOf:function(e,t){return Gn.getTweensOf(e,t)},getProperty:function(e,t,n,i){Ui(e)&&(e=Fs(e)[0]);var r=fc(e||{}).get,a=n?VT:BT;return n==="native"&&(n=""),e&&(t?a((ds[t]&&ds[t].get||r)(e,t,n,i)):function(u,h,d){return a((ds[u]&&ds[u].get||r)(e,u,h,d))})},quickSetter:function(e,t,n){if(e=Fs(e),e.length>1){var i=e.map(function(m){return Kr.quickSetter(m,t,n)}),r=i.length;return function(m){for(var g=r;g--;)i[g](m)}}e=e[0]||{};var a=ds[t],u=fc(e),h=u.harness&&(u.harness.aliases||{})[t]||t,d=a?function(m){var g=new a;uh._pt=0,g.init(e,n?m+n:m,uh,0,[e]),g.render(1,g),uh._pt&&Wx(1,uh)}:u.set(e,h);return a?d:function(m){return d(e,h,n?m+n:m,u,1)}},quickTo:function(e,t,n){var i,r=Kr.to(e,xs((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),a=function(h,d,m){return r.resetTo(t,h,d,m)};return a.tween=r,a},isTweening:function(e){return Gn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=dc(e.ease,yh.ease)),BM(yh,e||{})},config:function(e){return BM(_s,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(u){return u&&!ds[u]&&!ys[u]&&wp(t+" effect には "+u+" が必要ですプラグイン。")}),ty[t]=function(u,h,d){return n(Fs(u),xs(h||{},r),d)},a&&(Tr.prototype[t]=function(u,h,d){return this.add(ty[t](u,Xo(h)?h:(d=h)&&{},this),d)})},registerEase:function(e,t){un[e]=dc(t)},parseEase:function(e,t){return arguments.length?dc(e,t):un},getById:function(e){return Gn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Tr(e),i,r;for(n.smoothChildTiming=qr(e.smoothChildTiming),Gn.remove(n),n._dp=0,n._time=n._tTime=Gn._time,i=Gn._first;i;)r=i._next,(t||!(!i._dur&&i instanceof hi&&i.vars.onComplete===i._targets[0]))&&Oo(n,i,i._start-i._delay),i=r;return Oo(Gn,n,0),n},context:function(e,t){return e?new mA(e,t):kn},matchMedia:function(e){return new dU(e)},matchMediaRefresh:function(){return pc.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||Fy()},addEventListener:function(e,t){var n=kg[e]||(kg[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=kg[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:XN,wrapYoyo:YN,distribute:jT,random:JT,snap:ZT,normalize:WN,getUnit:or,clamp:BN,splitColor:tA,toArray:Fs,selector:Ny,mapRange:QT,pipe:HN,unitize:GN,interpolate:qN,shuffle:qT},install:UT,effects:ty,ticker:ps,updateRoot:Tr.updateRoot,plugins:ds,globalTimeline:Gn,core:{PropTween:Zr,globals:OT,Tween:hi,Timeline:Tr,Animation:Cp,getCache:fc,_removeLinkedListItem:p_,reverting:function(){return ji},context:function(e){return e&&kn&&(kn.data.push(e),e._ctx=kn),kn},suppressOverwrites:function(e){return Lx=e}}};jr("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return b0[s]=hi[s]});ps.add(Tr.updateRoot);uh=b0.to({},{duration:0});var pU=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},mU=function(e,t){var n=e._targets,i,r,a;for(i in t)for(r=n.length;r--;)a=e._ptLookup[r][i],a&&(a=ad)&&(a._pt&&(a=pU(a,i)),a&&a.modifier&&a.modifier(t[i],e,n[r],i))},oy=function(e,t){return{name:e,rawVars:1,init:function(i,r,a){a._onInit=function(u){var h,d;if(Ui(r)&&(h={},jr(r,function(m){return h[m]=1}),r=h),t){h={};for(d in r)h[d]=t(r[d]);r=h}mU(u,r)}}}},Kr=b0.registerPlugin({name:"attr",init:function(e,t,n,i,r){var a,u,h;this.tween=n;for(a in t)h=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(h||0)+"",t[a],i,r,0,0,a),u.op=a,ub=h,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)ji?n.set(nt,np,nb,n):nr(e,nd),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},oy("roundProps",Uy),oy("modif iers"),oy("スナップ",ZT))||b0;hi.version=Tr.version=Kr.version="3.12.7";NT=1;Nx()&&wh();un。 Power0;un.Power1;un.Power2;un.Power3;un.Power4;un.Linear;un.Quad;un.Cubic;un.Quart;un.Quint;un.Strong;un.Elastic;un.Back;un.SteppedEase;un.Bounce;un.Sine;un.Expo;un.Circ;/*!t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},mU=function(e,t){var n=e._targets,i,r,a;for(i in t)for(r=n.length;r--;)a=e._ptLookup[r][i],a&&(a=ad)&&(a._pt&&(a=pU(a,i)),a&&a.modifier&&a.modifier(t[i],e,n[r],i))},oy=function(e,t){return{name:e,rawVars:1,init:function(i,r,a){a._onInit=function(u){var h,d;if(Ui(r)&&(h={},jr(r,function(m){return h[m]=1}),r=h),t){h={};for(d in r)h[d]=t(r[d]);r=h}mU(u,r)}}}},Kr=b0.registerPlugin({name:"attr",init:function(e,t,n,i,r){var a,u,h;this.tween=n;for(a in t)h=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(h||0)+"",t[a],i,r,0,0,a),u.op=a,ub=h,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)ji?n.set(nt,np,nb,n):nr(e,nd),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},oy("roundProps",Uy),oy("modif iers"),oy("スナップ",ZT))||b0;hi.version=Tr.version=Kr.version="3.12.7";NT=1;Nx()&&wh();un。 Power0;un.Power1;un.Power2;un.Power3;un.Power4;un.Linear;un.Quad;un.Cubic;un.Quart;un.Quint;un.Strong;un.Elastic;un.Back;un.SteppedEase;un.Bounce;un.Sine;un.Expo;un.Circ;/*!t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},mU=function(e,t){var n=e._targets,i,r,a;for(i in t)for(r=n.length;r--;)a=e._ptLookup[r][i],a&&(a=ad)&&(a._pt&&(a=pU(a,i)),a&&a.modifier&&a.modifier(t[i],e,n[r],i))},oy=function(e,t){return{name:e,rawVars:1,init:function(i,r,a){a._onInit=function(u){var h,d;if(Ui(r)&&(h={},jr(r,function(m){return h[m]=1}),r=h),t){h={};for(d in r)h[d]=t(r[d]);r=h}mU(u,r)}}}},Kr=b0.registerPlugin({name:"attr",init:function(e,t,n,i,r){var a,u,h;this.tween=n;for(a in t)h=e.getAttribute(a)||"",u=this.add(e,"setAttribute",(h||0)+"",t[a],i,r,0,0,a),u.op=a,ub=h,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)ji?n.set(nt,np,nb,n):nr(e,nd),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},oy("roundProps",Uy),oy("modif iers"),oy("スナップ",ZT))||b0;hi.version=Tr.version=Kr.version="3.12.7";NT=1;Nx()&&wh();un。 Power0;un.Power1;un.Power2;un.Power3;un.Power4;un.Linear;un.Quad;un.Cubic;un.Quart;un.Quint;un.Strong;un.Elastic;un.Back;un.SteppedEase;un.Bounce;un.Sine;un.Expo;un.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * 著作権 2008-2025, GreenSock. All rights reserved.
 * https://gsap.com/standard-license の規約に従うか、
 * Club GSAP 会員の場合、その会員資格とともに発行される契約。
 * @著者: ジャック・ドイル、jack@greensock.com
*/var YM,Ol,hh,Xx,sc,qM,Yx,gU=function(){return typeof window<"u"},Ya={},Qu=180/Math.PI,dh=Math.PI/180,Qf=Math.atan2,jM=1e8,qx=/([AZ])/g,_U=/(left|right|width|margin|padding|x)/i,vU=/[\s,\(]\S/,ko={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ky=function(e,t){return t.set(tt,tp,Math.round((t.s+tc*e)*1e4)/1e4+tu,t)},yU=function(e,t){return t.set(tt,tp,e===1?te:Math.round((t.s+tc*e)*1e4)/1e4+tu,t)},xU=function(e,t){return t.set(tt,tp,e?Math.round((t.s+tc*e)*1e4)/1e4+tu:tb,t)},SU=function(e,t){var n=t.s+tc*e;t.set(tt,tp,~~(n+(n<0?-.5:.5))+tu,t)},gA=function(e,t){return t.set(tt,tp,e?te:tb,t)},_A=function(e,t){return t.set(tt,tp,e!==1?tb:te,t)},MU=function(e,t,n){return e.style[t]=n},wU=function(e,t,n){return e.style.setProperty(t,n)},EU=function(e,t,n){return e._gsap[t]=n},TU=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},AU=function(e,t,n,i,r){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},CU=function(e,t,n,i,r){var a=e._gsap;a[t]=n,a.renderTransform(r,a)},Xn="transform",Jr=Xn+"Origin",RU=function s(e,t){var n=this,i=this.target,r=i.style,a=i._gsap;if(e in Ya&&r){if(this.tfm=this.tfm||{},e!=="transform")e=ko[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return n.tfm[u]=Na(i,u)}):this.tfm[e]=ax?a[e]:Na(i,e),e===Jr&&(this.tfm.zOrigin=a.zOrigin);else return ko.transform.split(",").forEach(function(u){return s.call(n,u,t)});if(this.props.indexOf(Xn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Jr,t,"")),e=Xn}(r||t)&&this.props.push(e,t,r[e])},vA=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},bU=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,r,a;for(r=0;r<e.length;r+=3)e[r+1]?e[r+1]===2?t[e[r]](e[r+2]):t[e[r]]=e[r+2]:e[r+2]?n[e[r]]=e[r+2]:n.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(qx,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=Yx(),(!r||!r.isStart)&&!n[Xn]&&(vA(n),i.zOrigin&&n[Jr]&&(n[Jr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},yA=function(e,t){var n={target:e,props:[],revert:bU,save:RU};return e._gsap||Kr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},xA,zy=function(e,t){var n=Ol.createElementNS?Ol.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ol.createElement(e);return n&&n.style?n:Ol.createElement(e)},Go=function s(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(qx,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&s(e,Eh(t)||t,1)||""},ZM="O,Moz,ms,Ms,Webkit".split(","),Eh=function(e,t,n){var i=t||sc,r=i.style,a=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(ZM[a]+e in r););return a<0?null:(a===3?"ms":a>=0?ZM[a]:"")+e},By=function(){gU()&&window.document&&(YM=window,Ol=YM.document,hh=Ol.documentElement,sc=zy("div")||{style:{}},zy("div"),Xn=Eh(Xn),Jr=Xn+"Origin",sc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",xA=!!Eh("perspective"),Yx=Kr.core.reverting,Xx=1)},JM=function(e){var t=e.ownerSVGElement,n=zy("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),r;i.style.display="block",n.appendChild(i),hh.appendChild(n);try{r=i.getBBox()}catch{}return n.removeChild(i),hh.removeChild(n),r},KM=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},SA=function(e){var t,n;try{t=e.getBBox()}catch{t=JM(e),n=1}return t&&(t.width||t.height)||n||(t=JM(e)),t&&!t.width&&!tx&&!ty?{x:+KM(e,["x","cx","x1"])||0,y:+KM(e,["y","cy","y1"])||0,width:0,height:0}:t},MA=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&SA(e))},Sc=function(e,t){if(t){var n=e.style,i;t inやあ&&t!==Jr&&(t=Xn),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(qx,"-$1").toLowerCase())):n.removeAttribute(t)}},Fl=function(e,t,n,i,r,a){var u=new Zr(e._pt,t,n,0,1,a?_A:gA);return e._pt=u,ub=i,ue=r,e._props.push(n),u},QM={deg:1,rad:1,turn:1},PU={grid:1,flex:1},Gl=function s(e,t,n,i){var r=parseFloat(n)||0,a=(n+"").trim().substr((r+"").length)||"px",u=sc.style,h=_U.test(t),d=e.tagName.toLowerCase()==="svg",m=(d?"client":"offset")+(h?"Width":"Height"),g=100,_=i==="px",x=i==="%",M,T,E,S;if(i===a||!r||QM[i]||QM[a])return r;if(a!=="px"&&!_&&(r=s(e,t,n,"px")),S=e.getCTM&&MA(e),(x||a==="%")&&(Ya[t]||~t.indexOf("adius")))return M=S?e.getBBox()[h?"width":"height"]:e[m],ni(x?r/M*g:r/100*M);if(u[h?"width":"height"]=g+(_?a:i),T=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!d?e:e.parentNode,S&&(T=(e.ownerSVGElement||{}).parentNode),(!T||T===Ol||!T.appendChild)&&(T=Ol.body),E=T._gsap,E&&x&&E.width&&h&&E.time===ps.time&&!E.キャッシュを解除)return ni(r/E.width*g);if(x&&(t==="height"||t==="width")){var R=e.style[t];e.style[t]=g+i,M=e[m],R?e.style[t]=R:Sc(e,t)}else(x||a==="%")&&!PU[Go(T,"display")]&&(u.position=Go(e,"position")),T===e&&(u.position="static"),T.appendChild(sc),M=sc[m],T.removeChild(sc),u.position="absolute";return h&&x&&(E=fc(T),E.time=ps.time,E.width=T[m]),ni(_?M*r/g:M&&r?g/M*r:0)},Na=function(e,t,n,i){var r;return Xx||By(),t in ko&&t!=="transform"&&(t=ko[t],~t.indexOf(",")&&(t=t.split(",")[0])),Ya[t]&&t!=="transform"?(r=bp(e,i),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:I0(Go(e,Jr))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||i||~(r+"").indexOf("calc("))&&(r=P0[t]&&P0[t](e,t,n)||Go(e,t)||kT(e,t)||(t==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?Gl(e,t,r,n)+n:r},IU=function(e,t,n,i){if(!n||n==="none"){var r=Eh(t,e,1),a=r&&Go(e,r,1);a&&a!==n?(t=r,n=a):t==="borderColor"&&(n=Go(e,"borderTopColor"))}var u=new Zr(this._pt,e.style,t,0,1,dA),h=0,d=0,m,g,_,x,M,T,E,S,R,P,I,O;if(ub=n,ue=i,n+="",i+="",i==="auto"&&(T=e.style[t],e.style[t]=i,i=Go(e,t)||i,T?e.style[t]=T:Sc(e,t)),m=[n,i],iA(m),n=m[0 ],i=m[1],_=n.match(lh)||[],O=i.match(lh)||[],O.length){for(;g=lh.exec(i);)E=g[0],R=i.substring(h,g.index),M?M=(M+1)%5:(R.substr(-5)==="rgba("||R.substr(-5)==="hsla(")&&(M=1),E!==(T=_ [d++]||"")&&(x=parseFloat(T)||0,I=T.substr((x+"").length),E.charAt(1)==="="="&&(E=fh(x,E)+I),S=parseFloat(E),P=E.substr((S+"").length),h=lh.lastIndex-P.length,P||(P=P||_s.units[t]||I,h ===i.length&&(i+=P,u.e+=P)),I!==P&&(x=Gl(e,t,T,P)||0),u._pt={_next:u._pt,p:R||d===1?R:",",s:x,c:Sx,m:M&&M<4||t==="zIndex"?Math.round:0});uc=h<i.length?i.substring(h,i.length):""}else ur=t==="display"&&i==="none"?_A:gA;return LT.test(i)&&(ue=0),this._pt=u,u},$M={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},LU=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=$M[n]||n,t[1]=$M[i]||i,t.join(" ")},DU=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=tt,i=n.style,r=tu,a=n._gsap,u,h,d;if(r==="all"||r===!0)i.cssText="",h=1;else for(r=r.split(","),d=r.length;--d>-1;)u=r[d],Ya[u]&&(h=1,u=u==="transformOrigin"?Jr:Xn),Sc(n,u);h&&(Sc(n,Xn),a&&(a.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",bp(n,1),a.uncache=1,vA(i)))}},P0={clearProps:function(e,t,n,i,r){if(r.data!=="isFromStart"){var a=e._pt=new Zr(e._pt,t,n,0,0,DU);return au=i,a.pr=-10,a.tween=r,e._props.push(n),1}}},Rp=[1,0,0,1,0,0],wA={},EA=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},ew=function(e){var t=Go(e,Xn); return EA(t)?Rp:t.substr(7).match(IT).map(ni)},jx=function(e,t){var n=e._gsap||fc(e),i=e.style,r=ew(e),a,u,h,d; return n.svg&&e.getAttribute("transform")?(h=e.transform.baseVal.consolidate().matrix,r=[ha,hb,hc,hd,he,hf],r.join(",")==="1,0,0,1,0,0"?Rp:r):(r===Rp&&!e.offsetParent&&e!==hh&&!n.svg&&(h=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoun dingClientRect().width)&&(d=1,u=e.nextElementSibling,hh.appendChild(e)),r=ew(e),h?i.display=h:Sc(e,"display"),d&&(u?a.insertBefore(e,u):a?a.appendChild(e):hh.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Vy=function(e,t,n,i,r,a){var u=e._gsap,h=r||jx(e,!0),d=u.xOrigin||0,m=u.yOrigin||0,g=u.xOffset||0,_=u.yOffset||0,x=h[0],M=h[1],T=h[2],E=h[3],S=h[4],R=h[5],P=t.split(" "),I=parseFloat(P[0])||0,O=parseFloat(P[1])||0,U,F,z,D;n?h!==Rp&&(F=x*EM*T)&&(z=I*(E/F)+O*(-T/F)+(T*RE*S)/F,D=I*(-M/F)+O*(x/F)-(x*RM*S)/F,I=z,O=D):(U=SA(e),I=U.x+(~P[0].indexOf("%")?I/100*U.width:I),O=U.y+(~(P[1]||P[0]). indexOf("%")?O/100*U.height:O)),i||i!==!1&&u.smooth?(S=Id,R=Om,u.xOffset=g+(S*x+R*T)-S,u.yOffset=_+(S*M+R*E)-R):u.xOffset=u.yOffset=0,u.xOrigin=I,u.yOrigin=O,u.smooth=!!i,u.origin=t,u.originIsAbsolute=!!n,e.style[Jr]="0px 0px",a&&(Fl(a,u,"xOrigin",d,I),Fl(a,u,"yOrigin",m,O),Fl(a,u,"xOffset",g,u.xOffset),Fl(a,u,"yOffset",_,u.yOffset)),e.setAttribute("data-svg-origin",I+" "+O)},bp=function(e,t){var n=e._gsap||new aA(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,r=n.scaleX<0,a="px",u="deg",h=getComputedStyle(e),d=Go(e,Jr)||"0",m,g,_,x,M,T,E,S,R,P,I,O,U,F,z,D,N,G,$,Q,ce,me,ue,de,B,K,J,W,te,Pe,se,xe;return m=g=_=T=E=S=R=P=I=0,x=M=1,n.svg=!!(e.getCTM&&MA(e)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(i[Xn]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[Xn]!=="none"?h[Xn]:"")),i.scale=i.rotate=i.translate="none"),F=jx(e,n.svg),n.svg&&(n.uncache?(B=e.getBBox(),d=n.xOrigin-B.x+"px "+(n.yOrigin-By)+"px",de=""):de=!t&&e.getAttribute("data-svg-origin"),Vy(e,de||d,!!de||n.originIsAbsolute ,n.smooth!==!1,F)),O=n.xOrigin||0,U=n.yOrigin||0,F!==Rp&&(G=F[0],$=F[1],Q=F[2],ce=F[3],m=me=F[4],g=ue=F[5] ,F.length===6?(x=Math.sqrt(G*G+$*$),M=Math.sqrt(ce*ce+Q*Q),T=G||$?Qf($,G)*Qu:0,R=Q||ce?Qf(Q,ce)*Qu+T:0,R&&(M*=Math.abs(Math.cos(R*dh))),n.svg&&(m-=O-(O*G+U*Q),g-=U-(O*$+U*ce))):(xe=F[6],Pe=F[7],J=F[8],W=F[9],te= F[10],se=F[11],m=F[12],g=F[13],_=F[14],z=Qf(xe,te),E=z*Qu,z&&(D=Math.cos(-z),N=Math.sin(-z),de=me*D+J*N,B =ue*D+W*N,K=xe*D+te*N,J=me*-N+J*D,W=ue*-N+W*D,te=xe*-N+te*D,se=Pe*-N+se*D,me=de,ue=B,xe=K),z=Qf(-Q,te),S=z *Qu,z&&(D=Math.cos(-z),N=Math.sin(-z),de=G*DJ*N,B=$*DW*N,K=Q*D-te*N,se=ce*N+se*D,G=de,$=B,Q=K),z=Qf($,G), T=z*Qu,z&&(D=Math.cos(z),N=Math.sin(z),de=G*D+$*N,B=me*D+ue*N,$=$*DG*N,ue=ue*D-me*N,G=de,me=B),E&&Math.abs (E)+Math.abs(T)>359.9&&(E=T=0,S=180-S),x=ni(Math.sqrt(G*G+$*$+Q*Q)),M=ni(Math.sqrt(ue*ue+xe*xe)),z=Qf(me, ue),R=Math.abs(z)>2e-4?z*Qu:0,I=se?1/(se<0?-se:se):0),n.svg&&(de=e.getAttribute("transform"),n.forceCSS=e. setAttribute("transform","")||!EA(Go(e,Xn)),de&&e.setAttribute("transform",de))),Math.abs(R)>90&&Math.abs(R)<270&&(r?(x*=-1,R+=T<=0?180:-180,T+=T<=0?180:-180):(M*=-1,R+=R<=0?180:-180)),t=t||n.uncache,nx=m-((n.xP ercent=m&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-m)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,ny=g-((n.yPercent=g&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e .offsetHeight*n.yPercent/100:0)+a,nz=_+a,n.scaleX=ni(x),n.scaleY=ni(M),n.rotation=ni(T)+u,n.rotationX=ni(E )+u,n.rotationY=ni(S)+u,n.skewX=R+u,n.skewY=P+u,n.transformPerspective=I+a,(n.zOrigin=parseFloat(d.split(" ")[2])||!t&&n.zOrigin||0)&&(i[Jr]=I0(d)),n.xOffset=n.yOffset=0,n.force3D=_s.force3D,n.renderTransform=n.svg?UU:xA?TA:NU,n.uncache=0,n},I0=function(e){return(e=e.split(" "))[0]+" "+e[1]},ay=function(e,t,n){var i=or(t);return ni(parseFloat(t)+parseFloat(Gl(e,"x",n+"px",i)))+i},NU=function(e,t){tz="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,TA(e,t)},qu="0deg",Vd="0px",ju=") ",TA=function(e,t){var n=t||this、i=n.xPercent、r=n.yPercent、a=nx、u=ny、h=nz、d=n.rotation、m=n.rotationY、g=n.rotationX、_=n.skewX、x=n.skewY、M=n.scaleX、T=n.scaleY、E=n.transformPerspective、S=n.force3D、R=n.target、P=n.zOrigin、I="",O=S==="auto"&&e&&e!==1||S===!0;if(P&&(g!==qu||m!==qu)){var U=parseFloat(m)*dh,F=Math.sin(U),z=Math.cos(U),D;U=parseFloat(g)*dh,D=Math.cos(U),a=ay(R,a,F*D*-P),u=ay(R,u,-Math.sin(U)*-P),h=ay(R,h,z*D*-P+P)}E!==Vd&&(I+="perspective("+E+ju),(i||r)&&(I+="translate("+i+"%, "+r+"%) "),(O||a!==Vd||u!==Vd||h!==Vd)&&(I+=h!==Vd||O?"translate3d("+a+", "+u+", "+h+") ":"translate("+a+", "+u+ju),d!==qu&&(I+="rotate("+d+ju),m!==qu&(I+="rotateY("+m+ju),g!==qu&&(I+="rotateX("+g+ju),(_!==qu||x!==qu)&&(I+="skew("+_+", "+x+ju),(M!==1||T!==1)&&(I+="scale("+M+", "+T+ju),R.style[Xn]=I||"translate(0, 0)"},UU=function(e,t){var n=t||this、i=n.xパーセント、r=n.yパーセント、a=nx、u=ny、h=n.回転、d=n.skewX、m=n.skewY、g=n.scaleX、_=n.scaleY、x=n.targe t,M=n.xOrigin,T=n.yOrigin,E=n.xOffset,S=n.yOffset,R=n.forceCSS,P=parseFloat(a),I=parseFloat(u),O,U,F,z,D;h=par seFloat(h),d=parseFloat(d),m=parseFloat(m),m&&(m=parseFloat(m),d+=m,h+=m),h||d?(h*=dh,d*=dh,O=Math.cos(h)*g,U= Math.sin(h)*g,F=Math.sin(hd)*-_,z=Math.cos(hd)*_,d&&(m*=dh,D=Math.tan(dm),D=Math.sqrt(1+D*D),F*=D,z*=D,m&&(D=M) ath.tan(m),D=Math.sqrt(1+D*D),O*=D,U*=D)),O=ni(O),U=ni(U),F=ni(F),z=ni(z)):(O=g,z=_,U=F=0),(P&&!~(a+"").indexOf("px")||I&&!~(u+"").indexOf("px"))&&(P=Gl(x,"x",a,"px"),I=Gl(x,"y",u,"px")),(M||T||E||S)&&(P=ni(P+M-(M*O+T*F) +E),I=ni(I+T-(M*U+T*z)+S)),(i||r)&&(D=x.getBBox(),P=ni(P+i/100*D.width),I=ni(I+r/100*D.height)),D="matrix("+O+","+U+","+F+","+z+","+P+","+I+")",x.setAttribute("transform",D),R&&(x.style[Xn]=D)},OU=function(e,t,n,i,r){var a=360,u=Ui(r),h=parseFloat(r)*(u&&~r.indexOf("rad")?Qu:1),d=hi,m=i+d+"deg",g,_;return u&&(g=r.split("_")[1],g==="short"&&(d%=a,d!==d%(a/2)&&(d+=d<0?a:-360)),g==="cw"&&d<0?d=(d+a*jM)%a-~~(d/a)*a:g==="ccw"&&d>0&&(d=(da*jM)%a-~~(d/a)*a)),e._pt=_=new Zr(e._pt,t,n,i,d,yU),_.e=m,_.u="deg",e._props.push(n),_},tw=function(e,t){for(var n in t)e[n]=t[n];return e},FU=function(e,t,n){var i=tw({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=n.style,u,h,d,m,g,_,x,M;i.svg?(d=n.getAttribute("transform"),n.setAttribute("transform",""),a[Xn]=t,u=bp(n,1),Sc(n,Xn),n.setAttribute("transform",d)):(d=getComputedStyle(n)[Xn],a[Xn]=t,u=bp(n,1),a[Xn]=d);for(h in Ya)d=i[h],m=u[h],d!==m&&r.indexOf(h)<0&&(x=or(d),M=or(m),g=x!==M?Gl(n,h,d,M):parseFloat(d),_=parseFloat(m),e._pt=new Zr(e._pt,u,h,g,_-g,ky),e._pt.u=M||0,e._props.push(h));tw(u,i)};jr("padding,margin,Width,Radius",function(s,e){var t="上",n="右",i="下",r="左",a=(e<3?[t,n,i,r]:[t+r,t+n,i+n,i+r]).map(function(u){return e<2?s+u:"border"+u+s});P0[e>1?"border"+s:s]=function(u,h,d,m,g){var _,x;if(arguments.length<4)return _=a.map(function(M){return Na(u,M,d)}),x=_.join(" "),x.split(_[0]).length===5?_[0]:x;_=(m+"").split(" "),x={},a.forEach(function(M,T){return x[M]=_[T]=_[T]||_[(T-1)/2|0]}),u.init(h,x,g)}});var AA={name:"css",register:By,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var a=this._props,u=e.style,h=n.vars.startAt,d,m,g,_,x,M,T,E,S,R,P,I,O,U,F,z;Xx||By(),this.styles=this.styles||yA(e),z=this.styles.props,this.tween=n;for(T in t)if(T!=="autoRound"&&(m=t[T],!(ds[T]&&lA(T,t,n,i,e,r)))){if(x=typeof m,M=P0[T],x==="関数"&&(m=m.call(n,i,e,r),x=typeof m),x==="文字列"&&~m.indexOf("ランダム(")&&(m=Tp(m)),M)M(this,e,T,m,n)&&(F=1);そうでなければif(T.substr(0,2)==="--")d=(getComputedStyle(e).getPropertyValue(T)+"").trim(),m+="",zl.lastIndex=0,zl.test(d)||(E=or(d),S=or(m)),S?E!==S&&(d=Gl(e,T,d,S)+S):E&&(m+=E),this.add(u,"setProperty",d,m,i,r,0,0,T),a.push(T),z.push(T,0,u[T]);else if(x!=="undefined"){if(h&&T in h?(d=typeof h[T]=="function"?h[T].call(n,i,e,r):h[T],Ui(d)&&~d.indexOf("random(")&&(d=Tp(d)),or(d+"")||d==="auto"||(d+=_s.units[T]||or(Na(e,T))||""),(d+"").charAt(1)==="="&&(d=Na(e,T))):d=Na(e,T),_=parseFloat(d),R=x==="string"&&m.charAt(1)==="="&&m.substr(0,2),R&&(m=m.substr(2)),g=parseFloat(m),T in ko&&(T==="autoAlpha"&&(_===1&&Na(e,"visibility")==="hidden"&&g&&(_=0),z.push("visibility",0,u.visibility),Fl(this,u,"visibility",_?"inherit":"hidden",g?"inherit":"hidden",!g)),T!=="scale"&&T!=="transform"&&(T=ko[T],~T.indexOf(",")&&(T=T.split(",")[0]))),P=T in Ya,P){if(this.styles.save(T),I||(O=e._gsap,O.renderTransform&&!t.parseTransform||bp(e,t.parseTransform),U=t.smoothOrigin!==!1&&O.smooth,I=this._pt=new Zr(this._pt,u,Xn,0,1,O.renderTransform,O,0,-1),I.dep=1),T==="scale")this._pt=new Zr(this._pt,O,"scaleY",O.scaleY,(R?fh(O.scaleY,R+g):g)-O.scaleY||0,ky),this._pt.u=0,a.push("scaleY",T),T+="X";else if(T==="transformOrigin"){z.push(Jr,0,u[Jr]),m=LU(m),O.svg?Vy(e,m,0,U,0,this):(S=parseFloat(m.split(" ")[2])||0,S!==O.zOrigin&&Fl(this,O,"zOrigin",O.zOrigin,S),Fl(this,u,T,I0(d),I0(m)));続く}else if(T==="svgOrigin"){Vy(e,m,1,U,0,this);続く}else if(T in wA){OU(this,O,T,_,R?fh(_,R+m):m);続ける}else if(T==="smoothOrigin"){Fl(this,O,"smooth",O.smooth,m);続ける}else if(T==="force3D"){O[T]=m;続ける}else if(T==="transform"){FU(this,m,e);続ける}}else T in u||(T=Eh(T)||T);if(P||(g||g===0)&&(_||_===0)&&!vU.test(m)&&T in u)E=(d+"").substr((_+"").length),g||(g=0),S=or(m)||(T in _s.units?_s.units[T]:E),E!==S&&(_=Gl(e,T,d,S)),this._pt=new Zr(this._pt,P?O:u,T,_,(R?fh(_,R+g):g)-_,!P&&(S==="px"||T==="zIndex")&&t.autoRound!==!1?SU:ky),this._pt.u=S||0,E!==S&&S!=="%"&&(this._pt.b=d,this._pt.r=xU);else if(T in u)IU.call(this,e,T,d,R?R+m:m);else if(T in e)this.add(e,T,d||e[T],R?R+m:m,i,r);else if(T!=="parseTransform"){Ox(T,m);継続}P||(T in u?z.push(T,0,u[T]):typeof e[T]=="function"?z.push(T,2,e[T]()):z.push(T,1,d||e[T])),a.push(T)}}F&&pA(this)},render:function(e,t){if(t.tween._time||!Yx())for(var n=t._pt;n;)nr(e,nd),n=n._next;else t.styles.revert()},get:Na,aliases:ko,getSetter:function(e,t,n){var i=ko[t];return i&&i.indexOf(",")<0&&(t=i),t in Ya&&t!==Jr&&(e._gsap.x||Na(e,"x"))?n&&qM===n?t==="scale"?TU:EU:(qM=n||{})&&(t==="scale"?AU:CU):e.style&&!Dx(e.style[t])?MU:~t.index Of("-")?wU:Gx(e,t)},core:{_removeProperty:Sc,_getMatrix:jx}};Kr.utils.checkPrefix=Eh;Kr.core.getStyleSaver=yA;(function(s,e,t,n){var i=jr(s+","+e+","+t,function(r){Ya[r]=1});jr(e,function(r){_s.units[r]="deg",wA[r]=1}),ko[i[13]]=s+","+e,jr(n,function(r){var a=r.split(":");ko[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");jr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){_s.units[s]="px"});Kr.registerPlugin(AA);var Th=Kr.registerPlugin(AA)||Kr;Th.core.Tween;const kU=s=>new Promise(e=>{s instanceof約束しますか?s.then(()=>{e(null)}):e(null)}),zU={border:"none",background:"none",maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",padding:"0",pointerEvents:"auto"},nw={close:"spice__modal_close",scrollArea:"js_modal_scroll_area"},iw=()=>parseInt(getComputedStyle(document.documentElement).paddingRight,10)||0,BU=()=>window.innerWidth-document.documentElement.clientWidth,rw=(s,{paddingRight:e,scrollbarWidth:t})=>{const n=document.documentElement.style、i=document.body.style、r=s?e+t:et;n.paddingRight=`${r}px`、n.scrollbarGutter=s?"auto":"",i.オーバーフロー=s?"hidden":""},VU=Be.forwardRef(({dialog:s,onOpen:e,onClose:t,focusTarget:n,scrollLock:i=!0,...r},a)=>{const u=Be.useRef(null),h=Be.useRef({paddingRight:0,scrollbarWidth:0}),d=Be.useCallback(()=>{var g,_,x;i&&(h.current.paddingRight=iw(),h.current.scrollbarWidth=BU(),rw(!0,h.current)),u.current.showModal(),(g=n==null?void 0:n.current)==null||g.focus(),(x=(_=u.current)==null?void 0:_.getElementsByClassName(nw.scrollArea)[0])==null||x.scrollTo(0,0),e==null||e(u.current)},[e,n,i]),m=Be.useCallback(async()=>{t&&await kU(t(u.current)),i&&(h.current.paddingRight=iw(),rw(!1,h.current)),u.current.close()},[t,i]);return Be.useEffect(()=>{const g=u.current.querySelectorAll(`.${nw.close}`);if(g)return g.forEach(_=>_.addEventListener("click",m)),()=>g.forEach(_=>_.removeEventListener("click",m))},[m]),Be.useEffect(()=>{const g=_=>{var x;(x=u.current)!=null&&x.hasAttribute("open")&&_.key==="Escape"&&m()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[m]),zt.jsxs(zt.Fragment,{children:[zt.jsx("button",{ref:a,...r,onClick:g=>{var _;d(),(_=r==null?void 0:r.onClick)==null||_.call(r,g)}}),zt.jsx("dialog",{ref:u,...s,onClick:g=>{var _;g.target===u.current&&m(),(_=s.onClick)==null||_.call(s,g)},style:{...zU,...s.style||{}}})]})});VU.displayName="ModalButton";const HU={isLeaving:!1,isAnimation:!0,prev:"",current:"",next:""};Be.createContext(HU);Be.createContext(()=>{});const GU={target:"",toggle:!1,defaultValue:[]};Be.createContext(GU);Be.createContext(()=>{});const CA=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;function WU(s){const e=Be.useRef(s);return CA(()=>void(e.current=s),[s]),e}const RA=(s,e,t)=>{const n=WU(s);CA(()=>{const i=(...r)=>n.current(...r);return Th.ticker.add(i,e,t),()=>Th.ticker.remove(i)},[e,t])},XU=Be.forwardRef(({active:s=!1,speed:e=1,children:t,...n},i)=>{const r=Be.useRef(null),a=Be.useRef(null),u=Be.useRef(null),h=Be.useRef(0);return RA(()=>{if(!s)return;const d=r.current,m=a.current,g=u.current;if(!(d&&m&&g))return;const _=Th.ticker.deltaRatio()/1e3,x=d.clientWidth/m.clientWidth;if(h.current+=_*Math.abs(e)*x,h.current>=1&&(h.current=0),e<0){const M=h.current*-100;m.style.transform=`translateX(${M}%)`,g.style.transform=`translateX(${M}%)`}else{const M=h.current*100;m.style.transform=`translateX(${M}%)`,g.style.transform=`translateX(${M-200}%)`}}),zt.jsx("div",{ref:i,...n,children:zt.jsx("div",{ref:r,style:{overflow:"hidden",width:"100%"},children:zt.jsxs("div",{style:{whiteSpace:"nowrap",display:"flex"},children:[zt.jsx("div",{ref:a,children:t}),zt.jsx("div",{ref:u,children:t})]})})})});XU.displayName="InfinityLoop";const YU=Be.forwardRef((s,e)=>{const{fill:t,style:n,...i}=s;return zt.jsx("video",{ref:e,style:t?{position:"absolute",width:"100%",height:"100%",inset:0,color:"transparent",...n}:n,...i})});YU.displayName="ビデオ";const qU=Be.forwardRef(({loader:s="skeleton",delay:e=1e3,onView:t,skeleton:n,circular:i,children:r,style:a,...u},h)=>{const[d,m]=Be.useState(e===0),g=!!r;return Be.useEffect(()=>{e!==0&&setTimeout(()=>m(!0),e)},[e]),zt.jsx("div",{ref:h,style:{overflow:"hidden",pointerEvents:"none",...g?{maxWidth:"fit-content",height:"auto"}:{},...a},...u,children:zt.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",opacity:0,...d?{opacity:1,transitionProperty:"opacity",transitionDuration:(t==null?void 0:t.transitionDuration)||"0.3s",transitionTimingFunction:(t==null?void 0:t.transitionTimingFunction)||"イーズインアウト"}:{}},children:[s==="skeleton"?zt.jsx("div",{style:{background:`linear-gradient(90deg,transparent,${(n==null?void 0:n.waveColor)||"rgba(255,255,255,0.64)"},transparent)`,animationDuration:(n==null?void 0:n.animationDuration)||"1.6s",animationTimingFunction:(n==null?void 0:n.animationTimingFunction)||"ease-in-out",position:"absolute",width:"100%",height:"100%",top:0,left:0,animationName:"skeleton",animationIterationCount:"infinite"},children:zt.jsx("style",{children:"@keyframes skeleton {0% {transform: translateX(-100%);}100% {transform: translateX(100%);}}"})}):s==="circular"?zt.jsx("div",{style:{width:i!=null&&i.width?i==null?void 0:i.width:"24px",height:i!=null&&i.height?i==null?void 0:i.height:"24px",border:(i==null?void 0:i.border)||"2px solid #fff",borderBottomColor:"transparent",animationDuration:(n==null?void 0:n.animationDuration)||"1.6s",animationTimingFunction:(n==null?void 0:n.animationTimingFunction)||"linear",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",borderRadius:"50%",animationName:"circular",animationIterationCount:"infinite"},children:zt.jsx("style",{children:"@keyframes circular {0% {transform: rotate(0deg);}100% {transform: rotate(360deg);}}"})}):s,g&&zt.jsx("div",{style:{visibility:"hidden"},children:r})]})})});qU.displayName="Loader";Be.createContext(void 0);const ly=s=>s===Object(s)&&!Array.isArray(s)&&typeof s!="function";function L0(s,e){const t=ST(r=>r.gl),n=Gp(f_,ly(s)?Object.values(s):s);return Be.useLayoutEffect(()=>{e==null||e(n)},[e]),Be.useEffect(()=>{if("initTexture"in t){let r=[];Array.isArray(n)?r=n:n instanceof zn?r=[n]:ly(n)&&(r=Object.values(n)),r.forEach(a=>{a instanceof zn&&t.initTexture(a)})}},[t,n]),Be.useMemo(()=>{if(ly(s)){const r={};let a=0;for(const u in s)r[u]=n[a++];return r}else return n},[s,n])}L0.preload=s=>Gp.preload(f_,s);L0.clear=s=>Gp.clear(f_,s);var jU=Object.defineProperty,ZU=(s,e,t)=>e in s?jU(s,e,{列挙可能:!0,構成可能:!0,書き込み可能:!0,値:t}):s[e]=t,Zu=(s,e,t)=>ZU(s,typeof e!="symbol"?e+"":e,t);const JU=["handshake","handshake-reply","event"];function KU(s,e){if(e==null||s.origin!==e||!s.data||typeof s.data!="object")return!1;const t=s.data;return!(!t.type||!JU.includes(t.type))}クラスQU{コンストラクタ(e={}){Zu(this,"_Promise"),Zu(this,"_PromiseResolver"),Zu(this,"_PromiseRejecter"),Zu(this,"_handlers"),Zu(this,"_targetWindow"),Zu(this,"_targetOrigin"),Zu(this,"_bindedOnMessage"),this._Promise=new Promise((t,n)=>{this._PromiseResolver=t,this._PromiseRejecter=n}),this._handlers={},this._targetWindow=e.targetWindow,this._targetOrigin=e.targetOrigin,this._bindedOnMessage=this._onMessage.bind(this),window.addEventListener("message",this._bindedOnMessage)}_sendMessage(e){var t;this._targetOrigin!=null&&((t=this._targetWindow)==null||t.postMessage(e,this._targetOrigin))}_trigger(e,t){this._handlers[e]&&this._handlers[e].forEach(n=>n(t))}ready(e){this._Promise.then(t=>{e({...t,emit:this.emit.bind(this),on:this.on.bind(this),revert:this.revert.bind(t彼の)})})}emit(e,t){this._sendMessage({type:"event",key:e,value:t})}on(e,t){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)}revert(){window.removeEventListener("message",this._bindedOnMessage)}_handleOnMessage(e,t,n){if(!KU(e,this._targetOrigin))return;const i=e.data;i.type===t?(n(),this._PromiseResolver(this)):i.type==="event"&&i.key!=null&&this._trigger(i.key,i.value)}}クラス$UはQUを拡張します{コンストラクタ(e){super({targetWindow:window.parent,targetOrigin:new URL(e.url).origin})}_onMessage(e){this._handleOnMessage(e,"handshake",()=>{this._targetOrigin=e.origin,this._sendMessage({type:"handshake-reply"})})}}const eO="_wrapper_t4z32_1",tO="_container_t4z32_19",nO="_layer_t4z32_34",iO="_top_t4z32_40",rO="_bottom_t4z32_43",sO="_webgl_t4z32_47",oO="_canvas_t4z32_57",aO="_title_t4z32_64",Ua={wrapper:eO,container:tO,layer:nO,top:iO,bottom:rO,webgl:sO,canvas:oO,title:aO},lO=4,uO=2,cO=.2,fO=1.5,sw=[0,2,2,1,1,0],ow=[1,1,0,0,2,2],hO=()=>{const s=Be.useRef(null),e=L0(["https://storage.googleapis.com/studio-design-asset-files/projects/G3qbMopvOJ/s-1024x1024_3995933e-ce01-4889-90bf-d4fabd1bd96f.webp","/https://storage.googleapis.com/studio-design-asset-files/projects/G3qbMopvOJ/s-1024x1024_206ba3af-e38d-4c6a-b853-17eaec7f0b88.webp","/https://storage.googleapis.com/studio-design-asset-files/projects/G3qbMopvOJ/s-1024x1024_757d499 5-776b-4d5b-9228-9ca5124319dc.webp"]),t=L0("https://storage.googleapis.com/studio-design-asset-files/projects/G3qbMopvOJ/s-256x256_ee3c8edd-d823-42d3-ac82-78cd0c7b7e2d.webp"),{size:n}=ST(),i=Be.useRef(newすなわち(1)),r=n.width/n.height;i.current.set(Math.min(r/1,1),Math.min(1/r,1));const a=Be.useRef(0),u=Be.useRef(0),h=Be.useRef(0);return nN((d,m)=>{h.current+=m,h.current>lO&&(Th.to(u,{current:u.current===0?1:0,duration:uO,ease:"power4.inOut",onComplete:()=>{a.current++;const g=s.current;g&&(g.uniforms.bg1.value=e[sw[a.current%sw.length]],g.uniforms.bg2.value=e[ow[a.current%ow.length]])}}),h.current=0),s.current&&(s.current.uniforms.wave.value=u.current)}),zt.jsxs("mesh",{children:[zt.jsx("planeGeometry",{args:[2,2]}),zt.jsx("shaderMaterial",{ref:s,uniforms:Be.useMemo(()=>({fitscale:{value:i.current},wave:{value:0},bg1:{value:e[0]},bg2:{value:e[1]},noise:{value:t}}),[e,t]),vertexShader:`
					変化する vec2 vUv;
					void main() {
						vUv = uv;
						gl_Position = vec4(位置、1.0);
					}
				`,フラグメントシェーダー:`
					均一な浮遊波;
					均一な vec2 フィットスケール;
					均一サンプラー2D bg1;
					均一サンプラー2D bg2;
					均一サンプラー2Dノイズ;

					変化する vec2 vUv;

					フロートスライド強度 = 0.2;

					void main() {
						vec2 uv = vUv * フィットスケール + (1. - フィットスケール) / 2.;
						float noiseWave = 1.0 - abs(wave * 2. - 1.);// 0~1~0
						vec2 ノイズRG = texture2D(ノイズ, vUv).rg * ${fO};
						vec2 ノイズUV = uv + ノイズRG * ノイズWave;
						vec3 bg1 = texture2D(bg1, noiseUV).rgb;
						vec3 bg2 = texture2D(bg2, noiseUV).rgb;
						vec3 color = mix(bg1, bg2, wave);
						gl_FragColor = vec4(色、1.0);
					}
				`})]})},dO=()=>zt.jsx("div",{className:Ua.webgl,children:zt.jsx(Be.Suspense,{fallback:null,children:zt.jsx(wN,{className:Ua.canvas,children:zt.jsx(hO,{})})})}),pO=({children:s})=>{const[e,t]=Be.useState(void 0);return Be.useEffect(()=>{const n=()=>{t(window.innerWidth/window.innerHeight>1?{width:window.innerHeight*.88,height:window.innerHeight*.88}:{width:window.innerWidth,height:window.innerWidth})};if(n(),!navigator.userAgent.includes("Mobi"))return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),zt.jsx("div",{className:Ua.container,style:{width:e==null?void 0:e.width,height:e==null?void 0:e.height},children:s})};function mO(){const s=Be.useRef(null),e=Be.useRef(0),t=Be.useRef(0);return RA(()=>{t.current=Th.utils.interpolate(t.current,e.current,cO),s.current&&s.current.style.setProperty("--progress",t.current.toString())}),Be.useEffect(()=>{const n=new $U({url:"https://ldhrecruit.com/"});return n.ready(({on:i})=>i("scroll",r=>{e.current=r})),()=>n.revert()},[]),zt.jsxs("div",{className:Ua.wrapper,ref:s,children:[zt.jsxs(pO,{children:[zt.jsx("img",{className:dM(Ua.layer,Ua.bottom),src:"https://sto rage.googleapis.com/studio-design-asset-files/projects/G3qbMopvOJ/s-840x840_08fa1269-a83f-4559-83c7-f4a7df7b7460.svg"}),zt.jsx("img",{className:dM(Ua.layer,Ua.top),src:"https://storage.googleapis.com/studi o-design-asset-files/projects/G3qbMopvOJ/s-840x840_8f960113-2826-4a1a-ae1c-0ebf3f6f4710.svg"}),zt.jsx(dO,{})]}),zt.jsx("div",{className:Ua.title,children:zt.jsx("img",{src:"https://storage.googleapis.com/s tudio-design-asset-files/projects/G3qbMopvOJ/s-706x209_75346bc0-6cb7-454e-ab2d-7f4a3564bfdd.svg"})})]})}aC.createRoot(document.getElementById("root")).render(zt.jsx(Be.StrictMode,{children:zt.jsx(mO,{})}));
